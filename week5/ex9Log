Script started on 2023-07-04 20:35:17-04:00 [TERM="xterm" TTY="/dev/pts/1" COLUMNS="104" LINES="52"]
]0;s23-cs648-s02@vulcan: ~/public_html/week5s23-cs648-s02@vulcan:~/public_html/week5$ mdkri [K[K[Kir chap9
bash: mdkir: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5s23-cs648-s02@vulcan:~/public_html/week5$ ls
[0m[01;34mchap7[0m  [01;34mchap8[0m  ex7-16Log  ex8Log  ex9Log
]0;s23-cs648-s02@vulcan: ~/public_html/week5s23-cs648-s02@vulcan:~/public_html/week5$ mkdir chap9
]0;s23-cs648-s02@vulcan: ~/public_html/week5s23-cs648-s02@vulcan:~/public_html/week5$ ls
[0m[01;34mchap7[0m  [01;34mchap8[0m  [01;34mchap9[0m  ex7-16Log  ex8Log  ex9Log
]0;s23-cs648-s02@vulcan: ~/public_html/week5s23-cs648-s02@vulcan:~/public_html/week5$ cd chap9
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.1[K[K1a.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"smsh1a.c" [New File][2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[2;1H[34m~                                                                                                       [3;1H~                                                                                                       [4;1H~                                                                                                       [5;1H~                                                                                                       [6;1H~                                                                                                       [7;1H~                                                                                                       [8;1H~                                                                                                       [9;1H~                                                                                                       [10;1H~                                                                                                       [11;1H~                                                                                                       [12;1H~                                                                                                       [13;1H~                                                                                                       [14;1H~                                                                                                       [15;1H~                                                                                                       [16;1H~                                                                                                       [17;1H~                                                                                                       [18;1H~                                                                                                       [19;1H~                                                                                                       [20;1H~                                                                                                       [21;1H~                                                                                                       [22;1H~                                                                                                       [23;1H~                                                                                                       [24;1H~                                                                                                       [25;1H~                                                                                                       [26;1H~                                                                                                       [27;1H~                                                                                                       [28;1H~                                                                                                       [29;1H~                                                                                                       [30;1H~                                                                                                       [31;1H~                                                                                                       [32;1H~                                                                                                       [33;1H~                                                                                                       [34;1H~                                                                                                       [35;1H~                                                                                                       [36;1H~                                                                                                       [37;1H~                                                                                                       [38;1H~                                                                                                       [39;1H~                                                                                                       [40;1H~                                                                                                       [41;1H~                                                                                                       [42;1H~                                                                                                       [43;1H~                                                                                                       [44;1H~                                                                                                       [45;1H~                                                                                                       [46;1H~                                                                                                       [47;1H~                                                                                                       [48;1H~                                                                                                       [49;1H~                                                                                                       [50;1H~                                                                                                       [51;1H~                                                                                                       [m[52;87H0,0-1[9CAll[1;1H[?25h[?25l[52;1H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[52;3H[K[52;3H[?25h[?25l[52;2H[K[52;2H[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[52;1H[K[52;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.h
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"smsh.h" [New File][2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[2;1H[34m~                                                                                                       [3;1H~                                                                                                       [4;1H~                                                                                                       [5;1H~                                                                                                       [6;1H~                                                                                                       [7;1H~                                                                                                       [8;1H~                                                                                                       [9;1H~                                                                                                       [10;1H~                                                                                                       [11;1H~                                                                                                       [12;1H~                                                                                                       [13;1H~                                                                                                       [14;1H~                                                                                                       [15;1H~                                                                                                       [16;1H~                                                                                                       [17;1H~                                                                                                       [18;1H~                                                                                                       [19;1H~                                                                                                       [20;1H~                                                                                                       [21;1H~                                                                                                       [22;1H~                                                                                                       [23;1H~                                                                                                       [24;1H~                                                                                                       [25;1H~                                                                                                       [26;1H~                                                                                                       [27;1H~                                                                                                       [28;1H~                                                                                                       [29;1H~                                                                                                       [30;1H~                                                                                                       [31;1H~                                                                                                       [32;1H~                                                                                                       [33;1H~                                                                                                       [34;1H~                                                                                                       [35;1H~                                                                                                       [36;1H~                                                                                                       [37;1H~                                                                                                       [38;1H~                                                                                                       [39;1H~                                                                                                       [40;1H~                                                                                                       [41;1H~                                                                                                       [42;1H~                                                                                                       [43;1H~                                                                                                       [44;1H~                                                                                                       [45;1H~                                                                                                       [46;1H~                                                                                                       [47;1H~                                                                                                       [48;1H~                                                                                                       [49;1H~                                                                                                       [50;1H~                                                                                                       [51;1H~                                                                                                       [m[52;87H0,0-1[9CAll[1;1H[?25h[?25l[52;1H[33m-- INSERT --[m[52;13H[K[52;87H0,1[11CAll[1;1H[35m#define YES     [m[33m1[m
[35m#define NO      [m[33m0[m[2;18H[K[3;1H[K[4;1H[32mchar[m    *next_cmd();[4;21H[K[5;1H[32mchar[m    **split[5;16H[K[5;16H[?25h[?25lline([32mchar[m *);
[32mvoid[m    freelist([32mchar[m **);[6;27H[K[7;1H[32mvoid[m    *emalloc([32msize_t[m);[7;26H[K[8;1Hvoi[8;4H[K[8;4H[?25h[?25l[32mvoid[m    *erealloc([32mvoid[m *, [32msize_t[m);
[32mint[m     execute([32mchar[m **);[9;26H[K[10;1H[32mvoid[m    fatal(c[10;16H[K[10;16H[?25h[?25l[52;1H[K[10;15H[32mchar[m *, [32mchar[m *, [32mint[m );[11;1H[K[12;1H[32mint[m     process();[12;19H[K[52;87H12,14-18      All[12;18H[?25h[?25l[52;87H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.h" [New] 12L, 223C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
smsh.h
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi splitline.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"splitline.c" [New File][2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[2;1H[34m~                                                                                                       [3;1H~                                                                                                       [4;1H~                                                                                                       [5;1H~                                                                                                       [6;1H~                                                                                                       [7;1H~                                                                                                       [8;1H~                                                                                                       [9;1H~                                                                                                       [10;1H~                                                                                                       [11;1H~                                                                                                       [12;1H~                                                                                                       [13;1H~                                                                                                       [14;1H~                                                                                                       [15;1H~                                                                                                       [16;1H~                                                                                                       [17;1H~                                                                                                       [18;1H~                                                                                                       [19;1H~                                                                                                       [20;1H~                                                                                                       [21;1H~                                                                                                       [22;1H~                                                                                                       [23;1H~                                                                                                       [24;1H~                                                                                                       [25;1H~                                                                                                       [26;1H~                                                                                                       [27;1H~                                                                                                       [28;1H~                                                                                                       [29;1H~                                                                                                       [30;1H~                                                                                                       [31;1H~                                                                                                       [32;1H~                                                                                                       [33;1H~                                                                                                       [34;1H~                                                                                                       [35;1H~                                                                                                       [36;1H~                                                                                                       [37;1H~                                                                                                       [38;1H~                                                                                                       [39;1H~                                                                                                       [40;1H~                                                                                                       [41;1H~                                                                                                       [42;1H~                                                                                                       [43;1H~                                                                                                       [44;1H~                                                                                                       [45;1H~                                                                                                       [46;1H~                                                                                                       [47;1H~                                                                                                       [48;1H~                                                                                                       [49;1H~                                                                                                       [50;1H~                                                                                                       [51;1H~                                                                                                       [m[52;87H0,0-1[9CAll[1;1H[?25h[?25l[52;1H[33m-- INSERT --[m[52;13H[K[52;87H0,1[11CAll[1;1H[36m/* splitline.c - commmand reading and parsing functions fo[?25h[?25lr smsh
 *    [m[2;7H[K[3;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get[m[3;51H[K[3;51H[?25h[?25l[36m next command
 *    char **splitline(char *str);           - pa[m[4;50H[K[4;50H[?25h[?25l[36mrse a string
 */[m[5;4H[K[6;1H[K[7;1H[35m#include [m[33m<stdio.h>[m[7;19H[K[8;1H[K[8;1H[?25h[?25l[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<string.h>[m[9;20H[K[10;1H[35m#include [m[33m"s[m[10;12H[K[10;12H[?25h[?25l[33mmsh.h"[m[11;1H[K[12;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[12;40H[K[13;1H[36m/*[m[13;3H[K[14;1H[36m * p[m[14;5H[K[14;5H[?25h[?25l[36murpose: read next command line from fp
 * returns: dynamic[m[15;20H[K[15;20H[?25h[?25l[36mally allocated string holding command line
 *  errors: NULL[m[16;17H[K[16;17H[?25h[?25l[36m at EOF (not really an error)
 *          calls fatal from em[m[17;32H[K[17;32H[?25h[?25l[36malloc()
 *   notes: allocates space in BUFSIZ chunks.  [m[18;48H[K[19;1H[36m */[m[19;4H[K[20;1H{[20;2H[K[20;2H[?25h[?25l
  [32mchar[m  *buf ;                          [36m/* the buffer           */[m[21;67H[K[22;1H  [32mint[m   bufspace = [33m0[m;                   [36m/* [m[22;44H[K[22;44H[?25h[?25l[36mtotal size           */[m
  [32mint[m   pos = [33m0[m;                        [36m/* current position     */[m[23;67H[K[24;1H  [32mint[m   c[24;10H[K[24;10H[?25h[?25l;[30C[36m/* input char           */[m[25;1H[K[26;1H  printf([33m"[m[35m%s[m[33m"[m, prompt);                         [36m/* prompt us[m[26;61H[K[26;61H[?25h[?25l[36mer  */[m
  [33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[27;36H[K[28;1H[K[29;1H    [36m/* need space? *[m[29;21H[K[29;21H[?25h[?25l[36m/[m
    [33mif[m( pos+[33m1[m >= bufspace ){            [36m/* 1 for \0     */[m[30;59H[K[31;1H      [33mif[m ( bufsp[31;17H[K[31;17H[?25h[?25lace == [33m0[m )[14C[36m/* y: 1st time  */[m
        buf = emalloc([33mBUFSIZ[m);[32;31H[K[33;1H      els[33;10H[K[33;10H[?25h[?25l[33melse[m[30C[36m/* or expand    */[m
        buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[34;45H[K[35;1H    [35;5H[K[35;5H[?25h[?25l  bufspace += [33mBUFSIZ[m;[15C[36m/* update size  */[m
    }[36;6H[K[37;1H[K[38;1H    [36m/* end of c[m[38;16H[K[38;16H[?25h[?25l[36mommand? */[m
    [33mif[m ( c == [35m'\n'[m )[39;21H[K[40;1H      [33mbreak[m;[40;13H[K[41;1H[K[42;1H    [36m/* no, add to[m[42;18H[K[42;18H[?25h[?25l[36m buffer */[m
    buf[pos++] = c;[43;20H[K[44;1H  }[44;4H[K[45;1H  [33mif[m ( c == [33mEOF[m && pos == [33m0[m [45;29H[K[45;29H[?25h[?25l)[11C[36m/* EOF and no input     */[m
    [33mreturn[m [33mNULL[m;                        [36m/* say so               */[m[46;67H[K[47;1H  bu[47;5H[K[47;5H[?25h[?25lf[pos] = [35m'\0'[m;
  [33mreturn[m buf;[48;14H[K[49;1H}[49;2H[K[50;1H[K[51;1H[36m/**[m[51;4H[K[1;51r[51;1H
[1;52r[51;1H[36m **     splitline ( parse a lin[m[52;11H[33m(paste) --[m[52;87H[K[51;32H[?25h[?25l[36me into an array of strings )[51;30H[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;1H[36m **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[51;17H[?25h[?25l[1;51r[m[1;1H[4M[1;52r[49;1H[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens[51;12H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens *[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[36m *          or NULL if line if no tokens on the line[51;13H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[36m *  action: traverse the array, locate strings, make copies[51;16H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[36m *    note: strtok() could work, but we may want to add quotes later * [?25h[?25l[1;51r[m[1;1H[3M[1;52r[49;1H[36m */[m
{
  [32mchar[m  *newstr();[35C[?25h[?25l[1;51r[1;1H[2M[1;52r[50;3H[32mchar[m  **args ;
  [32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[51;15H[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m
  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[51;57H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[51;49H[?25h[?25l[1;51r[m[1;1H[4M[1;52r[48;3H[32mchar[m  *start;
  [32mint[m   len;

  [33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[51;28H[?25h[?25l[1;51r[m[1;1H[3M[1;52r[49;5H[33mreturn[m [33mNULL[m;

  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[51;16H[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;3Hbufspace = [33mBUFSIZ[m;
  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[51;13H[?25h[?25l[1;51r[1;1H[4M[1;52r[49;3H[33mwhile[m( *cp != [35m'\0'[m )
    {[51;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[51;12H[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;9Hcp++;[51;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[51;13H[?25h[?25l[1;51r[m[1;1H[3M[1;52r[49;9H[33mbreak[m;[51;7H[36m/* make sure the array has room (+1 for NULL) */[51;21H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;7H[33mif[m ( argnum+[33m1[m >= spots ){[51;19H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[51;9Hbufspace += [33mBUFSIZ[m;[51;10H[?25h[?25l[1;51r[1;1H[4M[1;52r[48;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[49;7H}[51;7H[36m/* mark start, then find end of word */[51;9H[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;7Hstart = cp;[51;7Hlen   = [33m1[m;[?25h[?25l[1;51r[1;1H[2M[1;52r[50;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[51;9Hlen++;[?25h[?25l[1;51r[1;1H[3M[1;52r[49;7Hargs[argnum++] = newstr(start, len);
    }
  args[argnum] = [33mNULL[m;[8C[?25h[?25l[1;51r[1;1H[5M[1;52r[47;3H[33mreturn[m args;
}

[36m/*
 * purpose: constructor for strings[51;21H[?25h[?25l[1;51r[m[1;1H[3M[1;52r[49;1H[36m * returns: a string, never NULL
 */[m
[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[51;9H[?25h[?25l[1;51r[1;1H[5M[1;52r[47;1H{
  [32mchar[m *rv = emalloc(l+[33m1[m);

  rv[l] = [35m'\0'[m;
  strncpy(rv, s, l);  s[?25h[?25l[1;51r[1;1H[7M[1;52r[45;3H[33mreturn[m rv;
}

[32mvoid[m
freelist([32mchar[m **list)
[36m/*
 * purpose: free the list returned by splitline[51;19H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[36m * returns: nothing [?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;1H[36m *  action: free all strings in list and then free the list
 */[m   [?25h[?25l[1;51r[1;1H[5M[1;52r[47;1H{
  [32mchar[m  **cp = list;
  [33mwhile[m( *cp )
    free(*cp++);
  free(list);[?25h[?25l[1;51r[1;1H[6M[1;52r[46;1H}

[32mvoid[m * emalloc([32msize_t[m n)
{
  [32mvoid[m *rv ;
  [33mif[m ( (rv = malloc(n)) == [33mNULL[m )[51;9H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;5Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);
  [33mreturn[m rv;[?25h[?25l[1;51r[1;1H[6M[1;52r[46;1H}

[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)
{
  [32mvoid[m *rv;
  [33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[?25h[?25l[52;1H[K[1;51r[1;1H[3M[1;52r[46;1H[46m{[m[49;5Hfatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);
  [33mreturn[m rv;
[46m}[m[52;87H147,1[9CBot[51;1H[?25h[?25l[46;1H{[51;1H}[52;89H6[50;1H[?25h[?25l[52;89H5[49;1H[?25h[?25l[52;89H4[48;1H[?25h[?25l[52;89H3[47;1H[?25h[?25l[46;1H[46m{[51;1H}[m[52;89H2[46;1H[?25h[?25l{[51;1H}[52;89H1[45;1H[?25h[?25l[52;89H0,0-1[44;1H[?25h[?25l[38;1H[46m{[43;1H}[m[52;88H39,1  [43;1H[?25h[?25l[38;1H{[43;1H}[52;89H8[42;1H[?25h[?25l[52;89H7[41;1H[?25h[?25l[52;89H6[40;1H[?25h[?25l[52;89H5[39;1H[?25h[?25l[38;1H[46m{[43;1H}[m[52;89H4[38;1H[?25h[?25l{[43;1H}[52;89H3[37;1H[?25h[?25l[52;89H2,0-1[36;1H[?25h[?25l[30;1H[46m{[35;1H}[m[52;89H1,1  [35;1H[?25h[?25l[30;1H{[35;1H}[52;89H0[34;1H[?25h[?25l[52;88H29[33;1H[?25h[?25l[52;89H8[32;1H[?25h[?25l[52;89H7[31;1H[?25h[?25l[30;1H[46m{[35;1H}[m[52;89H6[30;1H[?25h[?25l{[35;1H}[52;89H5[29;1H[?25h[?25l[52;89H4[28;1H[?25h[?25l[52;89H3[27;1H[?25h[?25l[52;89H2[26;1H[?25h[?25l[52;89H1[25;1H[?25h[?25l[52;89H0[24;1H[?25h[?25l[52;88H19[23;1H[?25h[?25l[52;89H8,0-1[22;1H[?25h[?25l[15;1H[46m{[21;1H}[m[52;89H7,1  [21;1H[?25h[?25l[15;1H{[21;1H}[52;89H6[20;1H[?25h[?25l[52;89H5[19;1H[?25h[?25l[52;89H4[18;1H[?25h[?25l[52;89H3,0-1[17;1H[?25h[?25l[52;89H2,1  [16;1H[?25h[?25l[15;1H[46m{[21;1H}[m[52;89H1[15;1H[?25h[?25l{[21;1H}[52;89H0[14;1H[?25h[?25l[52;88H09[13;1H[?25h[?25l[52;89H8[12;1H[?25h[?25l[52;89H7[11;1H[?25h[?25l[52;89H6[10;1H[?25h[?25l[52;89H5,0-1[9;1H[?25h[?25l[52;89H4,1  [8;1H[?25h[?25l[52;89H3[7;1H[?25h[?25l[52;89H2[6;1H[?25h[?25l[52;89H1[5;1H[?25h[?25l[52;89H0[4;1H[?25h[?25l[52;87H99,1-8[3;8H[?25h[?25l[52;88H8,1  [2;1H[?25h[?25l[52;88H7[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7Hstart = cp;[52;87H[K[52;87H96,1[10C98%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[36m/* mark start, then find end of word */[m[52;87H[K[52;87H95,1[10C97%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H94,0-1[8C96%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H}[52;87H[K[52;87H93,1[10C95%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[52;87H[K[52;87H92,1-8[8C94%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hbufspace += [33mBUFSIZ[m;[52;87H[K[52;87H91,1-8[8C93%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H90,1-8[8C92%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mif[m ( argnum+[33m1[m >= spots ){[52;87H[K[52;87H89,1[10C91%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[36m/* make sure the array has room (+1 for NULL) */[m[52;87H[K[52;87H88,1[10C90%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H87,0-1[8C89%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mbreak[m;[52;87H[K[52;87H86,1-8[8C88%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[52;87H[K[52;87H85,1[10C87%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hcp++;[52;87H[K[52;87H84,1-8[8C86%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[52;87H[K[52;87H83,1[10C85%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H{[52;87H[K[52;87H82,1[10C84%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mwhile[m( *cp != [35m'\0'[m )[52;87H[K[52;87H81,1[10C83%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H80,0-1[8C82%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[52;87H[K[52;87H79,1[10C81%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hbufspace = [33mBUFSIZ[m;[52;87H[K[52;87H78,1[10C80%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[52;87H[K[52;87H77,1[10C79%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H76,0-1[8C78%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H75,1[10C77%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[52;87H[K[52;87H74,1[10C76%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H73,0-1[8C75%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   len;[52;87H[K[52;87H72,1[10C73%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *start;[52;87H[K[52;87H71,1[10C72%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H70,1[10C71%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H69,1[10C70%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H68,1[10C69%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H67,1[10C68%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  **args ;[52;87H[K[52;87H66,1[10C67%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *newstr();[52;87H[K[52;87H65,1[10C66%[1;1H[?25h[?25l[41;51r[41;1H[L[1;52r[1;1H[46m{[m[1;3H[K[2;10Hnewstr();
  [32mchar[m  **args ;[3;17H[K[4;9Hspots = [33m0[m;   [22C[36mspot[m[5;9Hbufspace = [33m0[m;[22C[36mbytes in table[m
  [32mint[m   argnum = [33m0[m[25C[36mslots used   [m[7;10Hcp = line;[21C[36m/* pos in string        */[m
  [32mchar[m  *start;
  [32mint[m   len;[10;3H[K[11;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
    [33mreturn[m [33mNULL[m;[13;3H[K[14;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
  bufspace[9C;[15;21H[K[16;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;3H[K[18;3H[33mwhile[m( *cp != [35m'\0'[m )
    {[19;7H[K[20;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[21;7H  cp++;[21;14H[K[22;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[23;9H[33mbreak[m;[24;7H[K[25;7H[36m/* make sure the array has room (+1 for NULL) */[m[26;7H[33mif[m ( argnum+[33m1[m >= spots ){[26;32H[K[27;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;9Hbufspace += [33mBUFSIZ[m;[28;28H[K[29;7H  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;7H}[31;7H[K[32;7H[36m/* mark start, then find end of word */[m[33;7Hstart = cp;[34;7Hlen   = [33m1[m;[34;17H[K[35;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;7H  len++;[36;15H[K[37;5H  args[argnum++] = newstr(start, len);
    }[38;6H[K[39;3Hargs[argnum] = [33mNULL[m;
  [33mreturn[m args;
[46m}[m[52;87H[K[52;87H64,1[10C65%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m
{[42;1H}[52;87H[K[52;87H63,1[10C64%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H62,1[10C63%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H61,1[10C62%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H60,1[10C61%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H59,1[10C60%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H58,1[10C59%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H57,1[10C58%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H56,1[10C57%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H55,0-1[8C56%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H54,1[10C55%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **/[m[52;87H[K[52;87H53,1[10C54%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H52,1[10C53%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/**[m[52;87H[K[52;87H51,1[10C52%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H50,0-1[8C51%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H49,1[10C50%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mreturn[m buf;[52;87H[K[52;87H48,1[10C48%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H47,1[10C47%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H[33mreturn[m [33mNULL[m;[24C[36m/* say so               */[m[52;87H[K[52;87H46,1[10C46%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[11C[36m/* EOF and no input     */[m[52;87H[K[52;87H45,1[10C45%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H}[52;87H[K[52;87H44,1[10C44%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5Hbuf[pos++] = c;[52;87H[K[52;87H43,1[10C43%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H[36m/* no, add to buffer */[m[52;87H[K[52;87H42,1[10C42%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H41,0-1[8C41%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mbreak[m;[52;87H[K[52;87H40,1[10C40%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H39,1[10C39%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H[36m/* end of command? */[m[52;87H[K[52;87H38,1[10C38%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H37,0-1[8C37%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H}[52;87H[K[52;87H36,1[10C36%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7Hbufspace += [33mBUFSIZ[m;[15C[36m/* update size  */[m[52;87H[K[52;87H35,1[10C35%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H34,1-8[8C34%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33melse[m[30C[36m/* or expand    */[m[52;87H[K[52;87H33,1[10C33%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H32,1-8[8C32%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mif[m ( bufspace == [33m0[m )[14C[36m/* y: 1st time  */[m[52;87H[K[52;87H31,1[10C31%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H[33mif[m( pos+[33m1[m >= bufspace ){[12C[36m/* 1 for \0     */[m[52;87H[K[52;87H30,1[10C30%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H[36m/* need space? */[m[52;87H[K[52;87H29,1[10C29%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H28,0-1[8C28%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[52;87H[K[52;87H27,1[10C27%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[25C[36m/* prompt user  */[m[52;87H[K[52;87H26,1[10C26%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H25,0-1[8C25%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   c;[30C[36m/* input char           */[m[52;87H[K[52;87H24,1[10C23%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   pos = [33m0[m;[24C[36m/* current position     */[m[52;87H[K[52;87H23,1[10C22%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* total size           */[m[52;87H[K[52;87H22,1[10C21%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *buf ;[26C[36m/* the buffer           */[m[52;87H[K[52;87H21,1[10C20%[1;1H[?25h[?25l[30;51r[30;1H[L[1;52r[1;1H[46m{[m[1;3H[K[2;3H[32mchar[m  *buf ;       [23C[36mhe buffer[m[3;9Hbufspace = [33m0[m;[22C[36mtotal size      [m[4;9Hpos = [33m0[m;[27C[36mcurrent position[m
  [32mint[m   c;[30C[36m/* input char           */[m[6;3H[K[7;3Hprintf([33m"[m[35m%s[m[33m"[m, prompt);            [13C[36m/* prompt user  */[m
  [33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[9;5H[K[10;5H[36m/* need space? */[m[10;22H[K[11;5H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m1 for \0   [m[12;7H[33mif[m ( bufspace == [33m0[m )    [10C[36m/* y: 1st time  */[m[13;7H  buf = emalloc([33mBUFSIZ[m);[13;41H[K[14;7H[33melse[m                              [36m/* or expand    */[m[15;7H  buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[15;45H[K[16;5H  bufspace += [33mBUFSIZ[m;[15C[36m/* update size  */[m
    }[18;5H[K[19;5H[36m/* end of command? */[m
    [33mif[m ( c == [35m'\n'[m )[21;7H[33mbreak[m;[22;5H[K[23;5H[36m/* no, add to buffer */[m
    buf[pos++] = c;
  }[25;4H[K[26;3H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[14C[36mEOF and no input[m
    [33mreturn[m [33mNULL[m;  [22C[36m/* say so               */[m
  buf[pos] = [35m'\0'[m;
  [33mreturn[m buf;
[46m}[m[52;87H[K[52;87H20,1[10C19%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m
{[31;1H}[52;87H[K[52;87H19,1[10C18%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[52;87H[K[52;87H18,1[10C17%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          calls fatal from emalloc()[m[52;87H[K[52;87H17,1[10C16%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[52;87H[K[52;87H16,1[10C15%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: dynamically allocated string holding command line[m[52;87H[K[52;87H15,1[10C14%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: read next command line from fp[m[52;87H[K[52;87H14,1[10C13%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H13,1[10C12%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[52;87H[K[52;87H12,1[10C11%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H11,0-1[8C10%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m"smsh.h"[m[52;87H[K[52;87H10,1[11C9%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<string.h>[m[52;87H[K[52;87H9,1[12C8%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdlib.h>[m[52;87H[K[52;87H8,1[12C7%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdio.h>[m[52;87H[K[52;87H7,1[12C6%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H6,0-1[10C5%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H5,1[12C4%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[52;87H[K[52;87H4,1[12C3%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[52;87H[K[52;87H3,1[12C2%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    [m[52;87H[K[52;87H2,1[12C1%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[52;87H[K[52;87H1,1[11CTop[1;1H[?25h[?25l[52;87H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"splitline.c" [New] 147L, 3419C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
smsh.h  splitline.c
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi execute.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"execute.c" [New File][2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[2;1H[34m~                                                                                                       [3;1H~                                                                                                       [4;1H~                                                                                                       [5;1H~                                                                                                       [6;1H~                                                                                                       [7;1H~                                                                                                       [8;1H~                                                                                                       [9;1H~                                                                                                       [10;1H~                                                                                                       [11;1H~                                                                                                       [12;1H~                                                                                                       [13;1H~                                                                                                       [14;1H~                                                                                                       [15;1H~                                                                                                       [16;1H~                                                                                                       [17;1H~                                                                                                       [18;1H~                                                                                                       [19;1H~                                                                                                       [20;1H~                                                                                                       [21;1H~                                                                                                       [22;1H~                                                                                                       [23;1H~                                                                                                       [24;1H~                                                                                                       [25;1H~                                                                                                       [26;1H~                                                                                                       [27;1H~                                                                                                       [28;1H~                                                                                                       [29;1H~                                                                                                       [30;1H~                                                                                                       [31;1H~                                                                                                       [32;1H~                                                                                                       [33;1H~                                                                                                       [34;1H~                                                                                                       [35;1H~                                                                                                       [36;1H~                                                                                                       [37;1H~                                                                                                       [38;1H~                                                                                                       [39;1H~                                                                                                       [40;1H~                                                                                                       [41;1H~                                                                                                       [42;1H~                                                                                                       [43;1H~                                                                                                       [44;1H~                                                                                                       [45;1H~                                                                                                       [46;1H~                                                                                                       [47;1H~                                                                                                       [48;1H~                                                                                                       [49;1H~                                                                                                       [50;1H~                                                                                                       [51;1H~                                                                                                       [m[52;87H0,0-1[9CAll[1;1H[?25h[?25l[52;1H[33m-- INSERT --[m[52;13H[K[52;87H0,1[11CAll[1;1H[36m/* execute.c - code used by small shell to execute command[?25h[?25ls */[m[2;1H[K[3;1H[35m#include [m[33m<stdio.h>[m[3;19H[K[4;1H[K[4;1H[?25h[?25l[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m[5;20H[K[6;1H[35m#include <[msigna[6;16H[K[6;16H[?25h[?25l[33m<signal.h>[m
[35m#include [m[33m<sys/wait.h>[m[7;22H[K[8;1H[K[9;1H[K[10;1H[32mint[m execute([32mchar[m *argv[])[10;26H[K[11;1H[36m/*[m[11;3H[K[12;1H[K[12;1H[?25h[?25l[36m * purpose: run a program passing it arguments
 * returns: s[m[13;14H[K[13;14H[?25h[?25l[36mtatus returned via wait, or -1 on error
 *  errors: -1 on for[m[14;22H[K[14;22H[?25h[?25l[36mk() or wait() errors
 */[m[15;4H[K[16;1H{[16;2H[K[17;1H    [32mint[m pid ;[17;14H[K[18;1H    [32mint[m child_info =[18;21H[K[18;21H[?25h[?25l -[33m1[m;
  [19;3H[K[20;1H  [20;3H[K[21;1H    [33mif[m ( argv[[33m0[m] == [33mNULL[m )              [36m/* nothing succeeds     */[m[21;67H[K[22;1H[K[22;1H[?25h[?25l[8C[33mreturn[m [33m0[m;[23;1H[K[24;1H    [33mif[m ( (pid = fork())  == -[33m1[m )[24;33H[K[25;1H        pe[25;11H[K[25;11H[?25h[?25lrror([33m"fork"[m);
     [33melse[m [33mif[m ( pid == [33m0[m ){[26;27H[K[27;1H        signal([33mSIGINT[m,[27;23H[K[27;23H[?25h[?25l [33mSIG_DFL[m);
        signal([33mSIGQUIT[m, [33mSIG_DFL[m);[28;34H[K[29;1H        execvp(arg[29;19H[K[29;19H[?25h[?25lv[[33m0[m], argv);
        perror([33m"cannot execute command"[m);[30;42H[K[31;1H        [31;9H[K[31;9H[?25h[?25lexit([33m1[m);
    } [32;7H[K[33;1H    [33melse[m {[33;11H[K[34;1H        [33mif[m ( wait(&child_info) == -[33m1[m[34;37H[K[34;37H[?25h[?25l )
            perror([33m"wait"[m);  [35;30H[K[36;1H    }[36;6H[K[37;1H  [33mreturn[m child_info;[37;21H[K[38;1H}[38;2H[K[39;1H[K[39;1H[?25h[?25l[52;1H[K[52;87H39,0-1[8CAll[39;1H[?25h[?25l[52;87H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"execute.c" [New] 39L, 817C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh1.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"smsh1.c" [New File][2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[2;1H[34m~                                                                                                       [3;1H~                                                                                                       [4;1H~                                                                                                       [5;1H~                                                                                                       [6;1H~                                                                                                       [7;1H~                                                                                                       [8;1H~                                                                                                       [9;1H~                                                                                                       [10;1H~                                                                                                       [11;1H~                                                                                                       [12;1H~                                                                                                       [13;1H~                                                                                                       [14;1H~                                                                                                       [15;1H~                                                                                                       [16;1H~                                                                                                       [17;1H~                                                                                                       [18;1H~                                                                                                       [19;1H~                                                                                                       [20;1H~                                                                                                       [21;1H~                                                                                                       [22;1H~                                                                                                       [23;1H~                                                                                                       [24;1H~                                                                                                       [25;1H~                                                                                                       [26;1H~                                                                                                       [27;1H~                                                                                                       [28;1H~                                                                                                       [29;1H~                                                                                                       [30;1H~                                                                                                       [31;1H~                                                                                                       [32;1H~                                                                                                       [33;1H~                                                                                                       [34;1H~                                                                                                       [35;1H~                                                                                                       [36;1H~                                                                                                       [37;1H~                                                                                                       [38;1H~                                                                                                       [39;1H~                                                                                                       [40;1H~                                                                                                       [41;1H~                                                                                                       [42;1H~                                                                                                       [43;1H~                                                                                                       [44;1H~                                                                                                       [45;1H~                                                                                                       [46;1H~                                                                                                       [47;1H~                                                                                                       [48;1H~                                                                                                       [49;1H~                                                                                                       [50;1H~                                                                                                       [51;1H~                                                                                                       [m[52;87H0,0-1[9CAll[1;1H[?25h[?25l[52;1H[33m-- INSERT --[m[52;13H[K[52;87H0,1[11CAll[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really usef[m[2;34H[K[2;34H[?25h[?25l[36mul version after prompting shell
 **             this one parses the comman[m[3;43H[K[3;43H[?25h[?25l[36md line into strings
 **             uses fork, exec, wait, and ignores sig[m[4;55H[K[4;55H[?25h[?25l[36mnals
 **/[m[5;5H[K[6;1H[K[7;1H[35m#include [m[33m<stdio.h>[m[7;19H[K[8;1H[K[8;1H[?25h[?25l[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m[9;20H[K[10;1H[35m#include <[msig[10;14H[K[10;14H[?25h[?25l[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m[11;18H[K[12;1H[K[13;1H[35m#define DFL_PROMPT      [m[33m"> "[m[13;29H[K[14;1H[K[15;1H[32mint[m ma[15;7H[K[15;7H[?25h[?25lin()
{[16;2H[K[17;1H  [32mchar[m  *cmdline, *prompt, **arglist;[17;38H[K[18;1H  [32mint[m   result;[18;16H[K[19;1H [19;2H[K[19;2H[?25h[?25l [32mvoid[m  setup();[20;1H[K[21;1H  prompt = DFL_PROMPT;[21;23H[K[22;1H  setup();[22;11H[K[23;1H[K[24;1H  [33mwhile[m ([24;10H[K[24;10H[?25h[?25l (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){
    [33mif[m ( (arg[25;14H[K[25;14H[?25h[?25llist = splitline(cmdline)) != [33mNULL[m  ){
        result = execut[26;24H[K[26;24H[?25h[?25le(arglist);
        freelist(arglist);[27;27H[K[28;1H    }[28;6H[K[29;1H    free(cmdline)[29;18H[K[29;18H[?25h[?25l;
  }[30;4H[K[31;1H  [33mreturn[m [33m0[m;[31;12H[K[32;1H}[32;2H[K[33;1H[K[34;1H[32mvoid[m setup()[34;13H[K[35;1H[36m/*[m[35;3H[K[36;1H[36m * purpose: initialize sh[m[36;26H[K[36;26H[?25h[?25l[36mell
 * returns: nothing. calls fatal() if trouble[m[37;46H[K[38;1H[36m */[m[38;4H[K[39;1H{[39;2H[K[40;1H  signa[40;8H[K[40;8H[?25h[?25ll([33mSIGINT[m,  [33mSIG_IGN[m);
  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[41;28H[K[42;1H}[42;2H[K[43;1H[K[44;1H[32mvoid[m fatal([44;12H[K[44;12H[?25h[?25l[32mchar[m *s1, [32mchar[m *s2, [32mint[m n)
{[45;2H[K[46;1H  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m,[46;35H[K[46;35H[?25h[?25l[52;1H[K[46;36Hs1, s2);
  exit(n);[47;11H[K[48;1H}[48;2H[K[49;1H[K[52;87H49,0-1[8CAll[49;1H[?25h[?25l[52;87H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh1.c" [New] 49L, 904C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  smsh1.c  smsh.h  splitline.c
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  smsh1.c  smsh.h  splitline.c
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ cp smsh1.c smsh1a.c[K[K[K[K[K[K2input[K[K[K.c
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi sm2in.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"sm2in.c" 49L, 904C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m main()
{
  [32mchar[m  *cmdline, *prompt, **arglist;
  [32mint[m   result;
  [32mvoid[m  setup();

  prompt = DFL_PROMPT;
  setup();

  [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){
    [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[26;9Hresult = execute(arglist);[27;9Hfreelist(arglist);
    }
    free(cmdline);
  }
  [33mreturn[m [33m0[m;
}

[32mvoid[m setup()
[36m/*
 * purpose: initialize shell
 * returns: nothing. calls fatal() if trouble
 */[m
{
  signal([33mSIGINT[m,  [33mSIG_IGN[m);
  signal([33mSIGQUIT[m, [33mSIG_IGN[m);
}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)
{
  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);
  exit(n);
}

[34m~                                                                                                       [51;1H~                                                                                                       [m[52;87H1,1[11CAll[1;1H[?25h[?25l[52;87H2[2;1H[?25h[?25l[52;87H3[3;1H[?25h[?25l[52;87H4[4;1H[?25h[?25l[52;87H5[5;1H[?25h[?25l[52;87H6,0-1[6;1H[?25h[?25l[52;87H7,1  [7;1H[?25h[?25l[52;87H8[8;1H[?25h[?25l[52;87H9[9;1H[?25h[?25l[52;87H10,1[10;1H[?25h[?25l[52;88H1[11;1H[?25h[?25l[52;88H2,0-1[12;1H[?25h[?25l[52;88H3,1  [13;1H[?25h[?25l[52;88H4,0-1[14;1H[?25h[?25l[52;88H5,1  [15;1H[?25h[?25l
[46m{[32;1H}[m[52;88H6[16;1H[?25h[?25l{[32;1H}[52;88H7[17;1H[?25h[?25l[52;88H8[18;1H[?25h[?25l[52;88H9[19;1H[?25h[?25l[52;87H20,0-1[20;1H[?25h[?25l[52;88H1,1  [21;1H[?25h[?25l[52;88H2[22;1H[?25h[?25l[52;88H3,0-1[23;1H[?25h[?25l[52;88H4,1  [24;1H[?25h[?25l[52;88H5[25;1H[?25h[?25l[52;88H6[26;1H[?25h[?25l[52;88H7[27;1H[?25h[?25l[52;88H8[28;1H[?25h[?25l[52;88H9[29;1H[?25h[?25l[52;87H30[30;1H[?25h[?25l[52;88H1[31;1H[?25h[?25l[16;1H[46m{[32;1H}[m[52;88H2[32;1H[?25h[?25l[16;1H{[32;1H}[52;88H3,0-1[33;1H[?25h[?25l[52;88H4,1  [34;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H6[36;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l
[46m{


}[m[52;88H9[39;1H[?25h[?25l{


}[52;87H40[40;1H[?25h[?25l[52;88H1[41;1H[?25h[?25l[39;1H[46m{


}[m[52;88H2[42;1H[?25h[?25l[39;1H{


}[52;88H3,0-1[43;1H[?25h[?25l[52;88H4,1  [44;1H[?25h[?25l
[46m{


}[m[52;88H5[45;1H[?25h[?25l{


}[52;88H6[46;1H[?25h[?25l[52;88H7[47;1H[?25h[?25l[45;1H[46m{


}[m[52;88H8[48;1H[?25h[?25l[45;1H{


}[52;88H9,0-1[49;1H[?25h[?25l[45;1H[46m{


}[m[52;88H8,1  [48;1H[?25h[?25l[45;1H{


}[52;88H7[47;1H[?25h[?25l[52;88H6[46;1H[?25h[?25l[45;1H[46m{


}[m[52;88H5[45;1H[?25h[?25l{


}[52;88H4[44;1H[?25h[?25l[52;88H3,0-1[43;1H[?25h[?25l[39;1H[46m{


}[m[52;88H2,1  [42;1H[?25h[?25l[39;1H{


}[52;88H1[41;1H[?25h[?25l[52;88H0[40;1H[?25h[?25l[39;1H[46m{


}[m[52;87H39[39;1H[?25h[?25l{


}[52;88H8[38;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H6[36;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H4[34;1H[?25h[?25l[52;88H3,0-1[33;1H[?25h[?25l[16;1H[46m{[32;1H}[m[52;88H2,1  [32;1H[?25h[?25l[16;1H{[32;1H}[52;88H1[31;1H[?25h[?25l[52;88H0[30;1H[?25h[?25l[52;87H29[29;1H[?25h[?25l[52;88H8[28;1H[?25h[?25l[52;88H7[27;1H[?25h[?25l[52;88H6[26;1H[?25h[?25l[52;88H5[25;1H[?25h[?25l[52;88H4[24;1H[?25h[?25l[52;88H3,0-1[23;1H[?25h[?25l[52;88H2,1  [22;1H[?25h[?25l[52;88H1[21;1H[?25h[?25l[52;88H0,0-1[20;1H[?25h[?25l[52;87H19,1  [19;1H[?25h[?25l[52;88H8[18;1H[?25h[?25l[52;88H7[17;1H[?25h[?25l[16;1H[46m{[32;1H}[m[52;88H6[16;1H[?25h[?25l{[32;1H}[52;88H5[15;1H[?25h[?25l[52;88H4,0-1[14;1H[?25h[?25l[52;88H3,1  [13;1H[?25h[?25l[52;88H2,0-1[12;1H[?25h[?25l[52;88H1,1  [11;1H[?25h[?25l[52;88H2,0-1[12;1H[?25h[?25l[52;88H3,1  [13;1H[?25h[?25l[52;88H4,0-1[14;1H[?25h[?25l[52;88H5,1  [15;1H[?25h[?25l[52;1H[K[52;1H:[?2004h[?25hs[?25l[?25he[?25l[?25ht[?25l[?25h[?25l [?25hn[?25l[?25hu[?25l[?25hm[?25l[?25h,[?25l[?25h[?25l[52;9H[K[52;9H[?25hb[?25l[?25he[?25l[?25hr[?25l[?25h[?25l [?25hr[?25l[?25he[?25l[?25hl[?25l[?25ha[?25l[?25ht[?25l[?25hi[?25l[?25hv[?25l[?25he[?25l[?25h[?25l[1m[37m[41mE518: Unknown option: relative[m[1;1H[33m  1 [m[36m/**  smsh1.c  small-shell version 1[m
[33m  2 [m[1C[36m**[9C    first really useful version after prompting shell[m
[33m  3 [m[1C[36m**[9C    this one parses the command line into strings[m
[33m  4 [m[1C[36m**[9C    uses fork, exec, wait, and ignores signals[m
[33m  5 [m[36m **/[m
[33m  6 
  7 [m[35m#include [m[33m<stdio.h>[m
[33m  8 [m[35m#include [m[33m<stdlib.h>[m
[33m  9 [m[35m#include [m[33m<unistd.h>[m
[33m 10 [m[35m#include [m[33m<signal.h>[m
[33m 11 [m[35m#include [m[33m"smsh.h"[m
[33m 12 
 13 [m[35m#define DFL_PROMPT      [m[33m"> "[m
[33m 14 
 15 [m[32mint[m main()
[33m 16 [m{
[33m 17 [m  [32mchar[m  *cmdline, *prompt, **arglist;
[33m 18 [m  [32mint[m   result;
[33m 19 [m  [32mvoid[m  setup();
[33m 20 
 21 [m  prompt = DFL_PROMPT;
[33m 22 [m  setup();
[33m 23 
 24 [m  [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){
[33m 25 [m    [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){
[33m 26 [m        result = execute(arglist);
[33m 27 [m        freelist(arglist);
[33m 28 [m    }
[33m 29 [m    free(cmdline);
[33m 30 [m  }
[33m 31 [m  [1C[33meturn[m [33m0[m;
[33m 32 [m}
[33m 33 
 34 [m[32mvoid[m setup()
[33m 35 [m[36m/*[m
[33m 36 [m[36m * purpose: initialize shell[m
[33m 37 [m[36m * returns: nothing. calls fatal() if trouble[m
[33m 38 [m[36m */[m
[33m 39 [m{
[33m 40 [m  signal([33mSIGINT[m,  [33mSIG_IGN[m);
[33m 41 [m  signal([33mSIGQUIT[m, [33mSIG_IGN[m);
[33m 42 [m}
[33m 43 
 44 [m[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)
[33m 45 [m{
[33m 46 [m  fprintf([33mstder[m[1C,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);
[33m 47 [m  exit(n);
[33m 48 [m}
[33m 49 [m[52;87H15,1[10CAll[15;5H[?25h[?25l[16;5H[46m{[32;5H}[m[52;88H6[16;5H[?25h[?25l{[32;5H}[52;88H7[17;5H[?25h[?25l[52;88H8[18;5H[?25h[?25l[52;88H9[19;5H[?25h[?25l[52;88H8[18;5H[?25h[?25l[52;88H7[17;5H[?25h[?25l[16;5H[46m{[32;5H}[m[52;88H6[16;5H[?25h[?25l{[32;5H}[52;88H5[15;5H[?25h[?25l[16;5H[46m{[32;5H}[m[52;88H6[16;5H[?25h[?25l{[32;5H}[52;88H7[17;5H[?25h[?25l[52;88H8[18;5H[?25h[?25l[52;88H9[19;5H[?25h[?25l[52;87H20,0-1[20;5H[?25h[?25l[52;87H19,1  [19;5H[?25h[?25l[52;88H8[18;5H[?25h[?25l[52;88H7[17;5H[?25h[?25l[16;5H[46m{[32;5H}[m[52;88H6[16;5H[?25h[?25l{[32;5H}[52;88H5[15;5H[?25h[?25l[16;5H[46m{[32;5H}[m[52;88H6[16;5H[?25h[?25l{[32;5H}[52;88H7[17;5H[?25h[?25l[52;88H8[18;5H[?25h[?25l[52;88H9[19;5H[?25h[?25l[52;87H20,0-1[20;5H[?25h[?25l[52;88H1,1  [21;5H[?25h[?25l[52;88H2[22;5H[?25h[?25l[52;88H3,0-1[23;5H[?25h[?25l[52;88H4,1  [24;5H[?25h[?25l[52;88H5[25;5H[?25h[?25l[52;88H6[26;5H[?25h[?25l[52;88H7[27;5H[?25h[?25l[52;88H8[28;5H[?25h[?25l[52;88H9[29;5H[?25h[?25l[52;87H30[30;5H[?25h[?25l[52;88H1[31;5H[?25h[?25l[16;5H[46m{[32;5H}[m[52;88H2[32;5H[?25h[?25l[16;5H{[32;5H}[52;88H1[31;5H[?25h[?25l[52;88H0[30;5H[?25h[?25l[52;87H29[29;5H[?25h[?25l[52;88H8[28;5H[?25h[?25l[52;88H7[27;5H[?25h[?25l[52;88H6[26;5H[?25h[?25l[52;88H5[25;5H[?25h[?25l[52;88H4[24;5H[?25h[?25l[52;88H3,0-1[23;5H[?25h[?25l[52;88H2,1  [22;5H[?25h[?25l[52;88H1[21;5H[?25h[?25l[52;88H0,0-1[20;5H[?25h[?25l[52;87H19,1  [19;5H[?25h[?25l[52;88H8[18;5H[?25h[?25l[52;88H7[17;5H[?25h[?25l[16;5H[46m{[32;5H}[m[52;88H6[16;5H[?25h[?25l{[32;5H}[52;88H5[15;5H[?25h[?25l[52;1H18 fewer lines[52;15H[K[15;5H[K[16;5H[32mvoid[m setup()[17;5H[36m/*[m[17;7H[K[18;5H[36m * purpose: initialize shell[19;5H * returns: nothing. calls fatal() if trouble[20;5H */[m[21;5H{[21;7H[K[22;8Hignal([33mSIGINT[m,  [33mSIG_IGN[m);[23;7Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[24;5H}[24;7H[K[25;9H[K[26;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[27;5H{[27;13H[K[28;7Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[29;7Hexit(n);[29;15H[K[30;5H}[30;7H[K[31;7H[K[32;1H[34m~                                                                                                       [33;1H~                                                                                                       [34;1H~                                                                                                       [35;1H~                                                                                                       [36;1H~                                                                                                       [37;1H~                                                                                                       [38;1H~                                                                                                       [39;1H~                                                                                                       [40;1H~                                                                                                       [41;1H~                                                                                                       [42;1H~                                                                                                       [43;1H~                                                                                                       [44;1H~                                                                                                       [45;1H~                                                                                                       [46;1H~                                                                                                       [47;1H~                                                                                                       [48;1H~                                                                                                       [49;1H~                                                                                                       [m[52;87H15,0-1[8CAll[52;87H[K[52;87H15,0-1[8CAll[15;5H[?25h[?25l[52;88H6,1  [16;5H[?25h[?25l[52;88H7[17;5H[?25h[?25l[52;88H8[18;5H[?25h[?25l[52;88H9[19;5H[?25h[?25l[52;87H20[20;5H[?25h[?25l[21;5H[46m{[24;5H}[m[52;88H1[21;5H[?25h[?25l{[24;5H}[52;88H2[22;5H[?25h[?25l[52;88H3[23;5H[?25h[?25l[21;5H[46m{[24;5H}[m[52;88H4[24;5H[?25h[?25l[21;5H{[24;5H}[52;88H5,0-1[25;5H[?25h[?25l[52;88H6,1  [26;5H[?25h[?25l[27;5H[46m{[30;5H}[m[52;88H7[27;5H[?25h[?25l{[30;5H}[52;88H8[28;5H[?25h[?25l[52;88H9[29;5H[?25h[?25l[27;5H[46m{[30;5H}[m[52;87H30[30;5H[?25h[?25l[27;5H{[30;5H}[52;88H1,0-1[31;5H[?25h[?25l[52;4Hmore lines[52;14H[K[32;1H[33m 32 [m[32mint[m main()[32;15H[K[33;1H[33m 33 [m{[33;6H[K[34;1H[33m 34 [m  [32mchar[m  *cmdline, *prompt, **arglist;[34;42H[K[35;1H[33m 35 [m  [32mint[m   result;[35;20H[K[36;1H[33m 36 [m  [32mvoid[m  setup();[36;21H[K[37;1H[33m 37 [m[37;5H[K[38;1H[33m 38 [m  prompt = DFL_PROMPT;[38;27H[K[39;1H[33m 39 [m  setup();[39;15H[K[40;1H[33m 40 [m[40;5H[K[41;1H[33m 41 [m  [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[41;61H[K[42;1H[33m 42 [m    [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[42;56H[K[43;1H[33m 43 [m        result = execute(arglist);[43;39H[K[44;1H[33m 44 [m        freelist(arglist);[44;31H[K[45;1H[33m 45 [m    }[45;10H[K[46;1H[33m 46 [m    free(cmdline);[46;23H[K[47;1H[33m 47 [m  }[47;8H[K[48;1H[33m 48 [m  [33mreturn[m [33m0[m;[48;16H[K[49;1H[33m 49 [m}[49;6H[K[52;87H32,1[10CAll[52;87H[K[52;87H32,1[10CAll[32;5H[?25h[?25l[52;88H1,0-1[31;5H[?25h[?25l[27;5H[46m{[30;5H}[m[52;88H0,1  [30;5H[?25h[?25l[27;5H{[30;5H}[52;87H29[29;5H[?25h[?25l[52;88H8[28;5H[?25h[?25l[27;5H[46m{[30;5H}[m[52;88H7[27;5H[?25h[?25l{[30;5H}[52;88H6[26;5H[?25h[?25l[52;88H5,0-1[25;5H[?25h[?25l[21;5H[46m{[24;5H}[m[52;88H4,1  [24;5H[?25h[?25l[21;5H{[24;5H}[52;88H3[23;5H[?25h[?25l[52;88H2[22;5H[?25h[?25l[21;5H[46m{[24;5H}[m[52;88H1[21;5H[?25h[?25l{[24;5H}[52;88H0[20;5H[?25h[?25l[52;87H19[19;5H[?25h[?25l[52;88H8[18;5H[?25h[?25l[52;88H7[17;5H[?25h[?25l[52;88H6[16;5H[?25h[?25l[52;88H5,0-1[15;5H[?25h[?25l[52;88H4[14;5H[?25h[?25l[52;88H3,1  [13;5H[?25h[?25l[52;88H4,0-1[14;5H[?25h[?25l[52;88H5[15;5H[?25h[?25l[52;1H[33m-- INSERT --[m[52;13H[K[52;87H15,1[10CAll[15;5H[?25h[?25l[16;5H[K[17;5H[32mvoid[m setup()[18;5H[36m/[m[18;7H[K[19;8H[36mpurpose: initialize shell[m[19;33H[K[20;7H[36m returns: nothing. calls fatal() if trouble[21;5H */[m[22;5H{[22;7H[K[23;17H[33mINT[m, [24;5H  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[25;5H}[26;5H[K[27;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[28;5H{[28;7H[K[29;7Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[30;5H  exit(n);[31;5H}[32;5H[K[33;5H[32mint[m main()[34;5H{[34;7H[K[35;7H[32mchar[m  *cmdline, *prompt, **arglist;[36;7H[32mint[m   result;[36;20H[K[37;7H[32mvoid[m  setup();[38;7H[K[39;7Hprompt = DFL_PROMPT;[40;7Hsetup();[41;7H[K[42;7H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[43;9H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[44;13Hresult = execute(arglist);[45;9H    freelist(arglist);[46;9H}[46;10H[K[47;7H  free(cmdline);[48;7H}[48;8H[K[49;5H  [33mreturn[m [33m0[m;
[33m 50 [m}[50;6H[K[52;88H6[16;5H[?25h[?25l[52;88H5[15;5H[?25h[?25l[52;88H4[14;5H[?25h[?25l[17;5H[K[18;5H[32mvoid[m setup()[19;5H[36m/[m[19;7H[K[20;8H[36mpurpose: initialize shell[m[20;33H[K[21;7H[36m returns: nothing. calls fatal() if trouble[22;5H */[m[23;5H{[23;7H[K[24;17H[33mINT[m, [25;5H  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[26;5H}[27;5H[K[28;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[29;5H{[29;7H[K[30;7Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[31;5H  exit(n);[32;5H}[33;5H[K[34;5H[32mint[m main()[35;5H{[35;7H[K[36;7H[32mchar[m  *cmdline, *prompt, **arglist;[37;7H[32mint[m   result;[37;20H[K[38;7H[32mvoid[m  setup();[39;7H[K[40;7Hprompt = DFL_PROMPT;[41;7Hsetup();[42;7H[K[43;7H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[44;9H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[45;13Hresult = execute(arglist);[46;9H    freelist(arglist);[47;9H}[47;10H[K[48;7H  free(cmdline);[49;7H}[49;8H[K[50;5H  [33mreturn[m [33m0[m;
[33m 51 [m}[51;6H[K[52;88H5[15;5H[?25h[?25l[36m/* splitline.c - commmand reading and parsing functions for smsh[m[18;5H[K[19;5H[36mvoid setup()[m[20;5H[1m[37m[41m/[m[20;7H[K[21;8H[36mpurpose: initialize shell[m[21;33H[K[22;7H[36m returns: nothing. calls fatal() if trouble[23;5H */[m[24;5H{[24;7H[K[25;17H[33mINT[m, [26;5H  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[27;5H}[28;5H[K[29;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[30;5H{[30;7H[K[31;7Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[32;5H  exit(n);[33;5H}[34;5H[K[35;5H[32mint[m main()[36;5H{[36;7H[K[37;7H[32mchar[m  *cmdline, *prompt, **arglist;[38;7H[32mint[m   result;[38;20H[K[39;7H[32mvoid[m  setup();[40;7H[K[41;7Hprompt = DFL_PROMPT;[42;7Hsetup();[43;7H[K[44;7H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[45;9H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[46;13Hresult = execute(arglist);[47;9H    freelist(arglist);[48;9H}[48;10H[K[49;7H  free(cmdline);[50;7H}[50;8H[K[51;5H  [33mreturn[m [33m0[m;[16;5H[?25h[?25l[36m *    [17;5H *    char *next_cmd(char *prompt, FILE *fp) - get next co[m[19;5H[K[20;5H[36mvoid setup()[m[21;5H[1m[37m[41m/[m[21;7H[K[22;8H[36mpurpose: initialize shell[m[22;33H[K[23;7H[36m returns: nothing. calls fatal() if trouble[24;5H */[m[25;5H{[25;7H[K[26;17H[33mINT[m, [27;5H  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[28;5H}[29;5H[K[30;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[31;5H{[31;7H[K[32;7Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[33;5H  exit(n);[34;5H}[35;5H[K[36;5H[32mint[m main()[37;5H{[37;7H[K[38;7H[32mchar[m  *cmdline, *prompt, **arglist;[39;7H[32mint[m   result;[39;20H[K[40;7H[32mvoid[m  setup();[41;7H[K[42;7Hprompt = DFL_PROMPT;[43;7Hsetup();[44;7H[K[45;7H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[46;9H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[47;13Hresult = execute(arglist);[48;9H    freelist(arglist);[49;9H}[49;10H[K[50;7H  free(cmdline);[51;7H}[51;8H[K[17;63H[?25h[?25l[36mmmand[18;5H *    char **splitline(char *str);           - parse a str[m[20;5H[K[21;5H[36mvoid setup()[m[22;5H[1m[37m[41m/[m[22;7H[K[23;8H[36mpurpose: initialize shell[m[23;33H[K[24;7H[36m returns: nothing. calls fatal() if trouble[25;5H */[m[26;5H{[26;7H[K[27;17H[33mINT[m, [28;5H  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[29;5H}[30;5H[K[31;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[32;5H{[32;7H[K[33;7Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[34;5H  exit(n);[35;5H}[36;5H[K[37;5H[32mint[m main()[38;5H{[38;7H[K[39;7H[32mchar[m  *cmdline, *prompt, **arglist;[40;7H[32mint[m   result;[40;20H[K[41;7H[32mvoid[m  setup();[42;7H[K[43;7Hprompt = DFL_PROMPT;[44;7Hsetup();[45;7H[K[46;7H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[47;9H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[48;13Hresult = execute(arglist);[49;9H    freelist(arglist);[50;9H}[50;10H[K[51;7H  free(cmdline);[18;63H[?25h[?25l[36ming[19;5H */[m[21;5H[35m#include [m[33m<stdio.h>[m[22;5H[35m#include [m[33m<stdlib.h>[m[23;5H[35m#include <[mstring[23;21H[K[24;5H[K[25;5H[K[26;5H[32mvoid[m setup()[27;5H[36m/*[m[27;7H[K[28;5H[36m * purpose: initialize shell[29;5H * returns: nothing. calls fatal() if trouble[30;5H */[m[31;5H{[31;6H[K[32;5H  signal([33mSIGINT[m,  [33mSIG_IGN[m);[33;7Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[33;32H[K[34;5H}[34;7H[K[35;5H[K[36;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[37;5H{[37;6H[K[38;5H  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[39;7Hexit(n);[39;15H[K[40;5H}[40;7H[K[41;7H[K[42;5H[32mint[m main()[43;5H{[43;7H[K[44;7H[32mchar[m  *cmdline, *prompt, **arglist;[45;7H[32mint[m   result;[46;7H[32mvoid[m  setup();[46;21H[K[47;9H[K[48;7Hprompt = DFL_PROMPT;[48;27H[K[49;7Hsetup();[49;15H[K[50;9H[K[51;7H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[23;21H[?25h[?25l[23;14H[33m<string.h>[m[24;5H[35m#include [m[33m"smsh.h"[m[26;5H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[27;5H[K[28;5H[K[29;5H[K[30;5H[32mvoid[m setup()[31;5H[36m/*[32;5H * purpose: initialize shell[33;5H * returns: nothing. calls fatal() if trouble[34;5H */[m[35;5H{[36;5H  signal([33mSIGINT[m,  [33mSIG_IGN[m);[36;32H[K[37;5H  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[38;5H}[38;7H[K[39;7H[K[40;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[41;5H{[42;5H  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[43;5H  exit(n);[44;5H}[44;7H[K[45;7H[K[46;5H[32mint[m main()[46;15H[K[47;5H{[48;7H[32mchar[m  *cmdline, *prompt, **arglist;[49;7H[32mint[m   result;[50;7H[32mvoid[m  setup();[51;7H[K[27;5H[?25h[?25l[36m/*[28;5H * purpose: read next command line from fp[29;5H * returns: dynam[m[30;5H[K[31;5H[K[32;5H[36mvoid setup()[m[32;17H[K[33;5H[1m[37m[41m/[m[33;7H[K[34;7H[36m purpose: initialize shell[35;5H * returns: nothing. calls fatal() if trouble[36;5H */[m[36;8H[K[37;5H{[37;7H[K[38;5H  signal([33mSIGINT[m,  [33mSIG_IGN[m);[39;7Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[40;5H}[40;6H[K[41;5H[K[42;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[42;42H[K[43;5H{[43;7H[K[44;5H  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[45;7Hexit(n);[46;5H}[46;6H[K[47;5H[K[48;5H[32mint[m main()[48;15H[K[49;5H{[49;7H[K[50;7H[32mchar[m  *cmdline, *prompt, **arglist;[51;7H[32mint[m   result;[29;22H[?25h[?25l[36mically allocated string holding command line[30;5H *  errors: NULL a[m[32;5H[K[33;5H[36mvoid setup()[m[34;5H[1m[37m[41m/[m[34;7H[K[35;8H[36mpurpose: initialize shell[m[35;33H[K[36;7H[36m returns: nothing. calls fatal() if trouble[37;5H */[m[38;5H{[38;7H[K[39;17H[33mINT[m, [40;5H  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[41;5H}[42;5H[K[43;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[44;5H{[44;7H[K[45;7Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[46;5H  exit(n);[47;5H}[48;5H[K[49;5H[32mint[m main()[50;5H{[50;7H[K[51;7H[32mchar[m  *cmdline, *prompt, **arglist;[30;23H[?25h[?25l[36mt EOF (not really an error)[31;5H *          calls fatal from emallo[m[33;5H[K[34;5H[36mvoid setup()[m[35;5H[1m[37m[41m/[m[35;7H[K[36;8H[36mpurpose: initialize shell[m[36;33H[K[37;7H[36m returns: nothing. calls fatal() if trouble[38;5H */[m[39;5H{[39;7H[K[40;17H[33mINT[m, [41;5H  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[42;5H}[43;5H[K[44;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[45;5H{[45;7H[K[46;7Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[47;5H  exit(n);[48;5H}[49;5H[K[50;5H[32mint[m main()[51;5H{[51;7H[K[31;40H[?25h[?25l[36mc()[32;5H *   notes: allocates space in BUFSIZ chunks.  [33;5H */[m[34;5H{[34;6H[K[35;5H  cha[36;5H[K[37;5H[K[38;5H[32mvoid[m setup()[39;5H[36m/*[40;5H * purpose: initialize shell[41;5H * returns: nothing. calls fatal() if trouble[42;5H */[m[43;5H{[44;5H  signal([33mSIGINT[m,  [33mSIG_IGN[m);[44;32H[K[45;5H  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[46;5H}[46;7H[K[47;7H[K[48;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[49;5H{[50;5H  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[51;5H  exit(n);[35;10H[?25h[?25l[32mchar[m  *buf ;[26C[36m/* the buffer           */[m[36;7H[32mint[m   bufspace = [33m0[m;[19C[36m/* total s[m[38;5H[K[39;5H[36mvoid setup()[m[40;5H[1m[37m[41m/[m[40;7H[K[41;8H[36mpurpose: initialize shell[m[41;33H[K[42;7H[36m returns: nothing. calls fatal() if trouble[43;5H */[m[44;5H{[44;7H[K[45;17H[33mINT[m, [46;5H  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[47;5H}[48;5H[K[49;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[50;5H{[50;7H[K[51;7Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[36;55H[?25h[?25l[36mize           */[m[37;7H[32mint[m   pos = [33m0[m;[24C[36m/* current position     */[m[38;7H[32mint[m   c;[30C[36m/* [m[39;5H[K[40;5H[K[41;5H[36mvoid setup()[m[41;17H[K[42;5H[1m[37m[41m/[m[42;7H[K[43;7H[36m purpose: initialize shell[44;5H * returns: nothing. calls fatal() if trouble[45;5H */[m[45;8H[K[46;5H{[46;7H[K[47;5H  signal([33mSIGINT[m,  [33mSIG_IGN[m);[48;7Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[49;5H}[49;6H[K[50;5H[K[51;5H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[51;42H[K[38;48H[?25h[?25l[36minput char           */[m[40;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[25C[36m/* prompt user  */[m[41;5H  [41;7H[K[42;5H[K[43;5H[K[44;5H[32mvoid[m setup()[44;17H[K[45;5H[36m/[m[45;7H[K[46;5H[36m * purpose: initialize shell[47;5H * returns: nothing. calls fatal() if trouble[48;5H */[m[48;8H[K[49;5H{[50;7Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[51;5H  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[51;32H[K[41;7H[?25h[?25l[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[43;9H[36m/* need space? */[m[44;5H    [33mif[m[44;11H[K[45;5H[K[46;5H[K[47;5H[32mvoid[m setup()[47;17H[K[48;5H[36m/[m[48;7H[K[49;5H[36m * purpose: initialize shell[50;5H * returns: nothing. calls fatal() if trouble[51;5H */[m[51;8H[K[44;11H[?25h[?25l( pos+[33m1[m >= bufspace ){[12C[36m/* 1 for \0     */[m[45;11H[33mif[m ( bufspace == [33m0[m[47;5H[K[48;5H[32mvoid[m setup()[49;5H[36m/[m[49;7H[K[50;8H[36mpurpose: initialize shell[m[50;33H[K[51;7H[36m returns: nothing. calls fatal() if trouble[45;29H[?25h[?25l[m )[14C[36m/* y: 1st time  */[m[46;13Hbuf = emalloc([33mBUFSIZ[m);[47;11H[33melse[m[30C[36m/* [m[48;5H[K[49;5H[K[50;5H[36mvoid setup()[m[50;17H[K[51;5H[1m[37m[41m/[m[51;7H[K[47;48H[?25h[?25l[36mor expand    */[m[48;13Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[49;11Hbufspa[50;5H[K[51;5H[K[49;17H[?25h[?25lce += [33mBUFSIZ[m;[15C[36m/* update size  */[m[50;9H}[51;28H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 52 [m    [36m/* end of command? */[m[52;11H[33m(paste) --[m[52;87H[K[51;30H[?25h[?25l[1;51r[1;1H[4M[1;52r[48;1H[33m 53 [m    [33mif[m ( c == [35m'\n'[m )
[33m 54 [m      [33mbreak[m;
[33m 55 
 56 [m    [36m/* no, add to buffer */[18C[?25h[?25l[1;51r[m[1;1H[3M[1;52r[49;1H[33m 57 [m    buf[pos++] = c;
[33m 58 [m  }
[33m 59 [m  [33mif[m ( c == [33mEOF[m && pos == [33m0[m )[11C[36m/* EOF and no input     */[51;17H[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;1H[33m 60 [m    [33mreturn[m [33mNULL[m;[24C[36m/* say so               */[m
[33m 61 [m  buf[pos] = [35m'\0'[m;[21C[?25h[?25l[1;51r[1;1H[5M[1;52r[47;1H[33m 62 [m  [33mreturn[m buf;
[33m 63 [m}
[33m 64 
 65 [m[36m/**[m
[33m 66 [m[36m **     splitline ( parse a line into an array of strings )[51;42H[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;1H[33m 67 [m[36m **/[m
[33m 68 [m[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[51;29H[?25h[?25l[1;51r[m[1;1H[4M[1;52r[48;1H[33m 69 
 70 [m[32mchar[m ** splitline([32mchar[m *line)
[33m 71 [m[36m/*[m
[33m 72 [m[36m * purpose: split a line into array of white-space separated tokens[51;24H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[33m 73 [m[36m * returns: a NULL-terminated array of pointers to copies of the tokens[51;15H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[33m 74 [m[36m *          or NULL if line if no tokens on the line[51;25H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[33m 75 [m[36m *  action: traverse the array, locate strings, make copies[51;28H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[33m 76 [m[36m *    note: strtok() could work, but we may want to add quotes later[51;17H[?25h[?25l[1;51r[m[1;1H[3M[1;52r[49;1H[33m 77 [m[36m */[m
[33m 78 [m{
[33m 79 [m  [32mchar[m  *newstr();[51;5H[?25h[?25l[1;51r[1;1H[3M[1;52r[49;1H[33m 80 [m  [32mchar[m  **args ;
[33m 81 [m  [32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m
[33m 82 [m  [32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[51;45H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[33m 83 [m  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[51;9H[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;1H[33m 84 [m  [32mchar[m  *cp = line;[21C[36m/* pos in string        */[m
[33m 85 [m  [32mchar[m  *start;[41C[?25h[?25l[1;51r[1;1H[3M[1;52r[49;1H[33m 86 [m  [32mint[m   len;
[33m 87 
 88 [m  [33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[51;49H[?25h[?25l[1;51r[m[1;1H[3M[1;52r[49;1H[33m 89 [m    [33mreturn[m [33mNULL[m;
[33m 90 
 91 [m  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[51;28H[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;1H[33m 92 [m  bufspace = [33mBUFSIZ[m;
[33m 93 [m  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[51;25H[?25h[?25l[1;51r[1;1H[4M[1;52r[48;1H[33m 94 
 95 [m  [33mwhile[m( *cp != [35m'\0'[m )
[33m 96 [m    {
[33m 97 [m      [33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[51;24H[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;1H[33m 98 [m[8Ccp++;
[33m 99 [m      [33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[51;25H[?25h[?25l[1;51r[m[1;1H[3M[1;52r[49;1H[33m100 [m[8C[33mbreak[m;
[33m101 
102 [m      [36m/* make sure the array has room (+1 for NULL) */[51;33H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[33m103 [m      [33mif[m ( argnum+[33m1[m >= spots ){[?25h[?25l[1;51r[1;1H[2M[1;52r[50;1H[33m104 [m[8Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);
[33m105 [m[8Cbufspace += [33mBUFSIZ[m;[51;22H[?25h[?25l[1;51r[1;1H[4M[1;52r[48;1H[33m106 [m[8Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));
[33m107 [m      }
[33m108 
109 [m      [36m/* mark start, then find end of word */[51;21H[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;1H[33m110 [m      start = cp;
[33m111 [m      len   = [33m1[m;[51;10H[?25h[?25l[1;51r[1;1H[3M[1;52r[49;1H[33m112 [m      [33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )
[33m113 [m[8Clen++;
[33m114 [m      args[argnum++] = newstr(start, len);[51;24H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;1H[33m115 [m    }
[33m116 [m  args[argnum] = [33mNULL[m;[51;7H[?25h[?25l[1;51r[1;1H[6M[1;52r[46;1H[33m117 [m  [33mreturn[m args;
[33m118 [m}
[33m119 
120 [m[36m/*[m
[33m121 [m[36m * purpose: constructor for strings[m
[33m122 [m[36m * returns: a string, never NULL[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;1H[33m123 [m[36m */[m
[33m124 [m[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[51;21H[?25h[?25l[1;51r[1;1H[5M[1;52r[47;1H[33m125 [m{
[33m126 [m  [32mchar[m *rv = emalloc(l+[33m1[m);
[33m127 
128 [m  rv[l] = [35m'\0'[m;
[33m129 [m  strncpy(rv, s, l);[51;16H[?25h[?25l[1;51r[1;1H[7M[1;52r[45;1H[33m130 [m  [33mreturn[m rv;
[33m131 [m}
[33m132 
133 [m[32mvoid[m
[33m134 [mfreelist([32mchar[m **list)
[33m135 [m[36m/*[m
[33m136 [m[36m * purpose: free the list returned by splitline[51;11H[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;1H[33m137 [m[36m * returns: nothing[m
[33m138 [m[36m *  action: free all strings in list and then free the list[51;8H[?25h[?25l[1;51r[m[1;1H[3M[1;52r[49;1H[33m139 [m[36m */[m
[33m140 [m{
[33m141 [m  [32mchar[m  **cp = list;[51;5H[?25h[?25l[1;51r[1;1H[4M[1;52r[48;1H[33m142 [m  [33mwhile[m( *cp )
[33m143 [m    free(*cp++);
[33m144 [m  free(list);
[33m145 [m}[19C[?25h[?25l[1;51r[1;1H[5M[1;52r[47;1H[33m146 
147 [m[32mvoid[m * emalloc([32msize_t[m n)
[33m148 [m{
[33m149 [m  [32mvoid[m *rv ;
[33m150 [m  [33mif[m ( (rv = malloc(n)) == [33mNULL[m )[51;5H[?25h[?25l[1;51r[1;1H[5M[1;52r[47;1H[33m151 [m    fatal([33m"out of memory"[m,[33m""[m,[33m1[m);
[33m152 [m  [33mreturn[m rv;
[33m153 [m}
[33m154 
155 [m[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[51;19H[?25h[?25l[1;51r[1;1H[3M[1;52r[49;1H[33m156 [m{
[33m157 [m  [32mvoid[m *rv;
[33m158 [m  [33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[51;9H[?25h[?25l[1;51r[1;1H[3M[1;52r[49;1H[33m159 [m    fatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);
[33m160 [m  [33mreturn[m rv;
[33m161 [m}[52;11H[33m--[m[52;13H[K[52;87H161,2[9C75%[46;5H[46m{[51;5H}[?25h[m[52;1H[K[51;5H[?25l[52;87H161,1[9C75%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[45;5H{[50;5H}
[33m162 [m[52;87H[K[52;87H162,0-1[7C76%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m163 [m[52;87H[K[52;87H163,0-1[7C76%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m164 [m[32mvoid[m setup()[52;87H[K[52;87H164,1[9C77%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m165 [m[36m/*[m[52;87H[K[52;87H165,1[9C78%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m166 [m[36m * purpose: initialize shell[m[52;87H[K[52;87H166,1[9C78%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m167 [m[36m * returns: nothing. calls fatal() if trouble[m[52;87H[K[52;87H167,1[9C79%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m168 [m[36m */[m[52;87H[K[52;87H168,1[9C80%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m169 [m{[52;87H[K[52;87H169,1[9C80%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m170 [m  signal([33mSIGINT[m,  [33mSIG_IGN[m);[52;87H[K[52;87H170,1[9C81%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m171 [m  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[52;87H[K[52;87H171,1[9C82%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[48;5H[46m{[m


[33m172 [m[46m}[m[52;87H[K[52;87H172,1[9C82%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[47;5H{[50;5H}
[33m173 [m[52;87H[K[52;87H173,0-1[7C83%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m174 [m[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[52;87H[K[52;87H174,1[9C84%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m175 [m{[52;87H[K[52;87H175,1[9C84%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m176 [m  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[52;87H[K[52;87H176,1[9C85%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m177 [m  exit(n);[52;87H[K[52;87H177,1[9C86%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[48;5H[46m{[m


[33m178 [m[46m}[m[52;87H[K[52;87H178,1[9C86%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[47;5H{[50;5H}
[33m179 [m[52;87H[K[52;87H179,0-1[7C87%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m180 [m[32mint[m main()[52;87H[K[52;87H180,1[9C88%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m181 [m{[52;87H[K[52;87H181,1[9C89%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m182 [m  [32mchar[m  *cmdline, *prompt, **arglist;[52;87H[K[52;87H182,1[9C89%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m183 [m  [32mint[m   result;[52;87H[K[52;87H183,1[9C90%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m184 [m  [32mvoid[m  setup();[52;87H[K[52;87H184,1[9C91%[51;5H[?25h[?25l[52;89H3[50;5H[?25h[?25l[52;89H2[49;5H[?25h[?25l[52;89H1[48;5H[?25h[?25l[52;89H0[47;5H[?25h[?25l[52;88H79,0-1[46;5H[?25h[?25l[42;5H[46m{[45;5H}[m[52;89H8,1  [45;5H[?25h[?25l[42;5H{[45;5H}[52;89H7[44;5H[?25h[?25l[52;89H6[43;5H[?25h[?25l[42;5H[46m{[45;5H}[m[52;89H5[42;5H[?25h[?25l{[45;5H}[52;89H4[41;5H[?25h[?25l[52;89H3,0-1[40;5H[?25h[?25l[36;5H[46m{[39;5H}[m[52;89H2,1  [39;5H[?25h[?25l[36;5H{[39;5H}[52;89H1[38;5H[?25h[?25l[52;89H0[37;5H[?25h[?25l[36;5H[46m{[39;5H}[m[52;88H69[36;5H[?25h[?25l{[39;5H}[52;89H8[35;5H[?25h[?25l[52;89H7[34;5H[?25h[?25l[52;89H6[33;5H[?25h[?25l[52;89H5[32;5H[?25h[?25l[52;89H4[31;5H[?25h[?25l[52;89H3,0-1[30;5H[?25h[?25l[52;89H2[29;5H[?25h[?25l[23;5H[46m{[28;5H}[m[52;89H1,1  [28;5H[?25h[?25l[23;5H{[28;5H}[52;89H0[27;5H[?25h[?25l[52;88H59[26;5H[?25h[?25l[52;89H8[25;5H[?25h[?25l[52;89H7[24;5H[?25h[?25l[23;5H[46m{[28;5H}[m[52;89H6[23;5H[?25h[?25l{[28;5H}[52;89H5[22;5H[?25h[?25l[52;89H4,0-1[21;5H[?25h[?25l[15;5H[46m{[20;5H}[m[52;89H3,1  [20;5H[?25h[?25l[15;5H{[20;5H}[52;89H2[19;5H[?25h[?25l[52;89H1[18;5H[?25h[?25l[52;89H0[17;5H[?25h[?25l[52;88H49[16;5H[?25h[?25l[15;5H[46m{[20;5H}[m[52;89H8[15;5H[?25h[?25l{[20;5H}[52;89H7[14;5H[?25h[?25l[52;89H6,0-1[13;5H[?25h[?25l[7;5H[46m{[12;5H}[m[52;89H5,1  [12;5H[?25h[?25l[7;5H{[12;5H}[52;89H4[11;5H[?25h[?25l[52;89H3[10;5H[?25h[?25l[52;89H2[9;5H[?25h[?25l[52;89H1[8;5H[?25h[?25l[7;5H[46m{[12;5H}[m[52;89H0[7;5H[?25h[?25l{[12;5H}[52;88H39[6;5H[?25h[?25l[52;89H8[5;5H[?25h[?25l[52;89H7[4;5H[?25h[?25l[52;89H6[3;5H[?25h[?25l[52;89H5[2;5H[?25h[?25l[52;89H4[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m133 [m[32mvoid[m[52;87H[K[52;87H133,1[9C90%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m132 [m[52;87H[K[52;87H132,0-1[7C89%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m131 [m}[52;87H[K[52;87H131,1[9C89%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m130 [m  [33mreturn[m rv;[52;87H[K[52;87H130,1[9C88%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m129 [m  strncpy(rv, s, l);[52;87H[K[52;87H129,1[9C87%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m128 [m  rv[l] = [35m'\0'[m;[52;87H[K[52;87H128,1[9C86%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m127 [m[52;87H[K[52;87H127,0-1[7C86%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m126 [m  [32mchar[m *rv = emalloc(l+[33m1[m);[52;87H[K[52;87H126,1[9C85%[1;5H[?25h[?25l[7;51r[7;1H[L[1;52r[1;3H[33m5[m[1C[46m{[m[1;7H[K[2;3H[33m6[m[3C[32mchar[m *rv = emalloc(l+[33m1[m);[3;3H[33m7[m[3;7H[K[4;3H[33m8[m[3Crv[l] = [35m'\0'[m;[4;20H[K[5;2H[33m29[m[3Cstrncpy(rv, s, l);[6;3H[33m0[m[1C  [33mreturn[m rv;
[33m131 [m[46m}[m[52;87H[K[52;87H125,1[9C84%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m124 [m[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[2;5H{[8;5H}[52;87H[K[52;87H124,1[9C84%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m123 [m[36m */[m[52;87H[K[52;87H123,1[9C83%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m122 [m[36m * returns: a string, never NULL[m[52;87H[K[52;87H122,1[9C82%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m121 [m[36m * purpose: constructor for strings[m[52;87H[K[52;87H121,1[9C82%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m120 [m[36m/*[m[52;87H[K[52;87H120,1[9C81%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m119 [m[52;87H[K[52;87H119,0-1[7C80%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m118 [m}[52;87H[K[52;87H118,1[9C80%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m117 [m  [33mreturn[m args;[52;87H[K[52;87H117,1[9C79%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m116 [m  args[argnum] = [33mNULL[m;[52;87H[K[52;87H116,1[9C78%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m115 [m    }[52;87H[K[52;87H115,1[9C78%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m114 [m      args[argnum++] = newstr(start, len);[52;87H[K[52;87H114,1[9C77%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m113 [m[8Clen++;[52;87H[K[52;87H113,1-8[7C76%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m112 [m      [33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[52;87H[K[52;87H112,1[9C76%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m111 [m      len   = [33m1[m;[52;87H[K[52;87H111,1[9C75%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m110 [m      start = cp;[52;87H[K[52;87H110,1[9C74%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m109 [m      [36m/* mark start, then find end of word */[m[52;87H[K[52;87H109,1[9C73%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m108 [m[52;87H[K[52;87H108,0-1[7C73%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m107 [m      }[52;87H[K[52;87H107,1[9C72%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m106 [m[8Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[52;87H[K[52;87H106,1-8[7C71%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m105 [m[8Cbufspace += [33mBUFSIZ[m;[52;87H[K[52;87H105,1-8[7C71%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m104 [m[8Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H104,1-8[7C70%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m103 [m      [33mif[m ( argnum+[33m1[m >= spots ){[52;87H[K[52;87H103,1[9C69%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m102 [m      [36m/* make sure the array has room (+1 for NULL) */[m[52;87H[K[52;87H102,1[9C69%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m101 [m[52;87H[K[52;87H101,0-1[7C68%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m100 [m[8C[33mbreak[m;[52;87H[K[52;87H100,1-8[7C67%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 99 [m      [33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[52;87H[K[52;87H99,1[10C67%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 98 [m[8Ccp++;[52;87H[K[52;87H98,1-8[8C66%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 97 [m      [33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[52;87H[K[52;87H97,1[10C65%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 96 [m    {[52;87H[K[52;87H96,1[10C65%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 95 [m  [33mwhile[m( *cp != [35m'\0'[m )[52;87H[K[52;87H95,1[10C64%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 94 [m[52;87H[K[52;87H94,0-1[8C63%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 93 [m  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[52;87H[K[52;87H93,1[10C63%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 92 [m  bufspace = [33mBUFSIZ[m;[52;87H[K[52;87H92,1[10C62%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 91 [m  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[52;87H[K[52;87H91,1[10C61%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 90 [m[52;87H[K[52;87H90,0-1[8C60%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 89 [m    [33mreturn[m [33mNULL[m;[52;87H[K[52;87H89,1[10C60%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 88 [m  [33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[52;87H[K[52;87H88,1[10C59%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 87 [m[52;87H[K[52;87H87,0-1[8C58%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 86 [m  [32mint[m   len;[52;87H[K[52;87H86,1[10C58%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 85 [m  [32mchar[m  *start;[52;87H[K[52;87H85,1[10C57%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 84 [m  [32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H84,1[10C56%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 83 [m  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H83,1[10C56%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 82 [m  [32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H82,1[10C55%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 81 [m  [32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H81,1[10C54%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 80 [m  [32mchar[m  **args ;[52;87H[K[52;87H80,1[10C54%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 79 [m  [32mchar[m  *newstr();[52;87H[K[52;87H79,1[10C53%[1;5H[?25h[?25l[41;51r[41;1H[L[1;52r[1;3H[33m8[m[1C[46m{[m[1;7H[K[2;2H[33m79[m[10Cnewstr();[3;3H[33m0[m[3C[32mchar[m  **args ;[3;21H[K[4;3H[33m1[m[9Cspots = [33m0[m;   [22C[36mspot[m[5;3H[33m2[m[9Cbufspace = [33m0[m;[22C[36mbytes in table[m[6;3H[33m3[m[3C[32mint[m   argnum = [33m0[m[25C[36mslots used   [m[7;3H[33m4[m[10Ccp = line;[21C[36m/* pos in string        */[m[8;3H[33m5[m[3C[32mchar[m  *start;[9;3H[33m6[m[3C[32mint[m   len;[10;3H[33m7[m[10;7H[K[11;3H[33m8[m[3C[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[12;2H[33m89[m[5C[33mreturn[m [33mNULL[m;[13;3H[33m0[m[13;7H[K[14;3H[33m1[m[3Cargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[15;3H[33m2[m[3Cbufspace[9C;[15;25H[K[16;3H[33m3[m[3Cspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;3H[33m4[m[17;7H[K[18;3H[33m5[m[3C[33mwhile[m( *cp != [35m'\0'[m )[19;3H[33m6[m[5C{[19;11H[K[20;3H[33m7[m[7C[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[21;3H[33m8[m[7C  cp++;[21;18H[K[22;1H[33m 99[m[7C[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[23;3H[33m0[m[9C[33mbreak[m;[24;3H[33m1[m[24;11H[K[25;3H[33m2[m[7C[36m/* make sure the array has room (+1 for NULL) */[m[26;3H[33m3[m[7C[33mif[m ( argnum+[33m1[m >= spots ){[26;36H[K[27;3H[33m4[m[9Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;3H[33m5[m[9Cbufspace += [33mBUFSIZ[m;[28;32H[K[29;3H[33m6[m[7C  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;3H[33m7[m[7C}[31;3H[33m8[m[31;11H[K[32;2H[33m09[m[7C[36m/* mark start, then find end of word */[m[33;3H[33m0[m[7Cstart = cp;[34;3H[33m1[m[7Clen   = [33m1[m;[34;21H[K[35;3H[33m2[m[7C[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;3H[33m3[m[7C  len++;[36;19H[K[37;3H[33m4[m[5C  args[argnum++] = newstr(start, len);[38;3H[33m5[m[3C  }[38;10H[K[39;3H[33m6[m[3Cargs[argnum] = [33mNULL[m;[40;3H[33m7[m[1C  [33mreturn[m args;
[33m118 [m[46m}[m[52;87H[K[52;87H78,1[10C52%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 77 [m[36m */[m[2;5H{[42;5H}[52;87H[K[52;87H77,1[10C52%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 76 [m[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H76,1[10C51%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 75 [m[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H75,1[10C50%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 74 [m[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H74,1[10C50%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 73 [m[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H73,1[10C49%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 72 [m[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H72,1[10C48%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 71 [m[36m/*[m[52;87H[K[52;87H71,1[10C47%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 70 [m[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H70,1[10C47%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 69 [m[52;87H[K[52;87H69,0-1[8C46%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 68 [m[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H68,1[10C45%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 67 [m[36m **/[m[52;87H[K[52;87H67,1[10C45%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 66 [m[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H66,1[10C44%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 65 [m[36m/**[m[52;87H[K[52;87H65,1[10C43%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 64 [m[52;87H[K[52;87H64,0-1[8C43%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 63 [m}[52;87H[K[52;87H63,1[10C42%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 62 [m  [33mreturn[m buf;[52;87H[K[52;87H62,1[10C41%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 61 [m  buf[pos] = [35m'\0'[m;[52;87H[K[52;87H61,1[10C41%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 60 [m    [33mreturn[m [33mNULL[m;[24C[36m/* say so               */[m[52;87H[K[52;87H60,1[10C40%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 59 [m  [33mif[m ( c == [33mEOF[m && pos == [33m0[m )[11C[36m/* EOF and no input     */[m[52;87H[K[52;87H59,1[10C39%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 58 [m  }[52;87H[K[52;87H58,1[10C39%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 57 [m    buf[pos++] = c;[52;87H[K[52;87H57,1[10C38%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 56 [m    [36m/* no, add to buffer */[m[52;87H[K[52;87H56,1[10C37%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 55 [m[52;87H[K[52;87H55,0-1[8C36%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 54 [m      [33mbreak[m;[52;87H[K[52;87H54,1[10C36%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 53 [m    [33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H53,1[10C35%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 52 [m    [36m/* end of command? */[m[52;87H[K[52;87H52,1[10C34%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 51 [m[52;87H[K[52;87H51,0-1[8C34%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 50 [m    }[52;87H[K[52;87H50,1[10C33%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 49 [m      bufspace += [33mBUFSIZ[m;[15C[36m/* update size  */[m[52;87H[K[52;87H49,1[10C32%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 48 [m[8Cbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H48,1-8[8C32%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 47 [m      [33melse[m[30C[36m/* or expand    */[m[52;87H[K[52;87H47,1[10C31%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 46 [m[8Cbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H46,1-8[8C30%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 45 [m      [33mif[m ( bufspace == [33m0[m )[14C[36m/* y: 1st time  */[m[52;87H[K[52;87H45,1[10C30%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 44 [m    [33mif[m( pos+[33m1[m >= bufspace ){[12C[36m/* 1 for \0     */[m[52;87H[K[52;87H44,1[10C29%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 43 [m    [36m/* need space? */[m[52;87H[K[52;87H43,1[10C28%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 42 [m[52;87H[K[52;87H42,0-1[8C28%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 41 [m  [33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[52;87H[K[52;87H41,1[10C27%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 40 [m  printf([33m"[m[35m%s[m[33m"[m, prompt);[25C[36m/* prompt user  */[m[52;87H[K[52;87H40,1[10C26%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 39 [m[52;87H[K[52;87H39,0-1[8C26%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 38 [m  [32mint[m   c;[30C[36m/* input char           */[m[52;87H[K[52;87H38,1[10C25%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 37 [m  [32mint[m   pos = [33m0[m;[24C[36m/* current position     */[m[52;87H[K[52;87H37,1[10C24%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 36 [m  [32mint[m   bufspace = [33m0[m;[19C[36m/* total size           */[m[52;87H[K[52;87H36,1[10C23%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 35 [m  [32mchar[m  *buf ;[26C[36m/* the buffer           */[m[52;87H[K[52;87H35,1[10C23%[1;5H[?25h[?25l[30;51r[30;1H[L[1;52r[1;3H[33m4[m[1C[46m{[m[1;7H[K[2;3H[33m5[m[3C[32mchar[m  *buf ;       [23C[36mhe buffer[m[3;3H[33m6[m[9Cbufspace = [33m0[m;[22C[36mtotal size      [m[4;3H[33m7[m[9Cpos = [33m0[m;[27C[36mcurrent position[m[5;3H[33m8[m[3C[32mint[m   c;[30C[36m/* input char           */[m[6;2H[33m39[m[6;7H[K[7;3H[33m0[m[3Cprintf([33m"[m[35m%s[m[33m"[m, prompt);            [13C[36m/* prompt user  */[m[8;3H[33m1[m[3C[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[9;3H[33m2[m[9;9H[K[10;3H[33m3[m[5C[36m/* need space? */[m[10;26H[K[11;3H[33m4[m[5C[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m1 for \0   [m[12;3H[33m5[m[7C[33mif[m ( bufspace == [33m0[m )    [10C[36m/* y: 1st time  */[m[13;3H[33m6[m[7C  buf = emalloc([33mBUFSIZ[m);[13;45H[K[14;3H[33m7[m[7C[33melse[m                              [36m/* or expand    */[m[15;3H[33m8[m[7C  buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[15;49H[K[16;2H[33m49[m[5C  bufspace += [33mBUFSIZ[m;[15C[36m/* update size  */[m[17;3H[33m0[m[5C}[18;3H[33m1[m[18;9H[K[19;3H[33m2[m[5C[36m/* end of command? */[m[20;3H[33m3[m[5C[33mif[m ( c == [35m'\n'[m )[21;3H[33m4[m[7C[33mbreak[m;[22;3H[33m5[m[22;9H[K[23;3H[33m6[m[5C[36m/* no, add to buffer */[m[24;3H[33m7[m[3C  buf[pos++] = c;[25;3H[33m8[m[3C}[25;8H[K[26;2H[33m59[m[3C[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[14C[36mEOF and no input[m[27;3H[33m0[m[3C  [33mreturn[m [33mNULL[m;  [22C[36m/* say so               */[m[28;3H[33m1[m[3Cbuf[pos] = [35m'\0'[m;[29;3H[33m2[m[1C  [33mreturn[m buf;
[33m 63 [m[46m}[m[52;87H[K[52;87H34,1[10C22%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 33 [m[36m */[m[2;5H{[31;5H}[52;87H[K[52;87H33,1[10C21%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 32 [m[36m *   notes: allocates space in BUFSIZ chunks.  [m[52;87H[K[52;87H32,1[10C21%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 31 [m[36m *          calls fatal from emalloc()[m[52;87H[K[52;87H31,1[10C20%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 30 [m[36m *  errors: NULL at EOF (not really an error)[m[52;87H[K[52;87H30,1[10C19%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 29 [m[36m * returns: dynamically allocated string holding command line[m[52;87H[K[52;87H29,1[10C19%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 28 [m[36m * purpose: read next command line from fp[m[52;87H[K[52;87H28,1[10C18%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 27 [m[36m/*[m[52;87H[K[52;87H27,1[10C17%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 26 [m[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[52;87H[K[52;87H26,1[10C17%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 25 [m[52;87H[K[52;87H25,0-1[8C16%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 24 [m[35m#include [m[33m"smsh.h"[m[52;87H[K[52;87H24,1[10C15%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 23 [m[35m#include [m[33m<string.h>[m[52;87H[K[52;87H23,1[10C15%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 22 [m[35m#include [m[33m<stdlib.h>[m[52;87H[K[52;87H22,1[10C14%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 21 [m[35m#include [m[33m<stdio.h>[m[52;87H[K[52;87H21,1[10C13%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 20 [m[52;87H[K[52;87H20,0-1[8C13%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 19 [m[36m */[m[52;87H[K[52;87H19,1[10C12%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 18 [m[36m *    char **splitline(char *str);           - parse a string[m[52;87H[K[52;87H18,1[10C11%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 17 [m[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[52;87H[K[52;87H17,1[10C10%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 16 [m[36m *    [m[52;87H[K[52;87H16,1[10C10%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 15 [m[36m/* splitline.c - commmand reading and parsing functions for smsh[m[52;87H[K[52;87H15,1[11C9%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 14 [m[52;87H[K[52;87H14,0-1[9C8%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 13 [m[35m#define DFL_PROMPT      [m[33m"> "[m[52;87H[K[52;87H13,1[11C8%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 12 [m[52;87H[K[52;87H12,0-1[9C7%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 11 [m[35m#include [m[33m"smsh.h"[m[52;87H[K[52;87H11,1[11C6%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 10 [m[35m#include [m[33m<signal.h>[m[52;87H[K[52;87H10,1[11C6%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  9 [m[35m#include [m[33m<unistd.h>[m[52;87H[K[52;87H9,1[12C5%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  8 [m[35m#include [m[33m<stdlib.h>[m[52;87H[K[52;87H8,1[12C4%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  7 [m[35m#include [m[33m<stdio.h>[m[52;87H[K[52;87H7,1[12C4%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  6 [m[52;87H[K[52;87H6,0-1[10C3%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  5 [m[36m **/[m[52;87H[K[52;87H5,1[12C2%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  4 [m[36m **             uses fork, exec, wait, and ignores signals[m[52;87H[K[52;87H4,1[12C2%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  3 [m[36m **             this one parses the command line into strings[m[52;87H[K[52;87H3,1[12C1%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  2 [m[36m **             first really useful version after prompting shell[m[52;87H[K[52;87H2,1[12C0%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  1 [m[36m/**  smsh1.c  small-shell version 1[m[52;87H[K[52;87H1,1[11CTop[1;5H[?25h[?25l[52;87H2,2[2;6H[?25h[?25l[52;87H3[3;6H[?25h[?25l[52;87H2[2;6H[?25h[?25l[52;87H1[1;6H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H1,2[11CTop[1;6H[?25h[?25l/[1;6H[K[2;5H**  smsh1.c  small-shell version [33m1[m[2;39H[K[3;5H **             first really useful version after prompting shell[4;5H **             this one parses the command line into strings[5;5H ** [12Cuses fork, exec, wait, and ignores signals[6;6H*[1m[37m[41m*/[m[7;5H[K[8;18H[33mio.h>[m[8;23H[K[9;15H[33mstdlib[10;15Hunistd[11;14H<signal.h>[m[12;5H[35m#include [m[33m"smsh.h"[m[13;5H[K[14;5H[35m#define DFL_PROMPT      [m[33m"> "[m[15;5H[K[16;5H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[17;11H[K[18;17H[36mnext_cmd(char *prompt, FILE *fp) - get next command[19;7H    char **splitline(char *str);           - parse a string[20;5H */[m[21;5H[K[22;18H[33mio.h>[m[22;23H[K[23;17H[33mdlib[24;14H<string.h>[m[25;5H[35m#include [m[33m"smsh.h"[m[26;5H[K[27;5H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[28;5H[36m/[m[28;7H[K[29;8H[36mpurpose: read next command line from fp[m[29;47H[K[30;8H[36mreturns: dynamically allocated string holding command line[31;9Herrors: NULL at EOF (not really an error)[32;10H       calls fatal from emalloc()[m[32;43H[K[33;7H[36m   notes: allocates space in BUFSIZ chunks.  [34;5H */[m[35;5H{[35;7H[K[36;7H[32mchar[m  *buf ;       [23C[36mhe buffer[m[37;13Hbufspace = [33m0[m;[22C[36mtotal size      [m[38;13Hpos = [33m0[m;[27C[36mcurrent position[m[39;7H[32mint[m   c;[30C[36m/* input char           */[m[40;7H[K[41;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);            [13C[36m/* prompt user  */[m[42;7H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[43;9H[K[44;9H[36m/* need space? */[m[44;26H[K[45;9H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m1 for \0   [m[46;11H[33mif[m ( bufspace == [33m0[m )    [10C[36m/* y: 1st time  */[m[47;11H  buf = emalloc([33mBUFSIZ[m);[47;45H[K[48;11H[33melse[m                              [36m/* or expand    */[m[49;11H  buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[49;49H[K[50;9H  bufspace += [33mBUFSIZ[m;[15C[36m/* update size  */[m[51;9H}[52;87H2,1[2;5H[?25h[?25l[2;5H[K[3;5H**  smsh1.c  small-shell version [33m1[m[3;39H[K[4;21Hfirst really useful version after prompting shell[5;21Hthis one parses the command line into strings[6;7H*  [11Cuses fork, exec, wait, and ignores signals[7;6H*[1m[37m[41m*/[m[8;5H[K[9;18H[33mio.h>[m[9;23H[K[10;15H[33mstdlib[11;15Hunistd[12;14H<signal.h>[m[13;5H[35m#include [m[33m"smsh.h"[m[14;5H[K[15;5H[35m#define DFL_PROMPT      [m[33m"> "[m[16;5H[K[17;5H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[18;11H[K[19;17H[36mnext_cmd(char *prompt, FILE *fp) - get next command[20;7H    char **splitline(char *str);           - parse a string[21;5H */[m[22;5H[K[23;18H[33mio.h>[m[23;23H[K[24;17H[33mdlib[25;14H<string.h>[m[26;5H[35m#include [m[33m"smsh.h"[m[27;5H[K[28;5H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[29;5H[36m/[m[29;7H[K[30;8H[36mpurpose: read next command line from fp[m[30;47H[K[31;8H[36mreturns: dynamically allocated string holding command line[32;9Herrors: NULL at EOF (not really an error)[33;10H       calls fatal from emalloc()[m[33;43H[K[34;7H[36m   notes: allocates space in BUFSIZ chunks.  [35;5H */[m[36;5H{[36;7H[K[37;7H[32mchar[m  *buf ;       [23C[36mhe buffer[m[38;13Hbufspace = [33m0[m;[22C[36mtotal size      [m[39;13Hpos = [33m0[m;[27C[36mcurrent position[m[40;7H[32mint[m   c;[30C[36m/* input char           */[m[41;7H[K[42;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);            [13C[36m/* prompt user  */[m[43;7H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[44;9H[K[45;9H[36m/* need space? */[m[45;26H[K[46;9H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m1 for \0   [m[47;11H[33mif[m ( bufspace == [33m0[m )    [10C[36m/* y: 1st time  */[m[48;11H  buf = emalloc([33mBUFSIZ[m);[48;45H[K[49;11H[33melse[m                              [36m/* or expand    */[m[50;11H  buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[50;49H[K[51;9H  bufspace += [33mBUFSIZ[m;[15C[36m/* update size  */[m[52;87H3[3;5H[?25h[?25l[52;87H2[2;5H[?25h[?25l[52;87H1[1;5H[?25h[52;1H[K[1;5H[?25l[52;87H1,1[11CTop[1;5H[?25h[?25l[52;1H2 fewer lines; before #5  2 seconds ago[52;87H[K[1;5H[36m/**  smsh1.c  small-shell version 1[2;5H **             first really useful version after prompting shell[3;5H **             this one parses the command line into strings[4;5H **             uses fork, exec, wait, and ignores signals[m[4;63H[K[5;5H[36m **/[m[5;21H[K[6;6H[K[7;5H[35m#include [m[33m<stdio.h>[m[8;5H[35m#include [m[33m<stdlib.h>[9;15Hunistd.h>[10;16Hignal[11;14H"smsh.h"[m[11;22H[K[12;5H[K[13;6H[35mdefine DFL_PROMPT      [m[33m"> "[m[15;5H[36m/* splitline.c - commmand reading and parsing functions for smsh[16;5H *    [17;5H *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[17;68H[K[18;11H[36mchar **splitline(char *str);           - parse a string[19;7H/[m[19;8H[K[20;5H[K[21;5H[35m#include [m[33m<stdio.h>[m[22;5H[35m#include [m[33m<stdlib.h>[23;17Hring.h>[24;14H"smsh.h"[m[24;22H[K[25;5H[K[26;5H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[27;5H[36m/*[28;5H * purpose: read next command line from fp[29;5H * returns: dynamically allocated string holding command line[30;8H errors: NULL at EOF (not really an error)[31;8H         calls fatal from emalloc()[m[31;43H[K[32;9H[36m notes: allocates space in BUFSIZ chunks.  [33;7H/[m[33;8H[K[34;5H{[34;6H[K[35;5H  [32mchar[m  *buf ;[26C[36m/* the buffer           */[m[36;5H  [32mint[m   bufspace = [33m0[m;[19C[36m/* total size           */[m[37;7H[32mint[m   pos = [33m0[m;[27C[36mcurrent position[m[38;13Hc;           [22C[36minput char[m[39;7H[K[40;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[17C        [36m/* prompt user[m[41;7H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[42;7H[K[43;7H  [36m/* need space? */[m[43;26H[K[44;9H[33mif[m( pos+[33m1[m >= bufspace ){[12C[36m/* 1 for \0     */[m[45;9H  [33mif[m ( bufspace == [33m0[m )[14C[36m/* y: 1st time  */[m[46;9H    buf = emalloc([33mBUFSIZ[m);[46;45H[K[47;11H[33melse[m                [17C[36mor expand  [m[48;20Hrealloc(buf,bufspace+[33mBUFSIZ[m);[49;11Hbufspace += [33mBUFSIZ[m;[18C[36mupdate size[m[50;9H}[50;13H[K[51;11H[K[52;87H1,2[11CTop[52;87H[K[52;87H1,2[11CTop[1;6H[?25h[?25l[52;89H3[1;7H[?25h[?25l[52;89H4[1;8H[?25h[?25l[52;1H[33m-- INSERT --[m[52;13H[K[52;87H1,4[11CTop[1;8H[?25h[?25l[1;8H[K[2;6H[36m smsh1.c  small-shell version 1[m[2;37H[K[3;21H[36mfirst really useful version after prompting shell[4;21Hthis one parses the command line into strings[5;8H             uses fork, exec, wait, and ignores signals[6;5H **/[m[7;5H[K[8;18H[33mio.h>[m[8;23H[K[9;15H[33mstdlib[10;15Hunistd[11;14H<signal.h>[m[12;5H[35m#include [m[33m"smsh.h"[m[13;5H[K[14;5H[35m#define DFL_PROMPT      [m[33m"> "[m[15;5H[K[16;5H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[17;11H[K[18;17H[36mnext_cmd(char *prompt, FILE *fp) - get next command[19;7H    char **splitline(char *str);           - parse a string[20;5H */[m[21;5H[K[22;18H[33mio.h>[m[22;23H[K[23;17H[33mdlib[24;14H<string.h>[m[25;5H[35m#include [m[33m"smsh.h"[m[26;5H[K[27;5H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[28;5H[36m/[m[28;7H[K[29;8H[36mpurpose: read next command line from fp[m[29;47H[K[30;8H[36mreturns: dynamically allocated string holding command line[31;9Herrors: NULL at EOF (not really an error)[32;10H       calls fatal from emalloc()[m[32;43H[K[33;7H[36m   notes: allocates space in BUFSIZ chunks.  [34;5H */[m[35;5H{[35;7H[K[36;7H[32mchar[m  *buf ;       [23C[36mhe buffer[m[37;13Hbufspace = [33m0[m;[22C[36mtotal size      [m[38;13Hpos = [33m0[m;[27C[36mcurrent position[m[39;7H[32mint[m   c;[30C[36m/* input char           */[m[40;7H[K[41;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);            [13C[36m/* prompt user  */[m[42;7H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[43;9H[K[44;9H[36m/* need space? */[m[44;26H[K[45;9H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m1 for \0   [m[46;11H[33mif[m ( bufspace == [33m0[m )    [10C[36m/* y: 1st time  */[m[47;11H  buf = emalloc([33mBUFSIZ[m);[47;45H[K[48;11H[33melse[m                              [36m/* or expand    */[m[49;11H  buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[49;49H[K[50;9H  bufspace += [33mBUFSIZ[m;[15C[36m/* update size  */[m[51;9H}[52;87H2,1[2;5H[?25h[?25l[52;87H1[1;5H[?25h[?25l[52;89H2[1;6H[?25h[?25l[52;89H3[1;7H[?25h[?25l[52;89H4[1;8H[?25h[?25l[36m [m[52;89H5[1;9H[?25h[?25l[36me[m[52;89H6[1;10H[?25h[?25l[36mx[m[52;89H7[1;11H[?25h[?25l[36m [m[52;89H8[1;12H[?25h[?25l[36m9[m[52;89H9[1;13H[?25h[?25l[36m.[m[52;89H10[1;14H[?25h[?25l[36m4[m[52;90H1[1;15H[?25h[?25l[36m [m[52;90H2[1;16H[?25h[?25l[36m-[m[52;90H3[1;17H[?25h[?25l[36m [m[52;90H4[1;18H[?25h[?25l[36mm[m[52;90H5[1;19H[?25h[?25l[36mo[m[52;90H6[1;20H[?25h[?25l[36md[m[52;90H7[1;21H[?25h[?25l[36mi[m[52;90H8[1;22H[?25h[?25l[36mf[m[52;90H9[1;23H[?25h[?25l[36mt[m[52;89H20[1;24H[?25h[?25l[1;23H[K[52;89H19[1;23H[?25h[?25l[36my[m[52;89H20[1;24H[?25h[?25l[36m [m[52;90H1[1;25H[?25h[?25l[36me[m[52;90H2[1;26H[?25h[?25l[36mx[m[52;90H3[1;27H[?25h[?25l[1;26H[K[52;90H2[1;26H[?25h[?25l[1;25H[K[52;90H1[1;25H[?25h[?25l[36ms[m[52;90H2[1;26H[?25h[?25l[36mh[m[52;90H3[1;27H[?25h[?25l[36ms[m[52;90H4[1;28H[?25h[?25l[36mh[m[52;90H5[1;29H[?25h[?25l[36m1[m[52;90H6[1;30H[?25h[?25l[36m.[m[52;90H7[1;31H[?25h[?25l[36mc[m[52;90H8[1;32H[?25h[?25l[36m [m[52;90H9[1;33H[?25h[?25l[36mt[m[52;89H30[1;34H[?25h[?25l[36mo[m[52;90H1[1;35H[?25h[?25l[36m [m[52;90H2[1;36H[?25h[?25l[36ma[m[52;90H3[1;37H[?25h[?25l[36mc[m[52;90H4[1;38H[?25h[?25l[36mc[m[52;90H5[1;39H[?25h[?25l[36me[m[52;90H6[1;40H[?25h[?25l[36mp[m[52;90H7[1;41H[?25h[?25l[36mt[m[52;90H8[1;42H[?25h[?25l[36m [m[52;90H9[1;43H[?25h[?25l[36mt[m[52;89H40[1;44H[?25h[?25l[36mw[m[52;90H1[1;45H[?25h[?25l[36mo[m[52;90H2[1;46H[?25h[?25l[36m [m[52;90H3[1;47H[?25h[?25l[1;46H[K[52;90H2[1;46H[?25h[?25l[1;45H[K[52;90H1[1;45H[?25h[?25l[1;44H[K[52;90H0[1;44H[?25h[?25l[1;43H[K[52;89H39[1;43H[?25h[?25l[36mm[m[52;89H40[1;44H[?25h[?25l[36mu[m[52;90H1[1;45H[?25h[?25l[36mt[m[52;90H2[1;46H[?25h[?25l[36mi[m[52;90H3[1;47H[?25h[?25l[1;46H[K[52;90H2[1;46H[?25h[?25l[1;45H[K[52;90H1[1;45H[?25h[?25l[36ml[m[52;90H2[1;46H[?25h[?25l[36mt[m[52;90H3[1;47H[?25h[?25l[36mi[m[52;90H4[1;48H[?25h[?25l[36mp[m[52;90H5[1;49H[?25h[?25l[36ml[m[52;90H6[1;50H[?25h[?25l[36me[m[52;90H7[1;51H[?25h[?25l[36m [m[52;90H8[1;52H[?25h[?25l[36ma[m[52;90H9[1;53H[?25h[?25l[36mr[m[52;89H50[1;54H[?25h[?25l[36mg[m[52;90H1[1;55H[?25h[?25l[36mu[m[52;90H2[1;56H[?25h[?25l[36mm[m[52;90H3[1;57H[?25h[?25l[36me[m[52;90H4[1;58H[?25h[?25l[36mn[m[52;90H5[1;59H[?25h[?25l[36mt[m[52;90H6[1;60H[?25h[?25l[36ms[m[52;90H7[1;61H[?25h[?25l[52;87H2,33[2;37H[?25h[?25l[52;87H3,46-57[3;61H[?25h[?25l[52;87H4[4;61H[?25h[?25l[52;87H5[5;61H[?25h[?25l[52;87H6,5    [6;9H[?25h[?25l[52;87H7,1[7;5H[?25h[?25l[52;87H8,19[8;23H[?25h[?25l[52;87H9,20[9;24H[?25h[?25l[52;87H10,20[10;24H[?25h[52;1H[K[10;23H[?25l[52;87H10,19[9CTop[10;23H[?25h[?25l[52;87H[K[52;1H:[?2004h[?25hw[?25l[?25h[?25l"sm2in.c" 198L, 4378C written[57C10,19[9CTop[52;87H[K[52;87H10,19[9CTop[10;23H[?25h[?25l[52;88H1[11;23H[?25h[?25l[52;88H2,17[12;21H[?25h[?25l[52;88H3,0-1[13;5H[?25h[?25l[52;88H4,19-24[14;28H[?25h[?25l[52;88H5,0-1  [15;5H[?25h[?25l[52;88H6,19 [16;23H[?25h[?25l[52;88H7,6 [17;10H[?25h[?25l[52;88H8,19[18;23H[?25h[?25l[52;88H9[19;23H[?25h[?25l[52;87H20,3 [20;7H[?25h[?25l[52;88H1,0-1[21;5H[?25h[?25l[52;88H2,18 [22;22H[?25h[?25l[52;88H3,19[23;23H[?25h[?25l[52;88H4[24;23H[?25h[?25l[52;88H5,17[25;21H[?25h[?25l[52;88H6,0-1[26;5H[?25h[?25l[52;88H7,19 [27;23H[?25h[?25l[52;88H8,2 [28;6H[?25h[?25l[52;88H9,19[29;23H[?25h[?25l[52;87H30[30;23H[?25h[?25l[52;88H1[31;23H[?25h[?25l[52;88H2[32;23H[?25h[?25l[52;88H3[33;23H[?25h[?25l[52;88H4,3 [34;7H[?25h[?25l[52;88H5,1[35;5H[?25h[?25l[52;88H6,16-24[36;28H[?25h[?25l[52;91H5-16[36;20H[?25h[?25l[52;91H4-15[36;19H[?25h[?25l[52;91H3-14[36;18H[?25h[?25l[52;91H2-13[36;17H[?25h[?25l[52;1H[33m-- INSERT --[m[52;13H[K[52;87H36,12-13      Top[36;17H[?25h[?25l  ;[25C        [36m/* the buffer           */[m[52;91H3-14[36;18H[?25h[?25l= ;[52;91H4-15[36;19H[?25h[?25l  ;[52;91H5-16[36;20H[?25h[?25lN ;[52;91H6-17[36;21H[?25h[?25lU ;[52;91H7-18[36;22H[?25h[?25lL ;[52;91H8-19[36;23H[?25h[?25l[33mNULL[m ;[52;91H9-20[36;24H[?25h[?25l[52;88H7,18[37;24H[?25h[?25l[52;88H6,19[36;24H[?25h[?25l; [?25h[?25l[52;88H7,18[37;24H[?25h[?25l[52;88H8,15-17[38;21H[?25h[?25l[52;88H9,10[39;21H[?25h[?25l[52;87H40,1    [40;5H[?25h[?25l[41;7H[K[42;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);            [13C[36m/* prompt user  */[m[43;7H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[44;9H[K[45;9H[36m/* need space? */[m[45;26H[K[46;9H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m1 for \0   [m[47;11H[33mif[m ( bufspace == [33m0[m )    [10C[36m/* y: 1st time  */[m[48;11H  buf = emalloc([33mBUFSIZ[m);[48;45H[K[49;11H[33melse[m                              [36m/* or expand    */[m[50;11H  buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[50;49H[K[51;9H  bufspace += [33mBUFSIZ[m;[15C[36m/* update size  */[m[52;88H1[41;5H[?25h[?25l[42;7H[K[43;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);            [13C[36m/* prompt user  */[m[44;7H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[45;9H[K[46;9H[36m/* need space? */[m[46;26H[K[47;9H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m1 for \0   [m[48;11H[33mif[m ( bufspace == [33m0[m )    [10C[36m/* y: 1st time  */[m[49;11H  buf = emalloc([33mBUFSIZ[m);[49;45H[K[50;11H[33melse[m                              [36m/* or expand    */[m[51;11H  buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[51;49H[K[52;88H2[42;5H[?25h[?25l[43;7H[K[44;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);            [13C[36m/* prompt user  */[m[45;7H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[46;9H[K[47;9H[36m/* need space? */[m[47;26H[K[48;9H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m1 for \0   [m[49;11H[33mif[m ( bufspace == [33m0[m )    [10C[36m/* y: 1st time  */[m[50;11H  buf = emalloc([33mBUFSIZ[m);[50;45H[K[51;11H[33melse[m                              [36m/* or expand    */[m[52;88H3[43;5H[?25h[?25l[52;88H2[42;5H[?25h[?25l[52;88H1[41;5H[?25h[?25l[52;90H2-9[41;13H[?25h[?25l[52;90H1  [41;5H[?25h[?25l[43;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[25C[36m/* prompt user  */[m[44;7H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[44;53H[K[45;7H[K[46;9H[36m/* need space? */[m[47;9H[33mif[m( pos+[33m1[m >= bufspace ){[12C[36m/* 1 for \0     */[m[48;9H  [33mif[m ( bufspace == [33m0[m )  [15C[36my: 1st time[m[49;11H  buf = emalloc([33mBUFSIZ[m);[49;45H[K[50;11H[33melse[m                    [10C[36m/* or expand    */[m[51;11H  buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[51;49H[K[52;88H0[40;5H[?25h[?25l[43;7H[K[44;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);            [13C[36m/* prompt user  */[m[45;7H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[46;9H[K[47;9H[36m/* need space? */[m[47;26H[K[48;9H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m1 for \0   [m[49;11H[33mif[m ( bufspace == [33m0[m )    [10C[36m/* y: 1st time  */[m[50;11H  buf = emalloc([33mBUFSIZ[m);[50;45H[K[51;11H[33melse[m                              [36m/* or expand    */[m[52;88H1[41;5H[?25h[?25l[52;90H2-9[41;13H[?25h[?25l[52;90H1  [41;5H[?25h[?25l[52;90H2-9[41;13H[?25h[?25l[52;90H1  [41;5H[?25h[?25l[43;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[25C[36m/* prompt user  */[m[44;7H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[44;53H[K[45;7H[K[46;9H[36m/* need space? */[m[47;9H[33mif[m( pos+[33m1[m >= bufspace ){[12C[36m/* 1 for \0     */[m[48;9H  [33mif[m ( bufspace == [33m0[m )  [15C[36my: 1st time[m[49;11H  buf = emalloc([33mBUFSIZ[m);[49;45H[K[50;11H[33melse[m                    [10C[36m/* or expand    */[m[51;11H  buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[51;49H[K[52;88H0[40;5H[?25h[?25l[42;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[25C[36m/* prompt user  */[m[43;7H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[43;53H[K[44;7H[K[45;9H[36m/* need space? */[m[46;9H[33mif[m( pos+[33m1[m >= bufspace ){[12C[36m/* 1 for \0     */[m[47;9H  [33mif[m ( bufspace == [33m0[m )  [15C[36my: 1st time[m[48;11H  buf = emalloc([33mBUFSIZ[m);[48;45H[K[49;11H[33melse[m                    [10C[36m/* or expand    */[m[50;11H  buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[50;49H[K[51;11Hbufspace += [33mBUFSIZ[m;               [36m/* update size  */[m[52;87H39,30-67[39;71H[?25h[?25l:[52;91H1-68[39;72H[?25h[?25ls[52;91H2-69[39;73H[?25h[?25le[52;91H3-70[39;74H[?25h[?25lt[52;91H4-71[39;75H[?25h[?25l[52;91H5-72[39;76H[?25h[?25l[52;91H4-71[39;75H[?25h[?25l[39;74H[K[52;91H3-70[39;74H[?25h[?25l[39;73H[K[52;91H2-69[39;73H[?25h[52;1H[K[39;72H[?25l[52;87H39,31-68      Top[39;72H[?25h[?25l[52;91H0-67[39;71H[?25h[?25l[52;1H2 more lines; before #11  11 seconds ago[52;87H[K[39;71H[K[42;7H[K[43;7H[K[44;7Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[25C[36m/* prompt user  */[m[45;7H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[46;9H[K[47;9H[36m/* need space? */[m[47;26H[K[48;9H[33mif[m( pos+[33m1[m >= bufspace ){  [10C[36m/* 1 for \0     */[m[49;11H[33mif[m ( bufspace == [33m0[m )[17C[36my: 1st time[m[50;20Hmalloc([33mBUFSIZ[m);[50;35H[K[51;11H[33melse[m               [18C[36mor expand  [m[52;87H41,0-1[8CTop[52;87H[K[52;87H41,0-1[8CTop[41;5H[?25h[?25l[?25h[?25l[52;1H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"sm2in.c" 201L, 4387C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi sm2in.c ls[Kvi sm2in.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"sm2in.c" 201L, 4387C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments
  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string
 */[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<string.h>[m
[35m#include [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{
  [32mchar[m  *buf = [33mNULL[m;[28C[36m/* the buffer           */[m
  [32mint[m   bufspace = [33m0[m;[19C[36m/* total size           */[m
  [32mint[m   pos = [33m0[m;[24C[36m/* current position     */[m
  [32mint[m   c;[30C[36m/* input char           */[m[44;3Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[25C[36m/* prompt user  */[m
  [33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[47;5H[36m/* need space? */[m
    [33mif[m( pos+[33m1[m >= bufspace ){[12C[36m/* 1 for \0     */[m[49;7H[33mif[m ( bufspace == [33m0[m )[14C[36m/* y: 1st time  */[m[50;9Hbuf = emalloc([33mBUFSIZ[m);[51;7H[33melse[m[30C[36m/* or expand    */[m[52;87H1,1[11CTop[1;1H[?25h[?25l[52;87H2[2;1H[?25h[?25l[52;87H3[3;1H[?25h[?25l[52;87H4[4;1H[?25h[?25l[52;87H5[5;1H[?25h[?25l[52;87H6[6;1H[?25h[?25l[52;87H7,0-1[7;1H[?25h[?25l[52;87H8,1  [8;1H[?25h[?25l[52;87H9[9;1H[?25h[?25l[52;87H10,1[10;1H[?25h[?25l[52;88H1[11;1H[?25h[?25l[52;88H2[12;1H[?25h[?25l[52;88H3,0-1[13;1H[?25h[?25l[52;88H4,1  [14;1H[?25h[?25l[52;88H5,0-1[15;1H[?25h[?25l[52;88H6,1  [16;1H[?25h[?25l[52;88H7[17;1H[?25h[?25l[52;88H8[18;1H[?25h[?25l[52;88H9[19;1H[?25h[?25l[52;87H20[20;1H[?25h[?25l[52;88H1,0-1[21;1H[?25h[?25l[52;88H2,1  [22;1H[?25h[?25l[52;88H3[23;1H[?25h[?25l[52;88H4[24;1H[?25h[?25l[52;88H5[25;1H[?25h[?25l[52;88H6,0-1[26;1H[?25h[?25l[52;88H7,1  [27;1H[?25h[?25l[52;88H8[28;1H[?25h[?25l[52;88H9[29;1H[?25h[?25l[52;87H30[30;1H[?25h[?25l[52;88H1[31;1H[?25h[?25l[52;88H2[32;1H[?25h[?25l[52;88H3[33;1H[?25h[?25l[52;88H4[34;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H6[36;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H9[39;1H[?25h[?25l[52;87H40,0-1[40;1H[?25h[?25l[52;88H1[41;1H[?25h[?25l[52;88H2[42;1H[?25h[?25l[52;88H1[41;1H[?25h[?25l[52;88H0[40;1H[?25h[?25l[52;87H39,1  [39;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H6[36;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H4[34;1H[?25h[?25l[52;88H3[33;1H[?25h[?25l[52;88H2[32;1H[?25h[?25l[52;88H1[31;1H[?25h[?25l[52;88H0[30;1H[?25h[?25l[52;87H29[29;1H[?25h[?25l[52;88H8[28;1H[?25h[?25l[52;88H7[27;1H[?25h[?25l[52;88H6,0-1[26;1H[?25h[?25l[52;88H5,1  [25;1H[?25h[?25l[52;88H4[24;1H[?25h[?25l[52;88H5[25;1H[?25h[?25l[52;88H6,0-1[26;1H[?25h[?25l[52;88H7,1  [27;1H[?25h[?25l[52;88H8[28;1H[?25h[?25l[52;88H9[29;1H[?25h[?25l[52;87H30[30;1H[?25h[?25l[52;88H1[31;1H[?25h[?25l[52;88H2[32;1H[?25h[?25l[52;88H3[33;1H[?25h[?25l[52;88H4[34;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H6[36;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H9[39;1H[?25h[?25l[52;87H40,0-1[40;1H[?25h[?25l[52;88H1[41;1H[?25h[?25l[52;88H0[40;1H[?25h[?25l[52;87H39,1  [39;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H6[36;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H4[34;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H4[34;1H[?25h[?25l[52;88H3[33;1H[?25h[?25l[52;88H2[32;1H[?25h[?25l[52;88H1[31;1H[?25h[?25l[52;88H0[30;1H[?25h[?25l[52;87H29[29;1H[?25h[?25l[52;88H8[28;1H[?25h[?25l[52;88H7[27;1H[?25h[?25l[52;88H8[28;1H[?25h[?25l[52;88H9[29;1H[?25h[?25l[52;87H30[30;1H[?25h[?25l[52;88H1[31;1H[?25h[?25l[52;88H2[32;1H[?25h[?25l[52;88H3[33;1H[?25h[?25l[52;88H4[34;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H6[36;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H9[39;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;90H2[37;2H[?25h[?25l[52;88H8[38;2H[?25h[?25l[52;88H9[39;2H[?25h[?25l[52;87H40,0-1[40;1H[?25h[?25l[52;88H1[41;1H[?25h[?25l[52;1H[33m-- INSERT --[m[52;13H[K[52;87H41,1[10CTop[41;1H[?25h[?25l[52;90H2-9[41;9H[?25h[?25l[52;90H1  [41;1H[?25h[?25l[52;88H0[40;1H[?25h[?25l[52;87H39[39;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H6[36;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H6[36;1H[?25h[?25l [32mchar[m [?25h[?25l         [32mchar[m   *buf = [33mNULL[m;[20C        [36m/* the buffer           */[m[52;90H2-9[36;9H[?25h[?25l[52;88H7,7[37;9H[?25h[?25l[52;90H6  [37;6H[?25h[?25l[52;90H5[37;5H[?25h[?25l[52;90H4[37;4H[?25h[?25l[52;90H3[37;3H[?25h[?25l[52;90H2[37;2H[?25h[?25l[52;90H1[37;1H[?25h[?25l          [32mint[m   bufspace = [33m0[m;[11C        [36m/* total size           */[m[52;90H2-9[37;9H[?25h[?25l [32mint[m [?25h[?25l[52;90H1  [37;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l          [32mint[m   pos = [33m0[m;[16C        [36m/* current position     */[m[52;90H2-9[38;9H[?25h[?25l [32mint[m [?25h[?25l[52;88H9,7[39;9H[?25h[?25l[52;90H6  [39;6H[?25h[?25l[52;90H5[39;5H[?25h[?25l[52;90H4[39;4H[?25h[?25l[52;90H3[39;3H[?25h[?25l[52;90H2[39;2H[?25h[?25l        [32mint[m    c;[22C        [36m/* input char           */[m[52;90H3-9[39;9H[?25h[?25l[52;87H40,1  [40;1H[?25h[?25l[52;90H2-9[40;9H[?25h[?25l[52;88H1,1  [41;1H[?25h[?25l[52;90H2-9[41;9H[?25h[?25l/[52;90H3-10[41;10H[?25h[?25l[36m//[m[52;90H4-11[41;11H[?25h[?25l[36mn[m[52;90H5-12[41;12H[?25h[?25l[36me[m[52;90H6-13[41;13H[?25h[?25l[36mw[m[52;90H7-14[41;14H[?25h[?25l[36m [m[52;90H8-15[41;15H[?25h[?25l[36mi[m[52;90H9-16[41;16H[?25h[?25l[36mn[m[52;90H10-17[41;17H[?25h[?25l[41;16H[K[52;90H9-16 [41;16H[?25h[?25l[41;15H[K[52;90H8-15[41;15H[?25h[?25l[36mv[m[52;90H9-16[41;16H[?25h[?25l[36ma[m[52;90H10-17[41;17H[?25h[?25l[36mr[m[52;91H1-18[41;18H[?25h[?25l[36mu[m[52;91H2-19[41;19H[?25h[?25l[36mi[m[52;91H3-20[41;20H[?25h[?25l[36ma[m[52;91H4-21[41;21H[?25h[?25l[41;20H[K[52;91H3-20[41;20H[?25h[?25l[41;19H[K[52;91H2-19[41;19H[?25h[?25l[41;18H[K[52;91H1-18[41;18H[?25h[?25l[36mi[m[52;91H2-19[41;19H[?25h[?25l[36ma[m[52;91H3-20[41;20H[?25h[?25l[36mb[m[52;91H4-21[41;21H[?25h[?25l[36ml[m[52;91H5-22[41;22H[?25h[?25l[36me[m[52;91H6-23[41;23H[?25h[?25l[36m [m[52;91H7-24[41;24H[?25h[?25l[36mt[m[52;91H8-25[41;25H[?25h[?25l[36mo[m[52;91H9-26[41;26H[?25h[?25l[36m [m[52;90H20-27[41;27H[?25h[?25l[36ms[m[52;91H1-28[41;28H[?25h[?25l[36mt[m[52;91H2-29[41;29H[?25h[?25l[36mo[m[52;91H3-30[41;30H[?25h[?25l[36mr[m[52;91H4-31[41;31H[?25h[?25l[36me[m[52;91H5-32[41;32H[?25h[?25l[36m [m[52;91H6-33[41;33H[?25h[?25l[36mn[m[52;91H7-34[41;34H[?25h[?25l[36mu[m[52;91H8-35[41;35H[?25h[?25l[36mm[m[52;91H9-36[41;36H[?25h[?25l[36mb[m[52;90H30-37[41;37H[?25h[?25l[36me[m[52;91H1-38[41;38H[?25h[?25l[36mr[m[52;91H2-39[41;39H[?25h[?25l[36m [m[52;91H3-40[41;40H[?25h[?25l[36mo[m[52;91H4-41[41;41H[?25h[?25l[36mf[m[52;91H5-42[41;42H[?25h[?25l[36m [m[52;91H6-43[41;43H[?25h[?25l[36mc[m[52;91H7-44[41;44H[?25h[?25l[36mo[m[52;91H8-45[41;45H[?25h[?25l[36mm[m[52;91H9-46[41;46H[?25h[?25l[36mm[m[52;90H40-47[41;47H[?25h[?25l[36ma[m[52;91H1-48[41;48H[?25h[?25l[36mn[m[52;91H2-49[41;49H[?25h[?25l[36md[m[52;91H3-50[41;50H[?25h[?25l[36ms[m[52;91H4-51[41;51H[?25h[?25l[36m [m[52;91H5-52[41;52H[?25h[?25l[36ma[m[52;91H6-53[41;53H[?25h[?25l[36mn[m[52;91H7-54[41;54H[?25h[?25l[36md[m[52;91H8-55[41;55H[?25h[?25l[36m [m[52;91H9-56[41;56H[?25h[?25l[41;55H[K[52;91H8-55[41;55H[?25h[?25l[41;54H[K[52;91H7-54[41;54H[?25h[?25l[41;53H[K[52;91H6-53[41;53H[?25h[?25l[41;52H[K[52;91H5-52[41;52H[?25h[?25l[36ma[m[52;91H6-53[41;53H[?25h[?25l[36mn[m[52;91H7-54[41;54H[?25h[?25l[36md[m[52;91H8-55[41;55H[?25h[?25l[36m [m[52;91H9-56[41;56H[?25h[?25l[36ml[m[52;90H50-57[41;57H[?25h[?25l[36mi[m[52;91H1-58[41;58H[?25h[?25l[36ms[m[52;91H2-59[41;59H[?25h[?25l[36mt[m[52;91H3-60[41;60H[?25h[?25l[36m [m[52;91H4-61[41;61H[?25h[?25l[36mt[m[52;91H5-62[41;62H[?25h[?25l[36mo[m[52;91H6-63[41;63H[?25h[?25l[36m [m[52;91H7-64[41;64H[?25h[?25l[52;91H6-63[41;63H[?25h[?25l[52;91H5-62[41;62H[?25h[?25l[52;91H4-61[41;61H[?25h[?25l[52;91H3-60[41;60H[?25h[?25l[52;91H4-61[41;61H[?25h[?25l[52;91H5-62[41;62H[?25h[?25l[52;91H6-63[41;63H[?25h[?25l[52;91H7-64[41;64H[?25h[?25l[36ms[m[52;91H8-65[41;65H[?25h[?25l[36mt[m[52;91H9-66[41;66H[?25h[?25l[36mo[m[52;90H60-67[41;67H[?25h[?25l[36mr[m[52;91H1-68[41;68H[?25h[?25l[36me[m[52;91H2-69[41;69H[?25h[?25l[36m [m[52;91H3-70[41;70H[?25h[?25l[36mt[m[52;91H4-71[41;71H[?25h[?25l[36mh[m[52;91H5-72[41;72H[?25h[?25l[36me[m[52;91H6-73[41;73H[?25h[?25l[36m [m[52;91H7-74[41;74H[?25h[?25l[36mc[m[52;91H8-75[41;75H[?25h[?25l[36mo[m[52;91H9-76[41;76H[?25h[?25l[36mm[m[52;90H70-77[41;77H[?25h[?25l[36ma[m[52;91H1-78[41;78H[?25h[?25l[41;77H[K[52;91H0-77[41;77H[?25h[?25l[36mm[m[52;91H1-78[41;78H[?25h[?25l[36ma[m[52;91H2-79[41;79H[?25h[?25l[36mn[m[52;91H3-80[41;80H[?25h[?25l[36md[m[52;91H4-81[41;81H[?25h[?25l[36ms[m[52;91H5-82[41;82H[?25h[?25l[52;88H2,1    [42;1H[?25h[?25l[52;90H2-9[42;9H[?25h[?25l[43;51r[43;1H[L[1;52r[52;87H[K[52;87H43,1[10CTop[43;1H[?25h[?25l[52;88H2[42;1H[?25h[?25l[52;90H2-9[42;9H[?25h[?25li[52;90H3-10[42;10H[?25h[?25ln[52;90H4-11[42;11H[?25h[?25l[32mint[m[52;90H5-12[42;12H[?25h[?25l[52;90H6-13[42;13H[?25h[?25lc[52;90H7-14[42;14H[?25h[?25lo[52;90H8-15[42;15H[?25h[?25lm[52;90H9-16[42;16H[?25h[?25lm[52;90H10-17[42;17H[?25h[?25la[52;91H1-18[42;18H[?25h[?25ln[52;91H2-19[42;19H[?25h[?25ld[52;91H3-20[42;20H[?25h[?25l[1m[37m[41m)[m[52;91H4-21[42;21H[?25h[?25l  [52;91H3-20[42;20H[?25h[?25l_[52;91H4-21[42;21H[?25h[?25lc[52;91H5-22[42;22H[?25h[?25lo[52;91H6-23[42;23H[?25h[?25lu[52;91H7-24[42;24H[?25h[?25ln[52;91H8-25[42;25H[?25h[?25lt[52;91H9-26[42;26H[?25h[?25l[52;90H20-27[42;27H[?25h[?25l=[52;91H1-28[42;28H[?25h[?25l[52;91H2-29[42;29H[?25h[?25l[33m0[m[52;91H3-30[42;30H[?25h[?25l;[52;91H4-31[42;31H[?25h[?25l[43;51r[43;1H[L[1;52r[52;87H[K[52;87H43,1[10CTop[43;1H[?25h[?25li[52;90H2[43;2H[?25h[?25l [52;90H1[43;1H[?25h[?25l[52;90H2-9[43;9H[?25h[?25li[52;90H3-10[43;10H[?25h[?25ln[52;90H4-11[43;11H[?25h[?25l[32mint[m[52;90H5-12[43;12H[?25h[?25l[52;90H6-13[43;13H[?25h[?25l*[52;90H7-14[43;14H[?25h[?25l*[52;90H8-15[43;15H[?25h[?25l*[52;90H9-16[43;16H[?25h[?25l [52;90H8-15[43;15H[?25h[?25l [52;90H7-14[43;14H[?25h[?25l [52;90H6-13[43;13H[?25h[?25l[52;90H5-12[43;12H[?25h[?25l*[52;90H6-13[43;13H[?25h[?25l*[52;90H7-14[43;14H[?25h[?25l[52;90H8-15[43;15H[?25h[?25l[52;90H7-14[43;14H[?25h[?25l [52;90H6-13[43;13H[?25h[?25l [52;90H5-12[43;12H[?25h[?25lin [52;90H4-11[43;11H[?25h[?25l [52;90H3-10[43;10H[?25h[?25l [52;90H2-9 [43;9H[?25h[?25lc[52;90H3-10[43;10H[?25h[?25lh[52;90H4-11[43;11H[?25h[?25la[52;90H5-12[43;12H[?25h[?25l[32mchar[m[52;90H6-13[43;13H[?25h[?25l*[52;90H7-14[43;14H[?25h[?25l*[52;90H8-15[43;15H[?25h[?25l[52;90H9-16[43;16H[?25h[?25lc[52;90H10-17[43;17H[?25h[?25lo[52;91H1-18[43;18H[?25h[?25lm[52;91H2-19[43;19H[?25h[?25lm[52;91H3-20[43;20H[?25h[?25la[52;91H4-21[43;21H[?25h[?25ln[52;91H5-22[43;22H[?25h[?25ld[52;91H6-23[43;23H[?25h[?25ls[52;91H7-24[43;24H[?25h[?25l[52;91H8-25[43;25H[?25h[?25l=[52;91H9-26[43;26H[?25h[?25l[52;90H20-27[43;27H[?25h[?25lN[52;91H1-28[43;28H[?25h[?25lU[52;91H2-29[43;29H[?25h[?25lL[52;91H3-30[43;30H[?25h[?25l[33mNULL[m[52;91H4-31[43;31H[?25h[?25l;[52;91H5-32[43;32H[?25h[?25l[52;88H4,1    [44;1H[?25h[?25l[52;88H3,25-32[43;32H[?25h[?25l[52;88H2,24-31[42;31H[?25h[?25l[52;88H1,25-32[41;32H[?25h[52;1H[K[41;31H[?25l[52;87H41,24-31      Top[41;31H[?25h[?25l[52;91H5-32[41;32H[?25h[?25l[52;91H6-33[41;33H[?25h[?25l[52;91H7-34[41;34H[?25h[?25l[52;91H8-35[41;35H[?25h[?25l[52;91H9-36[41;36H[?25h[?25l[52;90H30-37[41;37H[?25h[?25l[52;91H1-38[41;38H[?25h[?25l[52;91H2-39[41;39H[?25h[?25l[52;91H3-40[41;40H[?25h[?25l[52;91H4-41[41;41H[?25h[?25l[52;91H5-42[41;42H[?25h[?25l[52;91H6-43[41;43H[?25h[?25l[52;91H7-44[41;44H[?25h[?25l[52;91H8-45[41;45H[?25h[?25l[52;91H9-46[41;46H[?25h[?25l[52;90H40-47[41;47H[?25h[?25l[52;91H1-48[41;48H[?25h[?25l[52;91H2-49[41;49H[?25h[?25l[52;91H3-50[41;50H[?25h[?25l[52;91H4-51[41;51H[?25h[?25l[52;91H5-52[41;52H[?25h[?25l[52;91H6-53[41;53H[?25h[?25l[52;91H7-54[41;54H[?25h[?25l[52;91H8-55[41;55H[?25h[?25l[52;91H9-56[41;56H[?25h[?25l[52;90H50-57[41;57H[?25h[?25l[52;90H49-56[41;56H[?25h[?25l[36mist to store the commands[m[41;81H[K[41;56H[?25h[?25l[36mst to store the commands[m[41;80H[K[41;56H[?25h[?25l[36mt to store the commands[m[41;79H[K[41;56H[?25h[?25l[36m to store the commands[m[41;78H[K[41;56H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H41,50-57      Top[41;57H[?25h[?25l[36mrto store the commands[m[52;91H1-58[41;58H[?25h[?25l[36mrto store the commands[m[52;91H2-59[41;59H[?25h[?25l[36mato store the commands[m[52;91H3-60[41;60H[?25h[?25l[36mto store the commands[m[41;80H[K[52;91H2-59[41;59H[?25h[?25l[36mto store the commands[m[41;79H[K[52;91H1-58[41;58H[?25h[?25l[36mto store the commands[m[41;78H[K[52;91H0-57[41;57H[?25h[?25l[36mto store the commands[m[41;77H[K[52;90H49-56[41;56H[?25h[?25l[36mato store the commands[m[52;90H50-57[41;57H[?25h[?25l[36mrto store the commands[m[52;91H1-58[41;58H[?25h[?25l[36mrto store the commands[m[52;91H2-59[41;59H[?25h[?25l[36mato store the commands[m[52;91H3-60[41;60H[?25h[?25l[36myto store the commands[m[52;91H4-61[41;61H[?25h[?25l[36m to store the commands[m[52;91H5-62[41;62H[?25h[?25l[36moto store the commands[m[52;91H6-63[41;63H[?25h[?25l[36mrto store the commands[m[52;91H7-64[41;64H[?25h[?25l[36m to store the commands[m[52;91H8-65[41;65H[?25h[?25l[36mto store the commands[m[41;85H[K[52;91H7-64[41;64H[?25h[?25l[36mto store the commands[m[41;84H[K[52;91H6-63[41;63H[?25h[?25l[36mfto store the commands[m[52;91H7-64[41;64H[?25h[?25l[36m to store the commands[m[52;91H8-65[41;65H[?25h[?25l[36mpto store the commands[m[52;91H9-66[41;66H[?25h[?25l[36moto store the commands[m[52;90H60-67[41;67H[?25h[?25l[36mito store the commands[m[52;91H1-68[41;68H[?25h[?25l[36mnto store the commands[m[52;91H2-69[41;69H[?25h[?25l[1C[36mto store the commands[m[52;91H3-70[41;70H[?25h[?25l[36meto store the commands[m[52;91H4-71[41;71H[?25h[?25l[36mrto store the commands[m[52;91H5-72[41;72H[?25h[?25l[36m to store the commands[m[52;91H6-73[41;73H[?25h[?25l[36m(to store the commands[m[52;91H7-74[41;74H[?25h[?25l[36mdto store the commands[m[52;91H8-75[41;75H[?25h[?25l[36moto store the commands[m[52;91H9-76[41;76H[?25h[?25l[36muto store the commands[m[52;90H70-77[41;77H[?25h[?25l[36mbto store the commands[m[52;91H1-78[41;78H[?25h[?25l[36mlto store the commands[m[52;91H2-79[41;79H[?25h[?25l[36meto store the commands[m[52;91H3-80[41;80H[?25h[?25l[36m to store the commands[m[52;91H4-81[41;81H[?25h[?25l[36mpto store the commands[m[52;91H5-82[41;82H[?25h[?25l[36moto store the commands[m[52;91H6-83[41;83H[?25h[?25l[36mito store the commands[m[52;91H7-84[41;84H[?25h[?25l[42;51r[42;1H[L[1;52r[41;84H[36mnto store the commandd[42;1Hs[m[52;87H[K[52;87H41,78-85      Top[41;85H[?25h[?25l[1C[36mto store the commann[42;1Hds[m[52;91H9-86[41;86H[?25h[?25l[36meto store the commaa[42;1Hnds[m[52;90H80-87[41;87H[?25h[?25l[36mrto store the commm[42;1Hands[m[52;91H1-88[41;88H[?25h[?25l[36m to store the comm[42;1Hmands[m[52;91H2-89[41;89H[?25h[?25l[36mcto store the coo[42;1Hmmands[m[52;91H3-90[41;90H[?25h[?25l[36mhto store the cc[42;1Hommands[m[52;91H4-91[41;91H[?25h[?25l[36mato store the  [42;1Hcommands[m[52;91H5-92[41;92H[?25h[?25l[36mrto store thee[42;1H commands[m[52;91H6-93[41;93H[?25h[?25l[36m)to store thh[42;1He commands[m[41;73H[36m[46m([19C)[m[10C[36mhh[42;1He[m[52;91H7-94[41;94H[?25h[?25l[36m to store tt[42;1Hhe commands[41;73H([19C)[10Ctt[42;1Hh[m[52;91H8-95[41;95H[?25h[?25l[52;88H2,24-31[43;31H[?25h[?25l[52;88H3,26-33[44;33H[?25h[?25l[52;88H2,24-31[43;31H[?25h[?25l[52;88H3,26-33[44;33H[?25h[?25l[52;88H4,1    [45;1H[?25h[?25l[52;88H5[46;1H[?25h[?25l[52;88H6,45-67[47;67H[?25h[?25l[52;91H4-66[47;66H[?25h[?25l[52;91H3-65[47;65H[?25h[?25l[52;91H2-63[47;63H[?25h[?25l[52;91H1-62[47;62H[?25h[?25l[52;91H0-61[47;61H[?25h[?25l[52;90H39-60[47;60H[?25h[?25l[52;91H8-59[47;59H[?25h[?25l[52;91H7-58[47;58H[?25h[?25l[52;91H6-57[47;57H[?25h[?25l[52;91H5-56[47;56H[?25h[?25l[52;91H4-55[47;55H[?25h[?25l[52;91H3-54[47;54H[?25h[?25l[52;91H2-53[47;53H[?25h[?25l[52;91H1-52[47;52H[?25h[?25l[52;91H0-51[47;51H[?25h[?25l[52;90H29-50[47;50H[?25h[?25l[52;91H8-49[47;49H[?25h[?25l[52;91H7-41[47;41H[?25h[?25l[52;91H6-33[47;33H[?25h[?25l[52;91H5   [47;25H[?25h[?25l[52;91H4[47;24H[?25h[?25l[47;9H[46m([12C)[m[52;91H3[47;23H[?25h[?25l[52;91H2[47;22H[?25h[?25l[47;9H([12C)[52;91H1[47;21H[?25h[?25l[52;91H0[47;20H[?25h[?25l[52;90H19[47;19H[?25h[?25l[52;91H8[47;18H[?25h[?25l[52;91H7[47;17H[?25h[?25l[52;91H6[47;16H[?25h[?25l[52;91H5[47;15H[?25h[?25l[52;91H4[47;14H[?25h[?25l[52;91H3[47;13H[?25h[?25l[52;91H2[47;12H[?25h[?25l[52;91H1[47;11H[?25h[?25l[46m([12C)[m[52;91H0[47;10H[?25h[?25l[52;90H9 [47;9H[?25h[?25l([12C)[52;90H8[47;8H[?25h[?25l[52;90H7[47;7H[?25h[?25l[52;90H6[47;6H[?25h[?25l[52;90H5[47;5H[?25h[?25l[52;90H4[47;4H[?25h[?25l[52;90H3[47;3H[?25h[?25l[52;90H2[47;2H[?25h[?25l[52;90H1[47;1H[?25h[?25l printf([33m"[m[35m%s[m[33m"[m, prompt); [?25h[?25l         printf([33m"[m[35m%s[m[33m"[m, prompt);[18C        [36m/* prompt user  */[m[52;90H2-9[47;9H[?25h[?25l[48;8H[46m([24C)[m[52;88H7,9  [48;9H[?25h[?25l[52;90H8[48;8H[?25h[?25l([24C)[52;90H7[48;7H[?25h[?25l[52;90H6[48;6H[?25h[?25l[52;90H5[48;5H[?25h[?25l[52;90H4[48;4H[?25h[?25l[52;90H3[48;3H[?25h[?25l[52;90H2[48;2H[?25h[?25l[52;90H1[48;1H[?25h[?25l [33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[48;35H[K[48;1H[?25h[?25l         [33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[52;90H2-9[48;9H[?25h[?25l[52;88H8,1  [49;1H[?25h[?25l[52;88H7,2-9[48;9H[?25h[?25l[52;90H3-10[48;10H[?25h[?25l[52;90H4-11[48;11H[?25h[?25l[52;90H5-12[48;12H[?25h[?25l[52;90H6-13[48;13H[?25h[?25l[52;90H7-14[48;14H[?25h[?25l[1C[46m([24C)[m[52;90H8-15[48;15H[?25h[?25l[52;90H9-16[48;16H[?25h[?25l( [46m([13C)[m[8C)[52;90H10-17[48;17H[?25h[?25l[52;91H1-18[48;18H[?25h[?25l([13C)[52;91H2-19[48;19H[?25h[?25l[52;91H3-20[48;20H[?25h[?25l[52;91H4-21[48;21H[?25h[?25l[52;91H5-22[48;22H[?25h[?25l[52;91H6-23[48;23H[?25h[?25l[52;91H7-24[48;24H[?25h[?25l[52;91H8-25[48;25H[?25h[?25l[52;91H9-26[48;26H[?25h[?25lc[46m([mfp[46m)[m[52;90H20-27[48;27H[?25h[?25l[52;91H1-28[48;28H[?25h[?25l(fp)[52;91H2-29[48;29H[?25h[?25l[46m([mfp[46m)[m[52;91H3-30[48;30H[?25h[?25l[48;17H[46m([m[9C(fp)[46m)[m[52;91H4-31[48;31H[?25h[?25l[52;91H5-32[48;32H[?25h[?25l[48;17H([13C)[52;91H6-33[48;33H[?25h[?25l[52;91H7-34[48;34H[?25h[?25l[52;91H8-35[48;35H[?25h[?25l[52;91H9-36[48;36H[?25h[?25l[52;90H30-37[48;37H[?25h[?25l[52;91H1-38[48;38H[?25h[?25l[52;91H2-39[48;39H[?25h[?25l[52;88H8,1    [49;1H[?25h[?25l[52;90H2-9[49;9H[?25h[?25l    [36m/* need space? */[m
    [33mif[m( pos+[33m1[m >= bufspace ){[12C[36m/* 1 for \0     */[m
      [33mif[m ( bufspace == [33m0[m )  [15C[36my: 1st time[49;9H[?25h[?25l[m   [36m/* need space? */[m[49;29H[K[49;9H[?25h[?25l  [36m/* need space? */[m[49;28H[K[49;9H[?25h[?25l [36m/* need space? */[m[49;27H[K[49;9H[?25h[?25l [36m/* need space? */[m[49;19H[K[52;90H1  [49;1H[?25h[?25l[48;51r[51;1H
[1;52r[48;2H        [33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[51;9Hbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H47,36-43      Top[48;43H[?25h[?25l[52;88H8,33[49;43H[?25h[?25l[52;91H2-42[49;42H[?25h[?25l[52;91H1-41[49;41H[?25h[?25l[52;91H0-33[49;33H[?25h[?25l[52;90H29   [49;29H[?25h[?25l[52;91H8[49;28H[?25h[?25l[49;7H[46m([19C)[m[52;91H7[49;27H[?25h[?25l[49;7H([19C)[52;91H6[49;26H[?25h[?25l[52;91H5[49;25H[?25h[?25l[52;91H4[49;24H[?25h[?25l[52;91H3[49;23H[?25h[?25l[52;91H2[49;22H[?25h[?25l[52;91H1[49;21H[?25h[?25l[52;91H0[49;20H[?25h[?25l[52;90H19[49;19H[?25h[?25l[52;91H8[49;18H[?25h[?25l[52;91H7[49;17H[?25h[?25l[52;91H6[49;16H[?25h[?25l[52;91H5[49;15H[?25h[?25l[52;91H4[49;14H[?25h[?25l[52;91H3[49;13H[?25h[?25l[52;91H2[49;12H[?25h[?25l[52;91H1[49;11H[?25h[?25l[52;91H0[49;10H[?25h[?25l[52;90H9 [49;9H[?25h[?25l[46m([19C)[m[52;90H8[49;8H[?25h[?25l[52;90H7[49;7H[?25h[?25l([19C)[52;90H6[49;6H[?25h[?25l[52;90H5[49;5H[?25h[?25l[52;90H4[49;4H[?25h[?25l[52;90H3[49;3H[?25h[?25l[52;90H2[49;2H[?25h[?25l[52;90H1[49;1H[?25h[?25l   [33mif[m( pos+[33m1[m >= bufspace ){ [?25h[?25l  [33mif[m( pos+[33m1[m >= bufspace ){ [?25h[?25l [33mif[m( pos+[33m1[m >= bufspace ){ [?25h[?25l         [33mif[m( pos+[33m1[m >= bufspace ){[7C        [36m/* 1 for \0     */[m[52;90H2-9[49;9H[?25h[?25l         [33mif[m( pos+[33m1[m >= bufspace ){[7C        [36m/* 1 for \0     */[m[52;90H3-17[49;17H[?25h[?25l[52;88H9,17  [50;17H[?25h[?25l[52;91H6[50;16H[?25h[?25l[52;91H5[50;15H[?25h[?25l[52;91H4[50;14H[?25h[?25l[52;91H3[50;13H[?25h[?25l[52;91H2[50;12H[?25h[?25l[46m([15C)[m[52;91H1[50;11H[?25h[?25l[52;91H0[50;10H[?25h[?25l([15C)[52;90H9 [50;9H[?25h[?25l[52;90H8[50;8H[?25h[?25l[52;90H7[50;7H[?25h[?25l[52;90H6[50;6H[?25h[?25l[52;90H5[50;5H[?25h[?25l[52;90H6[50;6H[?25h[?25l[33mif[m ( bufspace == [33m0[m ) [52;90H5[50;5H[?25h[?25l[33mif[m ( bufspace == [33m0[m ) [52;90H4[50;4H[?25h[?25l[33mif[m ( bufspace == [33m0[m ) [8C[36m/* y: 1st time  */[m[50;51H[K[52;90H3[50;3H[?25h[?25l[33mif[m ( bufspace == [33m0[m ) [52;90H2[50;2H[?25h[?25l[33mif[m ( bufspace == [33m0[m ) [52;90H1[50;1H[?25h[?25l[33mif[m ( bufspace == [33m0[m ) [?25h[?25l        [33mif[m ( bufspace == [33m0[m )            [36m/* y: 1st time  */[m[52;90H2-9[50;9H[?25h[?25l        [33mif[m ( bufspace == [33m0[m )            [36m/* y: 1st time  */[m[52;90H3-17[50;17H[?25h[?25l        [33mif[m ( bufspace == [33m0[m )            [36m/* y: 1st time  */[m[52;90H4-25[50;25H[?25h[?25l[52;87H50,18-25[51;25H[?25h[?25l[52;91H7-24[51;24H[?25h[?25l[46m([6C)[m[52;91H6-23[51;23H[?25h[?25l[52;91H5-22[51;22H[?25h[?25l([6C)[52;91H4-21[51;21H[?25h[?25l[52;91H3-20[51;20H[?25h[?25l[52;91H2-19[51;19H[?25h[?25l[52;91H1-18[51;18H[?25h[?25l[52;91H0-17[51;17H[?25h[?25l[52;90H9-16 [51;16H[?25h[?25l[52;90H8-15[51;15H[?25h[?25l[52;90H7-14[51;14H[?25h[?25l[52;90H6-13[51;13H[?25h[?25l[52;90H5-12[51;12H[?25h[?25l[52;90H4-11[51;11H[?25h[?25l[52;90H3-10[51;10H[?25h[?25l[52;90H2-9 [51;9H[?25h[?25l[52;90H1  [51;1H[?25h[?25l[52;90H2-9[51;9H[?25h[?25l        buf = emalloc([33mBUFSIZ[m);[52;90H3-17[51;17H[?25h[?25l        buf = emalloc([33mBUFSIZ[m);[52;90H4-25[51;25H[?25h[?25l        buf = emalloc([33mBUFSIZ[m);[52;90H5-33[51;33H[?25h[?25l[52;87H49,12-33[50;33H[?25h[?25l[52;88H8,19[49;33H[?25h[?25l[52;90H20-34[49;34H[?25h[?25l[52;88H9,13[50;34H[?25h[?25l[52;87H50,6-34 [51;34H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33melse[m[30C[36m/* or expand    */[m[52;87H[K[52;87H51,14-33[7C0%[51;33H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H52,27-34[7C1%[51;34H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hbufspace += [33mBUFSIZ[m;[15C[36m/* update size  */[m[52;87H[K[52;87H53,27-33[7C1%[51;33H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H}[52;87H[K[52;87H54,6[11C2%[45;41H[46m{[51;5H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H55,1[11C3%[44;41H{[50;5H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;5H[36m/* end of command? */[m[52;87H[K[52;87H56,26[10C3%[51;26H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H57,21[10C4%[51;8H[46m([11C)[?25h[?25l[m[51;8H([11C)[52;88H6,26[50;26H[?25h[?25l[52;88H5,1 [49;1H[?25h[?25l[42;41H[46m{[48;5H}[m[52;88H4,6[48;6H[?25h[?25l[42;41H{[48;5H}[52;88H3,27-33[47;33H[?25h[?25l[52;88H2,27-34[46;34H[?25h[?25l[52;88H1,14-33[45;33H[?25h[?25l[52;91H3-25[45;25H[?25h[?25l[52;91H2-17[45;17H[?25h[?25l[52;91H1   [45;11H[?25h[?25l[52;91H0[45;10H[?25h[?25l[52;90H9 [45;9H[?25h[?25l[52;90H8[45;8H[?25h[?25l[52;90H7[45;7H[?25h[?25l[52;90H6[45;6H[?25h[?25l    [1C[33mlse[m[52;90H7-9[45;9H[?25h[?25l         [33melse[m[19C        [36m/* or expand    */[m[52;90H8-17[45;17H[?25h[?25l         [33melse[m[19C        [36m/* or expand    */[m[52;90H9-25[45;25H[?25h[?25l[52;88H2,18-25[46;25H[?25h[?25l[46m([19C)[m[52;91H7-24[46;24H[?25h[?25l[52;91H6-23[46;23H[?25h[?25l([19C)[52;91H5-22[46;22H[?25h[?25l[52;91H4-21[46;21H[?25h[?25l[52;91H3-20[46;20H[?25h[?25l[52;91H2-19[46;19H[?25h[?25l[52;91H1-18[46;18H[?25h[?25l[52;91H0-17[46;17H[?25h[?25l[52;90H9-16 [46;16H[?25h[?25l[52;90H8-15[46;15H[?25h[?25l[52;90H7-14[46;14H[?25h[?25l[52;90H6-13[46;13H[?25h[?25l[52;90H5-12[46;12H[?25h[?25l[52;90H4-11[46;11H[?25h[?25l[52;90H3-10[46;10H[?25h[?25l[52;90H2-9 [46;9H[?25h[?25l[52;90H1  [46;1H[?25h[?25l[8C        buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;90H2-9[46;9H[?25h[?25l[8C        buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;90H3-17[46;17H[?25h[?25l[8C        buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;90H4-25[46;25H[?25h[?25l[52;88H3,25  [47;25H[?25h[?25l[52;91H4[47;24H[?25h[?25l[52;91H3[47;23H[?25h[?25l[52;91H2[47;22H[?25h[?25l[52;91H1[47;21H[?25h[?25l[52;91H0[47;20H[?25h[?25l[52;90H19[47;19H[?25h[?25l[52;91H8[47;18H[?25h[?25l[52;91H7[47;17H[?25h[?25l[52;91H6[47;16H[?25h[?25l[52;91H5[47;15H[?25h[?25l[52;91H4[47;14H[?25h[?25l[52;91H3[47;13H[?25h[?25l[52;91H2[47;12H[?25h[?25l[52;91H1[47;11H[?25h[?25l[52;91H0[47;10H[?25h[?25l[52;90H9 [47;9H[?25h[?25l[52;90H8[47;8H[?25h[?25l[52;90H7[47;7H[?25h[?25l  bufspace += [33mBUFSIZ[m;[52;90H8-9[47;9H[?25h[?25l        bufspace += [33mBUFSIZ[m;             [36m/* update size  */[m[52;90H9-17[47;17H[?25h[?25l        bufspace += [33mBUFSIZ[m;             [36m/* update size  */[m[52;90H10-25[47;25H[?25h[?25l        bufspace += [33mBUFSIZ[m;             [36m/* update size  */[m[52;91H1-33[47;33H[?25h[?25l[47;25Hbufspace += [33mBUFSIZ[m;             [36m/* update size  */[m[47;75H[K[52;91H0-25[47;25H[?25h[?25l[42;41H[46m{[48;5H}[m[52;88H4,6    [48;6H[?25h[?25l[52;90H5[48;5H[?25h[?25l[42;41H{[48;5H}[52;88H5,1[49;1H[?25h[?25l[42;41H[46m{[48;5H}[m[52;88H4,5[48;5H[?25h[?25l[46m    [m}    [46m}[m[52;90H6-9[48;9H[?25h[?25l[46m        [m}[48;9H        [46m}[m[52;90H7-17[48;17H[?25h[?25l[46m        [m}[48;17H        [46m}[m[52;90H8-25[48;25H[?25h[?25l[42;41H{[48;25H}[52;88H3,10-25[47;25H[?25h[?25l[52;88H2,4-25 [46;25H[?25h[?25l[52;90H5-33[46;33H[?25h[?25l[52;90H6-34[46;34H[?25h[?25l[52;90H7-35[46;35H[?25h[?25l[52;90H8-36[46;36H[?25h[?25l[52;90H9-37[46;37H[?25h[?25l[52;90H10-38[46;38H[?25h[?25l[52;91H1-39[46;39H[?25h[?25lrealloc(buf,bufspace+[33mBUFSIZ[m);[46;68H[K[46;39H[?25h[?25l[52;88H3,24[47;39H[?25h[?25l[52;88H2,11[46;39H[?25h[?25l[52;88H3,24[47;39H[?25h[?25l[52;88H2,11[46;39H[?25h[?25l[52;88H1,15-33[45;33H[?25h[?25l[52;88H0,11-39[44;39H[?25h[?25lmalloc([33mBUFSIZ[m);[44;54H[K[44;39H[?25h[52;1H[K[44;38H[?25l[52;87H50,10-38[7C4%[44;38H[?25h[?25l[52;1H1 change; before #27  17 seconds ago[52;87H[K[44;39Hemalloc([33mBUFSIZ[m);[52;87H50,11-39[7C4%[52;87H[K[52;87H50,11-39[7C4%[44;39H[?25h[?25l[52;20H6  25[52;87H[K[46;39Herealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H52,11-39[7C4%[52;87H[K[52;87H52,11-39[7C4%[46;39H[?25h[?25l[52;88H3,24[47;39H[?25h[?25l[42;41H[46m{[48;25H}[m[52;88H4,8-25 [48;25H[?25h[?25l[42;41H{[48;25H}[52;88H5,0-1 [49;1H[?25h[?25l[52;88H6,25 [50;25H[?25h[?25l[51;8H[46m([11C)[m[52;88H7,20[51;20H[?25h[?25l[1;51r[51;1H
[1;52r[50;8H([11C)[51;7H[33mbreak[m;[52;1H[K[52;87H58,12[10C5%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H59,0-1[9C5%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H[36m/* no, add to buffer */[m[52;87H[K[52;87H60,27[10C6%[51;27H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hbuf[pos++] = c;[52;87H[K[52;87H61,19[10C7%[51;19H[?25h[?25l[1;51r[51;1H
[1;52r[36;42H[46m{[51;3H}[m[52;87H[K[52;87H62,3[11C7%[51;3H[?25h[?25l[36;42H{[51;3H}[52;88H1,19[50;19H[?25h[?25l[52;88H0,27[49;27H[?25h[?25l[52;87H59,0-1[48;1H[?25h[?25l[52;88H8,12 [47;12H[?25h[?25l[52;91H1[47;11H[?25h[?25l[52;88H7[46;11H[?25h[?25l[52;91H0[46;10H[?25h[?25l[52;88H6[45;10H[?25h[?25l[52;90H9 [45;9H[?25h[?25l[52;90H8[45;8H[?25h[?25l[52;90H7[45;7H[?25h[?25l[52;90H6[45;6H[?25h[?25l[52;90H5[45;5H[?25h[?25l[52;90H4[45;4H[?25h[?25l[52;90H3[45;3H[?25h[?25l[52;90H2[45;2H[?25h[?25l  [36m/* end of command? */[m[45;25H[K[45;2H[?25h[?25l [36m/* end of command? */[m[45;24H[K[45;2H[?25h[?25l[52;90H1[45;1H[?25h[?25l [36m/* end of command? */[m[45;23H[K[45;1H[?25h[?25l[52;88H7[46;1H[?25h[?25l[52;88H6[45;1H[?25h[?25l[52;90H2[45;2H[?25h[?25l[52;90H1[45;1H[?25h[?25l[52;88H7[46;1H[?25h[?25l[52;90H2[46;2H[?25h[?25l[52;90H3[46;3H[?25h[?25l[52;90H4[46;4H[?25h[?25l[52;90H5[46;5H[?25h[?25l[52;90H4[46;4H[?25h[?25l[52;90H3[46;3H[?25h[?25l[52;90H2[46;2H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H57,2[11C7%[46;2H[?25h[?25l[52;90H3[46;3H[?25h[?25l[52;90H4[46;4H[?25h[?25l[52;90H5[46;5H[?25h[?25l\[33mif[m ( c == [35m'\n'[m )[52;90H6[46;6H[?25h[?25l\[33mif[m ( c == [35m'\n'[m )[52;90H7[46;7H[?25h[?25l[33mif[m ( c == [35m'\n'[m )[46;22H[K[52;90H6[46;6H[?25h[?25l[33mif[m ( c == [35m'\n'[m )[46;21H[K[52;90H5[46;5H[?25h[?25l[33mif[m ( c == [35m'\n'[m )[46;20H[K[52;90H4[46;4H[?25h[?25l[33mif[m ( c == [35m'\n'[m )[46;19H[K[52;90H3[46;3H[?25h[?25l[33mif[m ( c == [35m'\n'[m )[46;18H[K[52;90H2[46;2H[?25h[?25l[52;88H8[47;2H[?25h[?25l    [33mbreak[m;[47;12H[K[47;2H[?25h[?25l   [33mbreak[m;[47;11H[K[47;2H[?25h[?25l  [33mbreak[m;[47;10H[K[47;2H[?25h[?25l [33mbreak[m;[47;9H[K[47;2H[?25h[?25l[33mbreak[m;[47;8H[K[47;2H[?25h[?25l[52;88H9,1[48;1H[?25h[?25l[52;87H60,2[49;2H[?25h[?25l  [36m/* no, add to buffer */[m[49;27H[K[49;2H[?25h[?25l [36m/* no, add to buffer */[m[49;26H[K[49;2H[?25h[?25l[36m/* no, add to buffer */[m[49;25H[K[49;2H[?25h[?25l[52;88H1[50;2H[?25h[?25l  buf[pos++] = c;[50;19H[K[50;2H[?25h[?25l buf[pos++] = c;[50;18H[K[50;2H[?25h[?25lbuf[pos++] = c;[50;17H[K[50;2H[?25h[?25l[52;88H2[51;2H[?25h[?25l}[51;3H[K[36;42H[46m{[51;2H}[?25h[?25l[1;51r[m[51;1H
[1;52r[51;3H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[11C[36m/* EOF and no input     */[m[52;87H[K[52;87H63,2[11C8%[35;42H{[50;2H}
 [?25h[?25l[1;51r[51;1H
[1;52r[51;5H[33mreturn[m [33mNULL[m;[24C[36m/* say so               */[m[52;87H[K[52;87H64,2[11C9%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H65,2[11C9%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m buf;[52;87H[K[52;87H66,2[10C10%[51;2H[?25h[?25l[52;88H5[50;2H[?25h[?25l[52;88H4[49;2H[?25h[?25l[52;88H3[48;2H[?25h[?25l[33mif[m ( c == [33mEOF[m && pos == [33m0[m )  [?25h[?25l[52;88H4[49;2H[?25h[?25l  [33mreturn[m [33mNUL[m[1C; [16C[36m/* say so        [7C*/[m[49;59H[K[49;2H[?25h[?25l [33mreturn[m [33mNUL[m[1C;  [?25h[?25l[52;88H5[50;2H[?25h[?25l[52;88H4[49;2H[?25h[?25l[33mreturn[m [33mNUL[m[1C;  [?25h[?25l[52;88H5[50;2H[?25h[?25lbuf[pos] = [35m'\0'[m;[50;18H[K[50;2H[?25h[?25l[52;88H6[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H}[52;87H[K[52;87H67,2[10C11%[18;1H[46m{[51;1H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H68,1[10C11%[17;1H{[50;1H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/**[m[52;87H[K[52;87H69,2[10C12%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H70,2[10C13%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m **/[m[52;87H[K[52;87H71,2[10C13%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H72,2[10C14%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H73,1[10C15%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H74,2[10C15%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H75,2[10C16%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H76,2[10C17%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H77,2[10C17%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H78,2[10C18%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H79,2[10C19%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H80,2[10C19%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H81,2[10C20%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H82,2[10C21%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *newstr();[52;87H[K[52;87H83,2[10C21%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  **args ;[52;87H[K[52;87H84,2[10C22%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H85,2[10C23%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H86,2[10C23%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H87,2[10C24%[51;2H[?25h[?25l[52;88H6[50;2H[?25h[?25l[52;88H5[49;2H[?25h[?25l[52;88H4[48;2H[?25h[?25l[52;88H3[47;2H[?25h[?25l[52;88H2[46;2H[?25h[?25l[52;88H1[45;2H[?25h[?25l[52;88H0[44;2H[?25h[?25l[52;87H79[43;2H[?25h[?25l[52;88H8[42;2H[?25h[?25l[52;88H7[41;2H[?25h[?25l[52;88H6[40;2H[?25h[?25l[52;88H5[39;2H[?25h[?25l[52;88H4[38;2H[?25h[?25l[52;88H3,1[37;1H[?25h[?25l[52;88H2,2[36;2H[?25h[?25l[52;88H1[35;2H[?25h[?25l[52;88H0[34;2H[?25h[?25l[52;87H69[33;2H[?25h[?25l[52;88H8,1[32;1H[?25h[?25l[52;88H7,2[31;2H[?25h[?25l[52;88H6[30;2H[?25h[?25l[52;88H5[29;2H[?25h[?25l[52;88H4[28;2H[?25h[?25l[52;88H3[27;2H[?25h[?25l[52;88H4[28;2H[?25h[?25l[52;88H5[29;2H[?25h[?25l[52;88H6[30;2H[?25h[?25l[33mreturn[m buf;[30;13H[K[30;2H[?25h[?25l[52;88H7[31;2H[?25h[?25l[52;88H6[30;2H[?25h[?25l[52;90H1[30;1H[?25h[?25l[52;88H7[31;1H[?25h[?25l[52;88H6[30;1H[?25h[?25l[52;88H5[29;1H[?25h[?25l[52;88H4[28;1H[?25h[?25l[52;88H3[27;1H[?25h[?25l[52;88H2[26;1H[?25h[?25l[52;88H1[25;1H[?25h[?25l[52;88H0[24;1H[?25h[?25l[52;87H59[23;1H[?25h[?25l[52;88H8[22;1H[?25h[?25l[52;88H7[21;1H[?25h[?25l[52;88H6[20;1H[?25h[?25l[52;88H5[19;1H[?25h[?25l[52;88H4[18;1H[?25h[?25l[52;88H5[19;1H[?25h[?25l[52;88H6[20;1H[?25h[?25l[52;88H7[21;1H[?25h[?25l[52;88H8[22;1H[?25h[?25l[52;88H9[23;1H[?25h[?25l[52;87H60[24;1H[?25h[?25l[52;88H1[25;1H[?25h[?25l[52;88H2[26;1H[?25h[?25l[52;88H3[27;1H[?25h[?25l[52;88H4[28;1H[?25h[?25l[52;88H5[29;1H[?25h[?25l[52;88H6[30;1H[?25h[?25l[52;88H7[31;1H[?25h[?25l[52;88H6[30;1H[?25h[?25l[33mreturn[m buf;[30;12H[K[30;1H[?25h[?25l[52;88H5[29;1H[?25h[?25lbuf[pos] = [35m'\0'[m;[29;17H[K[29;1H[?25h[?25l[52;88H4[28;1H[?25h[?25l[33mreturn[m [33mNUL[m[1C; [?25h[?25l[52;88H3[27;1H[?25h[?25l[33mif[m ( c == [33mEOF[m && pos == [33m0[m ) [?25h[?25l[52;88H2[26;1H[?25h[?25l}[26;2H[K[11;42H[46m{[26;1H}[?25h[?25l[m[11;42H{[26;1H}[52;88H1[25;1H[?25h[?25lbuf[pos++] = c;[25;16H[K[25;1H[?25h[?25l[52;88H0[24;1H[?25h[?25l[36m/* no, add to buffer */[m[24;24H[K[24;1H[?25h[?25l[52;87H59[23;1H[?25h[?25l[23;51r[51;1H
[1;52r[51;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H59,1[10C24%[23;1H[?25h[?25l[52;88H8[22;1H[?25h[?25l[33mbreak[m;[22;7H[K[22;1H[?25h[?25l[52;88H7[21;1H[?25h[?25l[52;88H6[20;1H[?25h[?25l[52;88H7[21;1H[?25h[?25l[33mif[m ( c == [35m'\n'[m )[21;17H[K[21;1H[?25h[?25l[52;88H6[20;1H[?25h[?25l[36m/* end of command? */[m[20;22H[K[20;1H[?25h[52;1H[K[20;1H[?25l[52;87H56,1[10C24%[20;1H[?25h[?25l[52;1H[33m-- VISUAL --[m[52;87H[K[52;87H56,1[10C24%[20;1H[?25h[?25l[7m[36m/* end of command? */[m[7m [m[52;88H7[21;1H[?25h[?25l[7m[33mif[m[7m ( c == [m[7m[35m'\n'[m[7m ) [m[52;88H8[22;1H[?25h[?25l[7m[33mbreak[m[7m; [m[52;88H9[23;1H[?25h[?25l[7m[36m/* no, add to buffer */[m[7m [m[52;87H60[24;1H[?25h[?25l[11;42H[46m{[m[24;1H[7mbuf[pos++] = c; [m
[46m}[m[52;88H1[25;1H[?25h[?25l[11;42H{[25;1H[7m} [m[52;88H2[26;1H[?25h[?25l[7m[33mif[m[7m ( c == [m[7m[33mEOF[m[7m && pos == [m[7m[33m0[m[7m )             [m[7m[36m/* EOF and no input [m[7m    [m[7m[36m*/[m[7m [m[52;88H3[27;1H[?25h[?25l[7m[33mreturn[m[7m [m[7m[33mNULL[m[7m;                    [m[7m[36m/* say so [m[7m      [m[7m[36m [m[7m       [m[7m[36m*/[m[7m [m[52;88H4[28;1H[?25h[?25l[7mbuf[pos] = [m[7m[35m'\0'[m[7m; [m[52;88H5[29;1H[?25h[?25l[7m[33mreturn[m[7m buf; [m[52;88H6[30;1H[?25h[?25l[29;1H[33mreturn[m buf;[29;12H[K[52;88H5[29;1H[?25h[?25l[52;1H10 lines >ed 1 time[52;87H[K[20;1H        [36m/* end of command? */[m
        [33mif[m ( c == [35m'\n'[m )
        [33mbreak[m;
        [36m/* no, add to buffer */[m
        buf[pos++] = c;
        }
        [33mif[m ( c == [33mEOF[m && pos == [33m0[m )             [36m/* EOF and no input     */[m
        [33mreturn[m [33mNULL[m;                    [36m/* say so               */[m
        buf[pos] = [35m'\0'[m;
        [33mreturn[m buf;[52;1H[K[52;87H56,2-9[8C24%[20;9H[?25h[?25l[52;1H[33m-- VISUAL --[m[52;87H[K[52;87H56,2-9[8C24%[20;9H[?25h[?25l[7m[36m/* end of command? */[m[7m 
        [m[52;88H7[21;9H[?25h[?25l[7m[33mif[m[7m ( c == [m[7m[35m'\n'[m[7m ) 
        [m[52;88H8[22;9H[?25h[?25l[7m[33mbreak[m[7m; 
        [m[52;88H9[23;9H[?25h[?25l[7m[36m/* no, add to buffer */[m[7m 
        [m[52;87H60[24;9H[?25h[?25l[11;42H[46m{[m[24;9H[7mbuf[pos++] = c; 
        [m[46m}[m[52;88H1[25;9H[?25h[?25l[11;42H{[25;9H[7m} 
        [m[52;88H2[26;9H[?25h[?25l[7m[33mif[m[7m ( c == [m[7m[33mEOF[m[7m && pos == [m[7m[33m0[m[7m )             [m[7m[36m/* EOF and no input [m[7m    [m[7m[36m*/[m[7m 
        [m[52;88H3[27;9H[?25h[?25l[7m[33mreturn[m[7m [m[7m[33mNULL[m[7m;                    [m[7m[36m/* say so [m[7m      [m[7m[36m [m[7m       [m[7m[36m*/[m[7m 
        [m[52;88H4[28;9H[?25h[?25l[7mbuf[pos] = [m[7m[35m'\0'[m[7m; 
        [m[52;88H5[29;9H[?25h[?25l[7m[33mreturn[m[7m buf; 
}[m[52;88H6,2  [30;2H[?25h[?25l[29;9H[33mreturn[m buf;[29;20H[K[30;1H}[52;88H5,2-9[29;9H[?25h[?25l[52;1H10 lines >ed 1 time[52;87H[K[20;9H        [36m/* end of command? */[m
                [33mif[m ( c == [35m'\n'[m )
                [33mbreak[m;
                [36m/* no, add to buffer */[m
                buf[pos++] = c;
                }
                [33mif[m ( c == [33mEOF[m && pos == [33m0[m )             [36m/* EOF and no input     */[m
                [33mreturn[m [33mNULL[m;                    [36m/* say so               */[m
                buf[pos] = [35m'\0'[m;
                [33mreturn[m buf;[52;1H[K[52;87H56,3-17[7C24%[20;17H[?25h[?25l[52;88H5,0-1 [19;1H[?25h[?25l[52;88H4,7-24[18;24H[?25h[?25l[12;41H[46m{[18;25H}[m[52;90H8-25[18;25H[?25h[?25l[12;41H{[18;25H}[52;88H3,10-25[17;25H[?25h[?25l[52;88H2,4-32 [16;32H[?25h[?25l[52;88H3,10-25[17;25H[?25h[?25l[12;41H[46m{[18;25H}[m[52;88H4,8-25 [18;25H[?25h[?25l[12;41H{[18;25H}[52;90H7-24[18;24H[?25h[?25l[52;90H6-16[18;16H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H54,6-9[8C24%[18;9H[?25h[?25l[8C}[18;25H[K[18;9H[?25h[?25l[52;88H5,1  [19;1H[?25h[?25l[52;88H6,2-9[20;9H[?25h[?25l[52;88H5,1  [19;1H[?25h[?25l[52;88H6,2-9[20;9H[?25h[?25l[52;88H7[21;9H[?25h[?25l[52;88H6[20;9H[?25h[?25l[52;88H5,1  [19;1H[?25h[?25l[52;88H4,6-9[18;9H[?25h[?25l[52;88H3,8[17;9H[?25h[?25l[52;88H2,2[16;9H[?25h[?25l[52;88H1,7[15;9H[?25h[?25l[52;88H0,2[14;9H[?25h[?25l[52;90H3-17[14;17H[?25h[?25l[52;87H49[13;17H[?25h[?25l[52;90H4-25[13;25H[?25h[?25l[52;90H5-26[13;26H[?25h[?25l[52;90H6-27[13;27H[?25h[?25l [46m([15C)[m[52;90H7-28[13;28H[?25h[?25l[52;90H8-29[13;29H[?25h[?25l([15C)[52;90H9-30[13;30H[?25h[?25l[52;90H10-31[13;31H[?25h[?25l[52;91H1-32[13;32H[?25h[?25l[52;91H2-33[13;33H[?25h[?25l[52;91H3-34[13;34H[?25h[?25l[52;91H4-35[13;35H[?25h[?25l[52;91H5-36[13;36H[?25h[?25l[52;91H6-37[13;37H[?25h[?25l[52;91H7-38[13;38H[?25h[?25l[52;91H8-39[13;39H[?25h[?25l[52;91H9-40[13;40H[?25h[?25l[52;90H20-41[13;41H[?25h[?25l[52;91H1-42[13;42H[?25h[?25l[52;91H2-43[13;43H[?25h[?25l[13;28H[46m([15C)[m[52;91H3-44[13;44H[?25h[?25l[52;91H4-45[13;45H[?25h[?25l[13;28H([15C)[52;91H5-49[13;49H[?25h[?25l[52;91H6-57[13;57H[?25h[?25l[52;91H7-58[13;58H[?25h[?25l[52;91H8-59[13;59H[?25h[?25l[52;91H9-60[13;60H[?25h[?25l[52;90H30-61[13;61H[?25h[?25l[52;91H1-62[13;62H[?25h[?25l[52;91H2-63[13;63H[?25h[?25l[52;91H1-62[13;62H[?25h[?25l[52;91H0-61[13;61H[?25h[?25l[52;90H29-60[13;60H[?25h[?25l[52;91H8-59[13;59H[?25h[?25l[52;91H7-58[13;58H[?25h[?25l[52;91H6-57[13;57H[?25h[?25l[52;91H5-49[13;49H[?25h[?25l[52;88H8,29[12;49H[?25h[?25l[12;41H[46m{[18;17H}[m[52;91H8-42[12;42H[?25h[?25l[52;91H7-41[12;41H[?25h[?25l{[18;17H}[52;88H9,20[13;41H[?25h[?25l[52;87H50,13[14;41H[?25h[?25l[52;88H1,16[15;41H[?25h[?25l[52;88H2,13[16;41H[?25h[?25l[52;88H3,26[17;41H[?25h[?25l[52;88H2,13[16;41H[?25h[?25l[52;88H3,26[17;41H[?25h[?25l[52;91H5-40[17;40H[?25h[?25l[52;91H4-39[17;39H[?25h[?25l[52;91H3-38[17;38H[?25h[?25l[52;91H2-37[17;37H[?25h[?25l[52;91H1-36[17;36H[?25h[?25l[52;91H0-35[17;35H[?25h[?25l[52;90H19-34[17;34H[?25h[?25l[52;91H8-33[17;33H[?25h[?25l[52;91H7-32[17;32H[?25h[?25l[52;91H6-31[17;31H[?25h[?25l[52;91H5-30[17;30H[?25h[?25l[52;91H4-29[17;29H[?25h[?25l[52;91H3-28[17;28H[?25h[?25l[52;88H2,4-25 [16;25H[?25h[?25l[52;88H1,12-28[15;28H[?25h[?25l[52;91H3-29[15;29H[?25h[?25l[52;91H4-30[15;30H[?25h[?25l{[46m{[18;17H}[m[52;91H5-31[15;31H[?25h[?25l{[18;17H}[52;88H2,4-25 [16;25H[?25h[?25l[52;90H5-33[16;33H[?25h[?25l[52;88H3,18-33[17;33H[?25h[?25l[52;91H9-34[17;34H[?25h[?25l[52;90H20-35[17;35H[?25h[?25l[52;91H1-36[17;36H[?25h[?25l[52;91H2-37[17;37H[?25h[?25l[52;91H3-38[17;38H[?25h[?25l[52;91H4-39[17;39H[?25h[?25l[52;91H5-40[17;40H[?25h[?25l[52;91H6-41[17;41H[?25h[?25l[52;91H7-42[17;42H[?25h[?25l[52;91H8-43[17;43H[?25h[?25l[52;91H9-44[17;44H[?25h[?25l[52;90H30-49[17;49H[?25h[?25l[52;91H1-57[17;57H[?25h[?25l[52;91H2-58[17;58H[?25h[?25l[52;91H3-59[17;59H[?25h[?25l[52;91H4-60[17;60H[?25h[?25l[52;91H5-61[17;61H[?25h[?25l[52;91H6-62[17;62H[?25h[?25l[52;91H7-63[17;63H[?25h[?25l[52;91H6-62[17;62H[?25h[?25l[52;91H5-61[17;61H[?25h[?25l[52;91H4-60[17;60H[?25h[?25l[52;91H3-59[17;59H[?25h[?25l[52;91H2-58[17;58H[?25h[?25l[52;91H1-57[17;57H[?25h[?25l[52;91H0-49[17;49H[?25h[?25l[52;90H29-44[17;44H[?25h[?25l[52;91H8-43[17;43H[?25h[?25l[52;91H9-44[17;44H[?25h[?25l}[15;30H[46m{[17;44H}[m[52;90H30-45[17;45H[?25h[?25l[18;51r[18;1H[L[1;52r[17;57H[K[18;17H[36m/* update size  */[m[52;87H[K[52;87H54,1[10C24%[15;30H{[17;44H}
[?25h[52;1H[K[18;1H[?25l[52;87H54,1-8[8C24%[18;8H[?25h[?25l[52;1H1 line less; before #56  4 seconds ago[52;87H[K[17;51r[51;1H
[1;52r[17;17H        bufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[51;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;1H[K[52;87H53,29-48      24%1 line less; before #56  4 seconds ago[52;87H[K[52;87H53,29-48      24%[17;48H[?25h[?25l[52;91H8-43[17;43H[?25h[?25l[52;91H7-42[17;42H[?25h[?25l[52;91H6-41[17;41H[?25h[?25l[15;30H[46m{[18;17H}[m[52;88H4,7-17 [18;17H[?25h[?25l[15;30H{[18;17H}[52;90H6-16[18;16H[?25h[?25l[52;1H[33m-- INSERT --[m[52;14H[K[52;87H54,6-9[8C24%[18;9H[?25h[?25l[19;51r[19;1H[L[1;52r[18;17H[K[19;9H}[52;87H[K[52;87H55,1[10C24%[19;1H[?25h[?25l[52;88H4[18;1H[?25h[?25l[52;90H2-9[18;9H[?25h[?25l[52;90H3-17[18;17H[?25h[?25l[52;90H4-25[18;25H[?25h[?25l}[15;30H[46m{[18;25H}[m[52;90H5-26[18;26H[?25h[?25l[52;90H4-25[18;25H[?25h[?25l[15;30H{[18;25H}[52;88H3,10-25[17;25H[?25h[?25l[52;90H9-17 [17;17H[?25h[?25l[52;90H10-25[17;25H[?25h[?25l[17;17Hbufspace += [33mBUFSIZ[m;             [36m/* update size  */[m[17;67H[K[52;90H9-17 [17;17H[?25h[?25l[17;9Hbufspace += [33mBUFSIZ[m;             [36m/* update size  */[m[17;59H[K[52;90H8-9 [17;9H[?25h[?25lbufspace += [33mBUFSIZ[m;  [52;90H7  [17;7H[?25h[?25lbufspace += [33mBUFSIZ[m; [52;90H6[17;6H[?25h[?25lbufspace += [33mBUFSIZ[m; [8C[36m/* update size  */[m[17;51H[K[52;90H5[17;5H[?25h[?25lbufspace += [33mBUFSIZ[m; [52;90H4[17;4H[?25h[?25lbufspace += [33mBUFSIZ[m; [52;90H3[17;3H[?25h[?25lbufspace += [33mBUFSIZ[m; [52;90H2[17;2H[?25h[?25lbufspace += [33mBUFSIZ[m; [52;90H1[17;1H[?25h[?25l        bufspace += [33mBUFSIZ[m;             [36m/* update size  */[m[52;90H2-9[17;9H[?25h[?25l        bufspace += [33mBUFSIZ[m;             [36m/* update size  */[m[52;90H3-17[17;17H[?25h[?25l        bufspace += [33mBUFSIZ[m;             [36m/* update size  */[m[52;90H4-25[17;25H[?25h[?25l        bufspace += [33mBUFSIZ[m;             [36m/* update size  */[m[52;90H5-33[17;33H[?25h[?25l[52;88H2[16;33H[?25h[?25l[52;90H6-34[16;34H[?25h[?25l[52;88H3[17;34H[?25h[?25l[52;90H7-35[17;35H[?25h[?25l[52;90H8-36[17;36H[?25h[?25l[52;90H9-37[17;37H[?25h[?25l[52;90H10-38[17;38H[?25h[?25l[52;91H1-39[17;39H[?25h[?25l[52;91H2-40[17;40H[?25h[?25l[52;91H3-41[17;41H[?25h[?25l[52;91H4-42[17;42H[?25h[?25l[52;91H5-43[17;43H[?25h[?25l[52;91H6-44[17;44H[?25h[?25l[52;91H7-45[17;45H[?25h[?25l[52;91H8-46[17;46H[?25h[?25l[52;91H9-47[17;47H[?25h[?25l[52;90H20-48[17;48H[?25h[?25l[52;91H1-49[17;49H[?25h[?25l[52;91H2-50[17;50H[?25h[?25l[52;91H3-51[17;51H[?25h[?25l[52;91H4-52[17;52H[?25h[?25l     [36m/* update size  */[m[17;75H[K[17;52H[?25h[?25l[52;88H4,10-33[18;33H[?25h[?25l[52;90H9-30 [18;30H[?25h[?25l[52;90H8-29[18;29H[?25h[?25l[12;41H[46m{[19;9H}[m[52;88H5,3-10[19;10H[?25h[?25l[52;90H2-9 [19;9H[?25h[?25l[12;41H{[19;9H}[52;90H1  [19;1H[?25h[?25l[12;41H[46m{[19;9H}[m[52;90H2-9[19;9H[?25h[?25l[46m        [m}[19;9H        [46m}[m[52;90H3-17[19;17H[?25h[?25l[12;41H{[19;17H}[52;88H6,1   [20;1H[?25h[?25l[52;88H7,3-17[21;17H[?25h[?25l[52;88H8[22;17H[?25h[?25l[52;88H9[23;17H[?25h[?25l        [33mbreak[m;[52;90H4-25[23;25H[?25h[?25l[52;87H60,11-25[24;25H[?25h[?25l[52;91H0-24[24;24H[?25h[?25l[52;90H9-23 [24;23H[?25h[?25l[52;90H8-22[24;22H[?25h[?25l[52;90H7-21[24;21H[?25h[?25l[52;90H6-20[24;20H[?25h[?25l[25;20H[46m[[mpos++[46m][m[52;88H1[25;20H[?25h[?25l[pos++][52;90H5-19[25;19H[?25h[?25l[52;90H4-18[25;18H[?25h[?25l[52;90H3-17[25;17H[?25h[?25l[52;90H2-9 [25;9H[?25h[?25l[52;90H3-17[25;17H[?25h[?25l[52;88H0[24;17H[?25h[?25l[25;51r[25;1H[L[1;52r[24;17H[K[25;1H[36m/* no, add to buffer */[m[52;87H[K[52;87H61,1[10C24%[25;1H[?25h[?25l        [36m/* no, add to buffer */[m[52;90H2-9[25;9H[?25h[?25l        [36m/* no, add to buffer */[m[52;90H3-17[25;17H[?25h[?25l[52;88H2[26;17H[?25h[?25l[52;88H1[25;17H[?25h[?25l[52;88H0[24;17H[?25h[?25l[52;87H59[23;17H[?25h[?25l[52;87H60[24;17H[?25h[?25l[52;87H59[23;17H[?25h[?25l[52;90H4-25[23;25H[?25h[?25l[52;87H60,3-17[24;17H[?25h[?25l[52;88H1,11-25[25;25H[?25h[?25l[52;88H2[26;25H[?25h[?25l[11;42H[46m{[27;17H}[m[52;88H3,4-18 [27;18H[?25h[?25l[52;90H3-17[27;17H[?25h[?25l[46m        [m}[27;17H        [46m}[m[52;90H4-25[27;25H[?25h[?25l[27;17H}[27;25H[K[27;17H[46m}[m[52;90H3-17[27;17H[?25h[?25l[11;42H{[27;17H}[52;88H2[26;17H[?25h[?25l        buf[pos++] = c;[52;90H4-25[26;25H[?25h[?25l[52;88H1,11-25[25;25H[?25h[?25l[52;91H0-24[25;24H[?25h[?25l[52;90H9-23 [25;23H[?25h[?25l[52;90H8-22[25;22H[?25h[?25l[52;90H7-21[25;21H[?25h[?25l[52;90H6-20[25;20H[?25h[?25l[52;90H5-19[25;19H[?25h[?25l[52;90H4-18[25;18H[?25h[?25l[52;90H3-17[25;17H[?25h[?25l        [36m/* no, add to buffer */[m[52;90H4-25[25;25H[?25h[?25l[52;88H2[26;25H[?25h[?25l[11;42H[46m{[27;17H}[m[52;88H3,4-18[27;18H[?25h[?25l[11;42H{[27;17H}[52;88H4,11-25[28;25H[?25h[?25l[11;42H[46m{[27;17H}[m[52;88H3,4-18 [27;18H[?25h[?25l[28;51r[28;1H[L[1;52r[52;87H[K[52;87H64,1[10C24%[11;42H{[27;17H}
[?25h[?25l[52;88H3[27;1H[?25h[?25l[52;88H2[26;1H[?25h[?25l[52;88H1[25;1H[?25h[?25l[52;88H0[24;1H[?25h[?25l[52;87H59[23;1H[?25h[?25l[52;90H2-9[23;9H[?25h[?25l[52;87H60[24;9H[?25h[?25l[52;87H59[23;9H[?25h[?25l[52;90H3-17[23;17H[?25h[?25l[52;90H4-25[23;25H[?25h[?25l[52;90H5-26[23;26H[?25h[?25l[52;90H4-25[23;25H[?25h[?25lreak;[23;30H[K[23;25H[?25h[?25leak;[23;29H[K[23;25H[?25h[?25lak;[23;28H[K[23;25H[?25h[?25lk;[23;27H[K[23;25H[?25h[?25l;[23;26H[K[23;25H[?25h[?25lv;[52;90H5-26[23;26H[?25h[?25lu;[52;90H6-27[23;27H[?25h[?25lf;[52;90H7-28[23;28H[?25h[?25l;[23;28H[K[52;90H6-27[23;27H[?25h[?25l;[23;27H[K[52;90H5-26[23;26H[?25h[?25l;[23;26H[K[52;90H4-25[23;25H[?25h[?25l[23;17H;[23;25H[K[52;90H3-17[23;17H[?25h[?25l [7C;[52;90H4-25[23;25H[?25h[?25lb;[52;90H5-26[23;26H[?25h[?25lu;[52;90H6-27[23;27H[?25h[?25lf;[52;90H7-28[23;28H[?25h[?25l[[1m[37m[41m;[26;39H;[m[52;90H8-29[23;29H[?25h[?25lp[1m[37m[41m;[m[52;90H9-30[23;30H[?25h[?25lo[1m[37m[41m;[m[52;90H10-31[23;31H[?25h[?25ls[1m[37m[41m;[m[52;91H1-32[23;32H[?25h[?25l[[1m[37m[41m;[m[52;91H2-33[23;33H[?25h[?25l [1m[37m[41m;[m[52;91H3-34[23;34H[?25h[?25l=[1m[37m[41m;[m[52;91H4-35[23;35H[?25h[?25l [1m[37m[41m;[m[52;91H5-36[23;36H[?25h[52;1H[K[23;35H[?25l[52;87H59,14-35      24%[23;35H[?25h[?25l[52;91H5-36[23;36H[?25h[?25l[52;91H4-35[23;35H[?25h[?25l[52;91H5-36[23;36H[?25h[?25l[52;87H60,2-16 [24;16H[?25h[?25l[52;88H1,15-36[25;36H[?25h[?25l[52;88H2[26;36H[?25h[?25l[52;91H4-35[26;35H[?25h[?25l[26;28H[46m[[mpos++[46m][m[52;91H3-34[26;34H[?25h[?25l[pos++][52;91H2-33[26;33H[?25h[?25l[52;91H1-32[26;32H[?25h[?25l[52;91H0-31[26;31H[?25h[?25l[52;90H9-30 [26;30H[?25h[?25l[52;90H8-29[26;29H[?25h[?25l[46m[[mpos++[46m][m[52;90H7-28[26;28H[?25h[?25l[pos++][52;90H6-27[26;27H[?25h[?25l[52;90H5-26[26;26H[?25h[?25l[52;90H4-25[26;25H[?25h[?25l[52;88H1[25;25H[?25h[?25l[11;51r[11;1H[2M[1;52r[11;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) [46m{[m [36m/* need space? */[m[11;61H[K[12;18H[33mif[m( pos+[33m1[m >= bufspace ){               [36m/* 1 for \0     */[m[13;25H[33mif[m ( bufspace == [33m0[m )[15C[36my: 1st time[m[14;40Hmalloc([33mBUFSIZ[m);[14;55H[K[15;26H[33melse[m{                     [8C[36mor expand  [m[16;25H [7Cbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[17;17H [15Cbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[18;25H}[19;17H}[19;18H[K[20;17H[K[21;17H[36m/* end of command? */[m[22;17H[33mif[m ( c == [35m'\n'[m )[23;25Hbuf[pos[ = [1m[37m[41m;[m[23;37H[K[24;25H[K[25;17H[46m}[m[50;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m
  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H61,3-17[7C24%[25;17H[?25h[?25l[11;42H{[25;17H}[52;88H2,0-1 [26;1H[?25h[?25l[52;88H3,3-17[27;17H[?25h[?25l[28;51r[28;1H[2L[1;52r[28;25H[36m/* no, add to buffer */[m[29;25Hbuf[pos++] = c;[52;87H[K[52;87H64,4-25[7C24%[28;25H[?25h[?25l[52;88H5[29;25H[?25h[?25l[52;88H4[28;25H[?25h[?25l[52;1H2 fewer lines; before #70  3 seconds ago[52;87H[K[28;51r[28;1H[2M[1;52r[50;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m
  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;1H[K[52;87H63,3-17[7C24%2 fewer lines; before #70  3 seconds ago[52;87H[K[52;87H63,3-17[7C24%[27;17H[?25h[?25l[52;88H2,0-1 [26;1H[?25h[?25l[27;51r[27;1H[2L[1;52r[27;25H[36m/* no, add to buffer */[m[28;25Hbuf[pos++] = c;[52;1H[K[52;87H63,4-25[7C24%[27;25H[?25h[?25l[52;88H4[28;25H[?25h[?25l[52;90H3-24[28;24H[?25h[?25l[52;88H3[27;24H[?25h[?25l[52;88H4[28;24H[?25h[?25l[52;88H3[27;24H[?25h[?25l[27;17H[7m       [m[52;1H[33m-- VISUAL --[m[52;87H[K[52;87H63,3-24[7C24%[27;24H[?25h[?25l[7m [m[7m[36m/* no, add to buffer */[m[7m 
                       [m[52;88H4[28;24H[?25h[?25l[27;17H[36m/* no, add to buffer */[m[27;40H[K[28;1H                buf[pos++] = c;[28;32H[K[52;1H[K[52;87H63,3-17[7C24%[27;17H[?25h[?25l[52;88H4[28;17H[?25h[?25l[52;88H5[29;17H[?25h[?25l[52;88H6[30;17H[?25h[?25l[52;88H5[29;17H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H65,3-17[7C24%[29;17H[?25h[?25l[30;51r[30;1H[L[1;52r[29;17H[K[30;1H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[52;87H[K[52;87H66,1[10C24%[30;1H[?25h[?25l        [33mif[m ( c == [33mEOF[m && pos == [33m0[m )             [36m/* EOF and no input     */[m[52;90H2-9[30;9H[?25h[?25l        [33mif[m ( c == [33mEOF[m && pos == [33m0[m )             [36m/* EOF and no input     */[m[52;90H3-17[30;17H[?25h[?25l[52;88H5[29;17H[?25h[?25l[52;88H4[28;17H[?25h[?25l[52;88H3[27;17H[?25h[?25l[52;88H2,1   [26;1H[?25h[?25l[11;42H[46m{[25;17H}[m[52;88H1,3-17[25;17H[?25h[?25l[11;42H{[25;17H}[52;88H0[24;17H[?25h[?25l[52;87H59[23;17H[?25h[?25l[52;90H4-25[23;25H[?25h[?25l[52;90H5-26[23;26H[?25h[?25l[52;90H6-27[23;27H[?25h[?25l[52;90H7-28[23;28H[?25h[?25l[52;90H8-29[23;29H[?25h[?25l[52;90H9-30[23;30H[?25h[?25l[52;90H10-31[23;31H[?25h[?25l[52;91H1-32[23;32H[?25h[?25l[52;91H2-33[23;33H[?25h[?25l[52;91H3-34[23;34H[?25h[?25l[52;91H4-35[23;35H[?25h[?25l[52;91H5-36[23;36H[?25h[?25l[52;91H4-35[23;35H[?25h[?25l[52;91H3-34[23;34H[?25h[?25l[52;91H2-33[23;33H[?25h[?25l[52;91H1-32[23;32H[?25h[?25l = [1m[37m[41m;[m[23;36H[K[23;32H[?25h[?25l] = ;[23;28H[46m[[mpos[46m][m[52;91H2-33[23;33H[?25h[?25l[pos][52;91H3-34[23;34H[?25h[?25l[52;91H4-35[23;35H[?25h[?25l[52;91H5-36[23;36H[?25h[?25l';[52;91H6-37[23;37H[?25h[?25l\;[52;91H7-38[23;38H[?25h[?25l[33m0[m;[52;91H8-39[23;39H[?25h[?25l[35m'\0'[m;[52;91H9-40[23;40H[?25h[?25l[52;90H20-41[23;41H[?25h[?25l[24;51r[24;1H[L[1;52r[52;87H[K[52;87H60,1[10C23%[24;1H[?25h[?25l[52;90H2-9[24;9H[?25h[?25l[52;90H3-17[24;17H[?25h[?25l[52;90H4-25[24;25H[?25h[?25l/[52;90H5-26[24;26H[?25h[?25l[36m//[m[52;90H6-27[24;27H[?25h[?25l[36ms[m[52;90H7-28[24;28H[?25h[?25l[36mp[m[52;90H8-29[24;29H[?25h[?25l[36ml[m[52;90H9-30[24;30H[?25h[?25l[36mi[m[52;90H10-31[24;31H[?25h[?25l[36mt[m[52;91H1-32[24;32H[?25h[?25l[36m [m[52;91H2-33[24;33H[?25h[?25l[36mt[m[52;91H3-34[24;34H[?25h[?25l[36mh[m[52;91H4-35[24;35H[?25h[?25l[36me[m[52;91H5-36[24;36H[?25h[?25l[36m [m[52;91H6-37[24;37H[?25h[?25l[36ml[m[52;91H7-38[24;38H[?25h[?25l[36mi[m[52;91H8-39[24;39H[?25h[?25l[36mn[m[52;91H9-40[24;40H[?25h[?25l[36me[m[52;90H20-41[24;41H[?25h[?25l[36ms[m[52;91H1-42[24;42H[?25h[?25l[25;51r[25;1H[L[1;52r[52;87H[K[52;87H61,1[10C23%[25;1H[?25h[?25l[52;90H2-9[25;9H[?25h[?25l[52;90H3-17[25;17H[?25h[?25l[52;90H4-25[25;25H[?25h[?25lc[52;90H5-26[25;26H[?25h[?25lo[52;90H6-27[25;27H[?25h[?25lm[52;90H7-28[25;28H[?25h[?25lm[52;90H8-29[25;29H[?25h[?25la[52;90H9-30[25;30H[?25h[?25ln[52;90H10-31[25;31H[?25h[?25ld[52;91H1-32[25;32H[?25h[?25ls[52;91H2-33[25;33H[?25h[?25l[52;91H3-34[25;34H[?25h[?25l-[52;91H4-35[25;35H[?25h[?25l[52;91H5-36[25;36H[?25h[?25ls[52;91H6-37[25;37H[?25h[?25lp[52;91H7-38[25;38H[?25h[?25ll[52;91H8-39[25;39H[?25h[?25li[52;91H9-40[25;40H[?25h[?25lt[52;90H20-41[25;41H[?25h[?25ll[52;91H1-42[25;42H[?25h[?25li[52;91H2-43[25;43H[?25h[?25l[25;42H[K[52;91H1-42[25;42H[?25h[?25l[52;88H0[24;42H[?25h[?25l[52;87H59,20-41[23;41H[?25h[?25l[22;20H[46m([11C)[m[52;88H8,19-33[22;33H[?25h[?25l[22;20H([11C)[52;88H7,24-38[21;38H[?25h[?25l[52;88H6,1    [20;1H[?25h[?25l[12;41H[46m{[19;17H}[m[52;88H5,4-18[19;18H[?25h[?25l[12;41H{[19;17H}[52;88H4,10-33[18;33H[?25h[?25l[52;88H3,14-42[17;42H[?25h[?25l[52;88H2[16;42H[?25h[?25l[52;88H1,17-41[15;41H[?25h[?25l[52;88H0,14-42[14;42H[?25h[?25l[52;87H49,21[13;42H[?25h[?25l[12;41H[46m{[19;17H}[m[52;88H8,28[12;42H[?25h[?25l[11;42H[46m{[m[12;41H{[19;17H}[27;17H[46m}[m[52;88H7,35[11;42H[?25h[?25l{[27;17H}[52;88H6,26-41[10;41H[?25h[?25l[52;88H5,1    [9;1H[?25h[?25l[52;88H4[8;1H[?25h[?25l[52;88H3,26-33[7;33H[?25h[?25l[52;88H2,24-31[6;31H[?25h[?25l[52;88H1,35-42[4;42H[?25h[?25l[52;88H0,2-9  [3;9H[?25h[?25l[52;87H39,13-41[2;41H[?25h[?25l[52;88H8,17[1;41H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[52;87H[K[52;87H37,22-41      23%[1;41H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[52;87H[K[52;87H36,23-41      22%[1;41H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H{[52;87H[K[52;87H35,2[10C21%[1;1H[46m{[39;1H}[1;2H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H34,4[10C21%[2;1H{[40;1H}[1;4H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[52;87H[K[52;87H33,42[9C20%[1;42H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          calls fatal from emalloc()[m[52;87H[K[52;87H32,39[9C19%[1;37H[36m[46m()[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[52;87H[K[52;87H31,42[9C19%[2;37H[36m()[1;42H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m * returns: dynamically allocated string holding command line[m[52;87H[K[52;87H30,42[9C18%[1;42H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: read next command line from fp[m[52;87H[K[52;87H29,42[9C17%[1;42H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H28,3[10C17%[1;3H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[52;87H[K[52;87H27,40[9C16%[1;16H[46m([22C)[?25h[?25l[1;51r[m[1;1H[L[1;52r[52;87H[K[52;87H26,1[10C16%[2;16H([22C)[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m"smsh.h"[m[52;87H[K[52;87H25,18[9C15%[1;18H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<string.h>[m[52;87H[K[52;87H24,20[9C14%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdlib.h>[m[52;87H[K[52;87H23,20[9C14%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdio.h>[m[52;87H[K[52;87H22,19[9C13%[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H21,1[10C12%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H20,4[10C12%[1;4H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[52;87H[K[52;87H19,42[9C11%[1;42H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[52;87H[K[52;87H18,42[9C10%[1;42H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    [m[52;87H[K[52;87H17,7[10C10%[1;7H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[52;87H[K[52;87H16,42[10C9%[1;42H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H15,1[11C8%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#define DFL_PROMPT      [m[33m"> "[m[52;87H[K[52;87H14,24-29[7C8%[1;29H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H13,1[11C7%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m"smsh.h"[m[52;87H[K[52;87H12,18[10C7%[1;18H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<signal.h>[m[52;87H[K[52;87H11,20[10C6%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<unistd.h>[m[52;87H[K[52;87H10,20[10C5%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdlib.h>[m[52;87H[K[52;87H9,20[11C5%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdio.h>[m[52;87H[K[52;87H8,19[11C4%[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H7,1[12C3%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **/[m[52;87H[K[52;87H6,5[12C3%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             uses fork, exec, wait, and ignores signals[m[52;87H[K[52;87H5,31-42[8C2%[1;42H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             this one parses the command line into strings[m[52;87H[K[52;87H4,31-42[8C1%[1;42H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             first really useful version after prompting shell[m[52;87H[K[52;87H3,31-42[8C1%[1;42H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m  smsh1.c  small-shell version 1[m[52;87H[K[52;87H2,33[11C0%[1;33H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m[52;87H[K[52;87H1,42[10CTop[1;42H[?25h[?25l[52;87H2,33[2;33H[?25h[?25l[52;87H3,31-42[3;42H[?25h[?25l[52;87H4[4;42H[?25h[?25l[52;87H5[5;42H[?25h[?25l[52;87H6,5    [6;5H[?25h[?25l[52;87H7,1[7;1H[?25h[?25l[52;87H8,19[8;19H[?25h[?25l[52;87H9,20[9;20H[?25h[?25l[52;87H10,20[10;20H[?25h[?25l[52;88H1[11;20H[?25h[?25l[52;88H2,18[12;18H[?25h[?25l[52;88H3,1 [13;1H[?25h[?25l[52;88H4,24-29[14;29H[?25h[?25l[52;88H5,1    [15;1H[?25h[?25l[52;88H6,42[16;42H[?25h[?25l[52;88H7,7 [17;7H[?25h[?25l[52;88H8,42[18;42H[?25h[?25l[52;88H9[19;42H[?25h[?25l[52;87H20,4 [20;4H[?25h[?25l[52;88H1,1[21;1H[?25h[?25l[52;88H2,19[22;19H[?25h[?25l[52;88H3,20[23;20H[?25h[?25l[52;88H4[24;20H[?25h[?25l[52;88H5,18[25;18H[?25h[?25l[52;88H6,1 [26;1H[?25h[?25l[27;16H[46m([22C)[m[52;88H7,40[27;40H[?25h[?25l[27;16H([22C)[52;88H8,3 [28;3H[?25h[?25l[52;88H9,42[29;42H[?25h[?25l[52;87H30[30;42H[?25h[?25l[52;88H1[31;42H[?25h[?25l[32;37H[36m[46m()[m[52;88H2,39[32;39H[?25h[?25l[36m()[m[52;88H3,42[33;42H[?25h[?25l[52;88H4,4 [34;4H[?25h[?25l[52;88H5,2[35;2H[?25h[?25l[52;88H6,23-41[36;41H[?25h[?25l[52;88H7,22[37;41H[?25h[?25l[52;88H8,17[38;41H[?25h[?25l[52;88H9,13[39;41H[?25h[?25l[52;87H40,2-9  [40;9H[?25h[?25l[52;88H1,35-42[41;42H[?25h[?25l[52;88H2,24-31[43;31H[?25h[?25l[52;88H3,26-33[44;33H[?25h[?25l[52;88H4,1    [45;1H[?25h[?25l[52;88H5[46;1H[?25h[?25l[52;88H6,26-41[47;41H[?25h[?25l[52;88H7,35-42[48;42H[?25h[?25l[52;88H8,28[49;42H[?25h[?25l[52;88H9,21[50;42H[?25h[?25l[52;87H50,14[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;26H[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H51,17-41[7C0%[51;41H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H52,14-42[7C1%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H53,14-42[7C1%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H54,10-33[7C2%[51;33H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H55,4-18[8C3%[44;41H[46m{[51;17H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H56,1[11C3%[43;41H{[50;17H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* end of command? */[m[52;87H[K[52;87H57,24-38[7C4%[51;38H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H58,19-33[7C5%[51;20H[46m([11C)[?25h[?25l[1;51r[m[51;1H
[1;52r[51;25Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H59,20-41[7C5%[50;20H([11C)[51;41H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//split the lines[m[52;87H[K[52;87H60,21-42[7C6%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommands - splitl[52;87H[K[52;87H61,21-42[7C7%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H62,3-17[8C7%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H63,4-18[8C8%[35;42H[46m{[51;17H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H64,1[11C8%[34;42H{[50;17H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* no, add to buffer */[m[52;87H[K[52;87H65,26-40[7C9%[51;40H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos++] = c;[52;87H[K[52;87H66,18-32      10%[51;32H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H67,3-17[7C10%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[52;87H[K[52;87H68,28-42      11%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[52;87H[K[52;87H69,17-41      12%[51;41H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H70,19-33      12%[51;33H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mreturn[m buf;[52;87H[K[52;87H71,14-28      13%[51;28H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H}[52;87H[K[52;87H72,2[10C14%[13;1H[46m{[51;1H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H73,1[10C14%[12;1H{[50;1H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/**[m[52;87H[K[52;87H74,4[10C15%[51;4H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H75,38-42      16%[51;42H[?25h[?25l[52;88H4,4    [50;4H[?25h[?25l[52;88H5,38-42[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m **/[m[52;87H[K[52;87H76,5[10C16%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H77,42[9C17%[51;21H[35m[46m([19C)[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H78,1[10C17%[50;21H[35m([19C)
[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H79,30[9C18%[51;18H[46m([10C)[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H80,3[10C19%[50;18H([10C)[51;3H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H81,42[9C19%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H82,42[9C20%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H83,42[9C21%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H84,42[9C21%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H85,42[9C22%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H86,4[10C23%[51;4H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H87,2[10C23%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *newstr();[52;87H[K[52;87H88,18-19      24%[51;19H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  **args ;[52;87H[K[52;87H89,16-17      25%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H90,21-42      25%[51;42H[?25h[?25l[52;87H89,16-17[50;17H[?25h[?25l[52;88H8,18-19[49;19H[?25h[?25l[52;88H7,2    [48;2H[?25h[?25l[52;88H6,4[47;4H[?25h[?25l[52;88H5,42[46;42H[?25h[?25l[52;88H4[45;42H[?25h[?25l[52;88H3[44;42H[?25h[?25l[52;88H2[43;42H[?25h[?25l[52;88H1[42;42H[?25h[?25l[52;88H0,3 [41;3H[?25h[?25l[40;18H[46m([10C)[m[52;87H79,30[40;30H[?25h[?25l[40;18H([10C)[52;88H8,1 [39;1H[?25h[?25l[38;21H[35m[46m([19C)[m[52;88H7,42[38;42H[?25h[?25l[38;21H[35m([19C)[m[52;88H6,5 [37;5H[?25h[?25l[52;88H5,38-42[36;42H[?25h[?25l[52;88H4,4    [35;4H[?25h[?25l[52;88H3,1[34;1H[?25h[?25l[52;88H2,2[33;2H[?25h[?25l[52;88H1,14-28[32;28H[?25h[?25l[52;88H0,19-33[31;33H[?25h[?25l[52;87H69,17-41[30;41H[?25h[?25l[52;88H8,28-42[29;42H[?25h[?25l[52;88H7,3-17 [28;17H[?25h[?25l[52;88H6,18-32[27;32H[?25h[?25l[52;88H5,26-40[26;40H[?25h[?25l[52;88H4,1    [25;1H[?25h[?25l[8;42H[46m{[24;17H}[m[52;88H3,4-18[24;18H[?25h[?25l[8;42H{[24;17H}[52;88H2,3-17[23;17H[?25h[?25l[52;88H1,21-42[22;42H[?25h[?25l[52;88H0[21;42H[?25h[?25l[52;88H1[22;42H[?25h[?25li[52;91H2-43[22;43H[?25h[?25ln[52;91H3-44[22;44H[?25h[?25le[52;91H4-45[22;45H[?25h[?25l([52;91H5-46[22;46H[?25h[?25lb[52;91H6-47[22;47H[?25h[?25lu[52;91H7-48[22;48H[?25h[?25lf[52;91H8-49[22;49H[?25h[?25l)[46m([mbuf[46m)[m[52;91H9-50[22;50H[?25h[?25l;(buf)[52;90H30-51[22;51H[?25h[?25l[23;51r[23;1H[L[1;52r[52;87H[K[52;87H62,1[10C25%[23;1H[?25h[?25l[52;90H2-9[23;9H[?25h[?25l[52;90H3-17[23;17H[?25h[?25l[52;90H4-25[23;25H[?25h[?25lc[52;90H5-26[23;26H[?25h[?25lo[52;90H6-27[23;27H[?25h[?25lm[52;90H7-28[23;28H[?25h[?25lm[52;90H8-29[23;29H[?25h[?25la[52;90H9-30[23;30H[?25h[?25ln[52;90H10-31[23;31H[?25h[?25ld[52;91H1-32[23;32H[?25h[?25l[1m[37m[41m)[m[52;91H2-33[23;33H[?25h[?25lc[52;91H3-34[23;34H[?25h[?25l[23;33H[K[52;91H2-33[23;33H[?25h[?25l[23;32H[K[52;91H1-32[23;32H[?25h[?25l_[52;91H2-33[23;33H[?25h[?25lc[52;91H3-34[23;34H[?25h[?25lo[52;91H4-35[23;35H[?25h[?25lu[52;91H5-36[23;36H[?25h[?25ln[52;91H6-37[23;37H[?25h[?25lt[52;91H7-38[23;38H[?25h[?25l[52;91H8-39[23;39H[?25h[?25l=[52;91H9-40[23;40H[?25h[?25l[52;90H20-41[23;41H[?25h[?25lc[52;91H1-42[23;42H[?25h[?25lo[52;91H2-43[23;43H[?25h[?25lu[52;91H3-44[23;44H[?25h[?25li[52;91H4-45[23;45H[?25h[?25l[23;44H[K[52;91H3-44[23;44H[?25h[?25ln[52;91H4-45[23;45H[?25h[?25lt[52;91H5-46[23;46H[?25h[?25l[1m[37m[41m)[m[52;91H6-47[23;47H[?25h[?25l[23;46H[K[52;91H5-46[23;46H[?25h[?25l_[52;91H6-47[23;47H[?25h[?25lc[52;91H7-48[23;48H[?25h[?25lo[52;91H8-49[23;49H[?25h[?25lm[52;91H9-50[23;50H[?25h[?25lm[52;90H30-51[23;51H[?25h[?25la[52;91H1-52[23;52H[?25h[?25ln[52;91H2-53[23;53H[?25h[?25ld[52;91H3-54[23;54H[?25h[?25ls[52;91H4-55[23;55H[?25h[?25l*[52;91H5-56[23;56H[?25h[?25l([52;91H6-57[23;57H[?25h[?25l[23;56H[K[52;91H5-56[23;56H[?25h[?25l[23;55H[K[52;91H4-55[23;55H[?25h[?25l([52;91H5-56[23;56H[?25h[?25lc[52;91H6-57[23;57H[?25h[?25lo[52;91H7-58[23;58H[?25h[?25lm[52;91H8-59[23;59H[?25h[?25lm[52;91H9-60[23;60H[?25h[?25la[52;90H40-61[23;61H[?25h[?25ln[52;91H1-62[23;62H[?25h[?25ld[52;91H2-63[23;63H[?25h[?25ls[52;91H3-64[23;64H[?25h[?25l)[23;55H[46m([8C)[m[52;91H4-65[23;65H[?25h[?25ll[23;55H([8C)[52;91H5-66[23;66H[?25h[?25l[23;65H[K[23;55H[46m([8C)[m[52;91H4-65[23;65H[?25h[?25l;[23;55H([8C)[52;91H5-66[23;66H[?25h[?25l[52;88H1,30-51[22;51H[?25h[?25l[52;88H2,45-66[23;66H[?25h[?25l[52;88H1,30-51[22;51H[?25h[?25l[52;88H0,21-42[21;42H[?25h[?25l[52;87H59,20-41[20;41H[?25h[?25l[19;20H[46m([11C)[m[52;88H8,19-33[19;33H[?25h[?25l[19;20H([11C)[52;88H7,24-38[18;38H[?25h[?25l[52;88H6,1    [17;1H[?25h[?25l[9;41H[46m{[16;17H}[m[52;88H5,4-18[16;18H[?25h[?25l[9;41H{[16;17H}[52;88H4,10-33[15;33H[?25h[?25l[52;88H3,34-66[14;66H[?25h[?25l[52;88H2,38[13;66H[?25h[?25l[52;88H1,2[12;66H[?25h[?25l[52;88H0,27-55[11;55H[?25h[?25l[52;87H49,35-66[10;66H[?25h[?25l[52;88H8,39[9;66H[?25h[?25l[52;88H7,54-61[8;61H[?25h[?25l[52;88H6,37-66[7;66H[?25h[?25l[52;88H5,1    [6;1H[?25h[?25l[52;88H4[5;1H[?25h[?25l[52;88H3,26-33[4;33H[?25h[?25l[52;88H2,24-31[3;31H[?25h[?25l[52;88H1,59-66[1;66H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H40,2-9[8C24%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    c;[30C[36m/* input char           */[m[52;87H[K[52;87H39,28-65      24%[1;65H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;87H[K[52;87H38,35-66      23%[1;66H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[52;87H[K[52;87H37,37-65      22%[1;65H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[52;87H[K[52;87H36,34-66      22%[1;66H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H{[52;87H[K[52;87H35,2[10C21%[1;1H[46m{[40;1H}[1;2H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H34,4[10C21%[2;1H{[41;1H}[1;4H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[52;87H[K[52;87H33,48[9C20%[1;48H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          calls fatal from emalloc()[m[52;87H[K[52;87H32,39[9C19%[1;37H[36m[46m()[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[52;87H[K[52;87H31,46[9C19%[1;25H[36m[46m([19C)[m[2;37H[36m()[1;46H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m * returns: dynamically allocated string holding command line[m[52;87H[K[52;87H30,62[9C18%[2;25H[36m([19C)[1;62H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m * purpose: read next command line from fp[m[52;87H[K[52;87H29,43[9C17%[1;43H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H28,3[10C17%[1;3H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[52;87H[K[52;87H27,40[9C16%[1;16H[46m([22C)[?25h[?25l[1;51r[m[1;1H[L[1;52r[52;87H[K[52;87H26,1[10C15%[2;16H([22C)[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m"smsh.h"[m[52;87H[K[52;87H25,18[9C15%[1;18H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<string.h>[m[52;87H[K[52;87H24,20[9C14%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdlib.h>[m[52;87H[K[52;87H23,20[9C14%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdio.h>[m[52;87H[K[52;87H22,19[9C13%[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H21,1[10C12%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H20,4[10C12%[1;4H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[52;87H[K[52;87H19,62[9C11%[1;62H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[52;87H[K[52;87H18,64[9C10%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    [m[52;87H[K[52;87H17,7[10C10%[1;7H[?25h[?25l[52;88H8,64[2;64H[?25h[?25l[52;88H9,62[3;62H[?25h[?25l[52;87H20,4 [4;4H[?25h[?25l[52;88H1,1[5;1H[?25h[?25l[52;88H0,4[4;4H[?25h[?25l[52;87H19,62[3;62H[?25h[?25l[52;88H8,64[2;64H[?25h[?25l[52;88H7,7 [1;7H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[52;87H[K[52;87H16,65[10C9%[1;65H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H15,1[11C8%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#define DFL_PROMPT      [m[33m"> "[m[52;87H[K[52;87H14,24-29[7C8%[1;29H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H13,1[11C7%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m"smsh.h"[m[52;87H[K[52;87H12,18[10C7%[1;18H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<signal.h>[m[52;87H[K[52;87H11,20[10C6%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<unistd.h>[m[52;87H[K[52;87H10,20[10C5%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdlib.h>[m[52;87H[K[52;87H9,20[11C5%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdio.h>[m[52;87H[K[52;87H8,19[11C4%[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H7,1[12C3%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **/[m[52;87H[K[52;87H6,5[12C3%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             uses fork, exec, wait, and ignores signals[m[52;87H[K[52;87H5,48-59[8C2%[1;59H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             this one parses the command line into strings[m[52;87H[K[52;87H4,51-62[8C1%[1;62H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             first really useful version after prompting shell[m[52;87H[K[52;87H3,55-66[8C1%[1;66H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m  smsh1.c  small-shell version 1[m[52;87H[K[52;87H2,33[11C0%[1;33H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m[52;87H[K[52;87H1,57[10CTop[1;57H[?25h[?25l[52;87H2,33[2;33H[?25h[?25l[52;87H3,55-66[3;66H[?25h[?25l[52;87H4,51-62[4;62H[?25h[?25l[52;87H5,48-59[5;59H[?25h[?25l[52;87H6,5    [6;5H[?25h[?25l[52;87H7,1[7;1H[?25h[?25l[52;87H8,19[8;19H[?25h[?25l[52;87H9,20[9;20H[?25h[?25l[52;87H10,20[10;20H[?25h[?25l[52;88H1[11;20H[?25h[?25l[52;88H2,18[12;18H[?25h[?25l[52;88H3,1 [13;1H[?25h[?25l[52;88H4,24-29[14;29H[?25h[?25l[52;88H5,1    [15;1H[?25h[?25l[52;88H6,65[16;65H[?25h[?25l[52;88H7,7 [17;7H[?25h[?25l[52;88H8,64[18;64H[?25h[?25l[52;88H9,62[19;62H[?25h[?25l[52;87H20,4 [20;4H[?25h[?25l[52;88H1,1[21;1H[?25h[?25l[52;88H2,19[22;19H[?25h[?25l[52;88H3,20[23;20H[?25h[?25l[52;88H4[24;20H[?25h[?25l[52;88H5,18[25;18H[?25h[?25l[52;88H6,1 [26;1H[?25h[?25l[27;16H[46m([22C)[m[52;88H7,40[27;40H[?25h[?25l[27;16H([22C)[52;88H8,3 [28;3H[?25h[?25l[27;16H[46m([22C)[m[52;88H7,40[27;40H[?25h[?25l[27;16H([22C)[52;88H6,1 [26;1H[?25h[?25l[52;88H5,18[25;18H[?25h[?25l[52;88H4,20[24;20H[?25h[?25l[52;88H3[23;20H[?25h[?25l[52;88H2,19[22;19H[?25h[?25l[52;88H1,1 [21;1H[?25h[?25l[52;88H0,4[20;4H[?25h[?25l[52;87H19,62[19;62H[?25h[?25l[52;88H8,64[18;64H[?25h[?25l[52;88H7,7 [17;7H[?25h[?25l[52;88H6,65[16;65H[?25h[?25l[52;88H5,1 [15;1H[?25h[?25l[52;88H4,24-29[14;29H[?25h[?25l[52;88H3,1    [13;1H[?25h[?25l[52;88H2,18[12;18H[?25h[?25l[52;88H1,20[11;20H[?25h[?25l[52;88H0[10;20H[?25h[?25l[52;87H9,20 [9;20H[?25h[?25l[52;87H10,20[10;20H[?25h[?25l[52;88H1[11;20H[?25h[?25l[52;88H0[10;20H[?25h[?25l[52;87H9,20 [9;20H[?25h[?25l[52;87H8,19[8;19H[?25h[?25l[52;87H7,1 [7;1H[?25h[?25l[52;87H6,5[6;5H[?25h[?25l[52;87H5,48-59[5;59H[?25h[?25l[52;87H4,51-62[4;62H[?25h[?25l[52;87H3,55-66[3;66H[?25h[?25l[52;87H2,33   [2;33H[?25h[?25l[52;87H1,57[1;57H[?25h[?25l[52;87H2,33[2;33H[?25h[?25l[52;87H3,55-66[3;66H[?25h[?25l[52;87H4,51-62[4;62H[?25h[?25l[52;87H5,48-59[5;59H[?25h[?25l[52;87H6,5    [6;5H[?25h[?25l[52;87H7,1[7;1H[?25h[?25l[52;87H8,19[8;19H[?25h[?25l[52;87H9,20[9;20H[?25h[?25l[52;87H10,20[10;20H[?25h[?25l[52;88H1[11;20H[?25h[?25l[52;88H0[10;20H[?25h[?25l[52;87H9,20 [9;20H[?25h[?25l[52;87H8,19[8;19H[?25h[?25l[52;87H9,20[9;20H[?25h[?25l[52;87H10,20[10;20H[?25h[?25l[52;88H1[11;20H[?25h[?25l[52;88H2,18[12;18H[?25h[?25l[52;88H3,1 [13;1H[?25h[?25l[52;88H4,24-29[14;29H[?25h[?25l[52;88H5,1    [15;1H[?25h[?25l[52;88H6,65[16;65H[?25h[?25l[52;88H7,7 [17;7H[?25h[?25l[52;88H8,64[18;64H[?25h[?25l[52;88H9,62[19;62H[?25h[?25l[52;87H20,4 [20;4H[?25h[?25l[52;88H1,1[21;1H[?25h[?25l[52;88H2,19[22;19H[?25h[?25l[33m4[m[52;90H20[22;20H[?25h[?25l4e[52;91H1[22;21H[?25h[52;1H[K[22;20H[?25l[52;87H22,20[9CTop[22;20H[?25h[?25l[52;1H4 fewer lines[52;87H[K[22;51r[22;1H[4M[1;52r[48;26H[33melse[m{[26C[36m/* or expand    */[m[49;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[50;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[51;25H}[52;1H[K[52;87H22,0-1[8CTop4 fewer lines[52;87H[K[52;87H22,0-1[8CTop[22;1H[?25h[?25l[?25h[?25l[22;51r[51;1H
[1;52r[51;17H}[52;1H[K[52;87H22,1[10CTop[22;1H[?25h[?25l[52;88H1,0-1[21;1H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H21,1[10CTop[21;1H[?25h[?25l[22;51r[22;1H[L[1;52r[52;87H[K[52;87H22,1[10CTop[22;1H[?25h[?25l[23;51r[23;1H[L[1;52r[52;87H[K[52;87H23,1[10CTop[23;1H[?25h[?25l[24;51r[24;1H[L[1;52r[52;87H[K[52;87H24,1[10CTop[24;1H[?25h[?25l[52;88H3[23;1H[?25h[?25l[52;88H2[22;1H[?25h[?25l[52;88H1[21;1H[?25h[?25l[52;88H0[20;1H[?25h[?25l[52;87H19[19;1H[?25h[?25l[52;88H8[18;1H[?25h[?25l[52;88H7[17;1H[?25h[?25l[52;88H6[16;1H[?25h[?25l[52;88H5[15;1H[?25h[?25l[16;51r[16;1H[L[1;52r[52;87H[K[52;87H16,1[10CTop[16;1H[?25h[?25l[17;51r[17;1H[L[1;52r[52;87H[K[52;87H17,1[10CTop[17;1H[?25h[?25l[18;51r[18;1H[L[1;52r[52;87H[K[52;87H18,1[10CTop[18;1H[?25h[?25l[52;88H7[17;1H[?25h[?25l[52;88H6[16;1H[?25h[?25li[52;90H2[16;2H[?25h[?25ln[52;90H3[16;3H[?25h[?25l[32mint[m[52;90H4[16;4H[?25h[?25l[52;90H5[16;5H[?25h[?25lc[52;90H6[16;6H[?25h[?25lo[52;90H7[16;7H[?25h[?25lu[52;90H8[16;8H[?25h[?25ln[52;90H9[16;9H[?25h[?25lt[52;90H10[16;10H[?25h[?25l[1m[37m[41m)[m[52;91H1[16;11H[?25h[?25lc[52;91H2[16;12H[?25h[?25lo[52;91H3[16;13H[?25h[?25lm[52;91H4[16;14H[?25h[?25lm[52;91H5[16;15H[?25h[?25la[52;91H6[16;16H[?25h[?25ln[52;91H7[16;17H[?25h[?25l[16;16H[K[52;91H6[16;16H[?25h[?25l[16;15H[K[52;91H5[16;15H[?25h[?25l[16;14H[K[52;91H4[16;14H[?25h[?25l[16;13H[K[52;91H3[16;13H[?25h[?25l[16;12H[K[52;91H2[16;12H[?25h[?25l[16;11H[K[52;91H1[16;11H[?25h[?25l[16;10H[K[52;91H0[16;10H[?25h[?25l[16;9H[K[52;90H9 [16;9H[?25h[?25lt[52;90H10[16;10H[?25h[?25l_[52;91H1[16;11H[?25h[?25lc[52;91H2[16;12H[?25h[?25lo[52;91H3[16;13H[?25h[?25lm[52;91H4[16;14H[?25h[?25lm[52;91H5[16;15H[?25h[?25la[52;91H6[16;16H[?25h[?25ln[52;91H7[16;17H[?25h[?25ld[52;91H8[16;18H[?25h[?25ls[52;91H9[16;19H[?25h[?25l*[52;90H20[16;20H[?25h[?25l[16;19H[K[52;90H19[16;19H[?25h[?25l([36;1H[1m[37m[41m{[49;42H{[50;41H{[m[52;90H20[16;20H[?25h[?25lc[52;91H1[16;21H[?25h[?25lg[52;91H2[16;22H[?25h[?25la[52;91H3[16;23H[?25h[?25lr[52;91H4[16;24H[?25h[?25l[16;23H[K[52;91H3[16;23H[?25h[?25l[16;22H[K[52;91H2[16;22H[?25h[?25l[16;21H[K[52;91H1[16;21H[?25h[?25lh[52;91H2[16;22H[?25h[?25la[52;91H3[16;23H[?25h[?25l[32mchar[m[52;91H4[16;24H[?25h[?25l*[52;91H5[16;25H[?25h[?25l*[52;91H6[16;26H[?25h[?25l[52;91H7[16;27H[?25h[?25lc[52;91H8[16;28H[?25h[?25lo[52;91H9[16;29H[?25h[?25lm[52;90H30[16;30H[?25h[?25lm[52;91H1[16;31H[?25h[?25la[52;91H2[16;32H[?25h[?25ln[52;91H3[16;33H[?25h[?25ld[52;91H4[16;34H[?25h[?25ls[52;91H5[16;35H[?25h[?25l([52;91H6[16;36H[?25h[?25l[16;35H[K[52;91H5[16;35H[?25h[?25l)[36;1H{[49;42H{ [50;41H{ [16;19H[46m([15C)[m[52;91H6[16;36H[?25h[?25l{[16;19H([15C)[52;91H7[16;37H[?25h[?25l[17;51r[17;1H[L[1;52r[52;87H[K[52;87H17,1[10CTop[17;1H[?25h[?25l}[16;36H[46m{
}[m[52;90H2[17;2H[?25h[?25l[52;90H1[17;1H[?25h[?25l[18;51r[18;1H[L[1;52r[17;1H[K[18;1H}[52;87H[K[52;87H18,1[10CTop[18;1H[46m}[?25h[?25l[19;51r[m[19;1H[L[1;52r[18;1H[K[19;1H}[52;87H[K[52;87H19,1[10CTop[19;1H[46m}[?25h[?25l[m[16;36H{


}[52;88H8[18;1H[?25h[?25l[52;88H7[17;1H[?25h[?25l[52;90H2-9[17;9H[?25h[?25li[52;90H3-10[17;10H[?25h[?25ln[52;90H4-11[17;11H[?25h[?25l[32mint[m[52;90H5-12[17;12H[?25h[?25l[52;90H6-13[17;13H[?25h[?25lc[52;90H7-14[17;14H[?25h[?25lo[52;90H8-15[17;15H[?25h[?25lu[52;90H9-16[17;16H[?25h[?25ln[52;90H10-17[17;17H[?25h[?25lt[52;91H1-18[17;18H[?25h[?25l;[52;91H2-19[17;19H[?25h[?25l[18;51r[18;1H[L[1;52r[52;87H[K[52;87H18,1[10CTop[18;1H[?25h[?25l[52;90H2-9[18;9H[?25h[?25lc[52;90H3-10[18;10H[?25h[?25lh[52;90H4-11[18;11H[?25h[?25la[52;90H5-12[18;12H[?25h[?25l[32mchar[m[52;90H6-13[18;13H[?25h[?25l*[52;90H7-14[18;14H[?25h[?25l*[52;90H8-15[18;15H[?25h[?25l[52;90H9-16[18;16H[?25h[?25lc[52;90H10-17[18;17H[?25h[?25lm[52;91H1-18[18;18H[?25h[?25ld[52;91H2-19[18;19H[?25h[?25l[18;18H[K[52;91H1-18[18;18H[?25h[?25l[18;17H[K[52;91H0-17[18;17H[?25h[?25l[18;16H[K[52;90H9-16 [18;16H[?25h[?25l[52;90H8-15[18;15H[?25h[?25l[18;14H[K[52;90H7-14[18;14H[?25h[?25l[18;13H[K[52;90H6-13[18;13H[?25h[?25lcha[18;12H[K[52;90H5-12[18;12H[?25h[?25l[18;11H[K[52;90H4-11[18;11H[?25h[?25l[18;10H[K[52;90H3-10[18;10H[?25h[?25l[18;9H[K[52;90H2-9 [18;9H[?25h[?25lc[52;90H3-10[18;10H[?25h[?25lh[52;90H4-11[18;11H[?25h[?25la[52;90H5-12[18;12H[?25h[?25l[32mchar[m[52;90H6-13[18;13H[?25h[?25l[52;90H7-14[18;14H[?25h[?25l[52;90H6-13[18;13H[?25h[?25l*[52;90H7-14[18;14H[?25h[?25l*[52;90H8-15[18;15H[?25h[?25l[52;90H9-16[18;16H[?25h[?25lc[52;90H10-17[18;17H[?25h[?25lm[52;91H1-18[18;18H[?25h[?25ld[52;91H2-19[18;19H[?25h[?25l[52;91H3-20[18;20H[?25h[?25l=[52;91H4-21[18;21H[?25h[?25l[52;91H5-22[18;22H[?25h[?25lc[52;91H6-23[18;23H[?25h[?25lo[52;91H7-24[18;24H[?25h[?25lm[52;91H8-25[18;25H[?25h[?25lm[52;91H9-26[18;26H[?25h[?25la[52;90H20-27[18;27H[?25h[?25ln[52;91H1-28[18;28H[?25h[?25ld[52;91H2-29[18;29H[?25h[?25ls[52;91H3-30[18;30H[?25h[?25l;[52;91H4-31[18;31H[?25h[?25l[19;51r[19;1H[L[1;52r[52;87H[K[52;87H19,1[10CTop[19;1H[?25h[?25l[20;51r[20;1H[L[1;52r[52;87H[K[52;87H20,1[10CTop[20;1H[?25h[?25l[52;90H2-9[20;9H[?25h[?25lw[52;90H3-10[20;10H[?25h[?25lh[52;90H4-11[20;11H[?25h[?25li[52;90H5-12[20;12H[?25h[?25ll[52;90H6-13[20;13H[?25h[?25l[33mwhile[m[52;90H7-14[20;14H[?25h[?25l([52;90H8-15[20;15H[?25h[?25lc[52;90H9-16[20;16H[?25h[?25lm[52;90H10-17[20;17H[?25h[?25ld[52;91H1-18[20;18H[?25h[?25l[52;91H2-19[20;19H[?25h[?25l![52;91H3-20[20;20H[?25h[?25l=[52;91H4-21[20;21H[?25h[?25l[52;91H5-22[20;22H[?25h[?25lN[52;91H6-23[20;23H[?25h[?25lU[52;91H7-24[20;24H[?25h[?25lL[52;91H8-25[20;25H[?25h[?25l[33mNULL[m[52;91H9-26[20;26H[?25h[?25lNULL_[52;90H20-27[20;27H[?25h[?25l[33mNULL[m[20;26H[K[52;90H19-26[20;26H[?25h[?25l)[20;14H[46m([11C)[m[52;90H20-27[20;27H[?25h[?25l[20;14H([11C)[52;87H19,1    [19;1H[?25h[?25l[20;14H[46m([11C)[m[52;87H20,20-27[20;27H[?25h[?25l{[20;14H([11C)[46m{

}[m[52;91H1-28[20;28H[?25h[?25l[21;51r[21;1H[L[1;52r[23;1H}[52;87H[K[52;87H21,1[10CTop[20;27H{
[?25h[?25l[22;51r[22;1H[L[1;52r[52;87H[K[52;87H22,1[10CTop[22;1H[?25h[?25l}[20;27H[46m{

}[m[52;90H2[22;2H[?25h[?25l[52;90H1[22;1H[?25h[?25l[46m        [m}        [46m}[m[52;90H2-9[22;9H[?25h[?25l[20;27H{[22;9H}[52;88H1,1  [21;1H[?25h[?25l[52;90H2-9[21;9H[?25h[?25l[52;90H3-17[21;17H[?25h[?25lc[52;90H4-18[21;18H[?25h[?25lo[52;90H5-19[21;19H[?25h[?25lu[52;90H6-20[21;20H[?25h[?25ln[52;90H7-21[21;21H[?25h[?25lt[52;90H8-22[21;22H[?25h[?25l+[52;90H9-23[21;23H[?25h[?25l+[52;90H10-24[21;24H[?25h[?25l;[52;91H1-25[21;25H[?25h[?25l[22;51r[22;1H[L[1;52r[51;1H[34m@                                                                                                       [m[52;87H[K[52;87H22,1[10CTop[22;1H[?25h[?25l[52;90H2-9[22;9H[?25h[?25l[52;90H3-17[22;17H[?25h[?25lc[52;90H4-18[22;18H[?25h[?25lm[52;90H5-19[22;19H[?25h[?25ld[52;90H6-20[22;20H[?25h[?25l+[52;90H7-21[22;21H[?25h[?25l+[52;90H8-22[22;22H[?25h[?25l;[52;90H9-23[22;23H[?25h[?25l[52;88H1[21;23H[?25h[?25l[52;88H0,16-23[20;23H[?25h[?25l[52;87H19,1    [19;1H[?25h[?25l[20;51r[20;1H[L[1;52r[52;87H[K[52;87H20,1[10CTop[20;1H[?25h[?25l[52;90H2-9[20;9H[?25h[?25lc[52;90H3-10[20;10H[?25h[?25lo[52;90H4-11[20;11H[?25h[?25lu[52;90H5-12[20;12H[?25h[?25ln[52;90H6-13[20;13H[?25h[?25lt[52;90H7-14[20;14H[?25h[?25l[52;90H8-15[20;15H[?25h[?25l=[52;90H9-16[20;16H[?25h[?25l[52;90H10-17[20;17H[?25h[?25l[33m0[m[52;91H1-18[20;18H[?25h[?25l;[52;91H2-19[20;19H[?25h[?25ll[52;91H3-20[20;20H[?25h[?25l[20;19H[K[52;91H2-19[20;19H[?25h[?25l[52;88H1[21;19H[?25h[?25l[52;91H1-18[21;18H[?25h[?25l[52;91H0-17[21;17H[?25h[?25l[52;90H9-16 [21;16H[?25h[?25l[46m([11C)[m[52;90H8-15[21;15H[?25h[?25l*cmd != [33mNU[m[1C[33m[46mL[m){[21;14H([11C[33mL[m[52;90H9-16[21;16H[?25h[52;1H[K[21;15H[?25l[52;87H21,8-15[7CTop[21;15H[?25h[?25l[52;87H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"sm2in.c" 218L, 4713C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi sm2in.c ls[Kcp smsh1.c sm2in.c[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[Kls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi sm2in.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"sm2in.c" 218L, 4713C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments
  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m count_commands([32mchar[m** commands){[17;9H[32mint[m count;[18;9H[32mchar[m** cmd = commands;[20;9Hcount = [33m0[m;[21;9H[33mwhile[m(*cmd != [33mNULL[m){[22;17Hcount++;[23;17Hcmd++;[24;9H}

}


[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string
 */[m[38;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[47;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[48;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[49;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[50;10H[32mint[m    c;[30C[36m/* input char           */[m[52;87H1,1[11CTop[1;1H[?25h[?25l[52;87H2[2;1H[?25h[?25l[52;87H3[3;1H[?25h[?25l[52;87H4[4;1H[?25h[?25l[52;87H5[5;1H[?25h[?25l[52;87H6[6;1H[?25h[?25l[52;87H7,0-1[7;1H[?25h[?25l[52;87H8,1  [8;1H[?25h[?25l[52;87H9[9;1H[?25h[?25l[52;87H10,1[10;1H[?25h[?25l[52;88H1[11;1H[?25h[?25l[52;88H2[12;1H[?25h[?25l[52;88H3,0-1[13;1H[?25h[?25l[52;88H4,1  [14;1H[?25h[?25l[52;88H5,0-1[15;1H[?25h[?25l[52;88H6,1  [16;1H[?25h[?25l[52;88H7,1-8[17;8H[?25h[?25l[52;88H8[18;8H[?25h[?25l[52;88H9,0-1[19;1H[?25h[?25l[52;87H20,1-8[20;8H[?25h[?25l[52;88H1[21;8H[?25h[?25l[52;88H2[22;8H[?25h[?25l[52;88H3[23;8H[?25h[?25l[52;88H4[24;8H[?25h[?25l[52;88H5,0-1[25;1H[?25h[?25l[16;36H[46m{[26;1H}[m[52;88H6,1  [26;1H[?25h[?25l[16;36H{[26;1H}[52;88H7,0-1[27;1H[?25h[?25l[16;36H[46m{[26;1H}[m[52;88H6,1  [26;1H[?25h[?25l[16;36H{[26;1H}[52;88H5,0-1[25;1H[?25h[?25l[52;88H4,1-8[24;8H[?25h[?25l[52;88H3[23;8H[?25h[?25l[52;88H4[24;8H[?25h[?25l[52;88H5,0-1[25;1H[?25h[?25l[52;88H4,1-8[24;8H[?25h[?25l[52;88H5,0-1[25;1H[?25h[?25l[52;1H[33m-- INSERT --[m[52;13H[K[52;87H25,1[10CTop[25;1H[?25h[?25l[52;90H2-9[25;9H[?25h[?25le[52;90H3-10[25;10H[?25h[?25l[25;9H[K[52;90H2-9 [25;9H[?25h[?25lr[52;90H3-10[25;10H[?25h[?25le[52;90H4-11[25;11H[?25h[?25lt[52;90H5-12[25;12H[?25h[?25lu[52;90H6-13[25;13H[?25h[?25lr[52;90H7-14[25;14H[?25h[?25l[33mreturn[m[52;90H8-15[25;15H[?25h[?25l[52;90H9-16[25;16H[?25h[?25lc[52;90H10-17[25;17H[?25h[?25lo[52;91H1-18[25;18H[?25h[?25lu[52;91H2-19[25;19H[?25h[?25ln[52;91H3-20[25;20H[?25h[?25lt[52;91H4-21[25;21H[?25h[?25l;[52;91H5-22[25;22H[?25h[?25l[16;36H[46m{[26;1H}[m[52;88H6,2    [26;2H[?25h[?25l[16;36H{[26;1H}[52;88H7,1[27;1H[?25h[?25l[52;88H8[28;1H[?25h[?25l[52;88H9,22[29;22H[?25h[?25l[52;87H30,7 [30;7H[?25h[?25l[31;21H[36m[46m([22C)[m[52;88H1,22[31;22H[?25h[?25l[36m([22C)[m[52;88H2[32;22H[?25h[?25l[52;88H3,4 [33;4H[?25h[?25l[52;88H4,1[34;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H6[36;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H8,22[38;22H[?25h[?25l[52;88H9,3 [39;3H[?25h[?25l[52;87H40,22[40;22H[?25h[?25l[52;88H1[41;22H[?25h[?25l[52;88H2[42;22H[?25h[?25l[52;88H3[43;22H[?25h[?25l[52;88H4[44;22H[?25h[?25l[52;88H5,4 [45;4H[?25h[?25l[52;88H6,2[46;2H[?25h[?25l[52;88H7,13-22[47;22H[?25h[?25l[52;88H8,12[48;22H[?25h[?25l[52;88H9[49;22H[?25h[?25l[52;87H50,10-19[50;19H[?25h[?25l[52;88H1,2-9  [51;9H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store tt[51;1Hhe commands[m[52;87H[K[52;87H52,15-22[7C1%[50;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[32mint[m command_count = [33m0[m;[52;87H[K[52;87H53,15-22[7C1%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H54,15-22[7C2%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H55,1[11C2%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H56,1[11C3%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H57,15-22[7C4%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H58,15-22[7C4%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H59,8-22[8C5%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H60,3-17[8C5%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H61,3-17[8C6%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;26H[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H62,8-17[8C7%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H63,3-17[8C7%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H64,3-17[8C8%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H65,3-17[8C8%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H66,4-18[8C9%[44;41H[46m{[51;17H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H67,1[10C10%[43;41H{[50;17H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* end of command? */[m[52;87H[K[52;87H68,8-22[7C10%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H69,8-22[7C11%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H70,3-17[7C11%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//split the lines[m[52;87H[K[52;87H71,3-17[7C12%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommands - splitline(buf);[52;87H[K[52;87H72,3-17[7C13%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommand_count = count_commands(commands);[52;87H[K[52;87H73,3-17[7C13%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H74,3-17[7C14%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H75,4-18[7C14%[34;42H[46m{[51;17H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H76,1[10C15%[33;42H{[50;17H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* no, add to buffer */[m[52;87H[K[52;87H77,8-22[7C16%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos++] = c;[52;87H[K[52;87H78,8-22[7C16%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H79,3-17[7C17%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[52;87H[K[52;87H80,8-22[7C17%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[52;87H[K[52;87H81,8-22[7C18%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H82,8-22[7C19%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mreturn[m buf;[52;87H[K[52;87H83,8-22[7C19%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H}[52;87H[K[52;87H84,2[10C20%[12;1H[46m{[51;1H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H85,1[10C20%[11;1H{[50;1H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/**[m[52;87H[K[52;87H86,4[10C21%[51;4H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H87,18-22      22%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m **/[m[52;87H[K[52;87H88,5[10C22%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H89,22[9C23%[51;22H[35m[46m([1C)[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H90,1[10C23%[50;22H[35m(x)
[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H91,22[9C24%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H92,3[10C25%[51;3H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H93,22[9C25%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H94,22[9C26%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H95,22[9C26%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H96,22[9C27%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H97,22[9C27%[51;22H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H98,4[10C28%[51;4H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H99,2[10C29%[51;2H[?25h[?25l[52;88H8,4[50;4H[?25h[?25l[52;88H7,22[49;22H[?25h[?25l[52;88H6[48;22H[?25h[?25l[52;88H5[47;22H[?25h[?25l[52;88H4[46;22H[?25h[?25l[52;88H3[45;22H[?25h[?25l[52;88H2,3 [44;3H[?25h[?25l[52;88H1,22[43;22H[?25h[?25l[52;88H0,1 [42;1H[?25h[?25l[41;22H[35m[46m([1C)[m[52;87H89,22[41;22H[?25h[?25l[35m(x)[m[52;88H8,5 [40;5H[?25h[?25l[52;88H7,18-22[39;22H[?25h[?25l[52;88H6,4    [38;4H[?25h[?25l[52;88H5,1[37;1H[?25h[?25l[52;88H4,2[36;2H[?25h[?25l[52;88H3,8-22[35;22H[?25h[?25l[52;88H2[34;22H[?25h[?25l[52;88H1[33;22H[?25h[?25l[52;88H0[32;22H[?25h[?25l[52;87H79,3-17[31;17H[?25h[?25l[52;88H8,8-22[30;22H[?25h[?25l[52;88H7[29;22H[?25h[?25l[52;88H6,1   [28;1H[?25h[?25l[10;42H[46m{[27;17H}[m[52;88H5,4-18[27;18H[?25h[?25l[10;42H{[27;17H}[52;88H4,3-17[26;17H[?25h[?25l[52;88H3[25;17H[?25h[?25l[52;88H2[24;17H[?25h[?25l[52;88H3[25;17H[?25h[?25l[52;90H4-25[25;25H[?25h[?25l[52;90H5-26[25;26H[?25h[?25l[52;90H6-27[25;27H[?25h[?25l[52;90H7-28[25;28H[?25h[?25l[52;90H8-29[25;29H[?25h[?25l[52;90H9-30[25;30H[?25h[?25l[52;90H10-31[25;31H[?25h[?25l[52;91H1-32[25;32H[?25h[?25l[52;91H2-33[25;33H[?25h[?25l[52;91H3-34[25;34H[?25h[?25l[52;91H4-35[25;35H[?25h[?25l[52;91H5-36[25;36H[?25h[?25l[52;91H6-37[25;37H[?25h[?25l[52;91H7-38[25;38H[?25h[?25l[52;91H8-39[25;39H[?25h[?25l[52;91H9-40[25;40H[?25h[?25l[52;90H20-41[25;41H[?25h[?25l[52;91H1-42[25;42H[?25h[?25l[52;91H2-43[25;43H[?25h[?25l[52;91H3-44[25;44H[?25h[?25l[52;91H4-45[25;45H[?25h[?25l[52;91H5-46[25;46H[?25h[?25l[52;91H6-47[25;47H[?25h[?25l[52;91H7-48[25;48H[?25h[?25l[52;91H8-49[25;49H[?25h[?25l[52;91H9-50[25;50H[?25h[?25l[52;90H30-51[25;51H[?25h[?25l[52;91H1-52[25;52H[?25h[?25l[52;91H2-53[25;53H[?25h[?25l[52;91H3-54[25;54H[?25h[?25ls[46m([8C)[m[52;91H4-55[25;55H[?25h[?25l[52;91H5-56[25;56H[?25h[?25l([8C)[52;91H6-57[25;57H[?25h[?25l[52;91H7-58[25;58H[?25h[?25l[52;91H8-59[25;59H[?25h[?25l[52;91H9-60[25;60H[?25h[?25l[52;90H40-61[25;61H[?25h[?25l[52;91H1-62[25;62H[?25h[?25l[52;91H2-63[25;63H[?25h[?25l[25;55H[46m([8C)[m[52;91H3-64[25;64H[?25h[?25l[52;91H4-65[25;65H[?25h[?25l[25;55H([8C)[52;91H5-66[25;66H[?25h[?25l[52;88H4,3-17 [26;17H[?25h[?25l[10;42H[46m{[27;17H}[m[52;88H5,4-18[27;18H[?25h[?25l[10;42H{[27;17H}[52;88H4,3-17[26;17H[?25h[?25l[52;90H4-25[26;25H[?25h[?25lf[52;90H5-26[26;26H[?25h[?25lr[52;90H6-27[26;27H[?25h[?25le[52;90H7-28[26;28H[?25h[?25le[52;90H8-29[26;29H[?25h[?25l([52;90H9-30[26;30H[?25h[?25lb[52;90H10-31[26;31H[?25h[?25lu[52;91H1-32[26;32H[?25h[?25lf[52;91H2-33[26;33H[?25h[?25l)[46m([mbuf[46m)[m[52;91H3-34[26;34H[?25h[?25l(buf)[52;91H4-35[26;35H[?25h[?25lc[52;91H5-36[26;36H[?25h[?25l[26;35H[K[52;91H4-35[26;35H[?25h[?25l[46m([mbuf[46m)[m[52;91H3-34[26;34H[?25h[?25l;(buf)[52;91H4-35[26;35H[?25h[?25l[52;91H5-36[26;36H[?25h[?25l/[52;91H6-37[26;37H[?25h[?25l[36m//[m[52;91H7-38[26;38H[?25h[?25l[36mc[m[52;91H8-39[26;39H[?25h[?25l[36ml[m[52;91H9-40[26;40H[?25h[?25l[36me[m[52;90H20-41[26;41H[?25h[?25l[36ma[m[52;91H1-42[26;42H[?25h[?25l[36mr[m[52;91H2-43[26;43H[?25h[?25l[36m [m[52;91H3-44[26;44H[?25h[?25l[36mt[m[52;91H4-45[26;45H[?25h[?25l[36mh[m[52;91H5-46[26;46H[?25h[?25l[36me[m[52;91H6-47[26;47H[?25h[?25l[36m [m[52;91H7-48[26;48H[?25h[?25l[36mb[m[52;91H8-49[26;49H[?25h[?25l[36mu[m[52;91H9-50[26;50H[?25h[?25l[36mi[m[52;90H30-51[26;51H[?25h[?25l[26;50H[K[52;90H29-50[26;50H[?25h[?25l[36mf[m[52;90H30-51[26;51H[?25h[?25l[36mf[m[52;91H1-52[26;52H[?25h[?25l[36me[m[52;91H2-53[26;53H[?25h[?25l[36mr[m[52;91H3-54[26;54H[?25h[?25l[10;42H[46m{[27;17H}[m[52;88H5,4-18 [27;18H[?25h[?25l[10;42H{[27;17H}[52;88H6,1   [28;1H[?25h[?25l[52;88H7,26-40[29;40H[?25h[?25l[52;88H6,1    [28;1H[?25h[?25l[10;42H[46m{[27;17H}[m[52;88H5,4-18[27;18H[?25h[?25l[10;42H{[27;17H}[52;88H4,33-54[26;54H[?25h[?25l[27;51r[27;1H[L[1;52r[52;87H[K[52;87H75,1[10C28%[27;1H[?25h[?25l[28;51r[28;1H[L[1;52r[52;87H[K[52;87H76,1[10C28%[28;1H[?25h[?25l[52;90H2-9[28;9H[?25h[?25l[52;90H3-17[28;17H[?25h[?25l[52;90H4-25[28;25H[?25h[?25li[52;90H5-26[28;26H[?25h[?25l[33mif[m[52;90H6-27[28;27H[?25h[?25l*[52;90H7-28[28;28H[?25h[?25l[28;27H[K[52;90H6-27[28;27H[?25h[?25l([52;90H7-28[28;28H[?25h[?25lc[52;90H8-29[28;29H[?25h[?25lo[52;90H9-30[28;30H[?25h[?25lm[52;90H10-31[28;31H[?25h[?25lm[52;91H1-32[28;32H[?25h[?25la[52;91H2-33[28;33H[?25h[?25ln[52;91H3-34[28;34H[?25h[?25ld[52;91H4-35[28;35H[?25h[?25l_[52;91H5-36[28;36H[?25h[?25lc[52;91H6-37[28;37H[?25h[?25lo[52;91H7-38[28;38H[?25h[?25lu[52;91H8-39[28;39H[?25h[?25ln[52;91H9-40[28;40H[?25h[?25lt[52;90H20-41[28;41H[?25h[?25l>[52;91H1-42[28;42H[?25h[?25l[33m0[m[52;91H2-43[28;43H[?25h[?25l)[28;27H[46m([15C)[m[52;91H3-44[28;44H[?25h[?25l{[28;27H([15C)[46m{[29;17H}[m[52;91H4-45[28;45H[?25h[?25l[29;51r[29;1H[L[1;52r[30;17H}[52;87H[K[52;87H77,1[10C28%[28;44H{
[?25h[?25l}[28;44H[46m{
}[m[52;90H2[29;2H[?25h[?25l[52;90H1[29;1H[?25h[?25l[46m        [m}        [46m}[m[52;90H2-9[29;9H[?25h[?25l[46m        [m}[29;9H        [46m}[m[52;90H3-17[29;17H[?25h[?25l[46m        [m}[29;17H        [46m}[m[52;90H4-25[29;25H[?25h[?25l[30;51r[30;1H[L[1;52r[29;25H[K[30;1H}[52;87H[K[52;87H78,1[10C28%[30;1H[46m}[?25h[?25l[m[28;44H{

}[52;88H7[29;1H[?25h[?25l[28;44H[46m{

}[m[52;88H8[30;1H[?25h[?25l[31;51r[31;1H[L[1;52r[30;1H[K[31;1H}[52;87H[K[52;87H79,1[10C28%[31;1H[46m}[?25h[?25l[30;51r[m[51;1H
[1;52r[30;1H}
[46m        [m[51;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H78,1[10C28%[30;1H[46m}[m
        [30;1H[?25h[?25l[46m        [m}        [46m}[m[52;90H2-9[30;9H[?25h[?25l[46m        [m}[30;9H        [46m}[m[52;90H3-17[30;17H[?25h[?25l[46m        [m}[30;17H        [46m}[m[52;90H4-25[30;25H[?25h[?25l[28;44H{[30;25H}[52;88H7[29;25H[?25h[?25l[52;90H5-33[29;33H[?25h[?25l[52;88H6,12-33[28;33H[?25h[?25l[52;88H5,1    [27;1H[?25h[?25l[52;90H2-9[27;9H[?25h[?25l[52;90H3-17[27;17H[?25h[?25l[52;90H4-25[27;25H[?25h[?25l[28;51r[28;1H[L[1;52r[52;87H[K[52;87H76,1[10C28%[28;1H[?25h[?25l[52;90H2-9[28;9H[?25h[?25l[52;90H3-17[28;17H[?25h[?25l[52;90H4-25[28;25H[?25h[?25l[52;90H5-33[28;33H[?25h[?25l[52;90H4-25[28;25H[?25h[?25l/[52;90H5-26[28;26H[?25h[?25l[36m//[m[52;90H6-27[28;27H[?25h[?25l[36me[m[52;90H7-28[28;28H[?25h[?25l[36mx[m[52;90H8-29[28;29H[?25h[?25l[36me[m[52;90H9-30[28;30H[?25h[?25l[36mc[m[52;90H10-31[28;31H[?25h[?25l[36mu[m[52;91H1-32[28;32H[?25h[?25l[36mt[m[52;91H2-33[28;33H[?25h[?25l[36me[m[52;91H3-34[28;34H[?25h[?25l[36m [m[52;91H4-35[28;35H[?25h[?25l[36mm[m[52;91H5-36[28;36H[?25h[?25l[36mu[m[52;91H6-37[28;37H[?25h[?25l[36ml[m[52;91H7-38[28;38H[?25h[?25l[36mt[m[52;91H8-39[28;39H[?25h[?25l[36mi[m[52;91H9-40[28;40H[?25h[?25l[36mm[m[52;90H20-41[28;41H[?25h[?25l[36me[m[52;91H1-42[28;42H[?25h[?25l[36m [m[52;91H2-43[28;43H[?25h[?25l[36mc[m[52;91H3-44[28;44H[?25h[?25l[36mo[m[52;91H4-45[28;45H[?25h[?25l[36mm[m[52;91H5-46[28;46H[?25h[?25l[36mm[m[52;91H6-47[28;47H[?25h[?25l[36ma[m[52;91H7-48[28;48H[?25h[?25l[36mn[m[52;91H8-49[28;49H[?25h[?25l[36md[m[52;91H9-50[28;50H[?25h[?25l[36ms[m[52;90H30-51[28;51H[?25h[?25l[36m [m[52;91H1-52[28;52H[?25h[?25l[36mo[m[52;91H2-53[28;53H[?25h[?25l[36mf[m[52;91H3-54[28;54H[?25h[?25l[36m [m[52;91H4-55[28;55H[?25h[?25l[36mn[m[52;91H5-56[28;56H[?25h[?25l[36mu[m[52;91H6-57[28;57H[?25h[?25l[36mm[m[52;91H7-58[28;58H[?25h[?25l[36m>[m[52;91H8-59[28;59H[?25h[?25l[36m0[m[52;91H9-60[28;60H[?25h[?25l[29;44H[46m{[31;25H}[m[52;88H7,24-45[29;45H[?25h[?25l{[31;25H}[52;88H6,39-60[28;60H[?25h[?25l[52;91H8-59[28;59H[?25h[?25l[52;91H7-58[28;58H[?25h[?25l[52;91H6-57[28;57H[?25h[?25l[52;91H5-56[28;56H[?25h[?25l[52;91H4-55[28;55H[?25h[?25l[52;91H3-54[28;54H[?25h[?25l[52;91H2-53[28;53H[?25h[?25l[52;91H1-52[28;52H[?25h[?25l[52;91H0-51[28;51H[?25h[?25l[52;90H29-50[28;50H[?25h[?25l[52;91H8-49[28;49H[?25h[?25l[52;91H7-48[28;48H[?25h[?25l[52;91H6-47[28;47H[?25h[?25l[52;91H5-46[28;46H[?25h[?25l[52;91H4-45[28;45H[?25h[?25l[52;91H3-44[28;44H[?25h[?25l[52;91H2-43[28;43H[?25h[?25l[52;91H1-42[28;42H[?25h[?25l[52;91H0-41[28;41H[?25h[?25l[52;90H19-40[28;40H[?25h[?25l[52;91H8-39[28;39H[?25h[?25l[52;91H9-40[28;40H[?25h[?25l[36mme commands of num>0[m[28;59H[K[52;91H8-39[28;39H[?25h[?25l[36me commands of num>0[m[28;58H[K[28;39H[?25h[?25l[36me commands of num>0[m[28;57H[K[52;91H7-38[28;38H[?25h[?25l[36mie commands of num>0[m[52;91H8-39[28;39H[?25h[?25l[36mpe commands of num>0[m[52;91H9-40[28;40H[?25h[?25l[36m[e commands of num>0[m[52;90H20-41[28;41H[?25h[?25l[36mle commands of num>0[m[52;91H1-42[28;42H[?25h[?25l[36me commands of num>0[m[28;60H[K[52;91H0-41[28;41H[?25h[?25l[36me commands of num>0[m[28;59H[K[52;90H19-40[28;40H[?25h[?25l[36me commands of num>0[m[28;58H[K[52;91H8-39[28;39H[?25h[?25l[36me commands of num>0[m[28;57H[K[52;91H7-38[28;38H[?25h[?25l[36mte commands of num>0[m[52;91H8-39[28;39H[?25h[?25l[36mie commands of num>0[m[52;91H9-40[28;40H[?25h[?25l[36mpe commands of num>0[m[52;90H20-41[28;41H[?25h[?25l[36mle commands of num>0[m[52;91H1-42[28;42H[?25h[?25l[1C[36me commands of num>0[m[52;91H2-43[28;43H[?25h[?25l[36m commands of num>0[m[28;61H[K[28;43H[?25h[?25l[52;91H3-44[28;44H[?25h[?25l[52;91H4-45[28;45H[?25h[?25l[52;91H5-46[28;46H[?25h[?25l[52;91H6-47[28;47H[?25h[?25l[52;91H7-48[28;48H[?25h[?25l[52;91H8-49[28;49H[?25h[?25l[52;91H9-50[28;50H[?25h[?25l[52;90H30-51[28;51H[?25h[?25l[52;91H1-52[28;52H[?25h[?25l[52;91H2-53[28;53H[?25h[?25l[36mf num>0[m[28;60H[K[28;53H[?25h[?25l[36mif num>0[m[52;91H3-54[28;54H[?25h[?25l[52;91H4-55[28;55H[?25h[?25l[52;91H5-56[28;56H[?25h[?25l[52;91H6-57[28;57H[?25h[?25l[52;91H7-58[28;58H[?25h[?25l[52;91H8-59[28;59H[?25h[?25l[52;91H9-60[28;60H[?25h[?25l[52;90H40-61[28;61H[?25h[?25l[36m,[m[52;91H1-62[28;62H[?25h[?25l[36m [m[52;91H2-63[28;63H[?25h[?25l[36mi[m[52;91H3-64[28;64H[?25h[?25l[28;63H[K[52;91H2-63[28;63H[?25h[?25l[36mi[m[52;91H3-64[28;64H[?25h[?25l[36m.[m[52;91H4-65[28;65H[?25h[?25l[36me[m[52;91H5-66[28;66H[?25h[?25l[36m.[m[52;91H6-67[28;67H[?25h[?25l[36m [m[52;91H7-68[28;68H[?25h[?25l[36mw[m[52;91H8-69[28;69H[?25h[?25l[36me[m[52;91H9-70[28;70H[?25h[?25l[36m [m[52;90H50-71[28;71H[?25h[?25l[36md[m[52;91H1-72[28;72H[?25h[?25l[36me[m[52;91H2-73[28;73H[?25h[?25l[36mt[m[52;91H3-74[28;74H[?25h[?25l[36me[m[52;91H4-75[28;75H[?25h[?25l[36mc[m[52;91H5-76[28;76H[?25h[?25l[36mt[m[52;91H6-77[28;77H[?25h[?25l[36m [m[52;91H7-78[28;78H[?25h[?25l[36ma[m[52;91H8-79[28;79H[?25h[?25l[36m [m[52;91H9-80[28;80H[?25h[?25l[36mc[m[52;90H60-81[28;81H[?25h[?25l[36mo[m[52;91H1-82[28;82H[?25h[?25l[36mm[m[52;91H2-83[28;83H[?25h[?25l[36mm[m[52;91H3-84[28;84H[?25h[?25l[36ma[m[52;91H4-85[28;85H[?25h[?25l[36mn[m[52;91H5-86[28;86H[?25h[?25l[36md[m[52;91H6-87[28;87H[?25h[?25l[29;44H[46m{[31;25H}[m[52;88H7,24-45[29;45H[?25h[?25l{[31;25H}[52;88H8,5-33 [30;33H[?25h[?25l[29;44H[46m{[31;25H}[m[52;88H7,24-45[29;45H[?25h[?25l{[31;25H}[52;88H6,66-87[28;87H[?25h[?25l[29;51r[29;1H[L[1;52r[52;87H[K[52;87H77,1[10C28%[29;1H[?25h[?25l[52;90H2-9[29;9H[?25h[?25l[52;90H3-17[29;17H[?25h[?25l[52;90H4-25[29;25H[?25h[?25li[52;90H5-26[29;26H[?25h[?25ln[52;90H6-27[29;27H[?25h[?25l[32mint[m[52;90H7-28[29;28H[?25h[?25l[52;90H8-29[29;29H[?25h[?25li[52;90H9-30[29;30H[?25h[?25ll[52;90H10-31[29;31H[?25h[?25l[29;30H[K[52;90H9-30 [29;30H[?25h[?25l;[52;90H10-31[29;31H[?25h[?25l[52;88H8[30;31H[?25h[?25l[52;88H9,4-25 [31;25H[?25h[?25l[30;44H[46m{[32;25H}[m[52;87H80,5-26[32;26H[?25h[?25l[30;44H{[32;25H}[52;87H79,4-25[31;25H[?25h[?25l[52;90H5-33[31;33H[?25h[?25lf[52;90H6-34[31;34H[?25h[?25lo[52;90H7-35[31;35H[?25h[?25l[33mfor[m[52;90H8-36[31;36H[?25h[?25l([52;90H9-37[31;37H[?25h[?25li[52;90H10-38[31;38H[?25h[?25l=[52;91H1-39[31;39H[?25h[?25l[33m0[m[52;91H2-40[31;40H[?25h[?25l;[52;91H3-41[31;41H[?25h[?25l[52;91H4-42[31;42H[?25h[?25li[52;91H5-43[31;43H[?25h[?25l<[52;91H6-44[31;44H[?25h[?25l[52;91H7-45[31;45H[?25h[?25lc[52;91H8-46[31;46H[?25h[?25lo[52;91H9-47[31;47H[?25h[?25lm[52;90H20-48[31;48H[?25h[?25lm[52;91H1-49[31;49H[?25h[?25la[52;91H2-50[31;50H[?25h[?25ln[52;91H3-51[31;51H[?25h[?25ld[52;91H4-52[31;52H[?25h[?25l_[52;91H5-53[31;53H[?25h[?25lc[52;91H6-54[31;54H[?25h[?25lo[52;91H7-55[31;55H[?25h[?25lu[52;91H8-56[31;56H[?25h[?25ln[52;91H9-57[31;57H[?25h[?25lt[52;90H30-58[31;58H[?25h[?25l;[52;91H1-59[31;59H[?25h[?25l[52;91H2-60[31;60H[?25h[?25li[52;91H3-61[31;61H[?25h[?25l+[52;91H4-62[31;62H[?25h[?25l+[52;91H5-63[31;63H[?25h[?25l[1m[37m[41m{[32;25H}[m[31;63H[1m[37m[46m{[m [32;25H[1m[37m[46m}[m[52;91H6-64[31;64H[?25h[?25l[32;51r[32;1H[L[1;52r[33;25H[1m[37m[41m}[m[52;87H[K[52;87H80,1[10C28%[31;63H[1m[37m[41m{
[?25h[?25l}[m[33;25H}[31;63H[1m[37m[46m{
}[m [52;90H2[32;2H[?25h[?25l[52;90H1[32;1H[?25h[?25l[46m        [m[1m[37m[41m}[m        [1m[37m[46m}[m [52;90H2-9[32;9H[?25h[?25l[46m        [m[1m[37m[41m}[m[32;9H        [1m[37m[46m}[m [52;90H3-17[32;17H[?25h[?25l[46m        [m[1m[37m[41m}[m[32;17H        [1m[37m[46m}[m [52;90H4-25[32;25H[?25h[?25l[46m        [m[1m[37m[41m}[m[32;25H        [1m[37m[46m}[m [52;90H5-33[32;33H[?25h[?25l[46m\[m[1m[37m[41m}[m\[1m[37m[46m}[m [52;90H6-34[32;34H[?25h[?25l[1m[37m[41m}[m[46m       [m[32;33H[1m[37m[46m}[m       [52;90H5-33[32;33H[?25h[?25l[31;63H[1m[37m[41m{[32;33H}[m [52;87H79[31;33H[?25h[?25l[52;90H6-34[31;34H[?25h[?25l[52;90H7-35[31;35H[?25h[?25l[52;90H8-36[31;36H[?25h[?25l[52;90H9-37[31;37H[?25h[?25l[52;90H10-38[31;38H[?25h[?25l[52;91H1-39[31;39H[?25h[?25l[52;91H2-40[31;40H[?25h[?25l[52;91H3-41[31;41H[?25h[?25l[52;91H4-42[31;42H[?25h[?25l[52;91H5-43[31;43H[?25h[?25l[52;91H6-44[31;44H[?25h[?25l[52;91H7-45[31;45H[?25h[?25l[52;91H8-46[31;46H[?25h[?25l[52;91H9-47[31;47H[?25h[?25l[52;90H20-48[31;48H[?25h[?25l[52;91H1-49[31;49H[?25h[?25l[52;91H2-50[31;50H[?25h[?25l[52;91H3-51[31;51H[?25h[?25l[52;91H4-52[31;52H[?25h[?25l[52;91H5-53[31;53H[?25h[?25l[52;91H6-54[31;54H[?25h[?25l[52;91H7-55[31;55H[?25h[?25l[52;91H8-56[31;56H[?25h[?25l[52;91H9-57[31;57H[?25h[?25l[52;90H30-58[31;58H[?25h[?25l[52;91H1-59[31;59H[?25h[?25l[52;91H2-60[31;60H[?25h[?25l[52;91H3-61[31;61H[?25h[?25l[52;91H4-62[31;62H[?25h[?25l)+{[32;33H} [31;36H[46m([25C)[m[52;91H5-63[31;63H[?25h[?25l[31;36H([25C)+[46m{[32;33H}[m[52;91H6-64[31;64H[?25h[?25l[52;91H7-65[31;65H[?25h[?25l[32;51r[32;1H[L[1;52r[33;33H}[52;87H[K[52;87H80,1[10C27%[31;64H{
[?25h[?25l[52;90H2-9[32;9H[?25h[?25l[52;90H3-17[32;17H[?25h[?25l[52;90H4-25[32;25H[?25h[?25l[52;90H5-33[32;33H[?25h[?25l[52;90H6-41[32;41H[?25h[?25le[52;90H7-42[32;42H[?25h[?25lx[52;90H8-43[32;43H[?25h[?25le[52;90H9-44[32;44H[?25h[?25lc[52;90H10-45[32;45H[?25h[?25lu[52;91H1-46[32;46H[?25h[?25lt[52;91H2-47[32;47H[?25h[?25le[52;91H3-48[32;48H[?25h[?25l([52;91H4-49[32;49H[?25h[?25ls[52;91H5-50[32;50H[?25h[?25lp[52;91H6-51[32;51H[?25h[?25ll[52;91H7-52[32;52H[?25h[?25li[52;91H8-53[32;53H[?25h[?25lt[52;91H9-54[32;54H[?25h[?25ll[52;90H20-55[32;55H[?25h[?25li[52;91H1-56[32;56H[?25h[?25ln[52;91H2-57[32;57H[?25h[?25le[52;91H3-58[32;58H[?25h[?25l([52;91H4-59[32;59H[?25h[?25lc[52;91H5-60[32;60H[?25h[?25lo[52;91H6-61[32;61H[?25h[?25lm[52;91H7-62[32;62H[?25h[?25lm[52;91H8-63[32;63H[?25h[?25la[52;91H9-64[32;64H[?25h[?25ln[52;90H30-65[32;65H[?25h[?25ld[52;91H1-66[32;66H[?25h[?25ls[52;91H2-67[32;67H[?25h[?25l[[52;91H3-68[32;68H[?25h[?25li[52;91H4-69[32;69H[?25h[?25l][46m[[mi[46m][m[52;91H5-70[32;70H[?25h[?25l)[32;58H[46m([m[8C[i][46m)[m[52;91H6-71[32;71H[?25h[?25l)[32;48H[46m([m[9C([11C)[46m)[m[52;91H7-72[32;72H[?25h[?25ll[32;48H([22C)[52;91H8-73[32;73H[?25h[?25l[32;72H[K[32;48H[46m([22C)[m[52;91H7-72[32;72H[?25h[?25l;[32;48H([22C)[52;91H8-73[32;73H[?25h[?25l[33;51r[33;1H[L[1;52r[52;87H[K[52;87H81,1[10C27%[33;1H[?25h[?25l[52;90H2-9[33;9H[?25h[?25l[52;90H3-17[33;17H[?25h[?25l[52;90H4-25[33;25H[?25h[?25l[52;90H5-33[33;33H[?25h[?25l[52;90H6-41[33;41H[?25h[?25lf[52;90H7-42[33;42H[?25h[?25lr[52;90H8-43[33;43H[?25h[?25le[52;90H9-44[33;44H[?25h[?25le[52;90H10-45[33;45H[?25h[?25l([52;91H1-46[33;46H[?25h[?25lc[52;91H2-47[33;47H[?25h[?25lo[52;91H3-48[33;48H[?25h[?25lm[52;91H4-49[33;49H[?25h[?25lm[52;91H5-50[33;50H[?25h[?25la[52;91H6-51[33;51H[?25h[?25ln[52;91H7-52[33;52H[?25h[?25ld[52;91H8-53[33;53H[?25h[?25ls[52;91H9-54[33;54H[?25h[?25l[[52;90H20-55[33;55H[?25h[?25li[52;91H1-56[33;56H[?25h[?25l][46m[[mi[46m][m[52;91H2-57[33;57H[?25h[?25l)[33;45H[46m([m[8C[i][46m)[m[52;91H3-58[33;58H[?25h[?25l;[33;45H([11C)[52;91H4-59[33;59H[?25h[?25l[32;58H[46m([11C)[m[52;88H0[32;59H[?25h[?25l([11C)[52;87H79,31[31;59H[?25h[?25l[30;44H[46m{[35;25H}[m[52;88H8,24-45[30;45H[?25h[?25l{[35;25H}[52;88H7,10-31[29;31H[?25h[?25l[30;44H[46m{[35;25H}[m[52;88H8,24-45[30;45H[?25h[?25l{[35;25H}[52;88H9,31-59[31;59H[?25h[?25l[32;58H[46m([11C)[m[52;87H80,24[32;59H[?25h[?25l([11C)[52;88H1[33;59H[?25h[?25l[52;88H2,7-41 [34;41H[?25h[?25l[30;44H[46m{[35;25H}[m[52;88H3,5-26[35;26H[?25h[?25l[30;44H{[35;25H}[52;88H2,7-41[34;41H[?25h[?25l[52;88H1,24-59[33;59H[?25h[?25l[32;58H[46m([11C)[m[52;88H0[32;59H[?25h[?25l([11C)[52;87H79,31[31;59H[?25h[?25l[30;44H[46m{[35;25H}[m[52;88H8,24-45[30;45H[?25h[?25l{[35;25H}[52;88H7,10-31[29;31H[?25h[?25l[52;88H6,38-59[28;59H[?25h[?25l[52;88H5,4-25 [27;25H[?25h[?25l[52;88H4,33-54[26;54H[?25h[?25l[52;88H3,38-59[25;59H[?25h[?25l[52;88H2,30-51[24;51H[?25h[?25l[52;88H1,21-42[23;42H[?25h[?25l[52;88H0,20-41[22;41H[?25h[?25l[21;20H[46m([11C)[m[52;87H69,19-33[21;33H[?25h[?25l[21;20H([11C)[52;88H8,24-38[20;38H[?25h[?25l[52;88H7,1    [19;1H[?25h[?25l[11;41H[46m{[18;17H}[m[52;88H6,4-18[18;18H[?25h[?25l[11;41H{[18;17H}[52;88H5,10-33[17;33H[?25h[?25l[52;88H4,27-59[16;59H[?25h[?25l[52;88H3,31[15;59H[?25h[?25l[52;88H2,2[14;59H[?25h[?25l[52;88H1,27-55[13;55H[?25h[?25l[52;88H0,28-59[12;59H[?25h[?25l[52;87H59,32[11;59H[?25h[?25l[52;88H8,5[10;59H[?25h[?25l[52;88H7,30[9;59H[?25h[?25l[52;88H6,1    [8;1H[?25h[?25l[52;88H5[7;1H[?25h[?25l[52;88H4,26-33[6;33H[?25h[?25l[52;88H3,24-31[5;31H[?25h[?25l[52;88H2,52-59[3;59H[?25h[?25l[52;88H1,2-9  [2;9H[?25h[?25l[52;88H0,24-59[1;59H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;87H[K[52;87H49,28-59      27%[1;59H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[52;87H[K[52;87H48,33-59      26%[1;59H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[52;87H[K[52;87H47,27-59      25%[1;59H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H{[52;87H[K[52;87H46,2[10C25%[1;1H[46m{[49;1H}[1;2H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H45,4[10C24%[2;1H{[50;1H}[1;4H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[52;87H[K[52;87H44,48[9C24%[1;48H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          calls fatal from emalloc()[m[52;87H[K[52;87H43,39[9C23%[1;37H[36m[46m()[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[52;87H[K[52;87H42,46[9C23%[1;25H[36m[46m([19C)[m[2;37H[36m()[1;46H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m * returns: dynamically allocated string holding command line[m[52;87H[K[52;87H41,59[9C22%[2;25H[36m([19C)[1;59H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m * purpose: read next command line from fp[m[52;87H[K[52;87H40,43[9C22%[1;43H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H39,3[10C21%[1;3H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[52;87H[K[52;87H38,40[9C20%[1;16H[46m([22C)[?25h[?25l[1;51r[m[1;1H[L[1;52r[52;87H[K[52;87H37,1[10C20%[2;16H([22C)[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H36,1[10C19%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H35,1[10C19%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H34,1[10C18%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H33,4[10C18%[1;4H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[52;87H[K[52;87H32,59[9C17%[1;59H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[52;87H[K[52;87H31,59[9C16%[1;59H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    [m[52;87H[K[52;87H30,7[10C16%[1;7H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[52;87H[K[52;87H29,59[9C15%[1;59H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H28,1[10C15%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H27,1[10C14%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H26,2[10C14%[1;2H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mreturn[m count;[52;87H[K[52;87H25,15-22      13%[1;22H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H}[52;87H[K[52;87H24,3-10[7C12%[1;10H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hcmd++;[52;87H[K[52;87H23,9-23[7C12%[1;23H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hcount++;[52;87H[K[52;87H22,11-25      11%[1;25H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mwhile[m(*cmd != [33mNULL[m){[52;87H[K[52;87H21,22-29      11%[1;28H[46m{[4;9H}[1;29H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;9Hcount = [33m0[m;[52;87H[K[52;87H20,12-19      10%[2;28H{[5;9H}[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H19,1[10C10%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mchar[m** cmd = commands;[52;87H[K[52;87H18,24-31[7C9%[1;31H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mint[m count;[52;87H[K[52;87H17,12-19[7C9%[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mint[m count_commands([32mchar[m** commands){[52;87H[K[52;87H16,37[10C8%[1;36H[46m{[11;1H}[1;37H[?25h[?25l[1;51r[m[1;1H[L[1;52r[52;87H[K[52;87H15,1[11C7%[2;36H{[12;1H}[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#define DFL_PROMPT      [m[33m"> "[m[52;87H[K[52;87H14,24-29[7C7%[1;29H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H13,1[11C6%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m"smsh.h"[m[52;87H[K[52;87H12,18[10C6%[1;18H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<signal.h>[m[52;87H[K[52;87H11,20[10C5%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<unistd.h>[m[52;87H[K[52;87H10,20[10C5%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdlib.h>[m[52;87H[K[52;87H9,20[11C4%[1;20H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdio.h>[m[52;87H[K[52;87H8,19[11C3%[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H7,1[12C3%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **/[m[52;87H[K[52;87H6,5[12C2%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             uses fork, exec, wait, and ignores signals[m[52;87H[K[52;87H5,48-59[8C2%[1;59H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             this one parses the command line into strings[m[52;87H[K[52;87H4,48-59[8C1%[1;59H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             first really useful version after prompting shell[m[52;87H[K[52;87H3,48-59[8C1%[1;59H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m  smsh1.c  small-shell version 1[m[51;1H[34m@                                                                                                       [m[52;87H[K[52;87H2,33[11C0%[1;33H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m[52;87H[K[52;87H1,57[10CTop[1;57H[?25h[?25l[52;87H2,33[2;33H[?25h[?25l[52;87H3,48-59[3;59H[?25h[?25l[52;87H4[4;59H[?25h[?25l[52;87H5[5;59H[?25h[?25l[52;87H6,5    [6;5H[?25h[?25l[52;87H7,1[7;1H[?25h[?25l[52;87H8,19[8;19H[?25h[?25l[52;87H9,20[9;20H[?25h[?25l[52;87H10,20[10;20H[?25h[?25l[52;88H1[11;20H[?25h[?25l[52;88H2,18[12;18H[?25h[?25l[52;88H3,1 [13;1H[?25h[?25l[52;88H4,24-29[14;29H[?25h[?25l[52;88H5,1    [15;1H[?25h[?25l[16;36H[46m{[26;1H}[m[52;88H6,37[16;37H[?25h[?25l{[26;1H}[52;88H7,12-19[17;19H[?25h[?25l[52;88H8,24-31[18;31H[?25h[?25l[52;88H9,1    [19;1H[?25h[?25l[52;87H20,12-19[20;19H[?25h[?25l[21;28H[46m{[24;9H}[m[52;88H1,22-2[21;29H[?25h[?25l{[24;9H}[52;88H2,11-25[22;25H[?25h[?25l[52;88H3,9-23 [23;23H[?25h[?25l[21;28H[46m{[24;9H}[m[52;88H4,3-10[24;10H[?25h[?25l[21;28H{[24;9H}[52;88H5,15-22[25;22H[?25h[?25l[16;36H[46m{[26;1H}[m[52;88H6,2    [26;2H[?25h[?25l[16;36H{[26;1H}[52;88H7,1[27;1H[?25h[?25l[52;88H8[28;1H[?25h[?25l[52;88H9,59[29;59H[?25h[?25l[52;87H30,7 [30;7H[?25h[?25l[52;88H1,59[31;59H[?25h[?25l[52;88H2[32;59H[?25h[?25l[52;88H3,4 [33;4H[?25h[?25l[52;88H4,1[34;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H6[36;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[38;16H[46m([22C)[m[52;88H8,40[38;40H[?25h[?25l[38;16H([22C)[52;88H9,3 [39;3H[?25h[?25l[52;87H40,43[40;43H[?25h[?25l[52;88H1,59[41;59H[?25h[?25l[42;25H[36m[46m([19C)[m[52;88H2,46[42;46H[?25h[?25l[42;25H[36m([19C)[m[43;37H[36m[46m()[m[52;88H3,39[43;39H[?25h[?25l[36m()[m[52;88H4,48[44;48H[?25h[?25l[52;88H5,4 [45;4H[?25h[?25l[52;88H6,2[46;2H[?25h[?25l[52;88H7,27-59[47;59H[?25h[?25l[52;88H8,33[48;59H[?25h[?25l[52;88H9,28[49;59H[?25h[?25l[52;87H50,24[50;59H[?25h[?25l[52;88H1,2-9  [51;9H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store tt[51;1Hhe commands[m[52;87H[K[52;87H52,52-59[7C1%[50;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[32mint[m command_count = [33m0[m;[52;87H[K[52;87H53,24-31[7C1%[51;31H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H54,26-33[7C2%[51;33H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H55,1[11C2%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H56,1[11C3%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H57,30-59[7C3%[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H58,52-59[7C4%[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H59,32-59[7C5%[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H60,28-59[7C5%[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H61,27-55[7C6%[51;55H[?25h[?25l[1;51r[51;1H
[1;52r[51;26H[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H62,21-59[7C6%[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H63,31-59[7C7%[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H64,27-59[7C7%[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H65,10-33[7C8%[51;33H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H66,4-18[8C9%[44;41H[46m{[51;17H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H67,1[11C9%[43;41H{[50;17H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* end of command? */[m[52;87H[K[52;87H68,24-38      10%[51;38H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H69,19-33      10%[51;20H[46m([11C)[?25h[?25l[1;51r[m[51;1H
[1;52r[51;25Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H70,20-41      11%[50;20H([11C)[51;41H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//split the lines[m[52;87H[K[52;87H71,21-42      11%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommands - splitline(buf);[52;87H[K[52;87H72,30-51      12%[51;51H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommand_count = count_commands(commands);[52;87H[K[52;87H73,38-59      12%[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H74,33-54      13%[51;54H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H75,4-25[7C14%[51;25H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H76,38-59      14%[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[32mint[m i;[52;87H[K[52;87H77,10-31      15%[51;31H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H78,24-45      15%[51;45H[?25h[?25l[1;51r[51;1H
[1;52r[51;33H[33mfor[m(i=[33m0[m; i< command_count; i+)+{[52;87H[K[52;87H79,31-59      16%[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;41Hexecute(splitline(commands[i]));[52;87H[K[52;87H80,24-59      16%[51;58H[46m([11C)[51;59H[?25h[?25l[1;51r[m[51;1H
[1;52r[51;41Hfree(commands[i]);[52;87H[K[52;87H81,24-59      17%[50;58H([11C)[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;33H}[52;87H[K[52;87H82,7-41[7C18%[51;41H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H83,5-26[7C18%[46;44H[46m{[51;25H}[?25h[?25l[1;51r[m[51;1H
[1;52r[51;17H}[52;87H[K[52;87H84,4-18[7C19%[25;42H[46m{[m[45;44H{[50;25H}[51;17H[46m}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H85,1[10C19%[24;42H{[50;17H}
[?25h[52;1H[K[51;1H[?25l[52;87H85,0-1[8C19%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* no, add to buffer */[m[52;87H[K[52;87H86,1-8[8C20%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos++] = c;[52;87H[K[52;87H87,1-8[8C20%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H88,1-8[8C21%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[52;87H[K[52;87H89,1-8[8C22%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[52;87H[K[52;87H90,1-8[8C22%[51;8H[?25h[?25l[52;87H89[50;8H[?25h[?25l[52;88H8[49;8H[?25h[?25l[52;88H7[48;8H[?25h[?25l[52;88H6[47;8H[?25h[?25l[52;88H5,0-1[46;1H[?25h[?25l[52;88H4,1-8[45;8H[?25h[?25l[52;88H3[44;8H[?25h[?25l[52;88H2[43;8H[?25h[?25l[52;88H1[42;8H[?25h[?25l[52;88H2[43;8H[?25h[?25l[52;90H2-16[43;16H[?25h[?25l[52;90H3-24[43;24H[?25h[?25l[52;90H4-32[43;32H[?25h[?25l[40;64H[46m{[43;33H}[m[52;90H5-33[43;33H[?25h[?25l[40;64H{[43;33H}[52;90H6-40[43;40H[?25h[?25l[39;44H[46m{[44;25H}[m[52;88H3,4-25[44;25H[?25h[?25l[19;42H[46m{[m[39;44H{[44;25H}[45;17H[46m}[m[52;88H4,3-17[45;17H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H84,3-17[7C22%[45;17H[?25h[?25l[19;42H{[45;17H}[52;88H3[44;17H[?25h[?25l[39;44H[46m{[44;25H}[m[52;90H4-25[44;25H[?25h[?25l[52;90H5-26[44;26H[?25h[?25l[45;51r[45;1H[L[1;52r[52;87H[K[52;87H84,1[10C22%[39;44H{[44;25H}
[?25h[?25l[52;88H3[44;1H[?25h[?25l[52;88H4[45;1H[?25h[52;1H[K[45;1H[?25l[52;87H84,0-1[8C22%[45;1H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H84,1[10C22%[45;1H[?25h[?25l[52;88H3[44;1H[?25h[?25l[52;90H2-9[44;9H[?25h[?25l[52;90H3-17[44;17H[?25h[?25l[39;44H[46m{[44;25H}[m[52;90H4-25[44;25H[?25h[?25l[52;90H5-26[44;26H[?25h[?25l[39;44H{[44;25H}[52;88H2,4-25[43;25H[?25h[?25l[40;64H[46m{[43;33H}[m[52;90H5-33[43;33H[?25h[?25l[52;90H6-34[43;34H[?25h[?25l[44;51r[44;1H[L[1;52r[52;87H[K[52;87H83,1[10C22%[40;64H{[43;33H}
[?25h[?25l[52;90H2-9[44;9H[?25h[?25l[52;90H3-17[44;17H[?25h[?25l[52;90H4-25[44;25H[?25h[?25l[52;90H5-33[44;33H[?25h[?25lf[52;90H6-34[44;34H[?25h[?25lr[52;90H7-35[44;35H[?25h[?25le[52;90H8-36[44;36H[?25h[?25le[52;90H9-37[44;37H[?25h[?25ll[52;90H10-38[44;38H[?25h[?25li[52;91H1-39[44;39H[?25h[?25ls[52;91H2-40[44;40H[?25h[?25lt[52;91H3-41[44;41H[?25h[?25l([52;91H4-42[44;42H[?25h[?25lc[52;91H5-43[44;43H[?25h[?25lo[52;91H6-44[44;44H[?25h[?25lm[52;91H7-45[44;45H[?25h[?25lm[52;91H8-46[44;46H[?25h[?25la[52;91H9-47[44;47H[?25h[?25ln[52;90H20-48[44;48H[?25h[?25ld[52;91H1-49[44;49H[?25h[?25ls[52;91H2-50[44;50H[?25h[?25l)[44;41H[46m([8C)[m[52;91H3-51[44;51H[?25h[?25l;[44;41H([8C)[52;91H4-52[44;52H[?25h[?25l[52;91H5-53[44;53H[?25h[?25l/[52;91H6-54[44;54H[?25h[?25l[36m//  [m[52;91H7-55[44;55H[?25h[?25l[52;91H8-56[44;56H[?25h[?25l[36mn        [m[52;91H9-57[44;57H[?25h[?25l[36mo[m[52;90H30-58[44;58H[?25h[?25l[36mt[m[52;91H1-59[44;59H[?25h[?25l[52;91H2-60[44;60H[?25h[?25l[36ms[m[52;91H3-61[44;61H[?25h[?25l[36mu[m[52;91H4-62[44;62H[?25h[?25l[36mr[m[52;91H5-63[44;63H[?25h[?25l[36me[m[52;91H6-64[44;64H[?25h[?25l[1C[36m        [m[52;91H7-65[44;65H[?25h[?25l[36mi[m[52;91H8-66[44;66H[?25h[?25l[36mf[m[52;91H9-67[44;67H[?25h[?25l[52;90H40-68[44;68H[?25h[?25l[36mn[m[52;91H1-69[44;69H[?25h[?25l[36me[m[52;91H2-70[44;70H[?25h[?25l[36me[m[52;91H3-71[44;71H[?25h[?25l[36md[m[52;91H4-72[44;72H[?25h[?25l[36me        [m[52;91H5-73[44;73H[?25h[?25l[36md[m[52;91H6-74[44;74H[?25h[?25l[52;91H7-75[44;75H[?25h[?25l[36mb[m[52;91H8-76[44;76H[?25h[?25l[36mu[m[52;91H9-77[44;77H[?25h[?25l[36mt[m[52;90H50-78[44;78H[?25h[?25l[52;91H1-79[44;79H[?25h[?25l[36mw[m[52;91H2-80[44;80H[?25h[?25l[36ma        [m[52;91H3-81[44;81H[?25h[?25l[36ms[m[52;91H4-82[44;82H[?25h[?25l[52;91H5-83[44;83H[?25h[?25l[36mr[m[52;91H6-84[44;84H[?25h[?25l[36me[m[52;91H7-85[44;85H[?25h[?25l[36mc[m[52;91H8-86[44;86H[?25h[?25l[36mc[m[52;91H9-87[44;87H[?25h[?25l[36m [m[52;91H8-86[44;86H[?25h[?25l[36m [m[52;91H7-85[44;85H[?25h[?25l[36m [m[52;91H6-84[44;84H[?25h[?25l[36m [m[52;91H5-83[44;83H[?25h[?25l[52;91H4-82[44;82H[?25h[?25l[36m [m[52;91H3-81[44;81H[?25h[?25l[36m [m[44;81H[K[52;91H2-80[44;80H[?25h[?25l[36m [m[52;91H1-79[44;79H[?25h[?25l[36ms[m[52;91H2-80[44;80H[?25h[?25l[36me        [m[52;91H3-81[44;81H[?25h[?25l[36me[m[52;91H4-82[44;82H[?25h[?25l[36mm[m[52;91H5-83[44;83H[?25h[?25l[36ms[m[52;91H6-84[44;84H[?25h[?25l[52;91H7-85[44;85H[?25h[?25l[36mt[m[52;91H8-86[44;86H[?25h[?25l[36mo[m[52;91H9-87[44;87H[?25h[?25l[52;90H60-88[44;88H[?25h[?25l[36ms        [m[52;91H1-89[44;89H[?25h[?25l[36m [m[44;89H[K[52;91H0-88[44;88H[?25h[?25l[36me        [m[52;91H1-89[44;89H[?25h[?25l[36ms[m[52;91H2-90[44;90H[?25h[?25l[36mn[m[52;91H3-91[44;91H[?25h[?25l[36mu[m[52;91H4-92[44;92H[?25h[?25l[36m [m[52;91H3-91[44;91H[?25h[?25l[36m [m[52;91H2-90[44;90H[?25h[?25l[36m [m[52;91H1-89[44;89H[?25h[?25l[36mn[m[52;91H2-90[44;90H[?25h[?25l[36ms[m[52;91H3-91[44;91H[?25h[?25l[36mu[m[52;91H4-92[44;92H[?25h[?25l[36mr[m[52;91H5-93[44;93H[?25h[?25l[36me[m[52;91H6-94[44;94H[?25h[?25l[52;91H7-95[44;95H[?25h[?25l[36ms[m[52;91H8-96[44;96H[?25h[?25l[36ma        [m[52;91H9-97[44;97H[?25h[?25l[36mf[m[52;90H70-98[44;98H[?25h[?25l[36me[m[52;91H1-99[44;99H[?25h[?25l[36mt[m[52;91H2-100[44;100H[?25h[?25l[36my[m[52;91H3-101[44;101H[?25h[?25l[52;91H4-102[44;102H[?25h[?25l[36mf[m[52;91H5-103[44;103H[?25h[?25l[36mr[m[52;91H6-104[44;104H[?25h[?25l[45;51r[45;1H[L[1;52r[44;104H[36moo[45;1H        [m[52;87H[K[52;87H83,77-105     22%[45;1H[?25h[?25l[36mm[m[52;91H8-106[45;2H[?25h[?25l[52;91H9-107[45;3H[?25h[?25l[36mm[m[52;90H80-108[45;4H[?25h[?25l[36me[m[52;91H1-109[45;5H[?25h[?25l[36mo[m[52;91H2-110[45;6H[?25h[?25l[36mr[m[52;91H3-111[45;7H[?25h[?25l[36my[m[52;91H4-112[45;8H[?25h[?25l[1C[36m        [m[52;91H5-113[45;9H[?25h[?25l[45;9H[K[52;91H4-112[45;8H[?25h[?25l[36m [m[52;91H3-111[45;7H[?25h[?25l[36m [m[52;91H2-110[45;6H[?25h[?25l[36m [m[52;91H1-109[45;5H[?25h[?25l[36mm[m[52;91H2-110[45;6H[?25h[?25l[36mo[m[52;91H3-111[45;7H[?25h[?25l[36mr[m[52;91H4-112[45;8H[?25h[?25l[36my        [m[52;91H5-113[45;9H[?25h[?25l[52;91H6-114[45;10H[?25h[?25l[36mk[m[52;91H7-115[45;11H[?25h[?25l[36me[m[52;91H8-116[45;12H[?25h[?25l[36ma[m[52;91H9-117[45;13H[?25h[?25l[36mj[m[52;90H90-118[45;14H[?25h[?25l[36mk[m[52;91H1-119[45;15H[?25h[?25l[36md[m[52;91H2-120[45;16H[?25h[?25l[36m [m[52;91H1-119[45;15H[?25h[?25l[36m [m[52;91H0-118[45;14H[?25h[?25l[36m [m[52;90H89-117[45;13H[?25h[?25l[36m [m[52;91H8-116[45;12H[?25h[?25l[36m [m[52;91H7-115[45;11H[?25h[?25l[36m [m[52;91H6-114[45;10H[?25h[?25l[36ml[m[52;91H7-115[45;11H[?25h[?25l[36me[m[52;91H8-116[45;12H[?25h[?25l[36ma[m[52;91H9-117[45;13H[?25h[?25l[36mk[m[52;90H90-118[45;14H[?25h[?25l[36ms[m[52;91H1-119[45;15H[?25h[?25l[39;44H[46m{[46;25H}[m[52;88H4,5-26  [46;26H[?25h[?25l[39;44H{[46;25H}[52;88H5,1   [47;1H[?25h[?25l[39;44H[46m{[46;25H}[m[52;88H4,5-26[46;26H[?25h[?25l[39;44H{[46;25H}[52;88H5,1   [47;1H[?25h[?25l[19;42H[46m{[48;17H}[m[52;88H6,4-18[48;18H[?25h[?25l[19;42H{[48;17H}[52;88H5,1   [47;1H[?25h[?25l[19;42H[46m{[48;17H}[m[52;88H6,4-18[48;18H[?25h[?25li[19;42H{[48;17H}[52;90H5-19[48;19H[?25h[?25l[52;88H5,1   [47;1H[?25h[?25l[52;88H6,5-19[48;19H[?25h[?25l[48;18H[K[19;42H[46m{[48;17H}[m[52;90H4-18[48;18H[?25h[?25l[19;42H{[48;17H}[52;88H5,1   [47;1H[?25h[?25l[52;90H2-9[47;9H[?25h[?25l[52;90H3-17[47;17H[?25h[?25l[52;90H4-25[47;25H[?25h[?25lr[52;90H5-26[47;26H[?25h[?25le[52;90H6-27[47;27H[?25h[?25lt[52;90H7-28[47;28H[?25h[?25lu[52;90H8-29[47;29H[?25h[?25lr[52;90H9-30[47;30H[?25h[?25l[33mreturn[m[52;90H10-31[47;31H[?25h[?25l[52;91H1-32[47;32H[?25h[?25lN[52;91H2-33[47;33H[?25h[?25lU[52;91H3-34[47;34H[?25h[?25lL[52;91H4-35[47;35H[?25h[?25l[33mNULL[m[52;91H5-36[47;36H[?25h[?25l;[52;91H6-37[47;37H[?25h[?25l/[52;91H7-38[47;38H[?25h[?25l[36m//[m[52;91H8-39[47;39H[?25h[?25l[36me[m[52;91H9-40[47;40H[?25h[?25l[36mn[m[52;90H20-41[47;41H[?25h[?25l[36md[m[52;91H1-42[47;42H[?25h[?25l[36m [m[52;91H2-43[47;43H[?25h[?25l[36mo[m[52;91H3-44[47;44H[?25h[?25l[36mf[m[52;91H4-45[47;45H[?25h[?25l[36m [m[52;91H5-46[47;46H[?25h[?25l[36mc[m[52;91H6-47[47;47H[?25h[?25l[36mo[m[52;91H7-48[47;48H[?25h[?25l[36mm[m[52;91H8-49[47;49H[?25h[?25l[36mm[m[52;91H9-50[47;50H[?25h[?25l[36ma[m[52;90H30-51[47;51H[?25h[?25l[36mn[m[52;91H1-52[47;52H[?25h[?25l[36md[m[52;91H2-53[47;53H[?25h[?25l[36m [m[52;91H3-54[47;54H[?25h[?25l[36ml[m[52;91H4-55[47;55H[?25h[?25l[36mi[m[52;91H5-56[47;56H[?25h[?25l[36mn[m[52;91H6-57[47;57H[?25h[?25l[36me[m[52;91H7-58[47;58H[?25h[?25l[36m [m[52;91H8-59[47;59H[?25h[?25l[36mb[m[52;91H9-60[47;60H[?25h[?25l[36mu[m[52;90H40-61[47;61H[?25h[?25l[36mi[m[52;91H1-62[47;62H[?25h[?25l[36mf[m[52;91H2-63[47;63H[?25h[?25l[47;62H[K[52;91H1-62[47;62H[?25h[?25l[47;61H[K[52;91H0-61[47;61H[?25h[?25l[36mf[m[52;91H1-62[47;62H[?25h[?25l[36mf[m[52;91H2-63[47;63H[?25h[?25l[36me[m[52;91H3-64[47;64H[?25h[?25l[36mr[m[52;91H4-65[47;65H[?25h[?25l[19;42H[46m{[48;17H}[m[52;88H6,4-18 [48;18H[?25h[?25l[19;42H{[48;17H}[52;88H7,1   [49;1H[?25h[?25l[52;88H8,26-40[50;40H[?25h[?25l[52;88H9,18-32[51;32H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H90,3-17[7C22%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[52;87H[K[52;87H91,40-65      23%[51;65H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[52;87H[K[52;87H92,28-65      23%[51;65H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H93,19-33      24%[51;33H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mreturn[m buf;[52;87H[K[52;87H94,14-28      25%[51;28H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H}[52;87H[K[52;87H95,2[10C25%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H96,1[10C26%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/**[m[52;87H[K[52;87H97,4[10C26%[51;4H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H98,56-60      27%[51;19H[36m[46m([39C)[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[36m **/[m[52;87H[K[52;87H99,5[10C27%[50;19H[36m([39C)
 **/[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H100,42[8C28%[51;21H[35m[46m([19C)[?25h[?25l[1;51r[m[1;1H[2M[1;52r[51;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H101,1[9C29%[49;21H[35m([19C)
[?25h[?25l[m[51;18H[46m([10C)[m[52;89H2,30[51;30H[?25h[?25l[51;18H([10C)[52;89H1,1 [50;1H[?25h[?25l[49;21H[35m[46m([19C)[m[52;89H0,42[49;42H[?25h[?25l[49;21H[35m([19C)[m[52;87H99,5  [48;5H[?25h[?25l[47;19H[36m[46m([39C)[m[52;88H8,56-60[47;60H[?25h[?25l[47;19H[36m([39C)[m[52;88H7,4    [46;4H[?25h[?25l[52;88H6,1[45;1H[?25h[?25l[52;88H5,2[44;2H[?25h[?25l[52;88H4,14-28[43;28H[?25h[?25l[52;88H3,19-33[42;33H[?25h[?25l[52;88H2,28-65[41;65H[?25h[?25l[52;91H7-58[41;58H[?25h[?25l[52;91H6-57[41;57H[?25h[?25l[52;91H5-56[41;56H[?25h[?25l[52;91H4-55[41;55H[?25h[?25l[52;91H3-54[41;54H[?25h[?25l[52;91H2-53[41;53H[?25h[?25l[52;91H1-52[41;52H[?25h[?25l[52;91H0-51[41;51H[?25h[?25l[52;90H19-50[41;50H[?25h[?25l[52;91H8-49[41;49H[?25h[?25l[52;91H7-41[41;41H[?25h[?25l[52;91H6-33[41;33H[?25h[?25l[52;91H5-29[41;29H[?25h[?25l[52;91H4-28[41;28H[?25h[?25l[52;91H3-27[41;27H[?25h[?25l[52;91H2-26[41;26H[?25h[?25l[52;91H1-25[41;25H[?25h[?25l[52;91H0-24[41;24H[?25h[?25l[52;90H9-23 [41;23H[?25h[?25l[52;90H8-22[41;22H[?25h[?25l[52;90H7-21[41;21H[?25h[?25l[52;90H6-20[41;20H[?25h[?25l[52;90H5-19[41;19H[?25h[?25l[52;90H4-18[41;18H[?25h[?25l[52;90H3-17[41;17H[?25h[?25l[52;90H2-9 [41;9H[?25h[?25l[8C        [33mreturn[m [33mNULL[m;[12C        [36m/* say so[7C        */[m[52;90H3-17[41;17H[?25h[?25l[52;90H4-25[41;25H[?25h[?25l[42;20H[46m[[mpos[46m][m[52;88H3,11-25[42;25H[?25h[?25l[52;91H0-24[42;24H[?25h[?25l[pos][52;90H9-23 [42;23H[?25h[?25l[52;90H8-22[42;22H[?25h[?25l[46m[[mpos[46m][m[52;90H7-21[42;21H[?25h[?25l[52;90H6-20[42;20H[?25h[?25l[pos][52;90H5-19[42;19H[?25h[?25l[52;90H4-18[42;18H[?25h[?25l[52;90H3-17[42;17H[?25h[?25l[52;90H2-9 [42;9H[?25h[?25l[52;90H3-17[42;17H[?25h[?25l[52;90H4-18[42;18H[?25h[?25l[52;88H2,3-17[41;17H[?25h[?25l[42;51r[42;1H[L[1;52r[41;25H[K[42;9H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[52;87H[K[52;87H93,1[10C28%[42;1H[?25h[52;1H[K[42;1H[?25l[52;87H93,1-8[8C28%[42;8H[?25h[?25l[52;1H1 line less; before #22  2 seconds ago[52;87H[K[41;51r[51;1H
[1;52r[41;9H                [33mreturn[m [33mNULL[m;                    [36m/* say so               */[m[51;1H[32mchar[m ** splitline([32mchar[m *line)[52;1H[K[52;87H92,3-24[7C29%1 line less; before #22  2 seconds ago[52;87H[K[52;87H92,3-24[7C29%[41;24H[?25h[?25l[52;88H1,10-24[40;24H[?25h[?25l[52;88H0,2-16 [39;16H[?25h[?25l[52;88H1,10-24[40;24H[?25h[?25l[52;88H2,3-24 [41;24H[?25h[?25l[52;88H1,10-24[40;24H[?25h[?25l[52;91H1-25[40;25H[?25h[?25l[52;91H2-26[40;26H[?25h[?25l[52;91H3-27[40;27H[?25h[?25l[52;91H4-28[40;28H[?25h[?25l[52;91H5-29[40;29H[?25h[?25l[52;91H6-30[40;30H[?25h[?25l[52;91H7-31[40;31H[?25h[?25l[52;91H8-32[40;32H[?25h[?25l[52;91H9-33[40;33H[?25h[?25l[52;90H20-34[40;34H[?25h[?25l[52;91H1-35[40;35H[?25h[?25l[52;91H2-36[40;36H[?25h[?25l[52;91H3-37[40;37H[?25h[?25l[52;91H4-38[40;38H[?25h[?25l[52;91H5-39[40;39H[?25h[?25l[52;91H6-40[40;40H[?25h[?25l[52;91H7-41[40;41H[?25h[?25l[52;91H8-42[40;42H[?25h[?25l[40;20H[46m([22C)[m[52;91H9-43[40;43H[?25h[?25l[40;20H([22C)[52;90H30-48[40;48H[?25h[?25l[52;91H1-56[40;56H[?25h[?25l[52;91H2-57[40;57H[?25h[?25l[52;91H3-58[40;58H[?25h[?25l[52;91H4-59[40;59H[?25h[?25l[52;91H5-60[40;60H[?25h[?25l[52;91H4-59[40;59H[?25h[?25l[52;91H3-58[40;58H[?25h[?25l[52;91H2-57[40;57H[?25h[?25l[52;91H1-56[40;56H[?25h[?25l[52;91H0-48[40;48H[?25h[?25l[40;20H[46m([22C)[m[52;90H29-43[40;43H[?25h[?25l[52;1H[33m-- INSERT --[m[52;14H[K[52;87H91,29-43      29%[40;43H[?25h[?25l[52;90H30-44[40;44H[?25h[?25l{[40;20H([22C)[46m{[44;1H}[m[52;91H1-45[40;45H[?25h[?25l{[44;1H}[52;88H2,17-41[41;41H[?25h[?25l}[40;44H[46m{[41;41H}[m[52;91H8-42[41;42H[?25h[?25l[52;91H7-41[41;41H[?25h[?25l[42;51r[42;1H[L[1;52r[41;41H[K[42;1H}[15C[36m/* say so               */[m[52;87H[K[52;87H93,1[10C28%[42;1H[46m}[?25h[?25l        [m}[7C        [36m/* say so[7C        */[m        [46m}[m[52;90H2-9[42;9H[?25h[?25l[46m        [m}[7C        [36m/* say so[7C        */[m[42;9H        [46m}[m[52;90H3-17[42;17H[?25h[?25l[40;44H{[42;17H}[52;88H2[41;17H[?25h[?25l[52;90H4-25[41;25H[?25h[?25l[52;88H3,5[42;25H[?25h[?25l[52;90H6-33[42;33H[?25h[?25l[52;90H7-34[42;34H[?25h[?25l[52;90H6-33[42;33H[?25h[?25l        [36m/* say so[7C        */[m[52;90H7-41[42;41H[?25h[?25l        [36m/* say so[7C        */[m[52;90H8-49[42;49H[?25h[?25l        [36m/* say so[7C        */[m[52;90H9-57[42;57H[?25h[?25l[52;88H2,17-41[41;41H[?25h[?25l[52;91H6-37[41;37H[?25h[?25l[52;91H5-36[41;36H[?25h[?25l[52;91H4-35[41;35H[?25h[?25l[52;91H5-36[41;36H[?25h[?25l[52;91H4-35[41;35H[?25h[?25l[52;91H3-34[41;34H[?25h[?25l[52;91H2-33[41;33H[?25h[?25l[52;91H1-32[41;32H[?25h[?25l[52;91H0-31[41;31H[?25h[?25l[52;90H9-30 [41;30H[?25h[?25l[52;90H8-29[41;29H[?25h[?25l[52;90H7-28[41;28H[?25h[?25l[52;90H6-27[41;27H[?25h[?25l[52;90H5-26[41;26H[?25h[?25l[52;90H4-25[41;25H[?25h[?25l[42;51r[42;1H[L[1;52r[41;25H[K[42;1H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H93,1[10C28%[42;1H[?25h[?25l        [33mreturn[m [33mNULL[m;[52;90H2-9[42;9H[?25h[?25l        [33mreturn[m [33mNULL[m;[52;90H3-17[42;17H[?25h[?25l        [33mreturn[m [33mNULL[m;[52;90H4-25[42;25H[?25h[?25l[52;88H2[41;25H[?25h[?25lf[52;90H5-26[41;26H[?25h[?25lr[52;90H6-27[41;27H[?25h[?25le[52;90H7-28[41;28H[?25h[?25le[52;90H8-29[41;29H[?25h[?25l([52;90H9-30[41;30H[?25h[?25lb[52;90H10-31[41;31H[?25h[?25lu[52;91H1-32[41;32H[?25h[?25l[41;31H[K[52;91H0-31[41;31H[?25h[?25lu[52;91H1-32[41;32H[?25h[?25lg[52;91H2-33[41;33H[?25h[?25lf[52;91H3-34[41;34H[?25h[?25l[41;33H[K[52;91H2-33[41;33H[?25h[?25l[41;32H[K[52;91H1-32[41;32H[?25h[?25lf[52;91H2-33[41;33H[?25h[?25l)[46m([mbuf[46m)[m[52;91H3-34[41;34H[?25h[?25l;(buf)[52;91H4-35[41;35H[?25h[?25l[52;91H5-36[41;36H[?25h[?25l/[52;91H6-37[41;37H[?25h[?25l[36m//[m[52;91H7-38[41;38H[?25h[?25l[36m [m[52;91H8-39[41;39H[?25h[?25l[36ma[m[52;91H9-40[41;40H[?25h[?25l[41;39H[K[52;91H8-39[41;39H[?25h[?25l[36mm[m[52;91H9-40[41;40H[?25h[?25l[36ma[m[52;90H20-41[41;41H[?25h[?25l[36my[m[52;91H1-42[41;42H[?25h[?25l[36mb[m[52;91H2-43[41;43H[?25h[?25l[36me[m[52;91H3-44[41;44H[?25h[?25l[36m [m[52;91H4-45[41;45H[?25h[?25l[36mo[m[52;91H5-46[41;46H[?25h[?25l[36mv[m[52;91H6-47[41;47H[?25h[?25l[36me[m[52;91H7-48[41;48H[?25h[?25l[36mr[m[52;91H8-49[41;49H[?25h[?25l[36m [m[52;91H9-50[41;50H[?25h[?25l[36mk[m[52;90H30-51[41;51H[?25h[?25l[41;50H[K[52;90H29-50[41;50H[?25h[?25l[41;49H[K[52;91H8-49[41;49H[?25h[?25l[36mk[m[52;91H9-50[41;50H[?25h[?25l[36mi[m[52;90H30-51[41;51H[?25h[?25l[36ml[m[52;91H1-52[41;52H[?25h[?25l[36ml[m[52;91H2-53[41;53H[?25h[?25l[36m [m[52;91H3-54[41;54H[?25h[?25l[36mb[m[52;91H4-55[41;55H[?25h[?25l[36mu[m[52;91H5-56[41;56H[?25h[?25l[36mt[m[52;91H6-57[41;57H[?25h[?25l[36m [m[52;91H7-58[41;58H[?25h[?25l[36ms[m[52;91H8-59[41;59H[?25h[?25l[36ma[m[52;91H9-60[41;60H[?25h[?25l[36mf[m[52;90H40-61[41;61H[?25h[?25l[36me[m[52;91H1-62[41;62H[?25h[?25l[36m [m[52;91H2-63[41;63H[?25h[?25l[36mt[m[52;91H3-64[41;64H[?25h[?25l[36mh[m[52;91H4-65[41;65H[?25h[?25l[36ma[m[52;91H5-66[41;66H[?25h[?25l[36mn[m[52;91H6-67[41;67H[?25h[?25l[36m [m[52;91H7-68[41;68H[?25h[?25l[36ms[m[52;91H8-69[41;69H[?25h[?25l[36mo[m[52;91H9-70[41;70H[?25h[?25l[41;69H[K[52;91H8-69[41;69H[?25h[?25l[41;68H[K[52;91H7-68[41;68H[?25h[?25l[41;67H[K[52;91H6-67[41;67H[?25h[?25l[41;66H[K[52;91H5-66[41;66H[?25h[?25l[41;65H[K[52;91H4-65[41;65H[?25h[?25l[41;64H[K[52;91H3-64[41;64H[?25h[?25l[41;63H[K[52;91H2-63[41;63H[?25h[?25l[36m>[m[52;91H3-64[41;64H[?25h[?25l[36ms[m[52;91H4-65[41;65H[?25h[?25l[36mo[m[52;91H5-66[41;66H[?25h[?25l[36mr[m[52;91H6-67[41;67H[?25h[?25l[36mr[m[52;91H7-68[41;68H[?25h[?25l[36my[m[52;91H8-69[41;69H[?25h[?25l[36m?[m[52;91H9-70[41;70H[?25h[?25l[52;91H8-69[41;69H[?25h[?25l[52;91H7-68[41;68H[?25h[?25l[52;91H6-67[41;67H[?25h[?25l[52;91H5-66[41;66H[?25h[?25l[52;91H4-65[41;65H[?25h[?25l[52;91H3-64[41;64H[?25h[?25l[36m sorry?[m[52;91H4-65[41;65H[?25h[52;1H[K[41;64H[?25l[52;87H92,43-64      28%[41;64H[?25h[?25l[52;88H3,16-40[42;40H[?25h[?25l[52;88H4,16-64[43;64H[?25h[?25l[52;88H5,18-32[44;32H[?25h[?25l[52;88H6,13-27[45;27H[?25h[?25l[52;88H7,1    [46;1H[?25h[?25l[52;88H8,0-1[47;1H[?25h[?25l[52;88H9,3  [48;3H[?25h[?25l[49;19H[36m[46m([39C)[m[52;87H100,55-59[49;59H[?25h[?25l[49;19H[36m([39C)[m[52;89H1,4    [50;4H[?25h[?25l[51;21H[35m[46m([19C)[m[52;89H2,41[51;41H[?25h[?25l[1;51r[51;1H
[1;52r[50;21H[35m([19C)[m[52;87H[K[52;87H103,0-1[7C29%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mchar[m ** splitline[46m([m[32mchar[m *line[46m)[m[52;87H[K[52;87H104,29[8C29%[51;29H[?25h[?25l[1;51r[51;1H
[1;52r[50;18H([10C)
[36m/*[m[52;87H[K[52;87H105,2[9C30%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H106,64[8C30%[51;64H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H107,64[8C31%[51;64H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H108,52[8C32%[51;52H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H109,59[8C32%[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H110,64[8C33%[51;64H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H111,3[9C33%[51;3H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H112,1[9C34%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *newstr();[52;87H[K[52;87H113,17-18     34%[51;18H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  **args ;[52;87H[K[52;87H114,15-16     35%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H115,37-64     35%[51;64H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H116,40-64     36%[51;64H[?25h[?25l[52;87H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[52;3H[K[52;3H[?25h[?25l"sm2in.c" 231L, 5166C written[57C116,40-64     36%[52;87H[K[52;87H116,40-64     36%[51;64H[?25h[?25l[52;89H5,37[50;64H[?25h[?25l[52;89H4,15-16[49;16H[?25h[?25l[52;89H3,17-18[48;18H[?25h[?25l[52;89H2,1    [47;1H[?25h[?25l[52;89H1,3[46;3H[?25h[?25l[52;89H0,64[45;64H[?25h[?25l[52;1H[K[52;1H:[?2004h[?25hw[?25l[?25h[?25l"sm2in.c" 231L, 5166C written[57C110,64[8C36%[52;87H[K[52;87H110,64[8C36%[45;64H[?25h[?25l[52;88H09,59[44;59H[?25h[?25l[52;89H8,52[43;52H[?25h[?25l[52;89H7,64[42;64H[?25h[?25l[52;89H6[41;64H[?25h[?25l[52;89H5,2 [40;2H[?25h[?25l[39;18H[46m([10C)[m[52;89H4,29[39;29H[?25h[?25l[39;18H([10C)[52;89H3,0-1[38;1H[?25h[?25l[37;21H[35m[46m([19C)[m[52;89H2,41 [37;41H[?25h[?25l[37;21H[35m([19C)[m[52;89H1,4 [36;4H[?25h[?25l[35;19H[36m[46m([39C)[m[52;89H0,55-59[35;59H[?25h[?25l[35;19H[36m([39C)[m[52;87H99,3     [34;3H[?25h[?25l[52;88H8,0-1[33;1H[?25h[?25l[52;88H7,1  [32;1H[?25h[?25l[52;88H6,13-27[31;27H[?25h[?25l[52;88H5,18-32[30;32H[?25h[?25l[52;88H4,16-64[29;64H[?25h[?25l[52;88H3,16-40[28;40H[?25h[?25l[52;88H2,43-64[27;64H[?25h[?25l[52;88H1,40[26;64H[?25h[?25l[52;88H0,2-16 [25;16H[?25h[?25l[52;87H89,17-31[24;31H[?25h[?25l[52;88H8,25-39[23;39H[?25h[?25l[52;88H7,0-1  [22;1H[?25h[?25l[52;88H6,3-17[21;17H[?25h[?25l[52;88H5,43-64[20;64H[?25h[?25l[12;44H[46m{[19;25H}[m[52;88H4,4-25 [19;25H[?25h[?25l[12;44H{[19;25H}[52;88H3,36-64[17;64H[?25h[?25l[13;64H[46m{[16;33H}[m[52;88H2,5-33 [16;33H[?25h[?25l[13;64H{[16;33H}[52;88H1,23-58[15;58H[?25h[?25l[52;88H0,29-64[14;64H[?25h[?25l[13;64H[46m{[16;33H}[m[52;87H79,36[13;64H[?25h[?25l[12;44H[46m{[m[13;64H{[16;33H}[19;25H[46m}[m[52;88H8,23-4[12;44H[?25h[?25l{[19;25H}[52;88H7,9-30 [11;30H[?25h[?25l[52;88H6,43-64[10;64H[?25h[?25l[52;88H5,3-24 [9;24H[?25h[?25l[52;88H4,32-53[8;53H[?25h[?25l[7;55H[46m([8C)[m[52;88H3,43-64[7;64H[?25h[?25l[7;55H([8C)[52;88H2,29-50[6;50H[?25h[?25l[52;88H1,20-41[5;41H[?25h[?25l[52;88H0,19-40[4;40H[?25h[?25l[3;20H[46m([11C)[m[52;87H69,18-32[3;32H[?25h[?25l[3;20H([11C)[52;88H8,23-37[2;37H[?25h[?25l[52;88H7,0-1  [1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[52;1H[K[52;87H66,3-17[7C35%[1;17H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H}[52;87H[K[52;87H65,9-32[7C35%[1;32H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H64,32-64      34%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H63,36-64      34%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[1;26H[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H62,26-64      33%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33Hbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H61,26-54      33%[1;54H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H60,33-64      32%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[1;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H59,37-64      32%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H58,53-60      31%[1;60H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H57,35-64      30%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H56,0-1[8C30%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H55,0-1[8C29%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H54,25-32      29%[1;32H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mint[m command_count = [33m0[m;[52;87H[K[52;87H53,23-30      28%[1;30H[?25h[?25l[1;51r[1;1H[2L[1;52r[1;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store tt[2;1Hhe commands[m[52;87H[K[52;87H52,57-64      28%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H51,1-8[8C27%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    c;[30C[36m/* input char           */[m[52;87H[K[52;87H50,27-64      26%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;87H[K[52;87H49,33-64      26%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[52;87H[K[52;87H48,36-64      25%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[52;87H[K[52;87H47,32-64      25%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H{[52;87H[K[52;87H46,1[10C24%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H45,3[10C24%[1;3H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[52;87H[K[52;87H44,47[9C23%[1;47H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          calls fatal from emalloc[m[36m[46m()[m[52;87H[K[52;87H43,38[9C23%[1;38H[?25h[?25l[2;51r[2;1H[L[1;52r[1;5H[36merrors: NULL at EOF[m[1C[36m[46m([m[36mnot really an error[m[36m[46m)[m
[36m *          calls fatal from emalloc()[m[52;87H[K[52;87H42,45[9C22%[1;45H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: dynamically allocated string holding command line[2;25H([19C)[m[52;87H[K[52;87H41,61[9C21%[1;61H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: read next command line from fp[m[52;87H[K[52;87H40,42[9C21%[1;42H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H39,2[10C20%[1;2H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m * next_cmd[46m([m[32mchar[m *prompt, [32mFILE[m *fp[46m)[m[52;87H[K[52;87H38,39[9C20%[1;39H[?25h[?25l[1;51r[1;1H[L[1;52r[2;16H([22C)[52;87H[K[52;87H37,0-1[8C19%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H36,0-1[8C19%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H35,0-1[8C18%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[51;1H[34m@                                                                                                       [m[52;87H[K[52;87H34,0-1[8C18%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H33,3[10C17%[1;3H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[52;87H[K[52;87H32,61[9C17%[1;61H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[52;87H[K[52;87H31,63[9C16%[1;63H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    [m[52;87H[K[52;87H30,6[10C16%[1;6H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[52;87H[K[52;87H29,64[9C15%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H28,0-1[8C14%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H27,0-1[8C14%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H26,1[10C13%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mreturn[m count;[52;87H[K[52;87H25,14-21      13%[1;21H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H}[52;87H[K[52;87H24,2-9[8C12%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hcmd++;[52;87H[K[52;87H23,8-22[7C12%[1;22H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hcount++;[52;87H[K[52;87H22,10-24      11%[1;24H[?25h[?25l[4;51r[4;1H[L[1;52r[1;9H[33mwhile[m(*cmd != [33mNULL[m)[46m{[m[2;18Hount++;[3;9H [7Ccmd++;[4;9H[46m}[m[52;87H[K[52;87H21,21-28      11%[1;28H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hcount = [33m0[m;[2;28H{[5;9H}[52;87H[K[52;87H20,11-18      10%[1;18H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H19,0-1[9C9%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mchar[m** cmd = commands;[52;87H[K[52;87H18,23-30[7C9%[1;30H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mint[m count;[52;87H[K[52;87H17,11-18[7C8%[1;18H[?25h[?25l[11;51r[11;1H[L[1;52r[1;1H[32mint[m count_commands([32mchar[m** commands)[46m{[m[2;9H[32mint[m count;[2;20H[K[3;9H[32mchar[m** cmd = commands;[4;9H[K[5;9Hcount = [33m0[m;[5;20H[K[6;9H[33mwhile[m(*cmd != [33mNULL[m){[7;18Hount++;[8;9H [7Ccmd++;[9;9H}[9;10H[K[10;1H [7C[33mreturn[m count;
[46m}[m[52;87H[K[52;87H16,36[10C8%[1;36H[?25h[?25l[1;51r[1;1H[L[1;52r[2;36H{[12;1H}[52;87H[K[52;87H15,0-1[9C7%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#define DFL_PROMPT      [m[33m"> "[m[52;87H[K[52;87H14,23-28[7C7%[1;28H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H13,0-1[9C6%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m"smsh.h"[m[52;87H[K[52;87H12,17[10C6%[1;17H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<signal.h>[m[52;87H[K[52;87H11,19[10C5%[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<unistd.h>[m[52;87H[K[52;87H10,19[10C4%[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdlib.h>[m[52;87H[K[52;87H9,19[11C4%[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdio.h>[m[52;87H[K[52;87H8,18[11C3%[1;18H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H7,0-1[10C3%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **/[m[52;87H[K[52;87H6,4[12C2%[1;4H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             uses fork, exec, wait, and ignores signals[m[52;87H[K[52;87H5,47-58[8C2%[1;58H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             this one parses the command line into strings[m[52;87H[K[52;87H4,50-61[8C1%[1;61H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             first really useful version after prompting shell[m[52;87H[K[52;87H3,53-64[8C1%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m  smsh1.c  small-shell version 1[m[51;1H[34m@                                                                                                       [m[52;87H[K[52;87H2,32[11C0%[1;32H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m[52;87H[K[52;87H1,56[10CTop[1;56H[?25h[?25l[52;87H2,32[2;32H[?25h[?25l[52;87H3,53-64[3;64H[?25h[?25l[52;87H4,50-61[4;61H[?25h[?25l[52;87H5,47-58[5;58H[?25h[?25l[52;87H6,4    [6;4H[?25h[?25l[52;87H7,0-1[7;1H[?25h[?25l[52;87H8,18 [8;18H[?25h[?25l[52;87H9,19[9;19H[?25h[?25l[52;87H10,19[10;19H[?25h[?25l[52;88H1[11;19H[?25h[?25l[52;88H2,17[12;17H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H12,17[9CTop[12;17H[?25h[?25l[52;91H8[12;18H[?25h[?25l[13;51r[13;1H[L[1;52r[52;87H[K[52;87H13,1[10CTop[13;1H[?25h[?25l#[52;90H2[13;2H[?25h[?25li[52;90H3[13;3H[?25h[?25ln[52;90H4[13;4H[?25h[?25lc[52;90H5[13;5H[?25h[?25ll[52;90H6[13;6H[?25h[?25lu[52;90H7[13;7H[?25h[?25ld[52;90H8[13;8H[?25h[?25le[52;90H9[13;9H[?25h[?25l[52;90H10[13;10H[?25h[?25l[35m#include [m[33m"

#define DFL_PROMPT      [m[1C> [52;91H1[13;11H[?25h[?25l[33me[m[52;91H2[13;12H[?25h[?25l[33mx[m[52;91H3[13;13H[?25h[?25l[33me[m[52;91H4[13;14H[?25h[?25l[33mc[m[52;91H5[13;15H[?25h[?25l[33mu[m[52;91H6[13;16H[?25h[?25l[33mt[m[52;91H7[13;17H[?25h[?25l[33me[m[52;91H8[13;18H[?25h[?25l[33m.[m[52;91H9[13;19H[?25h[?25l[33mc[m[52;90H20[13;20H[?25h[?25l[33m"[m

[35m#define DFL_PROMPT      [m[1C[33m> [m[52;91H1[13;21H[?25h[52;1H[K[13;20H[?25l[52;87H13,20[9CTop[13;20H[?25h[?25l[52;87H51,4-10[51;10H[?25h[?25l[52;90H3-9 [51;9H[?25h[?25l[52;87H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"sm2in.c" 232L, 5187C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi sm2in.c ls[Kvi sm2in.c [K[K[K[K[K[K[K[K[K[K[Kgcc sm2in.c test.i[Ko [C[1@ [1@-[1@o[C[C[C[C[C[C[C[C
[01m[Ksm2in.c:[m[K In function â€˜[01m[Knext_cmd[m[Kâ€™:
[01m[Ksm2in.c:80:34:[m[K [01;31m[Kerror: [m[Kexpected expression before â€˜[01m[K)[m[Kâ€™ token
     for(i=0; i< command_count; i+[01;31m[K)[m[K+{
                                  [01;31m[K^[m[K
[01m[Ksm2in.c:[m[K In function â€˜[01m[Knewstr[m[Kâ€™:
[01m[Ksm2in.c:164:3:[m[K [01;35m[Kwarning: [m[Kimplicit declaration of function â€˜[01m[Kstrncpy[m[Kâ€™ [[01;35m[K-Wimplicit-function-declaration[m[K]
   [01;35m[Kstrncpy[m[K(rv, s, l);
   [01;35m[K^~~~~~~[m[K
[01m[Ksm2in.c:164:3:[m[K [01;35m[Kwarning: [m[Kincompatible implicit declaration of built-in function â€˜[01m[Kstrncpy[m[Kâ€™
[01m[Ksm2in.c:164:3:[m[K [01;36m[Knote: [m[Kinclude â€˜[01m[K<string.h>[m[Kâ€™ or provide a declaration of â€˜[01m[Kstrncpy[m[Kâ€™
[01m[Ksm2in.c:14:1:[m[K
+[32m[K#include <string.h>[m[K
 
[01m[Ksm2in.c:164:3:[m[K
   [01;36m[Kstrncpy[m[K(rv, s, l);
   [01;36m[K^~~~~~~[m[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi sm2in.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"sm2in.c" 232L, 5187C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments
  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"execute.c"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m count_commands([32mchar[m** commands){[18;9H[32mint[m count;[19;9H[32mchar[m** cmd = commands;[21;9Hcount = [33m0[m;[22;9H[33mwhile[m(*cmd != [33mNULL[m){[23;17Hcount++;[24;17Hcmd++;[25;9H}[26;9H[33mreturn[m count;
}


[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string
 */[m[39;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[48;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[49;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[50;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[51;10H[32mint[m    c;[30C[36m/* input char           */[m[52;87H1,1[11CTop[1;1H[?25h[?25l[52;1H[K[52;1H:[?2004h[?25hs[?25l[?25he[?25l[?25ht[?25l[?25h[?25l [?25hn[?25l[?25hu[?25l[?25hm[?25l[?25hb[?25l[?25he[?25l[?25hr[?25l[?25h[?25l[1;1H[33m  1 [m[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m
[33m  2 [m[36m  smsh1.c  small-shell version 1[m
[33m  3 [m[1C[36m**[9C    first really useful version after prompting shell[m
[33m  4 [m[1C[36m**[9C    this one parses the command line into strings[m
[33m  5 [m[1C[36m**[9C    uses fork, exec, wait, and ignores signals[m
[33m  6 [m[36m **/[m
[33m  7 
  8 [m[35m#include [m[33m<stdio.h>[m
[33m  9 [m[35m#include [m[33m<stdlib.h>[m
[33m 10 [m[35m#include [m[33m<unistd.h>[m
[33m 11 [m[35m#include [m[33m<signal.h>[m
[33m 12 [m[35m#include [m[33m"smsh.h"[m
[33m 13 [m[35m#include [m[33m"execute.c"[m
[33m 14 
 15 [m[35m#define DFL_PROMPT      [m[33m"> "[m
[33m 16 
 17 [m[32mint[m count_commands([32mchar[m** commands){
[33m 18 [m        [32mint[m count;
[33m 19 [m        [32mchar[m** cmd = commands;
[33m 20 
 21 [m        count = [33m0[m;
[33m 22 [m        [33mwhile[m(*cmd != [33mNULL[m){
[33m 23 [m[12C    count++;
[33m 24 [m[12C    cmd++;
[33m 25 [m        }
[33m 26 [m        [1C[33meturn[m count;
[33m 27 [m}
[33m 28 
 29 
 30 [m[36m/* splitline.c - commmand reading and parsing functions for smsh[m
[33m 31 [m[1C[36m*    [m
[33m 32 [m[1C[36m*    char *next_cmd(char *prompt, FILE *fp) - get next command[m
[33m 33 [m[1C[36m*    char **splitline(char *str);[7C    - parse a string[m
[33m 34 [m[36m */[m
[33m 35 
 36 
 37 
 38 
 39 [m[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[33m 40 [m[36m/*[m
[33m 41 [m[36m * purpose: read next command line from fp[m
[33m 42 [m[36m * returns: dynamically allocated string holding command line[m
[33m 43 [m[36m *  errors: NULL at EOF (not really an error)[m
[33m 44 [m[1C[36m*          calls fatal from emalloc()[m
[33m 45 [m[1C[36m*   notes: allocates space in BUFSIZ chunks.  [m
[33m 46 [m[36m */[m
[33m 47 [m{
[33m 48 [m         [32mchar[m   *buf = [33mNULL[m;[24C    [36m/* the buffer[7C    */[m
[33m 49 [m         [32mint[m    bufspace = [33m0[m;[15C    [36m/* total size[7C    */[m
[33m 50 [m         [32mint[m    pos = [33m0[m;[20C    [36m/* current position     */[m
[33m 51 [m         [32mint[m    c;[26C    [36m/* input char[7C    */[m[52;87H1,1[11CTop[1;5H[?25h[27m[23m[29m[m[H[2J[?25l[1;1H[33m  1 [m[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m
[33m  2 [m[36m  smsh1.c  small-shell version 1[m
[33m  3 [m[36m **             first really useful version after prompting shell[m
[33m  4 [m[36m **             this one parses the command line into strings[m
[33m  5 [m[36m **             uses fork, exec, wait, and ignores signals[m
[33m  6 [m[36m **/[m
[33m  7 
  8 [m[35m#include [m[33m<stdio.h>[m
[33m  9 [m[35m#include [m[33m<stdlib.h>[m
[33m 10 [m[35m#include [m[33m<unistd.h>[m
[33m 11 [m[35m#include [m[33m<signal.h>[m
[33m 12 [m[35m#include [m[33m"smsh.h"[m
[33m 13 [m[35m#include [m[33m"execute.c"[m
[33m 14 
 15 [m[35m#define DFL_PROMPT      [m[33m"> "[m
[33m 16 
 17 [m[32mint[m count_commands([32mchar[m** commands){
[33m 18 [m[8C[32mint[m count;
[33m 19 [m[8C[32mchar[m** cmd = commands;
[33m 20 
 21 [m[8Ccount = [33m0[m;
[33m 22 [m[8C[33mwhile[m(*cmd != [33mNULL[m){
[33m 23 [m[16Ccount++;
[33m 24 [m[16Ccmd++;
[33m 25 [m[8C}
[33m 26 [m[8C[33mreturn[m count;
[33m 27 [m}
[33m 28 
 29 
 30 [m[36m/* splitline.c - commmand reading and parsing functions for smsh[m
[33m 31 [m[36m *    [m
[33m 32 [m[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m
[33m 33 [m[36m *    char **splitline(char *str);           - parse a string[m
[33m 34 [m[36m */[m
[33m 35 
 36 
 37 
 38 
 39 [m[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[33m 40 [m[36m/*[m
[33m 41 [m[36m * purpose: read next command line from fp[m
[33m 42 [m[36m * returns: dynamically allocated string holding command line[m
[33m 43 [m[36m *  errors: NULL at EOF (not really an error)[m
[33m 44 [m[36m *          calls fatal from emalloc()[m
[33m 45 [m[36m *   notes: allocates space in BUFSIZ chunks.  [m
[33m 46 [m[36m */[m
[33m 47 [m{
[33m 48 [m[9C[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m
[33m 49 [m[9C[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m
[33m 50 [m[9C[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m
[33m 51 [m[9C[32mint[m    c;[30C[36m/* input char           */[m
[33m 52 [m[53;194H1,1[11CTop[1;5H[?25h[?25l[53;194H2[2;5H[?25h[?25l[53;194H3[3;5H[?25h[?25l[53;194H4[4;5H[?25h[?25l[53;194H5[5;5H[?25h[?25l[53;194H6[6;5H[?25h[?25l[53;194H7,0-1[7;5H[?25h[?25l[53;194H8,1  [8;5H[?25h[?25l[53;194H9[9;5H[?25h[?25l[53;194H10,1[10;5H[?25h[?25l[53;195H1[11;5H[?25h[?25l[53;195H2[12;5H[?25h[?25l[53;195H3[13;5H[?25h[?25l[53;195H4,0-1[14;5H[?25h[?25l[53;195H5,1  [15;5H[?25h[?25l[53;195H6,0-1[16;5H[?25h[?25l[53;195H7,1  [17;5H[?25h[?25l[27m[23m[29m[m[H[2J[1;1H[33m 51 [m[9C[32mint[m    c;[30C[36m/* input char           */[m
[33m 52 
 53 [m[8C[36m//new variable to store number of commands and array of pointer (double pointer char) to store the commands[m
[33m 54 [m[8C[32mint[m command_count = [33m0[m;
[33m 55 [m[8C[32mchar[m** commands = [33mNULL[m;
[33m 56 
 57 
 58 [m[9Cprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m
[33m 59 [m[9C[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m
[33m 60 [m[17C[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m
[33m 61 [m[24C[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m
[33m 62 [m[32Cbuf = emalloc([33mBUFSIZ[m);
[33m 63 [m[25C[33melse[m{[26C[36m/* or expand    */[m
[33m 64 [m[32Cbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);
[33m 65 [m[32Cbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m
[33m 66 [m[24C}
[33m 67 [m[16C}
[33m 68 
 69 [m[16C[36m/* end of command? */[m
[33m 70 [m[16C[33mif[m ( c == [35m'\n'[m )
[33m 71 [m[24Cbuf[pos] = [35m'\0'[m;
[33m 72 [m[24C[36m//split the lines[m
[33m 73 [m[24Ccommands - splitline(buf);
[33m 74 [m[24Ccommand_count = count_commands(commands);
[33m 75 [m[24Cfree(buf); [36m//clear the buffer[m
[33m 76 
 77 [m[24C[36m//execute multiple commands if num>0, i.e. we detect a command[m
[33m 78 [m[24C[32mint[m i;
[33m 79 [m[24C[33mif[m(command_count>[33m0[m){
[33m 80 [m[32C[33mfor[m(i=[33m0[m; i< command_count; i+)+{
[33m 81 [m[40Cexecute(splitline(commands[i]));
[33m 82 [m[40Cfree(commands[i]);
[33m 83 [m[32C}
[33m 84 [m[32Cfreelist(commands); [36m// not sure if needed but seems to ensure safety from memory leaks  [m
[33m 85 [m[24C}
[33m 86 [m[24C[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m
[33m 87 [m[16C}
[33m 88 
 89 [m[16C[36m/* no, add to buffer */[m
[33m 90 [m[16Cbuf[pos++] = c;
[33m 91 
 92 [m[16C[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m
[33m 93 [m[24Cfree(buf); [36m// maybe overkill but safe > sorry?[m
[33m 94 [m[24C[33mreturn[m [33mNULL[m;
[33m 95 [m[16C}[39C[36m/* say so               */[m
[33m 96 [m[16Cbuf[pos] = [35m'\0'[m;
[33m 97 [m[16C[33mreturn[m buf;
[33m 98 [m}
[33m 99 
100 [m[36m/**[m
[33m101 [m[36m **     splitline ( parse a line into an array of strings )[m
[33m102 [m[36m **/[m[53;194H51,4-10[7C27%[1;14H[?25h[?25l[27m[23m[29m[m[H[2J[1;1H[33m101 [m[36m **     splitline ( parse a line into an array of strings )[m
[33m102 [m[36m **/[m
[33m103 [m[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m
[33m104 
105 [m[32mchar[m ** splitline([32mchar[m *line)
[33m106 [m[36m/*[m
[33m107 [m[36m * purpose: split a line into array of white-space separated tokens[m
[33m108 [m[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m
[33m109 [m[36m *          or NULL if line if no tokens on the line[m
[33m110 [m[36m *  action: traverse the array, locate strings, make copies[m
[33m111 [m[36m *    note: strtok() could work, but we may want to add quotes later[m
[33m112 [m[36m */[m
[33m113 [m{
[33m114 [m  [32mchar[m  *newstr();
[33m115 [m  [32mchar[m  **args ;
[33m116 [m  [32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m
[33m117 [m  [32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m
[33m118 [m  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m
[33m119 [m  [32mchar[m  *cp = line;[21C[36m/* pos in string        */[m
[33m120 [m  [32mchar[m  *start;
[33m121 [m  [32mint[m   len;
[33m122 
123 [m  [33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
[33m124 [m    [33mreturn[m [33mNULL[m;
[33m125 
126 [m  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
[33m127 [m  bufspace = [33mBUFSIZ[m;
[33m128 [m  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);
[33m129 
130 [m  [33mwhile[m( *cp != [35m'\0'[m )
[33m131 [m    {
[33m132 [m      [33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m
[33m133 [m[8Ccp++;
[33m134 [m      [33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m
[33m135 [m[8C[33mbreak[m;
[33m136 
137 [m      [36m/* make sure the array has room (+1 for NULL) */[m
[33m138 [m      [33mif[m ( argnum+[33m1[m >= spots ){
[33m139 [m[8Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);
[33m140 [m[8Cbufspace += [33mBUFSIZ[m;
[33m141 [m[8Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));
[33m142 [m      }
[33m143 
144 [m      [36m/* mark start, then find end of word */[m
[33m145 [m      start = cp;
[33m146 [m      len   = [33m1[m;
[33m147 [m      [33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )
[33m148 [m[8Clen++;
[33m149 [m      args[argnum++] = newstr(start, len);
[33m150 [m    }
[33m151 [m  args[argnum] = [33mNULL[m;
[33m152 [m  [33mreturn[m args;[53;194H101,2[9C55%[1;6H[?25h[?25l[27m[23m[29m[m[H[2J[1;1H[33m151 [m  args[argnum] = [33mNULL[m;
[33m152 [m  [33mreturn[m args;
[33m153 [m}
[33m154 
155 [m[36m/*[m
[33m156 [m[36m * purpose: constructor for strings[m
[33m157 [m[36m * returns: a string, never NULL[m
[33m158 [m[36m */[m
[33m159 [m[32mchar[m *newstr([32mchar[m *s, [32mint[m l)
[33m160 [m{
[33m161 [m  [32mchar[m *rv = emalloc(l+[33m1[m);
[33m162 
163 [m  rv[l] = [35m'\0'[m;
[33m164 [m  strncpy(rv, s, l);
[33m165 [m  [33mreturn[m rv;
[33m166 [m}
[33m167 
168 [m[32mvoid[m
[33m169 [mfreelist([32mchar[m **list)
[33m170 [m[36m/*[m
[33m171 [m[36m * purpose: free the list returned by splitline[m
[33m172 [m[36m * returns: nothing[m
[33m173 [m[36m *  action: free all strings in list and then free the list[m
[33m174 [m[36m */[m
[33m175 [m{
[33m176 [m  [32mchar[m  **cp = list;
[33m177 [m  [33mwhile[m( *cp )
[33m178 [m    free(*cp++);
[33m179 [m  free(list);
[33m180 [m}
[33m181 
182 [m[32mvoid[m * emalloc([32msize_t[m n)
[33m183 [m{
[33m184 [m  [32mvoid[m *rv ;
[33m185 [m  [33mif[m ( (rv = malloc(n)) == [33mNULL[m )
[33m186 [m    fatal([33m"out of memory"[m,[33m""[m,[33m1[m);
[33m187 [m  [33mreturn[m rv;
[33m188 [m}
[33m189 
190 [m[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)
[33m191 [m{
[33m192 [m  [32mvoid[m *rv;
[33m193 [m  [33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )
[33m194 [m    fatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);
[33m195 [m  [33mreturn[m rv;
[33m196 [m}
[33m197 
198 
199 [m[32mvoid[m setup()
[33m200 [m[36m/*[m
[33m201 [m[36m * purpose: initialize shell[m
[33m202 [m[36m * returns: nothing. calls fatal() if trouble[m[53;194H151,3[9C83%[1;7H[?25h[?25l[53;196H2[2;7H[?25h[?25l[53;196H3,1[3;5H[?25h[?25l[53;196H4,0-1[4;5H[?25h[?25l[53;196H5,2  [5;6H[?25h[?25l[53;196H6,3[6;7H[?25h[?25l[53;196H7[7;7H[?25h[?25l[53;196H8[8;7H[?25h[?25l[53;196H9[9;7H[?25h[?25l[10;5H[46m{[16;5H}[m[53;195H60,1[10;5H[?25h[?25l{[16;5H}[53;196H1,3[11;7H[?25h[?25l[53;196H2,0-1[12;5H[?25h[?25l[53;196H3,3  [13;7H[?25h[?25l[53;196H2,0-1[12;5H[?25h[?25l[53;196H1,3  [11;7H[?25h[?25l[53;196H2,0-1[12;5H[?25h[?25l[53;196H1,3  [11;7H[?25h[?25l[10;5H[46m{[16;5H}[m[53;196H0,1[10;5H[?25h[?25l{[16;5H}[53;195H59,3[9;7H[?25h[?25l[53;196H8[8;7H[?25h[?25l[53;196H7[7;7H[?25h[?25l[53;196H6[6;7H[?25h[?25l[53;196H5,2[5;6H[?25h[?25l[53;196H4,0-1[4;5H[?25h[?25l[53;196H3,1  [3;5H[?25h[?25l[53;196H2,3[2;7H[?25h[?25l[53;196H1[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m150 [m    }[53;194H[K[53;194H150,3[9C82%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m149 [m      args[argnum++] = newstr(start, len);[53;194H[K[53;194H149,3[9C82%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m148 [m[8Clen++;[53;194H[K[53;194H148,1-8[7C81%[1;12H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m147 [m      [33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[53;194H[K[53;194H147,3[9C81%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m146 [m      len   = [33m1[m;[53;194H[K[53;194H146,3[9C80%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m145 [m      start = cp;[53;194H[K[53;194H145,3[9C80%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m144 [m      [36m/* mark start, then find end of word */[m[53;194H[K[53;194H144,3[9C79%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m143 [m[53;194H[K[53;194H143,0-1[7C78%[1;5H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m142 [m      }[53;194H[K[53;194H142,3[9C78%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m141 [m[8Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[53;194H[K[53;194H141,1-8[7C77%[1;12H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m140 [m[8Cbufspace += [33mBUFSIZ[m;[53;194H[K[53;194H140,1-8[7C77%[1;12H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m139 [m[8Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);[53;194H[K[53;194H139,1-8[7C76%[1;12H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m138 [m      [33mif[m ( argnum+[33m1[m >= spots ){[53;194H[K[53;194H138,3[9C76%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m137 [m      [36m/* make sure the array has room (+1 for NULL) */[m[53;194H[K[53;194H137,3[9C75%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m136 [m[53;194H[K[53;194H136,0-1[7C75%[1;5H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m135 [m[8C[33mbreak[m;[53;194H[K[53;194H135,1-8[7C74%[1;12H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m134 [m      [33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[53;194H[K[53;194H134,3[9C73%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m133 [m[8Ccp++;[53;194H[K[53;194H133,1-8[7C73%[1;12H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m132 [m      [33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[53;194H[K[53;194H132,3[9C72%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m131 [m    {[53;194H[K[53;194H131,3[9C72%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m130 [m  [33mwhile[m( *cp != [35m'\0'[m )[53;194H[K[53;194H130,3[9C71%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m129 [m[53;194H[K[53;194H129,0-1[7C71%[1;5H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m128 [m  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[53;194H[K[53;194H128,3[9C70%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m127 [m  bufspace = [33mBUFSIZ[m;[53;194H[K[53;194H127,3[9C70%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m126 [m  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[53;194H[K[53;194H126,3[9C69%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m125 [m[53;194H[K[53;194H125,0-1[7C68%[1;5H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m124 [m    [33mreturn[m [33mNULL[m;[53;194H[K[53;194H124,3[9C68%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m123 [m  [33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[53;194H[K[53;194H123,3[9C67%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m122 [m[53;194H[K[53;194H122,0-1[7C67%[1;5H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m121 [m  [32mint[m   len;[53;194H[K[53;194H121,3[9C66%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m120 [m  [32mchar[m  *start;[53;194H[K[53;194H120,3[9C66%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m119 [m  [32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[53;194H[K[53;194H119,3[9C65%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m118 [m  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[53;194H[K[53;194H118,3[9C65%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m117 [m  [32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[53;194H[K[53;194H117,3[9C64%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m116 [m  [32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[53;194H[K[53;194H116,3[9C63%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m115 [m  [32mchar[m  **args ;[53;194H[K[53;194H115,3[9C63%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m114 [m  [32mchar[m  *newstr();[53;194H[K[53;194H114,3[9C62%[1;7H[?25h[?25l[41;52r[41;1H[L[1;53r[1;3H[33m3[m[1C[46m{[m[1;7H[K[2;3H[33m4[m[10Cnewstr();[3;3H[33m5[m[3C[32mchar[m  **args ;[3;21H[K[4;3H[33m6[m[9Cspots = [33m0[m;   [22C[36mspot[m[5;3H[33m7[m[9Cbufspace = [33m0[m;[22C[36mbytes in table[m[6;3H[33m8[m[3C[32mint[m   argnum = [33m0[m[25C[36mslots used   [m[7;2H[33m19[m[10Ccp = line;[21C[36m/* pos in string        */[m[8;3H[33m0[m[3C[32mchar[m  *start;[9;3H[33m1[m[3C[32mint[m   len;[10;3H[33m2[m[10;7H[K[11;3H[33m3[m[3C[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[12;3H[33m4[m[5C[33mreturn[m [33mNULL[m;[13;3H[33m5[m[13;7H[K[14;3H[33m6[m[3Cargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[15;3H[33m7[m[3Cbufspace[9C;[15;25H[K[16;3H[33m8[m[3Cspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;2H[33m29[m[17;7H[K[18;3H[33m0[m[3C[33mwhile[m( *cp != [35m'\0'[m )[19;3H[33m1[m[5C{[19;11H[K[20;3H[33m2[m[7C[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[21;3H[33m3[m[7C  cp++;[21;18H[K[22;3H[33m4[m[7C[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[23;3H[33m5[m[9C[33mbreak[m;[24;3H[33m6[m[24;11H[K[25;3H[33m7[m[7C[36m/* make sure the array has room (+1 for NULL) */[m[26;3H[33m8[m[7C[33mif[m ( argnum+[33m1[m >= spots ){[26;36H[K[27;2H[33m39[m[9Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;3H[33m0[m[9Cbufspace += [33mBUFSIZ[m;[28;32H[K[29;3H[33m1[m[7C  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;3H[33m2[m[7C}[31;3H[33m3[m[31;11H[K[32;3H[33m4[m[7C[36m/* mark start, then find end of word */[m[33;3H[33m5[m[7Cstart = cp;[34;3H[33m6[m[7Clen   = [33m1[m;[34;21H[K[35;3H[33m7[m[7C[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;3H[33m8[m[7C  len++;[36;19H[K[37;2H[33m49[m[5C  args[argnum++] = newstr(start, len);[38;3H[33m0[m[3C  }[38;10H[K[39;3H[33m1[m[3Cargs[argnum] = [33mNULL[m;[40;3H[33m2[m[1C  [33mreturn[m args;
[33m153 [m[46m}[m[53;194H[K[53;194H113,1[9C62%[1;5H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m112 [m[36m */[m[2;5H{[42;5H}[53;194H[K[53;194H112,3[9C61%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m111 [m[36m *    note: strtok() could work, but we may want to add quotes later[m[53;194H[K[53;194H111,3[9C61%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m110 [m[36m *  action: traverse the array, locate strings, make copies[m[53;194H[K[53;194H110,3[9C60%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m109 [m[36m *          or NULL if line if no tokens on the line[m[53;194H[K[53;194H109,3[9C60%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m108 [m[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[53;194H[K[53;194H108,3[9C59%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m107 [m[36m * purpose: split a line into array of white-space separated tokens[m[53;194H[K[53;194H107,3[9C58%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m106 [m[36m/*[m[53;194H[K[53;194H106,2[9C58%[1;6H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m105 [m[32mchar[m ** splitline([32mchar[m *line)[53;194H[K[53;194H105,3[9C57%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m104 [m[53;194H[K[53;194H104,0-1[7C57%[1;5H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m103 [m[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[53;194H[K[53;194H103,3[9C56%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m102 [m[36m **/[m[53;194H[K[53;194H102,3[9C56%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m101 [m[36m **     splitline ( parse a line into an array of strings )[m[53;194H[K[53;194H101,3[9C55%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m100 [m[36m/**[m[53;194H[K[53;194H100,3[9C55%[1;7H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[33m 99 [m[53;194H[K[53;194H99,0-1[8C54%[1;5H[?25h[?25l[53;194H100,3 [2;7H[?25h[?25l[53;196H1[3;7H[?25h[?25l[53;196H2[4;7H[?25h[?25l[53;196H3[5;7H[?25h[?25l[53;196H4,0-1[6;5H[?25h[?25l[53;196H5,3  [7;7H[?25h[?25l[53;196H6,2[8;6H[?25h[?25l[53;196H7,3[9;7H[?25h[?25l[53;196H8[10;7H[?25h[?25l[53;196H9[11;7H[?25h[?25l[53;195H10[12;7H[?25h[?25l[53;196H1[13;7H[?25h[?25l[53;196H2[14;7H[?25h[?25l[53;196H3,1[15;5H[?25h[?25l[53;196H4,3[16;7H[?25h[?25l[53;196H5[17;7H[?25h[?25l[53;196H6[18;7H[?25h[?25l[53;196H7[19;7H[?25h[?25l[53;196H8[20;7H[?25h[?25l[53;196H9[21;7H[?25h[?25l[53;195H20[22;7H[?25h[?25l[53;196H1[23;7H[?25h[?25l[53;196H2,0-1[24;5H[?25h[?25l[53;196H3,3  [25;7H[?25h[?25l[53;196H4[26;7H[?25h[?25l[53;196H5,0-1[27;5H[?25h[?25l[53;196H6,3  [28;7H[?25h[?25l[53;196H7[29;7H[?25h[?25l[53;196H8[30;7H[?25h[?25l[53;196H9,0-1[31;5H[?25h[?25l[53;195H30,3  [32;7H[?25h[?25l[53;196H1[33;7H[?25h[?25l[53;196H2[34;7H[?25h[?25l[53;196H3,1-8[35;12H[?25h[?25l[53;196H4,3  [36;7H[?25h[?25l[53;196H5,1-8[37;12H[?25h[?25l[53;196H6,0-1[38;5H[?25h[?25l[53;196H7,3  [39;7H[?25h[?25l[53;196H8[40;7H[?25h[?25l[53;196H9,1-8[41;12H[?25h[?25l[53;195H40[42;12H[?25h[?25l[53;196H1[43;12H[?25h[?25l[53;196H2,3  [44;7H[?25h[?25l[53;196H3,0-1[45;5H[?25h[?25l[53;196H4,3  [46;7H[?25h[?25l[53;196H5[47;7H[?25h[?25l[53;196H6[48;7H[?25h[?25l[53;196H7[49;7H[?25h[?25l[53;196H8,1-8[50;12H[?25h[27m[23m[29m[m[H[2J[?25l[1;1H[33m125 
126 [m  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
[33m127 [m  bufspace = [33mBUFSIZ[m;
[33m128 [m  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);
[33m129 
130 [m  [33mwhile[m( *cp != [35m'\0'[m )
[33m131 [m    {
[33m132 [m      [33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m
[33m133 [m[8Ccp++;
[33m134 [m      [33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m
[33m135 [m[8C[33mbreak[m;
[33m136 
137 [m      [36m/* make sure the array has room (+1 for NULL) */[m
[33m138 [m      [33mif[m ( argnum+[33m1[m >= spots ){
[33m139 [m[8Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);
[33m140 [m[8Cbufspace += [33mBUFSIZ[m;
[33m141 [m[8Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));
[33m142 [m      }
[33m143 
144 [m      [36m/* mark start, then find end of word */[m
[33m145 [m      start = cp;
[33m146 [m      len   = [33m1[m;
[33m147 [m      [33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )
[33m148 [m[8Clen++;[25;87H148,1-8[7C59%[24;12H[?25h[27m[23m[29m[m[H[2J[?25l[1;1H[33m100 [m[36m/**[m
[33m101 [m[36m **     splitline ( parse a line into an array of strings )[m
[33m102 [m[36m **/[m
[33m103 [m[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m
[33m104 
105 [m[32mchar[m ** splitline([32mchar[m *line)
[33m106 [m[36m/*[m
[33m107 [m[36m * purpose: split a line into array of white-space separated tokens[m
[33m108 [m[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m
[33m109 [m[36m *          or NULL if line if no tokens on the line[m
[33m110 [m[36m *  action: traverse the array, locate strings, make copies[m
[33m111 [m[36m *    note: strtok() could work, but we may want to add quotes later[m
[33m112 [m[36m */[m
[33m113 [m{
[33m114 [m  [32mchar[m  *newstr();
[33m115 [m  [32mchar[m  **args ;
[33m116 [m  [32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m
[33m117 [m  [32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m
[33m118 [m  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m
[33m119 [m  [32mchar[m  *cp = line;[21C[36m/* pos in string        */[m
[33m120 [m  [32mchar[m  *start;
[33m121 [m  [32mint[m   len;
[33m122 
123 [m  [33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
[33m124 [m    [33mreturn[m [33mNULL[m;
[33m125 
126 [m  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
[33m127 [m  bufspace = [33mBUFSIZ[m;
[33m128 [m  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);
[33m129 
130 [m  [33mwhile[m( *cp != [35m'\0'[m )
[33m131 [m    {
[33m132 [m      [33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m
[33m133 [m[8Ccp++;
[33m134 [m      [33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m
[33m135 [m[8C[33mbreak[m;
[33m136 
137 [m      [36m/* make sure the array has room (+1 for NULL) */[m
[33m138 [m      [33mif[m ( argnum+[33m1[m >= spots ){
[33m139 [m[8Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);
[33m140 [m[8Cbufspace += [33mBUFSIZ[m;
[33m141 [m[8Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));
[33m142 [m      }
[33m143 
144 [m      [36m/* mark start, then find end of word */[m
[33m145 [m      start = cp;
[33m146 [m      len   = [33m1[m;
[33m147 [m      [33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )
[33m148 [m[8Clen++;
[33m149 [m      args[argnum++] = newstr(start, len);
[33m150 [m    }[52;87H148,1-8[7C54%[49;12H[?25h[?25l[52;89H9,3  [50;7H[?25h[?25l[52;88H50[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m151 [m  args[argnum] = [33mNULL[m;[52;87H[K[52;87H151,3[9C55%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m152 [m  [33mreturn[m args;[52;87H[K[52;87H152,3[9C55%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[11;5H[46m{[m[51;1H[33m153 [m[46m}[m[52;87H[K[52;87H153,1[9C56%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[10;5H{[50;5H}
[33m154 [m[52;87H[K[52;87H154,0-1[7C56%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m155 [m[36m/*[m[52;87H[K[52;87H155,2[9C57%[51;6H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m156 [m[36m * purpose: constructor for strings[m[52;87H[K[52;87H156,3[9C58%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m157 [m[36m * returns: a string, never NULL[m[52;87H[K[52;87H157,3[9C58%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m158 [m[36m */[m[52;87H[K[52;87H158,3[9C59%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m159 [m[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[52;87H[K[52;87H159,3[9C59%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m160 [m{[52;87H[K[52;87H160,1[9C60%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m161 [m  [32mchar[m *rv = emalloc(l+[33m1[m);[52;87H[K[52;87H161,3[9C60%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m162 [m[52;87H[K[52;87H162,0-1[7C61%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m163 [m  rv[l] = [35m'\0'[m;[52;87H[K[52;87H163,3[9C61%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m164 [m  strncpy(rv, s, l);[52;87H[K[52;87H164,3[9C62%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m165 [m  [33mreturn[m rv;[52;87H[K[52;87H165,3[9C62%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[45;5H[46m{[m[51;1H[33m166 [m[46m}[m[52;87H[K[52;87H166,1[9C63%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[44;5H{[50;5H}
[33m167 [m[52;87H[K[52;87H167,0-1[7C64%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m168 [m[32mvoid[m[52;87H[K[52;87H168,3[9C64%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m169 [mfreelist([32mchar[m **list)[52;87H[K[52;87H169,3[9C65%[51;7H[?25h[?25l[52;89H8[50;7H[?25h[?25l[52;89H7,0-1[49;5H[?25h[?25l[42;5H[46m{[48;5H}[m[52;89H6,1  [48;5H[?25h[?25l[42;5H{[48;5H}[52;89H5,3[47;7H[?25h[?25l[52;89H4[46;7H[?25h[?25l[52;89H3[45;7H[?25h[?25l[52;89H2,0-1[44;5H[?25h[?25l[52;89H1,3  [43;7H[?25h[?25l[42;5H[46m{[48;5H}[m[52;89H0,1[42;5H[?25h[?25l{[48;5H}[52;88H59,3[41;7H[?25h[?25l[42;5H[46m{[48;5H}[m[52;88H60,1[42;5H[?25h[?25l{[48;5H}[52;89H1,3[43;7H[?25h[?25l[52;89H2,0-1[44;5H[?25h[?25l[52;89H3,3  [45;7H[?25h[?25l[52;89H4[46;7H[?25h[?25l[52;89H5[47;7H[?25h[?25l[42;5H[46m{[48;5H}[m[52;89H6,1[48;5H[?25h[?25l[42;5H{[48;5H}[52;89H7,0-1[49;5H[?25h[?25l[42;5H[46m{[48;5H}[m[52;89H6,1  [48;5H[?25h[?25l[42;5H{[48;5H}[52;89H5,3[47;7H[?25h[?25l[52;89H4[46;7H[?25h[?25l[52;89H3[45;7H[?25h[?25l[52;89H4[46;7H[?25h[?25l[52;89H5[47;7H[?25h[?25l[42;5H[46m{[48;5H}[m[52;89H6,1[48;5H[?25h[?25l[42;5H{[48;5H}[52;89H7,0-1[49;5H[?25h[?25l[52;89H8,3  [50;7H[?25h[?25l[52;89H9[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m170 [m[36m/*[m[52;87H[K[52;87H170,2[9C65%[51;6H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m171 [m[36m * purpose: free the list returned by splitline[m[52;87H[K[52;87H171,3[9C66%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m172 [m[36m * returns: nothing[m[52;87H[K[52;87H172,3[9C66%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m173 [m[36m *  action: free all strings in list and then free the list[m[52;87H[K[52;87H173,3[9C67%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m174 [m[36m */[m[52;87H[K[52;87H174,3[9C67%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m175 [m{[52;87H[K[52;87H175,1[9C68%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m176 [m  [32mchar[m  **cp = list;[52;87H[K[52;87H176,3[9C69%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m177 [m  [33mwhile[m( *cp )[52;87H[K[52;87H177,3[9C69%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m178 [m    free(*cp++);[52;87H[K[52;87H178,3[9C70%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m179 [m  free(list);[52;87H[K[52;87H179,3[9C70%[51;7H[?25h[?25l[52;89H8[50;7H[?25h[?25l[52;89H7[49;7H[?25h[?25l[52;89H6[48;7H[?25h[?25l[52;89H5,1[47;5H[?25h[?25l[52;89H4,3[46;7H[?25h[?25l[52;89H3[45;7H[?25h[?25l[52;89H2[44;7H[?25h[?25l[52;89H1[43;7H[?25h[?25l[52;89H0,2[42;6H[?25h[?25l[52;88H69,3[41;7H[?25h[?25l[52;89H8[40;7H[?25h[?25l[52;91H4[40;8H[?25h[?25l[52;91H5[40;9H[?25h[?25l[52;91H4[40;8H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H168,4[9C70%[40;8H[?25h[?25l[52;91H5[40;9H[?25h[?25lvoidfreelist([32mchar[m **list)[41;5H[36m/*[m[41;7H[K[42;5H[36m * purpose: free the list returned by splitline[43;8Hreturns: nothing[m[43;24H[K[44;8H[36m action: free all strings in list and then free the list[45;7H/[m[45;8H[K[46;5H{[46;6H[K[47;5H  [32mchar[m  **cp = list;[48;7H[33mwhile[m( *cp )[48;20H[K[49;7H  free(*cp++);[50;7Hfree(list);[50;18H[K[51;5H}[51;7H[K[52;102H1[40;9H[?25h[?25l[32mvoid[m freelist([32mchar[m **list)[52;91H6[40;10H[?25h[52;1H[K[40;9H[?25l[52;87H168,5[9C71%[40;9H[?25h[?25l[52;89H9,2[41;6H[?25h[?25l[52;88H70,5[42;9H[?25h[?25l[52;89H1[43;9H[?25h[?25l[52;89H2[44;9H[?25h[?25l[52;89H3,3[45;7H[?25h[?25l[46;5H[46m{[51;5H}[m[52;89H4,1[46;5H[?25h[?25l{[51;5H}[52;89H5,5[47;9H[?25h[?25l[52;89H6[48;9H[?25h[?25l[52;89H7[49;9H[?25h[?25l[52;89H8[50;9H[?25h[?25l[46;5H[46m{[51;5H}[m[52;89H9,1[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[45;5H{[50;5H}
[33m180 [m[52;87H[K[52;87H180,0-1[7C71%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m181 [m[32mvoid[m * emalloc([32msize_t[m n)[52;87H[K[52;87H181,5[9C72%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m182 [m{[52;87H[K[52;87H182,1[9C72%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m183 [m  [32mvoid[m *rv ;[52;87H[K[52;87H183,5[9C73%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m184 [m  [33mif[m ( (rv = malloc(n)) == [33mNULL[m )[52;87H[K[52;87H184,5[9C73%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m185 [m    fatal([33m"out of memory"[m,[33m""[m,[33m1[m);[52;87H[K[52;87H185,5[9C74%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m186 [m  [33mreturn[m rv;[52;87H[K[52;87H186,5[9C75%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[46;5H[46m{[m[51;1H[33m187 [m[46m}[m[52;87H[K[52;87H187,1[9C75%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[45;5H{[50;5H}
[33m188 [m[52;87H[K[52;87H188,0-1[7C76%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m189 [m[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[52;87H[K[52;87H189,5[9C76%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m190 [m{[52;87H[K[52;87H190,1[9C77%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m191 [m  [32mvoid[m *rv;[52;87H[K[52;87H191,5[9C77%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m192 [m  [33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[52;87H[K[52;87H192,5[9C78%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m193 [m    fatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[52;87H[K[52;87H193,5[9C78%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m194 [m  [33mreturn[m rv;[52;87H[K[52;87H194,5[9C79%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[46;5H[46m{[m[51;1H[33m195 [m[46m}[m[52;87H[K[52;87H195,1[9C80%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[45;5H{[50;5H}
[33m196 [m[52;87H[K[52;87H196,0-1[7C80%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m197 [m[52;87H[K[52;87H197,0-1[7C81%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m198 [m[32mvoid[m setup()[52;87H[K[52;87H198,5[9C81%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m199 [m[36m/*[m[52;87H[K[52;87H199,2[9C82%[51;6H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m200 [m[36m * purpose: initialize shell[m[52;87H[K[52;87H200,5[9C82%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m201 [m[36m * returns: nothing. calls fatal() if trouble[m[52;87H[K[52;87H201,5[9C83%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m202 [m[36m */[m[52;87H[K[52;87H202,3[9C83%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m203 [m{[52;87H[K[52;87H203,1[9C84%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m204 [m  signal([33mSIGINT[m,  [33mSIG_IGN[m);[52;87H[K[52;87H204,5[9C85%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m205 [m  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[52;87H[K[52;87H205,5[9C85%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[48;5H[46m{[m


[33m206 [m[46m}[m[52;87H[K[52;87H206,1[9C86%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[47;5H{[50;5H}
[33m207 [m[52;87H[K[52;87H207,0-1[7C86%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m208 [m[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[52;87H[K[52;87H208,5[9C87%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m209 [m{[52;87H[K[52;87H209,1[9C87%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m210 [m  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[52;87H[K[52;87H210,5[9C88%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m211 [m  exit(n);[52;87H[K[52;87H211,5[9C88%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[48;5H[46m{[m


[33m212 [m[46m}[m[52;87H[K[52;87H212,1[9C89%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[47;5H{[50;5H}
[33m213 [m[52;87H[K[52;87H213,0-1[7C90%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m214 [m[32mint[m main()[52;87H[K[52;87H214,5[9C90%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m215 [m{[52;87H[K[52;87H215,1[9C91%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m216 [m  [32mchar[m  *cmdline, *prompt, **arglist;[52;87H[K[52;87H216,5[9C91%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m217 [m  [32mint[m   result;[52;87H[K[52;87H217,5[9C92%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m218 [m  [32mvoid[m  setup();[52;87H[K[52;87H218,5[9C92%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m219 [m[52;87H[K[52;87H219,0-1[7C93%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m220 [m  prompt = DFL_PROMPT;[52;87H[K[52;87H220,5[9C93%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m221 [m  setup();[52;87H[K[52;87H221,5[9C94%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m222 [m[52;87H[K[52;87H222,0-1[7C95%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m223 [m  [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[52;87H[K[52;87H223,5[9C95%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m224 [m    [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[52;87H[K[52;87H224,5[9C96%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m225 [m[8Cresult = execute(arglist);[52;87H[K[52;87H225,5[9C96%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m226 [m[8Cfreelist(arglist);[52;87H[K[52;87H226,5[9C97%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[48;55H[46m{[m


[33m227 [m    [46m}[m[52;87H[K[52;87H227,5[9C97%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[47;55H{[50;9H}
[33m228 [m    free(cmdline);[52;87H[K[52;87H228,5[9C98%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[45;60H[46m{[m[51;1H[33m229 [m  [46m}[m[52;87H[K[52;87H229,3[9C98%[51;7H[?25h[?25l[1;51r[51;1H
[1;52r[44;60H{[50;7H}
[33m230 [m  [33mreturn[m [33m0[m;[52;87H[K[52;87H230,5[9C99%[51;9H[?25h[?25l[1;51r[51;1H
[1;52r[35;5H[46m{[m[51;1H[33m231 [m[46m}[m[52;87H[K[52;87H231,1[9CBot[51;5H[?25h[?25l[35;5H{[51;5H}[52;89H0,5[50;9H[?25h[?25l[43;60H[46m{[49;7H}[m[52;88H29,3[49;7H[?25h[?25l[43;60H{[49;7H}[52;89H8,5[48;9H[?25h[?25l[44;55H[46m{[47;9H}[m[52;89H7[47;9H[?25h[?25l[44;55H{[47;9H}[52;89H6[46;9H[?25h[?25l[52;89H5[45;9H[?25h[?25l[52;89H4[44;9H[?25h[?25l[52;89H3[43;9H[?25h[?25l[52;89H2,0-1[42;5H[?25h[?25l[52;89H1,5  [41;9H[?25h[?25l[52;89H0[40;9H[?25h[?25l[52;88H19,0-1[39;5H[?25h[?25l[52;89H8,5  [38;9H[?25h[?25l[52;89H7[37;9H[?25h[?25l[52;89H6[36;9H[?25h[?25l[35;5H[46m{[51;5H}[m[52;89H5,1[35;5H[?25h[?25l{[51;5H}[52;89H4,5[34;9H[?25h[?25l[52;89H3,0-1[33;5H[?25h[?25l[29;5H[46m{[32;5H}[m[52;89H2,1  [32;5H[?25h[?25l[29;5H{[32;5H}[52;89H1,5[31;9H[?25h[?25l[52;89H0[30;9H[?25h[?25l[29;5H[46m{[32;5H}[m[52;88H09,1[29;5H[?25h[?25l{[32;5H}[52;89H8,5[28;9H[?25h[?25l[52;89H7,0-1[27;5H[?25h[?25l[23;5H[46m{[26;5H}[m[52;89H6,1  [26;5H[?25h[?25l[23;5H{[26;5H}[52;89H5,5[25;9H[?25h[?25l[52;89H4[24;9H[?25h[?25l[23;5H[46m{[26;5H}[m[52;89H3,1[23;5H[?25h[?25l{[26;5H}[52;89H2,3[22;7H[?25h[?25l[52;89H1,5[21;9H[?25h[?25l[52;89H0[20;9H[?25h[?25l[52;87H199,2[19;6H[?25h[?25l[52;89H8,5[18;9H[?25h[?25l[52;89H7,0-1[17;5H[?25h[?25l[52;89H6[16;5H[?25h[?25l[10;5H[46m{[15;5H}[m[52;89H5,1  [15;5H[?25h[?25l[10;5H{[15;5H}[52;89H4,5[14;9H[?25h[?25l[52;89H3[13;9H[?25h[?25l[52;89H2[12;9H[?25h[?25l[52;89H1[11;9H[?25h[?25l[10;5H[46m{[15;5H}[m[52;89H0,1[10;5H[?25h[?25l{[15;5H}[52;88H89,5[9;9H[?25h[?25l[52;89H8,0-1[8;5H[?25h[?25l[2;5H[46m{[7;5H}[m[52;89H7,1  [7;5H[?25h[?25l[2;5H{[7;5H}[52;89H6,5[6;9H[?25h[?25l[52;89H5[5;9H[?25h[?25l[52;89H4[4;9H[?25h[?25l[52;89H3[3;9H[?25h[?25l[2;5H[46m{[7;5H}[m[52;89H2,1[2;5H[?25h[?25l{[7;5H}[52;89H1,5[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m180 [m[52;87H[K[52;87H180,0-1[7C99%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m179 [m}[52;87H[K[52;87H179,1[9C98%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m178 [m  free(list);[52;87H[K[52;87H178,5[9C98%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m177 [m    free(*cp++);[52;87H[K[52;87H177,5[9C97%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m176 [m  [33mwhile[m( *cp )[52;87H[K[52;87H176,5[9C97%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m175 [m  [32mchar[m  **cp = list;[52;87H[K[52;87H175,5[9C96%[1;9H[?25h[?25l[6;51r[6;1H[L[1;52r[1;3H[33m4[m[1C[46m{[m[1;7H[K[2;3H[33m5[m[3C[32mchar[m  **cp = list;[3;3H[33m6[m[3C[33mwhile[m( *cp )[3;19H[K[4;3H[33m7[m[3C  free(*cp++);[5;3H[33m8[m[1C  free(list);
[33m179 [m[46m}[m[52;87H[K[52;87H174,1[9C96%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m173 [m[36m */[m[2;5H{[7;5H}[52;87H[K[52;87H173,3[9C95%[1;7H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m172 [m[36m *  action: free all strings in list and then free the list[m[52;87H[K[52;87H172,5[9C95%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m171 [m[36m * returns: nothing[m[52;87H[K[52;87H171,5[9C94%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m170 [m[36m * purpose: free the list returned by splitline[m[52;87H[K[52;87H170,5[9C93%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m169 [m[36m/*[m[52;87H[K[52;87H169,2[9C93%[1;6H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m168 [m[32mvoid[m freelist([32mchar[m **list)[52;87H[K[52;87H168,5[9C92%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m167 [m[52;87H[K[52;87H167,0-1[7C92%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m166 [m}[52;87H[K[52;87H166,1[9C91%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m165 [m  [33mreturn[m rv;[52;87H[K[52;87H165,5[9C91%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m164 [m  strncpy(rv, s, l);[52;87H[K[52;87H164,5[9C90%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m163 [m  rv[46m[[ml[46m][m = [35m'\0'[m;[52;87H[K[52;87H163,5[9C90%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m162 [m[2;9H[l][52;87H[K[52;87H162,0-1[7C89%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m161 [m  [32mchar[m *rv = emalloc(l+[33m1[m);[52;87H[K[52;87H161,5[9C88%[1;9H[?25h[?25l[7;51r[7;1H[L[1;52r[1;3H[33m0[m[1C[46m{[m[1;7H[K[2;3H[33m1[m[3C[32mchar[m *rv = emalloc(l+[33m1[m);[3;3H[33m2[m[3;7H[K[4;3H[33m3[m[3Crv[l] = [35m'\0'[m;[4;20H[K[5;3H[33m4[m[3Cstrncpy(rv, s, l);[6;3H[33m5[m[1C  [33mreturn[m rv;
[33m166 [m[46m}[m[52;87H[K[52;87H160,1[9C88%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m159 [m[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[2;5H{[8;5H}[52;87H[K[52;87H159,5[9C87%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m158 [m[36m */[m[52;87H[K[52;87H158,3[9C87%[1;7H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m157 [m[36m * returns: a string, never NULL[m[52;87H[K[52;87H157,5[9C86%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m156 [m[36m * purpose: constructor for strings[m[52;87H[K[52;87H156,5[9C86%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m155 [m[36m/*[m[52;87H[K[52;87H155,2[9C85%[1;6H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m154 [m[52;87H[K[52;87H154,0-1[7C85%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m153 [m}[52;87H[K[52;87H153,1[9C84%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m152 [m  [33mreturn[m args;[52;87H[K[52;87H152,5[9C83%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m151 [m  args[argnum] = [33mNULL[m;[52;87H[K[52;87H151,5[9C83%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m150 [m    }[52;87H[K[52;87H150,5[9C82%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m149 [m      args[argnum++] = newstr(start, len);[52;87H[K[52;87H149,5[9C82%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m148 [m[8Clen++;[52;87H[K[52;87H148,1-8[7C81%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m147 [m      [33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[52;87H[K[52;87H147,5[9C81%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m146 [m      len   = [33m1[m;[52;87H[K[52;87H146,5[9C80%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m145 [m      start = cp;[52;87H[K[52;87H145,5[9C80%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m144 [m      [36m/* mark start, then find end of word */[m[52;87H[K[52;87H144,5[9C79%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m143 [m[52;87H[K[52;87H143,0-1[7C78%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m142 [m      }[52;87H[K[52;87H142,5[9C78%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m141 [m[8Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[52;87H[K[52;87H141,1-8[7C77%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m140 [m[8Cbufspace += [33mBUFSIZ[m;[52;87H[K[52;87H140,1-8[7C77%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m139 [m[8Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H139,1-8[7C76%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m138 [m      [33mif[m ( argnum+[33m1[m >= spots ){[52;87H[K[52;87H138,5[9C76%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m137 [m      [36m/* make sure the array has room (+1 for NULL) */[m[52;87H[K[52;87H137,5[9C75%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m136 [m[52;87H[K[52;87H136,0-1[7C75%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m135 [m[8C[33mbreak[m;[52;87H[K[52;87H135,1-8[7C74%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m134 [m      [33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[52;87H[K[52;87H134,5[9C73%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m133 [m[8Ccp++;[52;87H[K[52;87H133,1-8[7C73%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m132 [m      [33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[52;87H[K[52;87H132,5[9C72%[1;9H[?25h[?25l[20;51r[20;1H[L[1;52r[1;3H[33m1[m[5C[46m{[m[1;11H[K[2;3H[33m2[m[7C[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[3;3H[33m3[m[7C  cp++;[3;18H[K[4;3H[33m4[m[7C[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[5;3H[33m5[m[9C[33mbreak[m;[6;3H[33m6[m[6;11H[K[7;3H[33m7[m[7C[36m/* make sure the array has room (+1 for NULL) */[m[8;3H[33m8[m[7C[33mif[m ( argnum+[33m1[m >= spots ){[8;36H[K[9;2H[33m39[m[9Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);[10;3H[33m0[m[9Cbufspace += [33mBUFSIZ[m;[10;32H[K[11;3H[33m1[m[7C  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[12;3H[33m2[m[7C}[13;3H[33m3[m[13;11H[K[14;3H[33m4[m[7C[36m/* mark start, then find end of word */[m[15;3H[33m5[m[7Cstart = cp;[16;3H[33m6[m[7Clen   = [33m1[m;[16;21H[K[17;3H[33m7[m[7C[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[18;3H[33m8[m[7C  len++;[18;19H[K[19;2H[33m49[m[5C  args[argnum++] = newstr(start, len);
[33m150 [m    [46m}[m[52;87H[K[52;87H131,5[9C72%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m130 [m  [33mwhile[m( *cp != [35m'\0'[m )[2;9H{[21;9H}[52;87H[K[52;87H130,5[9C71%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m129 [m[52;87H[K[52;87H129,0-1[7C71%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m128 [m  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[52;87H[K[52;87H128,5[9C70%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m127 [m  bufspace = [33mBUFSIZ[m;[52;87H[K[52;87H127,5[9C70%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m126 [m  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[52;87H[K[52;87H126,5[9C69%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m125 [m[52;87H[K[52;87H125,0-1[7C68%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m124 [m    [33mreturn[m [33mNULL[m;[52;87H[K[52;87H124,5[9C68%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m123 [m  [33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[52;87H[K[52;87H123,5[9C67%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m122 [m[52;87H[K[52;87H122,0-1[7C67%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m121 [m  [32mint[m   len;[52;87H[K[52;87H121,5[9C66%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m120 [m  [32mchar[m  *start;[52;87H[K[52;87H120,5[9C66%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m119 [m  [32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H119,5[9C65%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m118 [m  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H118,5[9C65%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m117 [m  [32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H117,5[9C64%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m116 [m  [32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H116,5[9C63%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m115 [m  [32mchar[m  **args ;[52;87H[K[52;87H115,5[9C63%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m114 [m  [32mchar[m  *newstr();[52;87H[K[52;87H114,5[9C62%[1;9H[?25h[?25l[41;51r[41;1H[L[1;52r[1;3H[33m3[m[1C[46m{[m[1;7H[K[2;3H[33m4[m[10Cnewstr();[3;3H[33m5[m[3C[32mchar[m  **args ;[3;21H[K[4;3H[33m6[m[9Cspots = [33m0[m;   [22C[36mspot[m[5;3H[33m7[m[9Cbufspace = [33m0[m;[22C[36mbytes in table[m[6;3H[33m8[m[3C[32mint[m   argnum = [33m0[m[25C[36mslots used   [m[7;2H[33m19[m[10Ccp = line;[21C[36m/* pos in string        */[m[8;3H[33m0[m[3C[32mchar[m  *start;[9;3H[33m1[m[3C[32mint[m   len;[10;3H[33m2[m[10;7H[K[11;3H[33m3[m[3C[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[12;3H[33m4[m[5C[33mreturn[m [33mNULL[m;[13;3H[33m5[m[13;7H[K[14;3H[33m6[m[3Cargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[15;3H[33m7[m[3Cbufspace[9C;[15;25H[K[16;3H[33m8[m[3Cspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;2H[33m29[m[17;7H[K[18;3H[33m0[m[3C[33mwhile[m( *cp != [35m'\0'[m )[19;3H[33m1[m[5C{[19;11H[K[20;3H[33m2[m[7C[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[21;3H[33m3[m[7C  cp++;[21;18H[K[22;3H[33m4[m[7C[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[23;3H[33m5[m[9C[33mbreak[m;[24;3H[33m6[m[24;11H[K[25;3H[33m7[m[7C[36m/* make sure the array has room (+1 for NULL) */[m[26;3H[33m8[m[7C[33mif[m ( argnum+[33m1[m >= spots ){[26;36H[K[27;2H[33m39[m[9Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;3H[33m0[m[9Cbufspace += [33mBUFSIZ[m;[28;32H[K[29;3H[33m1[m[7C  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;3H[33m2[m[7C}[31;3H[33m3[m[31;11H[K[32;3H[33m4[m[7C[36m/* mark start, then find end of word */[m[33;3H[33m5[m[7Cstart = cp;[34;3H[33m6[m[7Clen   = [33m1[m;[34;21H[K[35;3H[33m7[m[7C[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;3H[33m8[m[7C  len++;[36;19H[K[37;2H[33m49[m[5C  args[argnum++] = newstr(start, len);[38;3H[33m0[m[3C  }[38;10H[K[39;3H[33m1[m[3Cargs[argnum] = [33mNULL[m;[40;3H[33m2[m[1C  [33mreturn[m args;
[33m153 [m[46m}[m[52;87H[K[52;87H113,1[9C62%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m112 [m[36m */[m[2;5H{[42;5H}[52;87H[K[52;87H112,3[9C61%[1;7H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m111 [m[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H111,5[9C61%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m110 [m[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H110,5[9C60%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m109 [m[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H109,5[9C60%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m108 [m[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H108,5[9C59%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m107 [m[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H107,5[9C58%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m106 [m[36m/*[m[52;87H[K[52;87H106,2[9C58%[1;6H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m105 [m[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H105,5[9C57%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m104 [m[52;87H[K[52;87H104,0-1[7C57%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m103 [m[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H103,5[9C56%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m102 [m[36m **/[m[52;87H[K[52;87H102,4[9C56%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m101 [m[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H101,4-8[7C55%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m100 [m[36m/**[m[52;87H[K[52;87H100,3[9C55%[1;7H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 99 [m[52;87H[K[52;87H99,0-1[8C54%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 98 [m}[52;87H[K[52;87H98,1[10C53%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 97 [m[16C[33mreturn[m buf;[52;87H[K[52;87H97,1-8[8C53%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 96 [m[16Cbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H96,1-8[8C52%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 95 [m[16C}[39C[36m/* say so               */[m[52;87H[K[52;87H95,1-8[8C52%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 94 [m[24C[33mreturn[m [33mNULL[m;[52;87H[K[52;87H94,1-8[8C51%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 93 [m[24Cfree(buf); [36m// maybe overkill but safe > sorry?[m[52;87H[K[52;87H93,1-8[8C51%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 92 [m[16C[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[52;87H[K[52;87H92,1-8[8C50%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 91 [m[52;87H[K[52;87H91,1-8[8C50%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 90 [m[16Cbuf[pos++] = c;[52;87H[K[52;87H90,1-8[8C49%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 89 [m[16C[36m/* no, add to buffer */[m[52;87H[K[52;87H89,1-8[8C48%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 88 [m[52;87H[K[52;87H88,0-1[8C48%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 87 [m[16C}[52;87H[K[52;87H87,1-8[8C47%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 86 [m[24C[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[52;87H[K[52;87H86,1-8[8C47%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 85 [m[24C}[52;87H[K[52;87H85,1-8[8C46%[1;12H[?25h[?25l[1;51r[1;1H[2L[1;52r[1;1H[33m 84 [m[32Cfreelist(commands); [36m// not sure if needed but seems to ensure safetyy[m[2;1H[33m    [m[36m from memory leaks  [m[52;87H[K[52;87H84,1-8[8C45%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 83 [m[32C}[52;87H[K[52;87H83,1-8[8C45%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 82 [m[40Cfree(commands[i]);[52;87H[K[52;87H82,1-8[8C44%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 81 [m[40Cexecute(splitline(commands[i]));[52;87H[K[52;87H81,1-8[8C44%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 80 [m[32C[33mfor[m(i=[33m0[m; i< command_count; i+)+{[52;87H[K[52;87H80,1-8[8C43%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 79 [m[24C[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H79,1-8[8C43%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 78 [m[24C[32mint[m i;[52;87H[K[52;87H78,1-8[8C42%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 77 [m[24C[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H77,1-8[8C41%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 76 [m[52;87H[K[52;87H76,1-8[8C41%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 75 [m[24Cfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H75,1-8[8C40%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 74 [m[24Ccommand_count = count_commands(commands);[52;87H[K[52;87H74,1-8[8C40%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 73 [m[24Ccommands - splitline(buf);[52;87H[K[52;87H73,1-8[8C39%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 72 [m[24C[36m//split the lines[m[52;87H[K[52;87H72,1-8[8C39%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 71 [m[24Cbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H71,1-8[8C38%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 70 [m[16C[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H70,1-8[8C38%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 69 [m[16C[36m/* end of command? */[m[52;87H[K[52;87H69,1-8[8C37%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 68 [m[52;87H[K[52;87H68,0-1[8C37%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 67 [m[16C}[52;87H[K[52;87H67,1-8[8C36%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 66 [m[24C}[52;87H[K[52;87H66,1-8[8C35%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 65 [m[32Cbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H65,1-8[8C35%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 64 [m[32Cbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H64,1-8[8C34%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 63 [m[25C[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H63,5[10C34%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 62 [m[32Cbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H62,1-8[8C33%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 61 [m[24C[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H61,1-8[8C33%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 60 [m[17C[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H60,1-8[8C32%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 59 [m[9C[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H59,1-8[8C32%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 58 [m[9Cprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H58,1-8[8C31%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 57 [m[52;87H[K[52;87H57,0-1[8C30%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 56 [m[52;87H[K[52;87H56,0-1[8C30%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 55 [m[8C[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H55,1-8[8C29%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 54 [m[8C[32mint[m command_count = [33m0[m;[52;87H[K[52;87H54,1-8[8C29%[1;12H[?25h[?25l[1;51r[1;1H[2L[1;52r[1;1H[33m 53 [m[8C[36m//new variable to store number of commands and array of pointer (double pointer char) to stoo[m[2;1H[33m    [m[36mre the commands[m[52;87H[K[52;87H53,1-8[8C28%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 52 [m[52;87H[K[52;87H52,1-8[8C28%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 51 [m[9C[32mint[m    c;[30C[36m/* input char           */[m[52;87H[K[52;87H51,2-8[8C27%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 50 [m[9C[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;87H[K[52;87H50,1-8[8C26%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 49 [m[9C[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[52;87H[K[52;87H49,1-8[8C26%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 48 [m[9C[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[52;87H[K[52;87H48,1-8[8C25%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 47 [m{[52;87H[K[52;87H47,1[10C25%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 46 [m[36m */[m[52;87H[K[52;87H46,3[10C24%[1;7H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 45 [m[36m *   notes: allocates space in BUFSIZ chunks.  [m[52;87H[K[52;87H45,5[10C24%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 44 [m[36m *          calls fatal from emalloc()[m[52;87H[K[52;87H44,5[10C23%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 43 [m[36m *  errors: NULL at EOF (not really an error)[m[52;87H[K[52;87H43,5[10C23%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 42 [m[36m * returns: dynamically allocated string holding command line[m[52;87H[K[52;87H42,5[10C22%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 41 [m[36m * purpose: read next command line from fp[m[52;87H[K[52;87H41,5[10C21%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 40 [m[36m/*[m[52;87H[K[52;87H40,2[10C21%[1;6H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 39 [m[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[52;87H[K[52;87H39,5[10C20%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 38 [m[52;87H[K[52;87H38,0-1[8C20%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 37 [m[52;87H[K[52;87H37,0-1[8C19%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 36 [m[52;87H[K[52;87H36,0-1[8C19%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 35 [m[51;1H[34m@                                                                                                       [m[52;87H[K[52;87H35,0-1[8C18%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 34 [m[36m */[m[52;87H[K[52;87H34,3[10C18%[1;7H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 33 [m[36m *    char **splitline(char *str);           - parse a string[m[52;87H[K[52;87H33,5[10C17%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 32 [m[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[52;87H[K[52;87H32,5[10C17%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 31 [m[36m *    [m[52;87H[K[52;87H31,5[10C16%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 30 [m[36m/* splitline.c - commmand reading and parsing functions for smsh[m[52;87H[K[52;87H30,5[10C16%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 29 [m[52;87H[K[52;87H29,0-1[8C15%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 28 [m[52;87H[K[52;87H28,0-1[8C14%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 27 [m}[52;87H[K[52;87H27,1[10C14%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 26 [m[8C[33mreturn[m count;[52;87H[K[52;87H26,1-8[8C13%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 25 [m[8C}[52;87H[K[52;87H25,1-8[8C13%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 24 [m[16Ccmd++;[52;87H[K[52;87H24,1-8[8C12%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 23 [m[16Ccount++;[52;87H[K[52;87H23,1-8[8C12%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 22 [m[8C[33mwhile[m(*cmd != [33mNULL[m){[52;87H[K[52;87H22,1-8[8C11%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 21 [m[8Ccount = [33m0[m;[52;87H[K[52;87H21,1-8[8C11%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 20 [m[52;87H[K[52;87H20,0-1[8C10%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 19 [m[8C[32mchar[m** cmd = commands;[52;87H[K[52;87H19,1-8[9C9%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 18 [m[8C[32mint[m count;[52;87H[K[52;87H18,1-8[9C9%[1;12H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 17 [m[32mint[m count_commands([32mchar[m** commands){[52;87H[K[52;87H17,5[11C8%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 16 [m[52;87H[K[52;87H16,0-1[9C8%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 15 [m[35m#define DFL_PROMPT      [m[33m"> "[m[52;87H[K[52;87H15,5[11C7%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 14 [m[52;87H[K[52;87H14,0-1[9C7%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 13 [m[35m#include [m[33m"execute.c"[m[52;87H[K[52;87H13,5[11C6%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 12 [m[35m#include [m[33m"smsh.h"[m[52;87H[K[52;87H12,5[11C6%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 11 [m[35m#include [m[33m<signal.h>[m[52;87H[K[52;87H11,5[11C5%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m 10 [m[35m#include [m[33m<unistd.h>[m[52;87H[K[52;87H10,5[11C4%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  9 [m[35m#include [m[33m<stdlib.h>[m[52;87H[K[52;87H9,5[12C4%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  8 [m[35m#include [m[33m<stdio.h>[m[52;87H[K[52;87H8,5[12C3%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  7 [m[52;87H[K[52;87H7,0-1[10C3%[1;5H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[33m  6 [m[36m **/[m[52;87H[K[52;87H6,4[12C2%[1;8H[?25h[?25l[1;51r[1;1H[5L[1;52r[1;1H[33m  1 [m[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m
[33m  2 [m[36m  smsh1.c  small-shell version 1[m
[33m  3 [m[36m **             first really useful version after prompting shell[m
[33m  4 [m[36m **             this one parses the command line into strings[m
[33m  5 [m[36m **             uses fork, exec, wait, and ignores signals[m[52;87H[K[52;87H7,0-1[9CTop[7;5H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[52;87H8,1  [8;5H[?25h[?25l[52;87H9[9;5H[?25h[?25l[52;87H10,1[10;5H[?25h[?25l[52;88H1[11;5H[?25h[?25l[52;88H2[12;5H[?25h[?25l[52;88H3[13;5H[?25h[?25l[52;88H2[12;5H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H12,1[10CTop[12;5H[?25h[?25l[12;5H[K[13;15H[33msmsh.h"[m[13;22H[K[14;5H[35m#include [m[33m"execute.c"[m[15;5H[K[16;5H[35m#define DFL_PROMPT      [m[33m"> "[m[17;5H[K[18;5H[32mint[m count_commands([32mchar[m** commands){[19;13H[32mint[m count;[19;24H[K[20;13H[32mchar[m** cmd = commands;[21;13H[K[22;13Hcount = [33m0[m;[22;24H[K[23;13H[33mwhile[m(*cmd != [33mNULL[m){[24;22Hount++;[25;13H [7Ccmd++;[26;13H}[26;14H[K[27;5H [7C[33mreturn[m count;[28;5H}[30;5H[K[31;5H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[32;11H[K[33;17H[36mnext_cmd(char *prompt, FILE *fp) - get next command[34;7H    char **splitline(char *str);           - parse a string[35;5H */[m[39;5H[K[40;5H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[41;5H[36m/[m[41;7H[K[42;8H[36mpurpose: read next command line from fp[m[42;47H[K[43;8H[36mreturns: dynamically allocated string holding command line[44;9Herrors: NULL at EOF (not really an error)[45;10H       calls fatal from emalloc()[m[45;43H[K[46;7H[36m   notes: allocates space in BUFSIZ chunks.  [47;5H */[m[48;5H{[48;14H[K[49;14H[32mchar[m   *buf = [33mNULL[m; [19C        [36m/* the buffer           */[m[50;21Hbufspace = [33m0[m;[22C[36mtotal size      [m[51;21Hpos = [33m0[m;[27C[36mcurrent position[m[52;88H3[13;5H[?25h[?25l[52;88H2[12;5H[?25h[?25l#[52;90H2[12;6H[?25h[?25li[52;90H3[12;7H[?25h[?25ln[52;90H4[12;8H[?25h[?25lc[52;90H5[12;9H[?25h[?25ll[52;90H6[12;10H[?25h[?25lu[52;90H7[12;11H[?25h[?25ld[52;90H8[12;12H[?25h[?25le[52;90H9[12;13H[?25h[?25l[52;90H10[12;14H[?25h[?25l[12;5H[35m#include <[m[52;91H1[12;15H[?25h[?25ls[52;91H2[12;16H[?25h[?25lt[52;91H3[12;17H[?25h[?25lr[52;91H4[12;18H[?25h[?25li[52;91H5[12;19H[?25h[?25ln[52;91H6[12;20H[?25h[?25lg[52;91H7[12;21H[?25h[?25l.[52;91H8[12;22H[?25h[?25lh[52;91H9[12;23H[?25h[?25l[12;14H[33m<string.h>[m[52;90H20[12;24H[?25h[52;1H[K[12;23H[?25l[52;87H12,19[9CTop[12;23H[?25h[?25l[52;87H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"sm2in.c" 232L, 5206C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi sm2in.c [11@gcc sm2in.c -o test.o[C
[01m[Ksm2in.c:[m[K In function â€˜[01m[Knext_cmd[m[Kâ€™:
[01m[Ksm2in.c:81:34:[m[K [01;31m[Kerror: [m[Kexpected expression before â€˜[01m[K)[m[Kâ€™ token
     for(i=0; i< command_count; i+[01;31m[K)[m[K+{
                                  [01;31m[K^[m[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi st[Km2in.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"sm2in.c" 232L, 5206C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments
  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m<string.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"execute.c"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m count_commands([32mchar[m** commands){[19;9H[32mint[m count;[20;9H[32mchar[m** cmd = commands;[22;9Hcount = [33m0[m;[23;9H[33mwhile[m(*cmd != [33mNULL[m){[24;17Hcount++;[25;17Hcmd++;[26;9H}[27;9H[33mreturn[m count;
}


[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string
 */[m[40;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[49;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[50;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[51;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;87H1,1[11CTop[1;1H[?25h[?25l[52;1H[K[52;1H:[?2004h[?25hs[?25l[?25he[?25l[?25ht[?25l[?25h[?25l [?25hn[?25l[?25hu[?25l[?25hm[?25l[?25hb[?25l[?25he[?25l[?25hr[?25l[?25h[?25l[1;1H[33m  1 [m[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m
[33m  2 [m[36m  smsh1.c  small-shell version 1[m
[33m  3 [m[1C[36m**[9C    first really useful version after prompting shell[m
[33m  4 [m[1C[36m**[9C    this one parses the command line into strings[m
[33m  5 [m[1C[36m**[9C    uses fork, exec, wait, and ignores signals[m
[33m  6 [m[36m **/[m
[33m  7 
  8 [m[35m#include [m[33m<stdio.h>[m
[33m  9 [m[35m#include [m[33m<stdlib.h>[m
[33m 10 [m[35m#include [m[33m<unistd.h>[m
[33m 11 [m[35m#include [m[33m<signal.h>[m
[33m 12 [m[35m#include [m[33m<string.h>[m
[33m 13 [m[35m#include [m[33m"smsh.h"[m
[33m 14 [m[35m#include [m[33m"execute.c"[m
[33m 15 
 16 [m[35m#define DFL_PROMPT      [m[33m"> "[m
[33m 17 
 18 [m[32mint[m count_commands([32mchar[m** commands){
[33m 19 [m        [32mint[m count;
[33m 20 [m        [32mchar[m** cmd = commands;
[33m 21 
 22 [m        count = [33m0[m;
[33m 23 [m        [33mwhile[m(*cmd != [33mNULL[m){
[33m 24 [m[12C    count++;
[33m 25 [m[12C    cmd++;
[33m 26 [m        }
[33m 27 [m        [1C[33meturn[m count;
[33m 28 [m}
[33m 29 
 30 
 31 [m[36m/* splitline.c - commmand reading and parsing functions for smsh[m
[33m 32 [m[1C[36m*    [m
[33m 33 [m[1C[36m*    char *next_cmd(char *prompt, FILE *fp) - get next command[m
[33m 34 [m[1C[36m*    char **splitline(char *str);[7C    - parse a string[m
[33m 35 [m[36m */[m
[33m 36 
 37 
 38 
 39 
 40 [m[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[33m 41 [m[36m/*[m
[33m 42 [m[36m * purpose: read next command line from fp[m
[33m 43 [m[36m * returns: dynamically allocated string holding command line[m
[33m 44 [m[36m *  errors: NULL at EOF (not really an error)[m
[33m 45 [m[1C[36m*          calls fatal from emalloc()[m
[33m 46 [m[1C[36m*   notes: allocates space in BUFSIZ chunks.  [m
[33m 47 [m[36m */[m
[33m 48 [m{
[33m 49 [m         [32mchar[m   *buf = [33mNULL[m;[24C    [36m/* the buffer[7C    */[m
[33m 50 [m         [32mint[m    bufspace = [33m0[m;[15C    [36m/* total size[7C    */[m
[33m 51 [m         [32mint[m    pos = [33m0[m;[20C    [36m/* current position     */[m[52;87H1,1[11CTop[1;5H[?25h[?25l[52;87H2[2;5H[?25h[?25l[52;87H3[3;5H[?25h[?25l[52;87H4[4;5H[?25h[?25l[52;87H5[5;5H[?25h[?25l[52;87H6[6;5H[?25h[?25l[52;87H7,0-1[7;5H[?25h[?25l[52;87H8,1  [8;5H[?25h[?25l[52;87H9[9;5H[?25h[?25l[52;87H10,1[10;5H[?25h[?25l[52;88H1[11;5H[?25h[?25l[52;88H2[12;5H[?25h[?25l[52;88H3[13;5H[?25h[?25l[52;88H4[14;5H[?25h[?25l[52;88H5,0-1[15;5H[?25h[?25l[52;88H6,1  [16;5H[?25h[?25l[52;88H7,0-1[17;5H[?25h[?25l[52;88H8,1  [18;5H[?25h[?25l[52;88H9,1-8[19;12H[?25h[?25l[52;87H20[20;12H[?25h[?25l[52;88H1,0-1[21;5H[?25h[?25l[52;88H2,1-8[22;12H[?25h[?25l[52;88H3[23;12H[?25h[?25l[52;88H4[24;12H[?25h[?25l[52;88H5[25;12H[?25h[?25l[52;88H6[26;12H[?25h[?25l[52;88H7[27;12H[?25h[?25l[18;40H[46m{[28;5H}[m[52;88H8,1  [28;5H[?25h[?25l[18;40H{[28;5H}[52;88H9,0-1[29;5H[?25h[?25l[52;87H30[30;5H[?25h[?25l[52;88H1,1  [31;5H[?25h[?25l[52;88H2[32;5H[?25h[?25l[52;88H3[33;5H[?25h[?25l[52;88H4[34;5H[?25h[?25l[52;88H5[35;5H[?25h[?25l[52;88H6,0-1[36;5H[?25h[?25l[52;88H7[37;5H[?25h[?25l[52;88H8[38;5H[?25h[?25l[52;88H9[39;5H[?25h[?25l[52;87H40,1  [40;5H[?25h[?25l[52;88H1[41;5H[?25h[?25l[52;88H2[42;5H[?25h[?25l[52;88H3[43;5H[?25h[?25l[52;88H4[44;5H[?25h[?25l[52;88H5[45;5H[?25h[?25l[52;88H6[46;5H[?25h[?25l[52;88H7[47;5H[?25h[?25l[52;88H8[48;5H[?25h[?25l[52;88H9,1-8[49;12H[?25h[?25l[52;87H50[50;12H[?25h[?25l[52;88H1[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 52 [m[9C[32mint[m    c;[30C[36m/* input char           */[m[52;1H[K[52;87H52,1[11C0%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 53 [m[52;87H[K[52;87H53,1-8[9C1%[51;12H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;1H[33m 54 [m[8C[36m//new variable to store number of commands and array of pointer (double pointer char) to stoo[m[51;1H[33m    [m[36mre the commands[m[52;87H[K[52;87H54,1-8[9C2%[50;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 55 [m[8C[32mint[m command_count = [33m0[m;[52;87H[K[52;87H55,1-8[9C2%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 56 [m[8C[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H56,1-8[9C3%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 57 [m[52;87H[K[52;87H57,0-1[9C3%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 58 [m[52;87H[K[52;87H58,0-1[9C4%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 59 [m[9Cprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H59,1-8[9C4%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 60 [m[9C[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H60,1-8[9C5%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 61 [m[17C[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H61,1-8[9C6%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 62 [m[24C[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H62,1-8[9C6%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 63 [m[32Cbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H63,1-8[9C7%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 64 [m[25C[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H64,1[11C7%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 65 [m[32Cbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H65,1-8[9C8%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 66 [m[32Cbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H66,1-8[9C8%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 67 [m[24C}[52;87H[K[52;87H67,1-8[9C9%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 68 [m[16C}[52;87H[K[52;87H68,1-8[9C9%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 69 [m[52;87H[K[52;87H69,0-1[8C10%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 70 [m[16C[36m/* end of command? */[m[52;87H[K[52;87H70,1-8[8C10%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 71 [m[16C[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H71,1-8[8C11%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 72 [m[24Cbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H72,1-8[8C12%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 73 [m[24C[36m//split the lines[m[52;87H[K[52;87H73,1-8[8C12%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 74 [m[24Ccommands - splitline(buf);[52;87H[K[52;87H74,1-8[8C13%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 75 [m[24Ccommand_count = count_commands(commands);[52;87H[K[52;87H75,1-8[8C13%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 76 [m[24Cfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H76,1-8[8C14%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 77 [m[52;87H[K[52;87H77,1-8[8C14%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 78 [m[24C[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H78,1-8[8C15%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 79 [m[24C[32mint[m i;[52;87H[K[52;87H79,1-8[8C15%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 80 [m[24C[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H80,1-8[8C16%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 81 [m[32C[33mfor[m(i=[33m0[m; i< command_count; i+)+{[52;87H[K[52;87H81,1-8[8C17%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 82 [m[40Cexecute(splitline(commands[i]));[52;87H[K[52;87H82,1-8[8C17%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 83 [m[40Cfree(commands[i]);[52;87H[K[52;87H83,1-8[8C18%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 84 [m[32C}[52;87H[K[52;87H84,1-8[8C18%[51;12H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;1H[33m 85 [m[32Cfreelist(commands); [36m// not sure if needed but seems to ensure safetyy[m[51;1H[33m    [m[36m from memory leaks  [m[52;87H[K[52;87H85,1-8[8C19%[50;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 86 [m[24C}[52;87H[K[52;87H86,1-8[8C20%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 87 [m[24C[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[52;87H[K[52;87H87,1-8[8C20%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 88 [m[16C}[52;87H[K[52;87H88,1-8[8C21%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 89 [m[52;87H[K[52;87H89,0-1[8C21%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 90 [m[16C[36m/* no, add to buffer */[m[52;87H[K[52;87H90,1-8[8C22%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 91 [m[16Cbuf[pos++] = c;[52;87H[K[52;87H91,1-8[8C22%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 92 [m[52;87H[K[52;87H92,1-8[8C23%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 93 [m[16C[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[52;87H[K[52;87H93,1-8[8C24%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 94 [m[24Cfree(buf); [36m// maybe overkill but safe > sorry?[m[52;87H[K[52;87H94,1-8[8C24%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 95 [m[24C[33mreturn[m [33mNULL[m;[52;87H[K[52;87H95,1-8[8C25%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 96 [m[16C}[39C[36m/* say so               */[m[52;87H[K[52;87H96,1-8[8C25%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 97 [m[16Cbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H97,1-8[8C26%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 98 [m[16C[33mreturn[m buf;[52;87H[K[52;87H98,1-8[8C26%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 99 [m}[52;87H[K[52;87H99,1[10C27%[51;5H[?25h[?25l[52;88H8,1-8[50;12H[?25h[?25l[52;88H7[49;12H[?25h[?25l[52;88H6[48;12H[?25h[?25l[52;88H5[47;12H[?25h[?25l[52;88H4[46;12H[?25h[?25l[52;88H3[45;12H[?25h[?25l[52;88H2[44;12H[?25h[?25l[52;88H1[43;12H[?25h[?25l[52;88H0[42;12H[?25h[?25l[52;87H89,0-1[41;5H[?25h[?25l[52;88H8,1-8[40;12H[?25h[?25l[52;88H7[39;12H[?25h[?25l[52;88H6[38;12H[?25h[?25l[52;88H5[36;12H[?25h[?25l[52;88H4[35;12H[?25h[?25l[52;88H3[34;12H[?25h[?25l[52;88H2[33;12H[?25h[?25l[52;88H1[32;12H[?25h[?25l[52;90H2-16[32;20H[?25h[?25l[52;90H3-24[32;28H[?25h[?25l[52;90H4-32[32;36H[?25h[?25l[52;90H5-33[32;37H[?25h[?25l[52;90H6-34[32;38H[?25h[?25l[52;90H7-35[32;39H[?25h[?25l[1C[46m([25C)[m[52;90H8-36[32;40H[?25h[?25l([25C)[52;90H9-37[32;41H[?25h[?25l[52;90H10-38[32;42H[?25h[?25l[52;91H1-39[32;43H[?25h[?25l[52;91H2-40[32;44H[?25h[?25l[52;91H3-41[32;45H[?25h[?25l[52;91H4-42[32;46H[?25h[?25l[52;91H5-43[32;47H[?25h[?25l[52;91H6-44[32;48H[?25h[?25l[52;91H7-45[32;49H[?25h[?25l[52;91H8-46[32;50H[?25h[?25l[52;91H9-47[32;51H[?25h[?25l[52;90H20-48[32;52H[?25h[?25l[52;91H1-49[32;53H[?25h[?25l[52;91H2-50[32;54H[?25h[?25l[52;91H3-51[32;55H[?25h[?25l[52;91H4-52[32;56H[?25h[?25l[52;91H5-53[32;57H[?25h[?25l[52;91H6-54[32;58H[?25h[?25l[52;91H7-55[32;59H[?25h[?25l[52;91H8-56[32;60H[?25h[?25l[52;91H9-57[32;61H[?25h[?25l[52;90H30-58[32;62H[?25h[?25l[52;91H1-59[32;63H[?25h[?25l[52;91H2-60[32;64H[?25h[?25l[52;91H3-61[32;65H[?25h[?25l[32;40H[46m([25C)[m[52;91H4-62[32;66H[?25h[?25l[32;40H([25C)[52;91H5-63[32;67H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H81,35-63      27%[32;67H[?25h[?25l{[32;68H[K[32;67H[46m{[35;37H}[32;67H[?25h[m[52;1H[K[32;66H[?25l[32;40H[46m([25C)[m{[35;37H}[52;87H81,34-62      27%[32;66H[?25h[?25l[52;87H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"sm2in.c" 232L, 5205C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi sm2in.c [11@gcc sm2in.c -o test.o[C[11Pvi sm2in.c[C[11@gcc sm2in.c -o test.o[C
[01m[Ksm2in.c:[m[K In function â€˜[01m[Knext_cmd[m[Kâ€™:
[01m[Ksm2in.c:81:34:[m[K [01;31m[Kerror: [m[Kexpected expression before â€˜[01m[K)[m[Kâ€™ token
     for(i=0; i< command_count; i+[01;31m[K)[m[K{
                                  [01;31m[K^[m[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc sm2in.c -o test.o [11Pvi sm2in.c[C
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"sm2in.c" 232L, 5205C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments
  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m<string.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"execute.c"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m count_commands([32mchar[m** commands){[19;9H[32mint[m count;[20;9H[32mchar[m** cmd = commands;[22;9Hcount = [33m0[m;[23;9H[33mwhile[m(*cmd != [33mNULL[m){[24;17Hcount++;[25;17Hcmd++;[26;9H}[27;9H[33mreturn[m count;
}


[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string
 */[m[40;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[49;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[50;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[51;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;87H1,1[11CTop[1;1H[?25h[?25l[52;87H2[2;1H[?25h[?25l[52;87H3[3;1H[?25h[?25l[52;87H4[4;1H[?25h[?25l[52;87H5[5;1H[?25h[?25l[52;87H6[6;1H[?25h[?25l[52;87H7,0-1[7;1H[?25h[?25l[52;87H8,1  [8;1H[?25h[?25l[52;87H9[9;1H[?25h[?25l[52;87H10,1[10;1H[?25h[?25l[52;88H1[11;1H[?25h[?25l[52;88H2[12;1H[?25h[?25l[52;88H3[13;1H[?25h[?25l[52;88H4[14;1H[?25h[?25l[52;88H5,0-1[15;1H[?25h[?25l[52;88H6,1  [16;1H[?25h[?25l[52;88H7,0-1[17;1H[?25h[?25l[52;88H8,1  [18;1H[?25h[?25l[52;88H9,1-8[19;8H[?25h[?25l[52;87H20[20;8H[?25h[?25l[52;88H1,0-1[21;1H[?25h[?25l[52;88H2,1-8[22;8H[?25h[?25l[52;88H3[23;8H[?25h[?25l[52;88H4[24;8H[?25h[?25l[52;88H5[25;8H[?25h[?25l[52;88H6[26;8H[?25h[?25l[52;88H7[27;8H[?25h[?25l[18;36H[46m{[28;1H}[m[52;88H8,1  [28;1H[?25h[?25l[18;36H{[28;1H}[52;88H9,0-1[29;1H[?25h[?25l[52;87H30[30;1H[?25h[?25l[52;88H1,1  [31;1H[?25h[?25l[52;88H2[32;1H[?25h[?25l[52;88H3[33;1H[?25h[?25l[52;88H4[34;1H[?25h[?25l[52;1H[K[52;1H:[?2004h[?25hs[?25l[?25he[?25l[?25ht[?25l[?25h[?25l [?25hn[?25l[?25hu[?25l[?25hm[?25l[?25hb[?25l[?25he[?25l[?25hr[?25l[?25h[?25l[1;1H[33m  1 [m[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m
[33m  2 [m[36m  smsh1.c  small-shell version 1[m
[33m  3 [m[1C[36m**[9C    first really useful version after prompting shell[m
[33m  4 [m[1C[36m**[9C    this one parses the command line into strings[m
[33m  5 [m[1C[36m**[9C    uses fork, exec, wait, and ignores signals[m
[33m  6 [m[36m **/[m
[33m  7 
  8 [m[35m#include [m[33m<stdio.h>[m
[33m  9 [m[35m#include [m[33m<stdlib.h>[m
[33m 10 [m[35m#include [m[33m<unistd.h>[m
[33m 11 [m[35m#include [m[33m<signal.h>[m
[33m 12 [m[35m#include [m[33m<string.h>[m
[33m 13 [m[35m#include [m[33m"smsh.h"[m
[33m 14 [m[35m#include [m[33m"execute.c"[m
[33m 15 
 16 [m[35m#define DFL_PROMPT      [m[33m"> "[m
[33m 17 
 18 [m[32mint[m count_commands([32mchar[m** commands){
[33m 19 [m        [32mint[m count;
[33m 20 [m        [32mchar[m** cmd = commands;
[33m 21 
 22 [m        count = [33m0[m;
[33m 23 [m        [33mwhile[m(*cmd != [33mNULL[m){
[33m 24 [m[12C    count++;
[33m 25 [m[12C    cmd++;
[33m 26 [m        }
[33m 27 [m        [1C[33meturn[m count;
[33m 28 [m}
[33m 29 
 30 
 31 [m[36m/* splitline.c - commmand reading and parsing functions for smsh[m
[33m 32 [m[1C[36m*    [m
[33m 33 [m[1C[36m*    char *next_cmd(char *prompt, FILE *fp) - get next command[m
[33m 34 [m[1C[36m*    char **splitline(char *str);[7C    - parse a string[m
[33m 35 [m[36m */[m
[33m 36 
 37 
 38 
 39 
 40 [m[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[33m 41 [m[36m/*[m
[33m 42 [m[36m * purpose: read next command line from fp[m
[33m 43 [m[36m * returns: dynamically allocated string holding command line[m
[33m 44 [m[36m *  errors: NULL at EOF (not really an error)[m
[33m 45 [m[1C[36m*          calls fatal from emalloc()[m
[33m 46 [m[1C[36m*   notes: allocates space in BUFSIZ chunks.  [m
[33m 47 [m[36m */[m
[33m 48 [m{
[33m 49 [m         [32mchar[m   *buf = [33mNULL[m;[24C    [36m/* the buffer[7C    */[m
[33m 50 [m         [32mint[m    bufspace = [33m0[m;[15C    [36m/* total size[7C    */[m
[33m 51 [m         [32mint[m    pos = [33m0[m;[20C    [36m/* current position     */[m[52;87H34,1[10CTop[34;5H[?25h[?25l[52;88H5[35;5H[?25h[?25l[52;88H6,0-1[36;5H[?25h[?25l[52;88H7[37;5H[?25h[?25l[52;88H8[38;5H[?25h[?25l[52;88H9[39;5H[?25h[?25l[52;87H40,1  [40;5H[?25h[?25l[52;88H1[41;5H[?25h[?25l[52;88H2[42;5H[?25h[?25l[52;88H3[43;5H[?25h[?25l[52;88H4[44;5H[?25h[?25l[52;88H5[45;5H[?25h[?25l[52;88H6[46;5H[?25h[?25l[52;88H7[47;5H[?25h[?25l[52;88H8[48;5H[?25h[?25l[52;88H9,1-8[49;12H[?25h[?25l[52;87H50[50;12H[?25h[?25l[52;88H1[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 52 [m[9C[32mint[m    c;[30C[36m/* input char           */[m[52;1H[K[52;87H52,1[11C0%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 53 [m[52;87H[K[52;87H53,1-8[9C1%[51;12H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;1H[33m 54 [m[8C[36m//new variable to store number of commands and array of pointer (double pointer char) to stoo[m[51;1H[33m    [m[36mre the commands[m[52;87H[K[52;87H54,1-8[9C2%[50;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 55 [m[8C[32mint[m command_count = [33m0[m;[52;87H[K[52;87H55,1-8[9C2%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 56 [m[8C[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H56,1-8[9C3%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 57 [m[52;87H[K[52;87H57,0-1[9C3%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 58 [m[52;87H[K[52;87H58,0-1[9C4%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 59 [m[9Cprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H59,1-8[9C4%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 60 [m[9C[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H60,1-8[9C5%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 61 [m[17C[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H61,1-8[9C6%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 62 [m[24C[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H62,1-8[9C6%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 63 [m[32Cbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H63,1-8[9C7%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 64 [m[25C[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H64,1[11C7%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 65 [m[32Cbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H65,1-8[9C8%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 66 [m[32Cbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H66,1-8[9C8%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 67 [m[24C}[52;87H[K[52;87H67,1-8[9C9%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 68 [m[16C}[52;87H[K[52;87H68,1-8[9C9%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 69 [m[52;87H[K[52;87H69,0-1[8C10%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 70 [m[16C[36m/* end of command? */[m[52;87H[K[52;87H70,1-8[8C10%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 71 [m[16C[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H71,1-8[8C11%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 72 [m[24Cbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H72,1-8[8C12%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 73 [m[24C[36m//split the lines[m[52;87H[K[52;87H73,1-8[8C12%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 74 [m[24Ccommands - splitline(buf);[52;87H[K[52;87H74,1-8[8C13%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 75 [m[24Ccommand_count = count_commands(commands);[52;87H[K[52;87H75,1-8[8C13%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 76 [m[24Cfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H76,1-8[8C14%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 77 [m[52;87H[K[52;87H77,1-8[8C14%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 78 [m[24C[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H78,1-8[8C15%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 79 [m[24C[32mint[m i;[52;87H[K[52;87H79,1-8[8C15%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 80 [m[24C[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H80,1-8[8C16%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 81 [m[32C[33mfor[m(i=[33m0[m; i< command_count; i+){[52;87H[K[52;87H81,1-8[8C17%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 82 [m[40Cexecute(splitline(commands[i]));[52;87H[K[52;87H82,1-8[8C17%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 83 [m[40Cfree(commands[i]);[52;87H[K[52;87H83,1-8[8C18%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 84 [m[32C}[52;87H[K[52;87H84,1-8[8C18%[51;12H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;1H[33m 85 [m[32Cfreelist(commands); [36m// not sure if needed but seems to ensure safetyy[m[51;1H[33m    [m[36m from memory leaks  [m[52;87H[K[52;87H85,1-8[8C19%[50;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 86 [m[24C}[52;87H[K[52;87H86,1-8[8C20%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 87 [m[24C[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[52;87H[K[52;87H87,1-8[8C20%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 88 [m[16C}[52;87H[K[52;87H88,1-8[8C21%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 89 [m[52;87H[K[52;87H89,0-1[8C21%[51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 90 [m[16C[36m/* no, add to buffer */[m[52;87H[K[52;87H90,1-8[8C22%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[33m 91 [m[16Cbuf[pos++] = c;[52;87H[K[52;87H91,1-8[8C22%[51;12H[?25h[?25l[52;88H0[50;12H[?25h[?25l[52;87H89,0-1[49;5H[?25h[?25l[52;88H8,1-8[48;12H[?25h[?25l[52;88H7[47;12H[?25h[?25l[52;88H6[46;12H[?25h[?25l[52;88H5[44;12H[?25h[?25l[52;88H4[43;12H[?25h[?25l[52;88H3[42;12H[?25h[?25l[52;88H2[41;12H[?25h[?25l[52;88H1[40;12H[?25h[?25l[52;88H0[39;12H[?25h[?25l[52;87H79[38;12H[?25h[?25l[52;88H8[37;12H[?25h[?25l[52;88H7[36;12H[?25h[?25l[52;88H6[35;12H[?25h[?25l[52;88H5[34;12H[?25h[?25l[52;88H4[33;12H[?25h[?25l[52;88H3[32;12H[?25h[?25l[52;88H2[31;12H[?25h[?25l[52;88H3[32;12H[?25h[?25l[52;88H4[33;12H[?25h[?25l[52;88H5[34;12H[?25h[?25l[52;88H4[33;12H[?25h[?25l[52;88H5[34;12H[?25h[?25l[52;88H6[35;12H[?25h[?25l[52;88H7[36;12H[?25h[?25l[52;88H8[37;12H[?25h[?25l[52;88H9[38;12H[?25h[?25l[52;87H80[39;12H[?25h[?25l[52;88H1[40;12H[?25h[?25l[52;88H2[41;12H[?25h[?25l[52;88H3[42;12H[?25h[?25l[52;88H2[41;12H[?25h[?25l[52;88H1[40;12H[?25h[?25l[52;88H0[39;12H[?25h[?25l[52;88H1[40;12H[?25h[?25l[52;90H2-16[40;20H[?25h[?25l[52;90H3-24[40;28H[?25h[?25l[52;90H4-32[40;36H[?25h[?25l[52;90H5-33[40;37H[?25h[?25l[52;90H6-34[40;38H[?25h[?25l[52;90H7-35[40;39H[?25h[?25l[1C[46m([25C)[m[52;90H8-36[40;40H[?25h[?25l([25C)[52;90H9-37[40;41H[?25h[?25l[52;90H10-38[40;42H[?25h[?25l[52;91H1-39[40;43H[?25h[?25l[52;91H2-40[40;44H[?25h[?25l[52;91H3-41[40;45H[?25h[?25l[52;91H4-42[40;46H[?25h[?25l[52;91H5-43[40;47H[?25h[?25l[52;91H6-44[40;48H[?25h[?25l[52;91H7-45[40;49H[?25h[?25l[52;91H8-46[40;50H[?25h[?25l[52;91H9-47[40;51H[?25h[?25l[52;90H20-48[40;52H[?25h[?25l[52;91H1-49[40;53H[?25h[?25l[52;91H2-50[40;54H[?25h[?25l[52;91H3-51[40;55H[?25h[?25l[52;91H4-52[40;56H[?25h[?25l[52;91H5-53[40;57H[?25h[?25l[52;91H6-54[40;58H[?25h[?25l[52;91H7-55[40;59H[?25h[?25l[52;91H8-56[40;60H[?25h[?25l[52;91H9-57[40;61H[?25h[?25l[52;90H30-58[40;62H[?25h[?25l[52;91H1-59[40;63H[?25h[?25l[52;91H2-60[40;64H[?25h[?25l[52;91H3-61[40;65H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H81,33-61      22%[40;65H[?25h[?25l++){[52;91H4-62[40;66H[?25h[?25l[52;1H[K[52;1H"help.txt" [readonly] 236L, 8819C[1;1H[1m[30m*[m[33mhelp.txt[m[1m[30m*[m      For [36mVim version 8.1.[m  Last change: 2019 Jan 17[1;63H[K[2;1H[K[3;1H                        VIM - main help file
                                                   [22Ck
      Move around:  Use the cursor keys, or "h" to go left,[12Ch   l
     [15C"j" to go down, "k" to go up, "l" to go right.[7Cj
Close this window:  Use ":q[35m<Enter>[m".[7;61H[K[8;1H   Get out of Vim:  Use ":qa![35m<Enter>[m" (careful, all changes are lost!).[8;72H[K[9;1H[K[10;1HJump to a subject:  Position the cursor on a tag (e.g. [1m[30m|[m[36mbars[m[1m[30m|[m) and hit [35mCTRL-][m.
   With the mouse:  ":set mouse=a" to enable the mouse (in xterm or GUI).
    [8C        Double-click the left mouse button on a tag, e.g. [1m[30m|[m[36mbars[m[1m[30m|[m.[12;78H[K[13;1H        Jump back:  Type [35mCTRL-O[m.  Repeat to go further back.[14;1H[K[15;1HGet specific help:  It is possible to go directly to whatever you want help
    [16Con, by giving an argument to the [1m[30m|[m[36m:help[m[1m[30m|[m command.
    [16CPrepend something to specify the context:  [1m[30m*[m[33mhelp-context[m[1m[30m*[m[18;1H[K[19;1H    [9C             [35mWHAT                  PREPEND    EXAMPLE[m[1m[30m      ~[m
    [17C Normal mode command    [14C:help x[20;67H[K[21;1H    [18CVisual mode command         v_[7C:help v_u[21;69H[K[22;1H    [18CInsert mode command         i_       :help i_[35m<Esc>[m
    [18CCommand-line command[8C:[8C:help :quit[23;71H[K[24;1H    [18CCommand-line editing        c_       :help c_[35m<Del>[m
    [18CVim command argument        -        :help -r[25;68H[K[26;1H[1m[7mhelp.txt [Help][RO]                                                                   1,1            Top[m[27;3H[33m3[m[17C [15Cbuf = emalloc([33mBUFSIZ[m);[28;3H[33m4[m[26C[33melse[m{[26C[36m/* or expand    */[m[29;2H[33m65[m[17C                buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[30;2H[33m66[m[17C                bufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[31;2H[33m67[m[25C}       [31;38H[K[32;2H[33m68[m[17C}[32;29H[K[33;2H[33m69[m[33;29H[K[34;3H[33m0[m[17C[36m/* end of command? */[m[34;43H[K[35;3H[33m1[m[17C[33mif[m ( c == [35m'\n'[m )[35;37H[K[36;3H[33m2[m[25Cbuf[pos] = [35m'\0'[m;[37;3H[33m3[m[27C[36msplit the lines[m[37;46H[K[38;3H[33m4[m[25Ccommands - splitline(buf);[39;2H[33m75[m[25Ccommand_count = count_commands(commands);[40;2H[33m76[m[25Cfree(buf); [36m//clear the buffer[m[40;58H[K[41;2H[33m77[m[41;45H[K[42;2H[33m78[m[25C[36m//execute multiple commands if num>0, i.e. we detect a command[m[43;2H[33m79[m[25C[32mint[m i;[43;37H[K[44;3H[33m0[m[25C[33mif[m(command_count>[33m0[m){[44;49H[K[45;2H[33m81[m[1C                    [12C[33mfor[m(i=[33m0[m; i< command_count; i++){[46;3H[33m2[m[25C [15Cexecute(splitline(commands[i]));[47;3H[33m3[m[25C                free(commands[i]);[47;63H[K[48;3H[33m4[m[17C [15C}[49;3H[33m5[m[33Cfreelist(commands); [36m// not sure if needed but seems to ensure safetyy[m[50;1H[33m   [m[1C[36m from memory leaks  [m[50;25H[K[51;1H[7msm2in.c [+]                                                                           81,33-61       29%[1;1H[?25h[?25l[m[52;1H[K[52;1H:[?2004h[26;1H[7mhelp.txt [Help][RO][m[1m[7m [m[7m                                                                   1,1            Top[m[27;3H[33m9[m[27;37H[K[28;2H[33m70[m[17C[36m/* end of command? */[m[28;61H[K[29;2H[33m71[m[17C[33mif[m ( c == [35m'\n'[m )[29;37H[K[30;2H[33m72[m[25Cbuf[pos] = [35m'\0'[m;[30;46H[K[31;2H[33m73[m[25C[36m//split the lines[m[32;2H[33m74[m[17C [7Ccommands - splitline(buf);[33;2H[33m75[m[25Ccommand_count = count_commands(commands);[34;3H[33m6[m[17C        free(buf); [36m//clear the buffer[m[35;3H[33m7[m[17C        [35;29H[K[36;3H[33m8[m[25C[36m//execute multiple commands if num>0, i.e. we detect a command[m[37;3H[33m9[m[25C[32mint[m i;[37;35H[K[38;2H[33m80[m[25C[33mif[m(command_count>[33m0[m){[38;49H[K[39;2H[33m81[m[25C        [33mfor[m(i=[33m0[m; i< command_count; i++){[39;69H[K[40;2H[33m82[m[25C                execute(splitline(commands[i]));[41;2H[33m83[m[41Cfree(commands[i]);[42;2H[33m84[m[25C        }[42;38H[K[43;1H[7msm2in.c [+]                                                                           81,33-61       31%[m[44;1H[34m:[m[33m 30 [mwwq[44;29H[K[45;1H[34m:[m[33m 31 [m[33mq[m[45;37H[K[46;1H[34m:[m[33m 32 [m[33mset[m [35mnumber[m relative[46;45H[K[47;1H[34m:[m[33m 33 [m[33mw[m[47;45H[K[48;1H[34m:[m[33m 34 [m[33mwq[m[48;37H[K[49;1H[34m:[m[33m 35 [m[33mset[m [35mnumber[m[49;37H[K[50;1H[34m:[m[1C[33m36 [m[50;6H[K[51;1H[1m[7m[Command Line]                                                                        36,0-1         Bot[50;6H[?25h[?25l[m[52;1H[K[52;1H:[?2004h[?25hq[?25l[?25h[?25l[52;1H[K[26;1H[1m[7mhelp.txt [Help][RO]                                                                   1,1            Top[m[27;3H[33m3[m[33Cbuf = emalloc([33mBUFSIZ[m);[28;2H[33m64[m[17C         [33melse[m{       [19C[36m/* or expand    */[m[29;2H[33m65[m[17C                buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[30;2H[33m66[m[25C        bufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[31;2H[33m67[m[25C}       [31;37H[K[32;2H[33m68[m[17C}[32;29H[K[33;2H[33m69[m[33;29H[K[34;3H[33m0[m[17C[36m/* end of command? *[m[34;42H[K[35;3H[33m1[m[17C[33mif[m ( c == [35m'\n'[m )[36;3H[33m2[m[25Cbuf[pos] = [35m'\0'[m;[36;45H[K[37;3H[33m3[m[25C[36m//split the lines[m[38;2H[33m74[m[25Ccommands - splitline(buf);[39;2H[33m75[m[25Ccommand_count = count_commands(commands);[40;2H[33m76[m[25Cfree(buf); [36m//clear the buffer[m[40;58H[K[41;2H[33m77[m[41;45H[K[42;2H[33m78[m[25C[36m//execute multiple commands if num>0, i.e. we detect a command[m
[33m 79 [m                        [32mint[m i;[43;35H[K[44;1H[33m 80 [m    [20C[33mif[m(command_count>[33m0[m){
[33m 81 [m  [30C[33mfor[m(i=[33m0[m; i< command_count; i++){
[33m 82 [m                    [20Cexecute(splitline(commands[i]));
[33m 83 [m  [38Cfree(commands[i]);
[33m 84 [m   [29C}
[33m 85 [m           [21Cfreelist(commands); [36m// not sure if needed but seems to ensure safetyy[m[50;1H[33m    [m[36m from memory leaks  [m
[7msm2in.c [+][m[1m[7mn[m[7m                                                                           81,33-61       29%[1;1H[?25h[?25l[m[26;87H[1m[7m2,0-1[2;1H[?25h[?25l[26;87H3,1-8 [3;8H[?25h[?25l[26;87H4,[4;8H[?25h[?25l[26;87H3,[3;8H[?25h[?25l[26;87H2,0-1 [2;1H[?25h[?25l[26;87H1,1   [1;1H[?25h[?25l[26;87H2,0-1[2;1H[?25h[?25l[52;1H[m:[?2004h[?25hq[?25l[?25h[?25l[?2004h[1;1H[33m 44 [m[36m *  errors: NULL at EOF (not really an error)[m[1;50H[K[2;1H[33m 45 [m[36m *          calls fatal from emalloc()[m
[33m 46 [m[36m *   notes: allocates space in BUFSIZ chunks.  [m
[33m 47 [m[36m */[m[4;74H[K[5;1H[33m 48 [m{[5;7H[K[6;1H[33m 49 [m[9C[32mchar[m   *buf = [33mNULL[m;                            [36m/* the buffer           */[m
[33m 50 [m         [32mint[m    bufspace = [33m0[m;   [16C[36m/* total size           */[m
[33m 51 [m         [32mint[m    pos = [33m0[m;                        [36m/* current position     */[m
[33m 52 [m[9C[32mint[m    c;[30C[36m/* input char           */[m
[33m 53 [m        [10;13H[K[11;1H[33m 54 [m        [36m//new variable to store number of commands and array of pointer (double pointer char) to stoo[m[12;1H[33m    [m[36mre the commands[m[12;21H[K[13;1H[33m 55 [m        [32mint[m command_count = [33m0[m;[13;35H[K[14;1H[33m 56 [m[8C[32mchar[m** commands = [33mNULL[m;
[33m 57 [m[15;5H[K[16;1H[33m 58 [m[16;21H[K[17;1H[33m 59 [m[9Cprintf([33m"[m[35m%s[m[33m"[m, prompt);                          [36m/* prompt user  */[m
[33m 60 [m[9C[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m
[33m 61 [m[17C[33mif[m( pos+[33m1[m >= bufspace ){               [36m/* 1 for \0     */[m
[33m 62 [m[18C      [33mif[m ( bufspace == [33m0[m )[11C [36m/* y: 1st time  */[m
[33m 63 [m[18C              buf = emalloc([33mBUFSIZ[m);[21;60H[K[22;1H[33m 64 [m[18C       [33melse[m{       [9C  [7C [36m/* or expand    */[m
[33m 65 [m[18C              buf = erealloc(buf,bufspace+[33mBUFSIZ[m);
[33m 66 [m[18C              bufspace += [33mBUFSIZ[m;     [36m/* update size  */[m
[33m 67 [m[18C      }       [25;37H[K[26;1H[33m 68 [m                }[26;22H[K[27;3H[33m9[m[27;37H[K[28;2H[33m70[m[17C[36m/* end of command? */[m[28;61H[K[29;2H[33m71[m[17C[33mif[m ( c == [35m'\n'[m )[29;37H[K[30;2H[33m72[m[25Cbuf[pos] = [35m'\0'[m;[30;46H[K[31;2H[33m73[m[25C[36m//split the lines[m[32;2H[33m74[m[17C [7Ccommands - splitline(buf);[33;2H[33m75[m[25Ccommand_count = count_commands(commands);[34;3H[33m6[m[17C        free(buf); [36m//clear the buffer[m[35;3H[33m7[m[17C        [35;29H[K[36;3H[33m8[m[25C[36m//execute multiple commands if num>0, i.e. we detect a command[m[37;3H[33m9[m[25C[32mint[m i;[37;35H[K[38;2H[33m80[m[25C[33mif[m(command_count>[33m0[m){[38;49H[K[39;2H[33m81[m[25C        [33mfor[m(i=[33m0[m; i< command_count; i++){[39;69H[K[40;2H[33m82[m[25C                execute(splitline(commands[i]));[41;2H[33m83[m[41Cfree(commands[i]);[42;2H[33m84[m[25C        }[42;38H[K[43;2H[33m85[m[25C        freelist(commands); [36m// not sure if needed but seems to ensure safetyy[m[44;1H[33m   [m[1C[36m from memory leaks  [m[44;29H[K[45;3H[33m6[m[25C}[45;37H[K[46;3H[33m7[m[25C[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[46;69H[K[47;3H[33m8[m[17C}[47;45H[K[48;3H[33m9[m[48;37H[K[49;2H[33m90[m[17C[36m/* no, add to buffer */[m[49;44H[K[50;2H[33m91[m[1C                buf[pos++] = c;
[33m 92 [m                [51;21H[K[52;87H81,33-61      23%[39;65H[?25h[?25l[52;1H[K[52;1H:[?2004h[?25h [?25l[85C81,33-61      23%[39;65H[?25h[?25l[52;91H2-60[39;64H[?25h[?25l[52;91H1-59[39;63H[?25h[?25l[52;87H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"sm2in.c" 232L, 5206C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi sm2in.c [11@gcc sm2in.c -o test.o[C
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./test.o
> echo Hello; pwd
Segmentation fault
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./test.o
> echoi    hello     "/ Hello";  ls -s^[[D^[[D               ; ls -l ; 
Segmentation fault
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi res[K[K[Ksm`[K2in.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"sm2in.c" 232L, 5206C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments
  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m<string.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"execute.c"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m count_commands([32mchar[m** commands){[19;9H[32mint[m count;[20;9H[32mchar[m** cmd = commands;[22;9Hcount = [33m0[m;[23;9H[33mwhile[m(*cmd != [33mNULL[m){[24;17Hcount++;[25;17Hcmd++;[26;9H}[27;9H[33mreturn[m count;
}


[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string
 */[m[40;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[49;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[50;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[51;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;87H1,1[11CTop[1;1H[?25h[?25l[52;87H2[2;1H[?25h[?25l[52;87H3[3;1H[?25h[?25l[52;87H4[4;1H[?25h[?25l[52;87H5[5;1H[?25h[?25l[52;87H6[6;1H[?25h[?25l[52;87H7,0-1[7;1H[?25h[?25l[52;87H8,1  [8;1H[?25h[?25l[52;87H9[9;1H[?25h[?25l[52;87H10,1[10;1H[?25h[?25l[52;88H1[11;1H[?25h[?25l[52;88H2[12;1H[?25h[?25l[52;88H3[13;1H[?25h[?25l[52;88H4[14;1H[?25h[?25l[52;88H5,0-1[15;1H[?25h[?25l[52;88H6,1  [16;1H[?25h[?25l[52;88H7,0-1[17;1H[?25h[?25l[52;88H8,1  [18;1H[?25h[?25l[52;88H9,1-8[19;8H[?25h[?25l[52;87H20[20;8H[?25h[?25l[52;88H1,0-1[21;1H[?25h[?25l[52;88H2,1-8[22;8H[?25h[?25l[52;88H3[23;8H[?25h[?25l[52;88H4[24;8H[?25h[?25l[52;88H5[25;8H[?25h[?25l[52;88H6[26;8H[?25h[?25l[52;88H7[27;8H[?25h[?25l[18;36H[46m{[28;1H}[m[52;88H8,1  [28;1H[?25h[?25l[18;36H{[28;1H}[52;88H9,0-1[29;1H[?25h[?25l[52;87H30[30;1H[?25h[?25l[52;88H1,1  [31;1H[?25h[?25l[52;88H2[32;1H[?25h[?25l[52;88H3[33;1H[?25h[?25l[52;88H4[34;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H6,0-1[36;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H9[39;1H[?25h[?25l[52;87H40,1  [40;1H[?25h[?25l[52;88H1[41;1H[?25h[?25l[52;88H2[42;1H[?25h[?25l[52;88H3[43;1H[?25h[?25l[52;88H4[44;1H[?25h[?25l[52;88H5[45;1H[?25h[?25l[52;88H6[46;1H[?25h[?25l[52;88H7[47;1H[?25h[?25l[52;88H8[48;1H[?25h[?25l[52;88H9,1-8[49;8H[?25h[?25l[52;87H50[50;8H[?25h[?25l[52;88H1[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;10H[32mint[m    c;[30C[36m/* input char           */[m[52;1H[K[52;87H52,1[11C0%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H53,1-8[9C1%[51;8H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store tt[51;1Hhe commands[m[52;87H[K[52;87H54,1-8[9C2%[50;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[32mint[m command_count = [33m0[m;[52;87H[K[52;87H55,1-8[9C2%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H56,1-8[9C3%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H57,0-1[9C3%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H58,0-1[9C4%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H59,1-8[9C4%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H60,1-8[9C5%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H61,1-8[9C6%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H62,1-8[9C6%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H63,1-8[9C7%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;26H[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H64,1[11C7%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H65,1-8[9C8%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H66,1-8[9C8%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H67,1-8[9C9%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H68,1-8[9C9%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H69,0-1[8C10%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* end of command? */[m[52;87H[K[52;87H70,1-8[8C10%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H71,1-8[8C11%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H72,1-8[8C12%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//split the lines[m[52;87H[K[52;87H73,1-8[8C12%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommands - splitline(buf);[52;87H[K[52;87H74,1-8[8C13%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommand_count = count_commands(commands);[52;87H[K[52;87H75,1-8[8C13%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H76,1-8[8C14%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H77,1-8[8C14%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H78,1-8[8C15%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[32mint[m i;[52;87H[K[52;87H79,1-8[8C15%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H80,1-8[8C16%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33H[33mfor[m(i=[33m0[m; i< command_count; i++){[52;87H[K[52;87H81,1-8[8C17%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;41Hexecute(splitline(commands[i]));[52;87H[K[52;87H82,1-8[8C17%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;41Hfree(commands[i]);[52;87H[K[52;87H83,1-8[8C18%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33H}[52;87H[K[52;87H84,1-8[8C18%[51;8H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;33Hfreelist(commands); [36m// not sure if needed but seems to ensure safety froo[51;1Hm memory leaks  [m[52;87H[K[52;87H85,1-8[8C19%[50;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H86,1-8[8C20%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[52;87H[K[52;87H87,1-8[8C20%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H88,1-8[8C21%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H89,0-1[8C21%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* no, add to buffer */[m[52;87H[K[52;87H90,1-8[8C22%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos++] = c;[52;87H[K[52;87H91,1-8[8C22%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H92,1-8[8C23%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[52;87H[K[52;87H93,1-8[8C24%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hfree(buf); [36m// maybe overkill but safe > sorry?[m[52;87H[K[52;87H94,1-8[8C24%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H95,1-8[8C25%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[39C[36m/* say so               */[m[52;87H[K[52;87H96,1-8[8C25%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H97,1-8[8C26%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mreturn[m buf;[52;87H[K[52;87H98,1-8[8C26%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H}[52;87H[K[52;87H99,1[10C27%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H100,0-1[7C27%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/**[m[52;87H[K[52;87H101,1[9C28%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H102,1[9C28%[51;1H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;1H[36m **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H103,1[9C29%[50;1H[?25h[?25l[52;89H4[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H105,0-1[7C30%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H106,1[9C30%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H107,1[9C31%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H108,1[9C31%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H109,1[9C32%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H110,1[9C32%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H111,1[9C33%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H112,1[9C34%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H113,1[9C34%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H114,1[9C35%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *newstr();[52;87H[K[52;87H115,1[9C35%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  **args ;[52;87H[K[52;87H116,1[9C36%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H117,1[9C36%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H118,1[9C37%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H119,1[9C37%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H120,1[9C38%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *start;[52;87H[K[52;87H121,1[9C39%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   len;[52;87H[K[52;87H122,1[9C39%[51;1H[?25h[?25l[52;89H1[50;1H[?25h[?25l[52;89H0[49;1H[?25h[?25l[52;88H19[48;1H[?25h[?25l[52;89H8[47;1H[?25h[?25l[52;89H7[46;1H[?25h[?25l[52;89H6[45;1H[?25h[?25l[52;89H5[44;1H[?25h[?25l[52;89H4[43;1H[?25h[?25l[52;89H3[42;1H[?25h[?25l[52;89H2[41;1H[?25h[?25l[52;89H1[40;1H[?25h[?25l[52;89H0[39;1H[?25h[?25l[52;88H09[38;1H[?25h[?25l[52;89H8[37;1H[?25h[?25l[52;89H7[36;1H[?25h[?25l[52;89H6[35;1H[?25h[?25l[52;89H5,0-1[34;1H[?25h[?25l[52;89H4,1  [33;1H[?25h[?25l[52;89H3[32;1H[?25h[?25l[52;89H2[31;1H[?25h[?25l[52;89H1[30;1H[?25h[?25l[52;89H0,0-1[29;1H[?25h[?25l[52;87H99,1   [28;1H[?25h[?25l[52;88H8,1-8[27;8H[?25h[?25l[52;88H7[26;8H[?25h[?25l[52;88H6[25;8H[?25h[?25l[52;88H5[24;8H[?25h[?25l[52;88H4[23;8H[?25h[?25l[52;88H3[22;8H[?25h[?25l[52;88H2[21;8H[?25h[?25l[52;88H1[20;8H[?25h[?25l[52;88H0[19;8H[?25h[?25l[52;87H89,0-1[18;1H[?25h[?25l[52;88H8,1-8[17;8H[?25h[?25l[52;88H7[16;8H[?25h[?25l[52;88H6[15;8H[?25h[?25l[52;88H5[13;8H[?25h[?25l[52;88H6[15;8H[?25h[?25l[52;88H5[13;8H[?25h[?25l[52;88H4[12;8H[?25h[?25l[52;90H2-16[12;16H[?25h[?25l[52;88H5[13;16H[?25h[?25l[52;90H3-24[13;24H[?25h[?25l[52;90H4-32[13;32H[?25h[?25l[52;90H5-33[13;33H[?25h[?25l[52;90H6-34[13;34H[?25h[?25l[52;90H5-33[13;33H[?25h[?25l[52;90H6-34[13;34H[?25h[?25l[52;90H7-35[13;35H[?25h[?25l[52;90H8-36[13;36H[?25h[?25l[52;90H9-37[13;37H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H85,9-37[7C39%[13;37H[?25h[?25list(commands); [36m// not sure if needed but seems to ensure safety fromm[14;1H memory leaks [13;37H[?25h[?25l[mst(commands); [36m// not sure if needed but seems to ensure safety from  [14;1Hmemory leaks [13;37H[?25h[?25l[mt(commands); [36m// not sure if needed but seems to ensure safety from mm[14;1Hemory leaks [13;37H[?25h[?25l[m(commands); [36m// not sure if needed but seems to ensure safety from mee[14;1Hmory leaks [m[13;37H[46m([8C)[m[57C[36mee[14;1Hm[13;37H[?25h[m[52;1H[K[13;36H[?25le([8C)[57C[36mee[14;1Hm[m[52;87H85,8-36[7C39%[13;36H[?25h[?25l[52;87H[K[52;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"sm2in.c" 232L, 5202C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi sm2in.c [3P./test.ogcc sm2in.c -o test.o 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc sm2in.c -o test.o [11Pvi sm2in.c[C[3P./test.o
> echo Eh  Hello
Segmentation fault
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi sm2in.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;52r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[52;1H"sm2in.c" 232L, 5202C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments
  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m<string.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"execute.c"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m count_commands([32mchar[m** commands){[19;9H[32mint[m count;[20;9H[32mchar[m** cmd = commands;[22;9Hcount = [33m0[m;[23;9H[33mwhile[m(*cmd != [33mNULL[m){[24;17Hcount++;[25;17Hcmd++;[26;9H}[27;9H[33mreturn[m count;
}


[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string
 */[m[40;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[49;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[50;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[51;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;87H1,1[11CTop[1;1H[?25h[?25l[52;87H2[2;1H[?25h[?25l[52;87H3[3;1H[?25h[?25l[52;87H4[4;1H[?25h[?25l[52;87H5[5;1H[?25h[?25l[52;87H6[6;1H[?25h[?25l[52;87H7,0-1[7;1H[?25h[?25l[52;87H8,1  [8;1H[?25h[?25l[52;87H9[9;1H[?25h[?25l[52;87H10,1[10;1H[?25h[?25l[52;88H1[11;1H[?25h[?25l[52;88H2[12;1H[?25h[?25l[52;88H3[13;1H[?25h[?25l[52;88H4[14;1H[?25h[?25l[52;88H5,0-1[15;1H[?25h[?25l[52;88H6,1  [16;1H[?25h[?25l[52;88H7,0-1[17;1H[?25h[?25l[52;88H8,1  [18;1H[?25h[?25l[52;88H9,1-8[19;8H[?25h[?25l[52;87H20[20;8H[?25h[?25l[52;88H1,0-1[21;1H[?25h[?25l[52;88H2,1-8[22;8H[?25h[?25l[52;88H3[23;8H[?25h[?25l[52;88H4[24;8H[?25h[?25l[52;88H5[25;8H[?25h[?25l[52;88H6[26;8H[?25h[?25l[52;88H7[27;8H[?25h[?25l[18;36H[46m{[28;1H}[m[52;88H8,1  [28;1H[?25h[?25l[18;36H{[28;1H}[52;88H9,0-1[29;1H[?25h[?25l[52;87H30[30;1H[?25h[?25l[52;88H1,1  [31;1H[?25h[?25l[52;88H2[32;1H[?25h[?25l[52;88H3[33;1H[?25h[?25l[52;88H4[34;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H6,0-1[36;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H9[39;1H[?25h[?25l[52;87H40,1  [40;1H[?25h[?25l[52;88H1[41;1H[?25h[?25l[52;88H2[42;1H[?25h[?25l[52;88H3[43;1H[?25h[?25l[52;88H4[44;1H[?25h[?25l[52;88H5[45;1H[?25h[?25l[52;88H6[46;1H[?25h[?25l[52;88H7[47;1H[?25h[?25l[52;88H8[48;1H[?25h[?25l[52;88H9,1-8[49;8H[?25h[?25l[52;87H50[50;8H[?25h[?25l[52;88H1[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;10H[32mint[m    c;[30C[36m/* input char           */[m[52;1H[K[52;87H52,1[11C0%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H53,1-8[9C1%[51;8H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store tt[51;1Hhe commands[m[52;87H[K[52;87H54,1-8[9C2%[50;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[32mint[m command_count = [33m0[m;[52;87H[K[52;87H55,1-8[9C2%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H56,1-8[9C3%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H57,0-1[9C3%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H58,0-1[9C4%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H59,1-8[9C4%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H60,1-8[9C5%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H61,1-8[9C6%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H62,1-8[9C6%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H63,1-8[9C7%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;26H[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H64,1[11C7%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H65,1-8[9C8%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H66,1-8[9C8%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H67,1-8[9C9%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H68,1-8[9C9%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H69,0-1[8C10%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* end of command? */[m[52;87H[K[52;87H70,1-8[8C10%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H71,1-8[8C11%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H72,1-8[8C12%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//split the lines[m[52;87H[K[52;87H73,1-8[8C12%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommands - splitline(buf);[52;87H[K[52;87H74,1-8[8C13%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommand_count = count_commands(commands);[52;87H[K[52;87H75,1-8[8C13%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H76,1-8[8C14%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H77,1-8[8C14%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H78,1-8[8C15%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[32mint[m i;[52;87H[K[52;87H79,1-8[8C15%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H80,1-8[8C16%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33H[33mfor[m(i=[33m0[m; i< command_count; i++){[52;87H[K[52;87H81,1-8[8C17%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;41Hexecute(splitline(commands[i]));[52;87H[K[52;87H82,1-8[8C17%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;41Hfree(commands[i]);[52;87H[K[52;87H83,1-8[8C18%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33H}[52;87H[K[52;87H84,1-8[8C18%[51;8H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;33Hfree(commands); [36m// not sure if needed but seems to ensure safety from mee[51;1Hmory leaks      [m[52;87H[K[52;87H85,1-8[8C19%[50;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H86,1-8[8C20%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[52;87H[K[52;87H87,1-8[8C20%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H88,1-8[8C21%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H89,0-1[8C21%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* no, add to buffer */[m[52;87H[K[52;87H90,1-8[8C22%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos++] = c;[52;87H[K[52;87H91,1-8[8C22%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H92,1-8[8C23%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[52;87H[K[52;87H93,1-8[8C24%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hfree(buf); [36m// maybe overkill but safe > sorry?[m[52;87H[K[52;87H94,1-8[8C24%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H95,1-8[8C25%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[39C[36m/* say so               */[m[52;87H[K[52;87H96,1-8[8C25%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H97,1-8[8C26%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mreturn[m buf;[52;87H[K[52;87H98,1-8[8C26%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H}[52;87H[K[52;87H99,1[10C27%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H100,0-1[7C27%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/**[m[52;87H[K[52;87H101,1[9C28%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H102,1[9C28%[51;1H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;1H[36m **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H103,1[9C29%[50;1H[?25h[?25l[52;89H4[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H105,0-1[7C30%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H106,1[9C30%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H107,1[9C31%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H108,1[9C31%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H109,1[9C32%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H110,1[9C32%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H111,1[9C33%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H112,1[9C34%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H113,1[9C34%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H114,1[9C35%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *newstr();[52;87H[K[52;87H115,1[9C35%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  **args ;[52;87H[K[52;87H116,1[9C36%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H117,1[9C36%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H118,1[9C37%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H119,1[9C37%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H120,1[9C38%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *start;[52;87H[K[52;87H121,1[9C39%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   len;[52;87H[K[52;87H122,1[9C39%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H123,0-1[7C40%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[52;87H[K[52;87H124,1[9C40%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H125,1[9C41%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H126,0-1[7C41%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[52;87H[K[52;87H127,1[9C42%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hbufspace = [33mBUFSIZ[m;[52;87H[K[52;87H128,1[9C42%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[52;87H[K[52;87H129,1[9C43%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H130,0-1[7C43%[51;1H[?25h[?25l[52;88H29,1  [50;1H[?25h[?25l[52;89H8[49;1H[?25h[?25l[52;89H7[48;1H[?25h[?25l[52;89H6,0-1[47;1H[?25h[?25l[52;89H5,1  [46;1H[?25h[?25l[52;89H4[45;1H[?25h[?25l[52;89H3,0-1[44;1H[?25h[?25l[52;89H2,1  [43;1H[?25h[?25l[52;89H1[42;1H[?25h[?25l[52;89H0[41;1H[?25h[?25l[52;88H19[40;1H[?25h[?25l[52;89H8[39;1H[?25h[?25l[52;89H7[38;1H[?25h[?25l[52;89H6[37;1H[?25h[?25l[52;89H5[36;1H[?25h[?25l[52;89H4[35;1H[?25h[?25l[52;89H3[34;1H[?25h[?25l[52;89H4[35;1H[?25h[?25l[52;89H5[36;1H[?25h[?25l[52;89H6[37;1H[?25h[?25l[52;89H7[38;1H[?25h[?25l[52;89H8[39;1H[?25h[?25l[52;89H9[40;1H[?25h[?25l[52;88H20[41;1H[?25h[?25l[52;89H1[42;1H[?25h[?25l[52;89H2[43;1H[?25h[?25l[52;89H3,0-1[44;1H[?25h[?25l[52;89H4,1  [45;1H[?25h[?25l[52;89H5[46;1H[?25h[?25l[52;89H6,0-1[47;1H[?25h[?25l[52;89H7,1  [48;1H[?25h[?25l[52;89H8[49;1H[?25h[?25l[52;89H9[50;1H[?25h[?25l[52;88H30,0-1[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mwhile[m( *cp != [35m'\0'[m )[52;87H[K[52;87H131,1[9C44%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H{[52;87H[K[52;87H132,1[9C45%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[52;87H[K[52;87H133,1[9C45%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hcp++;[52;87H[K[52;87H134,1-8[7C46%[51;8H[?25h[?25l[52;89H3,1  [50;1H[?25h[?25l[52;89H2[49;1H[?25h[?25l[52;89H1[48;1H[?25h[?25l[52;89H0,0-1[47;1H[?25h[?25l[52;88H29,1  [46;1H[?25h[?25l[52;89H8[45;1H[?25h[?25l[52;89H7[44;1H[?25h[?25l[52;89H6,0-1[43;1H[?25h[?25l[52;89H5,1  [42;1H[?25h[?25l[52;89H4[41;1H[?25h[?25l[52;89H5[42;1H[?25h[?25l[52;89H6,0-1[43;1H[?25h[?25l[52;89H7,1  [44;1H[?25h[?25l[52;89H8[45;1H[?25h[?25l[52;89H9[46;1H[?25h[?25l[52;88H30,0-1[47;1H[?25h[?25l[52;89H1,1  [48;1H[?25h[?25l[52;89H2[49;1H[?25h[?25l[52;89H3[50;1H[?25h[?25l[52;89H4,1-8[51;8H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[51;9H[33mbreak[m;[52;87H[K[52;87H135,1[9C46%[50;1H[?25h[?25l[52;89H6,1-8[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H137,0-1[7C47%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[36m/* make sure the array has room (+1 for NULL) */[m[52;87H[K[52;87H138,1[9C48%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mif[m ( argnum+[33m1[m >= spots ){[52;87H[K[52;87H139,1[9C48%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H140,1-8[7C49%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hbufspace += [33mBUFSIZ[m;[52;87H[K[52;87H141,1-8[7C49%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[52;87H[K[52;87H142,1-8[7C50%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H}[52;87H[K[52;87H143,1[9C50%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H144,0-1[7C51%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[36m/* mark start, then find end of word */[m[52;87H[K[52;87H145,1[9C51%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hstart = cp;[52;87H[K[52;87H146,1[9C52%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hlen   = [33m1[m;[52;87H[K[52;87H147,1[9C53%[51;1H[?25h[?25l[52;89H6[50;1H[?25h[?25l[52;89H5[49;1H[?25h[?25l[52;89H4,0-1[48;1H[?25h[?25l[52;89H3,1  [47;1H[?25h[?25l[52;89H2,1-8[46;8H[?25h[?25l[52;89H1[45;8H[?25h[?25l[52;89H0[44;8H[?25h[?25l[52;88H39,1  [43;1H[?25h[?25l[52;89H8[42;1H[?25h[?25l[52;89H7,0-1[41;1H[?25h[?25l[52;89H6,1-8[40;8H[?25h[?25l[52;89H5,1  [39;1H[?25h[?25l[52;89H4,1-8[38;8H[?25h[?25l[52;89H3,1  [37;1H[?25h[?25l[52;89H2[36;1H[?25h[?25l[52;89H3[37;1H[?25h[?25l[52;89H4,1-8[38;8H[?25h[?25l[52;89H5,1  [39;1H[?25h[?25l[52;89H6,1-8[40;8H[?25h[?25l[52;89H7,0-1[41;1H[?25h[?25l[52;89H8,1  [42;1H[?25h[?25l[52;89H9[43;1H[?25h[?25l[52;88H40,1-8[44;8H[?25h[?25l[52;89H1[45;8H[?25h[?25l[52;89H2[46;8H[?25h[?25l[52;89H3,1  [47;1H[?25h[?25l[52;89H4,0-1[48;1H[?25h[?25l[52;89H5,1  [49;1H[?25h[?25l[52;89H6[50;1H[?25h[?25l[52;89H7[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[52;87H[K[52;87H148,1[9C53%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hlen++;[52;87H[K[52;87H149,1-8[7C54%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hargs[argnum++] = newstr(start, len);[52;87H[K[52;87H150,1[9C54%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H}[52;87H[K[52;87H151,1[9C55%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hargs[argnum] = [33mNULL[m;[52;87H[K[52;87H152,1[9C55%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m args;[52;87H[K[52;87H153,1[9C56%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[11;1H[46m{[51;1H}[m[52;87H[K[52;87H154,1[9C56%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[10;1H{[50;1H}[52;87H[K[52;87H155,0-1[7C57%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H156,1[9C58%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: constructor for strings[m[52;87H[K[52;87H157,1[9C58%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a string, never NULL[m[52;87H[K[52;87H158,1[9C59%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H159,1[9C59%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[52;87H[K[52;87H160,1[9C60%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H161,1[9C60%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m *rv = emalloc(l+[33m1[m);[52;87H[K[52;87H162,1[9C61%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H163,0-1[7C61%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hrv[l] = [35m'\0'[m;[52;87H[K[52;87H164,1[9C62%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hstrncpy(rv, s, l);[52;87H[K[52;87H165,1[9C62%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m rv;[52;87H[K[52;87H166,1[9C63%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H[46m{[51;1H}[m[52;87H[K[52;87H167,1[9C64%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[44;1H{[50;1H}[52;87H[K[52;87H168,0-1[7C64%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m freelist([32mchar[m **list)[52;87H[K[52;87H169,1[9C65%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H170,1[9C65%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: free the list returned by splitline[m[52;87H[K[52;87H171,1[9C66%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: nothing[m[52;87H[K[52;87H172,1[9C66%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: free all strings in list and then free the list[m[52;87H[K[52;87H173,1[9C67%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H174,1[9C67%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H175,1[9C68%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  **cp = list;[52;87H[K[52;87H176,1[9C69%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mwhile[m( *cp )[52;87H[K[52;87H177,1[9C69%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfree(*cp++);[52;87H[K[52;87H178,1[9C70%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hfree(list);[52;87H[K[52;87H179,1[9C70%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[46;1H[46m{[51;1H}[m[52;87H[K[52;87H180,1[9C71%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H{[50;1H}[52;87H[K[52;87H181,0-1[7C71%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m * emalloc([32msize_t[m n)[52;87H[K[52;87H182,1[9C72%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H183,1[9C72%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mvoid[m *rv ;[52;87H[K[52;87H184,1[9C73%[51;1H[?25h[?25l[52;89H3[50;1H[?25h[?25l[52;89H2[49;1H[?25h[?25l[52;89H1,0-1[48;1H[?25h[?25l[42;1H[46m{[47;1H}[m[52;89H0,1  [47;1H[?25h[?25l[42;1H{[47;1H}[52;88H79[46;1H[?25h[?25l[52;89H8[45;1H[?25h[?25l[52;89H7[44;1H[?25h[?25l[52;89H6[43;1H[?25h[?25l[42;1H[46m{[47;1H}[m[52;89H5[42;1H[?25h[?25l{[47;1H}[52;89H4[41;1H[?25h[?25l[52;89H3[40;1H[?25h[?25l[52;89H2[39;1H[?25h[?25l[52;89H1[38;1H[?25h[?25l[52;89H0[37;1H[?25h[?25l[52;88H69[36;1H[?25h[?25l[52;89H8,0-1[35;1H[?25h[?25l[28;1H[46m{[34;1H}[m[52;89H7,1  [34;1H[?25h[?25l[28;1H{[34;1H}[52;89H6[33;1H[?25h[?25l[52;89H5[32;1H[?25h[?25l[52;89H4[31;1H[?25h[?25l[52;89H3,0-1[30;1H[?25h[?25l[52;89H2,1  [29;1H[?25h[?25l[28;1H[46m{[34;1H}[m[52;89H1[28;1H[?25h[?25l{[34;1H}[52;89H0[27;1H[?25h[?25l[52;88H59[26;1H[?25h[?25l[52;89H8[25;1H[?25h[?25l[52;89H7[24;1H[?25h[?25l[52;89H6[23;1H[?25h[?25l[52;89H5,0-1[22;1H[?25h[?25l[52;89H4,1  [21;1H[?25h[?25l[52;89H3[20;1H[?25h[?25l[52;89H2[19;1H[?25h[?25l[52;89H3[20;1H[?25h[?25l[52;89H4[21;1H[?25h[?25l[52;89H5,0-1[22;1H[?25h[?25l[52;89H6,1  [23;1H[?25h[?25l[52;89H7[24;1H[?25h[?25l[52;89H8[25;1H[?25h[?25l[52;89H9[26;1H[?25h[?25l[52;88H60[27;1H[?25h[?25l
[46m{[34;1H}[m[52;89H1[28;1H[?25h[?25l{[34;1H}[52;89H2[29;1H[?25h[?25l[52;89H3,0-1[30;1H[?25h[?25l[52;89H2,1  [29;1H[?25h[?25l[28;1H[46m{[34;1H}[m[52;89H1[28;1H[?25h[?25l{[34;1H}[52;89H0[27;1H[?25h[?25l[52;88H59[26;1H[?25h[?25l[52;89H8[25;1H[?25h[?25l[52;89H7[24;1H[?25h[?25l[52;89H6[23;1H[?25h[?25l[52;89H5,0-1[22;1H[?25h[?25l[52;89H4,1  [21;1H[?25h[?25l[52;89H3[20;1H[?25h[?25l[52;89H2[19;1H[?25h[?25l[52;89H1[18;1H[?25h[?25l[52;89H0[17;1H[?25h[?25l[52;88H49,1-8[16;8H[?25h[?25l[52;89H8,1  [15;1H[?25h[?25l[52;89H7[14;1H[?25h[?25l[52;89H6[13;1H[?25h[?25l[52;89H5[12;1H[?25h[?25l[52;89H4,0-1[11;1H[?25h[?25l[52;89H3,1  [10;1H[?25h[?25l[52;89H2,1-8[9;8H[?25h[?25l[52;89H1[8;8H[?25h[?25l[52;89H0[7;8H[?25h[?25l[52;88H39,1  [6;1H[?25h[?25l[52;89H8[5;1H[?25h[?25l[52;89H7,0-1[4;1H[?25h[?25l[52;89H6,1-8[3;8H[?25h[?25l[52;89H5,1  [2;1H[?25h[?25l[52;89H4,1-8[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[52;87H[K[52;87H133,1[9C72%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H{[52;87H[K[52;87H132,1[9C72%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mwhile[m( *cp != [35m'\0'[m )[52;87H[K[52;87H131,1[9C71%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H130,0-1[7C71%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[52;87H[K[52;87H129,1[9C70%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hbufspace = [33mBUFSIZ[m;[52;87H[K[52;87H128,1[9C70%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[52;87H[K[52;87H127,1[9C69%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H126,0-1[7C69%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H125,1[9C68%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[52;87H[K[52;87H124,1[9C67%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H123,0-1[7C67%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   len;[52;87H[K[52;87H122,1[9C66%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *start;[52;87H[K[52;87H121,1[9C66%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H120,1[9C65%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H119,1[9C65%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H118,1[9C64%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H117,1[9C64%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  **args ;[52;87H[K[52;87H116,1[9C63%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *newstr();[52;87H[K[52;87H115,1[9C62%[1;1H[?25h[?25l[41;51r[41;1H[L[1;52r[1;1H[46m{[m[1;3H[K[2;10Hnewstr();
  [32mchar[m  **args ;[3;17H[K[4;9Hspots = [33m0[m;   [22C[36mspot[m[5;9Hbufspace = [33m0[m;[22C[36mbytes in table[m
  [32mint[m   argnum = [33m0[m[25C[36mslots used   [m[7;10Hcp = line;[21C[36m/* pos in string        */[m
  [32mchar[m  *start;
  [32mint[m   len;[10;3H[K[11;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
    [33mreturn[m [33mNULL[m;[13;3H[K[14;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
  bufspace[9C;[15;21H[K[16;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;3H[K[18;3H[33mwhile[m( *cp != [35m'\0'[m )
    {[19;7H[K[20;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[21;7H  cp++;[21;14H[K[22;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[23;9H[33mbreak[m;[24;7H[K[25;7H[36m/* make sure the array has room (+1 for NULL) */[m[26;7H[33mif[m ( argnum+[33m1[m >= spots ){[26;32H[K[27;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;9Hbufspace += [33mBUFSIZ[m;[28;28H[K[29;7H  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;7H}[31;7H[K[32;7H[36m/* mark start, then find end of word */[m[33;7Hstart = cp;[34;7Hlen   = [33m1[m;[34;17H[K[35;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;7H  len++;[36;15H[K[37;5H  args[argnum++] = newstr(start, len);
    }[38;6H[K[39;3Hargs[argnum] = [33mNULL[m;
  [33mreturn[m args;
[46m}[m[52;87H[K[52;87H114,1[9C62%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m
{[42;1H}[52;87H[K[52;87H113,1[9C61%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H112,1[9C61%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H111,1[9C60%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H110,1[9C60%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H109,1[9C59%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H108,1[9C59%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H107,1[9C58%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H106,1[9C58%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H105,0-1[7C57%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H104,1[9C56%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **/[m[52;87H[K[52;87H103,1[9C56%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H102,1[9C55%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/**[m[52;87H[K[52;87H101,1[9C55%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H100,0-1[7C54%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H99,1[10C54%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[33mreturn[m buf;[52;87H[K[52;87H98,1-8[8C53%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H97,1-8[8C53%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[39C[36m/* say so               */[m[52;87H[K[52;87H96,1-8[8C52%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H95,1-8[8C51%[1;8H[?25h[?25l[52;88H6[2;8H[?25h[?25l[52;88H7[3;8H[?25h[?25l[52;88H8[4;8H[?25h[?25l[52;88H9,1  [5;1H[?25h[?25l[52;87H100,0-1[6;1H[?25h[?25l[52;89H1,1  [7;1H[?25h[?25l[52;89H2[8;1H[?25h[?25l[52;89H3[9;1H[?25h[?25l[52;89H4[10;1H[?25h[?25l[52;89H5,0-1[11;1H[?25h[?25l[52;89H6,1  [12;1H[?25h[?25l[52;89H7[13;1H[?25h[?25l[52;89H8[14;1H[?25h[?25l[52;89H9[15;1H[?25h[?25l[52;88H10[16;1H[?25h[?25l[52;89H1[17;1H[?25h[?25l[52;89H2[18;1H[?25h[?25l[52;89H1[17;1H[?25h[?25l[52;89H0[16;1H[?25h[?25l[52;88H09[15;1H[?25h[?25l[52;89H8[14;1H[?25h[?25l[52;89H7[13;1H[?25h[?25l[52;89H8[14;1H[?25h[?25l[52;89H9[15;1H[?25h[?25l[52;88H10[16;1H[?25h[?25l[52;89H1[17;1H[?25h[?25l[52;89H2[18;1H[?25h[?25l[52;89H3[19;1H[?25h[?25l[52;89H4[20;1H[?25h[?25l[52;89H5[21;1H[?25h[?25l[52;89H6[22;1H[?25h[?25l[52;89H7[23;1H[?25h[?25l[52;89H8[24;1H[?25h[?25l[52;89H9[25;1H[?25h[?25l[52;88H20[26;1H[?25h[?25l[52;89H1[27;1H[?25h[?25l[52;89H2[28;1H[?25h[?25l[52;89H3,0-1[29;1H[?25h[?25l[52;89H4,1  [30;1H[?25h[?25l[52;89H5[31;1H[?25h[?25l[52;89H6,0-1[32;1H[?25h[?25l[52;89H7,1  [33;1H[?25h[?25l[52;89H8[34;1H[?25h[?25l[52;89H9[35;1H[?25h[?25l[52;88H30,0-1[36;1H[?25h[?25l[52;89H1,1  [37;1H[?25h[?25l[52;89H2[38;1H[?25h[?25l[52;89H3[39;1H[?25h[?25l[52;89H4,1-8[40;8H[?25h[?25l[52;89H5,1  [41;1H[?25h[?25l[52;89H6,1-8[42;8H[?25h[?25l[52;89H7,0-1[43;1H[?25h[?25l[52;89H8,1  [44;1H[?25h[?25l[52;89H9[45;1H[?25h[?25l[52;88H40,1-8[46;8H[?25h[?25l[52;89H1[47;8H[?25h[?25l[52;89H2[48;8H[?25h[?25l[52;89H3,1  [49;1H[?25h[?25l[52;89H4,0-1[50;1H[?25h[?25l[52;89H5,1  [51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hstart = cp;[52;87H[K[52;87H146,1[9C52%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hlen   = [33m1[m;[52;87H[K[52;87H147,1[9C53%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[52;87H[K[52;87H148,1[9C53%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hlen++;[52;87H[K[52;87H149,1-8[7C54%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hargs[argnum++] = newstr(start, len);[52;87H[K[52;87H150,1[9C54%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H}[52;87H[K[52;87H151,1[9C55%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hargs[argnum] = [33mNULL[m;[52;87H[K[52;87H152,1[9C55%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m args;[52;87H[K[52;87H153,1[9C56%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[11;1H[46m{[51;1H}[m[52;87H[K[52;87H154,1[9C56%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[10;1H{[50;1H}[52;87H[K[52;87H155,0-1[7C57%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H156,1[9C58%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: constructor for strings[m[52;87H[K[52;87H157,1[9C58%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a string, never NULL[m[52;87H[K[52;87H158,1[9C59%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H159,1[9C59%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[52;87H[K[52;87H160,1[9C60%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H161,1[9C60%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m *rv = emalloc(l+[33m1[m);[52;87H[K[52;87H162,1[9C61%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H163,0-1[7C61%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hrv[l] = [35m'\0'[m;[52;87H[K[52;87H164,1[9C62%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hstrncpy(rv, s, l);[52;87H[K[52;87H165,1[9C62%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m rv;[52;87H[K[52;87H166,1[9C63%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H[46m{[51;1H}[m[52;87H[K[52;87H167,1[9C64%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[44;1H{[50;1H}[52;87H[K[52;87H168,0-1[7C64%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m freelist([32mchar[m **list)[52;87H[K[52;87H169,1[9C65%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H170,1[9C65%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: free the list returned by splitline[m[52;87H[K[52;87H171,1[9C66%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: nothing[m[52;87H[K[52;87H172,1[9C66%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: free all strings in list and then free the list[m[52;87H[K[52;87H173,1[9C67%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H174,1[9C67%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H175,1[9C68%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  **cp = list;[52;87H[K[52;87H176,1[9C69%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mwhile[m( *cp )[52;87H[K[52;87H177,1[9C69%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfree(*cp++);[52;87H[K[52;87H178,1[9C70%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hfree(list);[52;87H[K[52;87H179,1[9C70%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[46;1H[46m{[51;1H}[m[52;87H[K[52;87H180,1[9C71%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H{[50;1H}[52;87H[K[52;87H181,0-1[7C71%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m * emalloc([32msize_t[m n)[52;87H[K[52;87H182,1[9C72%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H183,1[9C72%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mvoid[m *rv ;[52;87H[K[52;87H184,1[9C73%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mif[m ( (rv = malloc(n)) == [33mNULL[m )[52;87H[K[52;87H185,1[9C74%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);[52;87H[K[52;87H186,1[9C74%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m rv;[52;87H[K[52;87H187,1[9C75%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[46;1H[46m{[51;1H}[m[52;87H[K[52;87H188,1[9C75%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H{[50;1H}[52;87H[K[52;87H189,0-1[7C76%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[52;87H[K[52;87H190,1[9C76%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H191,1[9C77%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mvoid[m *rv;[52;87H[K[52;87H192,1[9C77%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[52;87H[K[52;87H193,1[9C78%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[52;87H[K[52;87H194,1[9C79%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m rv;[52;87H[K[52;87H195,1[9C79%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[46;1H[46m{[51;1H}[m[52;87H[K[52;87H196,1[9C80%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H{[50;1H}[52;87H[K[52;87H197,0-1[7C80%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H198,0-1[7C81%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m setup()[52;87H[K[52;87H199,1[9C81%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H200,1[9C82%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: initialize shell[m[52;87H[K[52;87H201,1[9C82%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: nothing. calls fatal() if trouble[m[52;87H[K[52;87H202,1[9C83%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H203,1[9C83%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H204,1[9C84%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[52;87H[K[52;87H205,1[9C85%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[52;87H[K[52;87H206,1[9C85%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[48;1H[46m{


}[m[52;87H[K[52;87H207,1[9C86%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[47;1H{


}[52;87H[K[52;87H208,0-1[7C86%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[52;87H[K[52;87H209,1[9C87%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H210,1[9C87%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[52;87H[K[52;87H211,1[9C88%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hexit(n);[52;87H[K[52;87H212,1[9C88%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[48;1H[46m{


}[m[52;87H[K[52;87H213,1[9C89%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[47;1H{


}[52;87H[K[52;87H214,0-1[7C90%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mint[m main()[52;87H[K[52;87H215,1[9C90%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H216,1[9C91%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *cmdline, *prompt, **arglist;[52;87H[K[52;87H217,1[9C91%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   result;[52;87H[K[52;87H218,1[9C92%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mvoid[m  setup();[52;87H[K[52;87H219,1[9C92%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H220,0-1[7C93%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hprompt = DFL_PROMPT;[52;87H[K[52;87H221,1[9C93%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hsetup();[52;87H[K[52;87H222,1[9C94%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H223,0-1[7C95%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[52;87H[K[52;87H224,1[9C95%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[52;87H[K[52;87H225,1[9C96%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hresult = execute(arglist);[52;87H[K[52;87H226,1[9C96%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hfreelist(arglist);[52;87H[K[52;87H227,1[9C97%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H}[52;87H[K[52;87H228,1[9C97%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfree(cmdline);[52;87H[K[52;87H229,1[9C98%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H}[52;87H[K[52;87H230,1[9C98%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m [33m0[m;[52;87H[K[52;87H231,1[9C99%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[35;1H[46m{[51;1H}[m[52;87H[K[52;87H232,1[9CBot[51;1H[?25h[?25l[35;1H{[51;1H}[52;89H1[50;1H[?25h[?25l[52;89H0[49;1H[?25h[?25l[52;88H29[48;1H[?25h[?25l[52;89H8[47;1H[?25h[?25l[52;89H7[46;1H[?25h[?25l[52;89H6[45;1H[?25h[?25l[52;89H5[44;1H[?25h[?25l[52;89H4[43;1H[?25h[?25l[52;89H3,0-1[42;1H[?25h[?25l[52;89H2,1  [41;1H[?25h[?25l[52;89H1[40;1H[?25h[?25l[52;89H0,0-1[39;1H[?25h[?25l[52;88H19,1  [38;1H[?25h[?25l[52;89H8[37;1H[?25h[?25l[52;89H7[36;1H[?25h[?25l[35;1H[46m{[51;1H}[m[52;89H6[35;1H[?25h[?25l{[51;1H}[52;89H5[34;1H[?25h[?25l[52;89H4,0-1[33;1H[?25h[?25l[29;1H[46m{


}[m[52;89H3,1  [32;1H[?25h[?25l[29;1H{


}[52;89H2[31;1H[?25h[?25l[52;89H1[30;1H[?25h[?25l[29;1H[46m{


}[m[52;89H0[29;1H[?25h[?25l{


}[52;88H09[28;1H[?25h[?25l[52;89H8,0-1[27;1H[?25h[?25l[23;1H[46m{


}[m[52;89H7,1  [26;1H[?25h[?25l[23;1H{


}[52;89H6[25;1H[?25h[?25l[52;89H5[24;1H[?25h[?25l[23;1H[46m{


}[m[52;89H4[23;1H[?25h[?25l{


}[52;89H3[22;1H[?25h[?25l[52;89H2[21;1H[?25h[?25l[52;89H1[20;1H[?25h[?25l[52;89H0[19;1H[?25h[?25l[52;87H199[18;1H[?25h[?25l[52;89H8,0-1[17;1H[?25h[?25l[52;89H7[16;1H[?25h[?25l[10;1H[46m{[15;1H}[m[52;89H6,1  [15;1H[?25h[?25l[10;1H{[15;1H}[52;89H5[14;1H[?25h[?25l[52;89H4[13;1H[?25h[?25l[52;89H3[12;1H[?25h[?25l[52;89H2[11;1H[?25h[?25l[10;1H[46m{[15;1H}[m[52;89H1[10;1H[?25h[?25l{[15;1H}[52;89H0[9;1H[?25h[?25l[52;88H89,0-1[8;1H[?25h[?25l[2;1H[46m{[7;1H}[m[52;89H8,1  [7;1H[?25h[?25l[2;1H{[7;1H}[52;89H7[6;1H[?25h[?25l[52;89H6[5;1H[?25h[?25l[52;89H5[4;1H[?25h[?25l[52;89H4[3;1H[?25h[?25l[2;1H[46m{[7;1H}[m[52;89H3[2;1H[?25h[?25l{[7;1H}[52;89H2[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H181,0-1[7C99%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H180,1[9C98%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hfree(list);[52;87H[K[52;87H179,1[9C98%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5Hfree(*cp++);[52;87H[K[52;87H178,1[9C97%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mwhile[m( *cp )[52;87H[K[52;87H177,1[9C97%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  **cp = list;[52;87H[K[52;87H176,1[9C96%[1;1H[?25h[?25l[6;51r[6;1H[L[1;52r[1;1H[46m{[m[1;3H[K[2;3H[32mchar[m  **cp = list;
  [33mwhile[m( *cp )[3;15H[K[4;3H  free(*cp++);
  free(list);
[46m}[m[52;87H[K[52;87H175,1[9C96%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m
{[7;1H}[52;87H[K[52;87H174,1[9C95%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  action: free all strings in list and then free the list[m[52;87H[K[52;87H173,1[9C95%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: nothing[m[52;87H[K[52;87H172,1[9C94%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: free the list returned by splitline[m[52;87H[K[52;87H171,1[9C93%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H170,1[9C93%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mvoid[m freelist([32mchar[m **list)[52;87H[K[52;87H169,1[9C92%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H168,0-1[7C92%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H167,1[9C91%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mreturn[m rv;[52;87H[K[52;87H166,1[9C91%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hstrncpy(rv, s, l);[52;87H[K[52;87H165,1[9C90%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hrv[l] = [35m'\0'[m;[52;87H[K[52;87H164,1[9C90%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H163,0-1[7C89%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m *rv = emalloc(l+[33m1[m);[52;87H[K[52;87H162,1[9C88%[1;1H[?25h[?25l[7;51r[7;1H[L[1;52r[1;1H[46m{[m[1;3H[K[2;3H[32mchar[m *rv = emalloc(l+[33m1[m);[3;3H[K[4;3Hrv[l] = [35m'\0'[m;[4;16H[K[5;3Hstrncpy(rv, s, l);
  [33mreturn[m rv;
[46m}[m[52;87H[K[52;87H161,1[9C88%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)
{[8;1H}[52;87H[K[52;87H160,1[9C87%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H159,1[9C87%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: a string, never NULL[m[52;87H[K[52;87H158,1[9C86%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: constructor for strings[m[52;87H[K[52;87H157,1[9C86%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H156,1[9C85%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H155,0-1[7C85%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H154,1[9C84%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mreturn[m args;[52;87H[K[52;87H153,1[9C83%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hargs[argnum] = [33mNULL[m;[52;87H[K[52;87H152,1[9C83%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H}[52;87H[K[52;87H151,1[9C82%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7Hargs[argnum++] = newstr(start, len);[52;87H[K[52;87H150,1[9C82%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hlen++;[52;87H[K[52;87H149,1-8[7C81%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[52;87H[K[52;87H148,1[9C81%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7Hlen   = [33m1[m;[52;87H[K[52;87H147,1[9C80%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7Hstart = cp;[52;87H[K[52;87H146,1[9C80%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[36m/* mark start, then find end of word */[m[52;87H[K[52;87H145,1[9C79%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H144,0-1[7C79%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H}[52;87H[K[52;87H143,1[9C78%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[52;87H[K[52;87H142,1-8[7C77%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hbufspace += [33mBUFSIZ[m;[52;87H[K[52;87H141,1-8[7C77%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H140,1-8[7C76%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mif[m ( argnum+[33m1[m >= spots ){[52;87H[K[52;87H139,1[9C76%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[36m/* make sure the array has room (+1 for NULL) */[m[52;87H[K[52;87H138,1[9C75%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H137,0-1[7C75%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mbreak[m;[52;87H[K[52;87H136,1-8[7C74%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[52;87H[K[52;87H135,1[9C74%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hcp++;[52;87H[K[52;87H134,1-8[7C73%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[52;87H[K[52;87H133,1[9C72%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H{[52;87H[K[52;87H132,1[9C72%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mwhile[m( *cp != [35m'\0'[m )[52;87H[K[52;87H131,1[9C71%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H130,0-1[7C71%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[52;87H[K[52;87H129,1[9C70%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hbufspace = [33mBUFSIZ[m;[52;87H[K[52;87H128,1[9C70%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[52;87H[K[52;87H127,1[9C69%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H126,0-1[7C69%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H125,1[9C68%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[52;87H[K[52;87H124,1[9C67%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H123,0-1[7C67%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   len;[52;87H[K[52;87H122,1[9C66%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *start;[52;87H[K[52;87H121,1[9C66%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H120,1[9C65%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H119,1[9C65%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H118,1[9C64%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H117,1[9C64%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  **args ;[52;87H[K[52;87H116,1[9C63%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *newstr();[52;87H[K[52;87H115,1[9C62%[1;1H[?25h[?25l[41;51r[41;1H[L[1;52r[1;1H[46m{[m[1;3H[K[2;10Hnewstr();
  [32mchar[m  **args ;[3;17H[K[4;9Hspots = [33m0[m;   [22C[36mspot[m[5;9Hbufspace = [33m0[m;[22C[36mbytes in table[m
  [32mint[m   argnum = [33m0[m[25C[36mslots used   [m[7;10Hcp = line;[21C[36m/* pos in string        */[m
  [32mchar[m  *start;
  [32mint[m   len;[10;3H[K[11;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
    [33mreturn[m [33mNULL[m;[13;3H[K[14;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
  bufspace[9C;[15;21H[K[16;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;3H[K[18;3H[33mwhile[m( *cp != [35m'\0'[m )
    {[19;7H[K[20;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[21;7H  cp++;[21;14H[K[22;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[23;9H[33mbreak[m;[24;7H[K[25;7H[36m/* make sure the array has room (+1 for NULL) */[m[26;7H[33mif[m ( argnum+[33m1[m >= spots ){[26;32H[K[27;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;9Hbufspace += [33mBUFSIZ[m;[28;28H[K[29;7H  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;7H}[31;7H[K[32;7H[36m/* mark start, then find end of word */[m[33;7Hstart = cp;[34;7Hlen   = [33m1[m;[34;17H[K[35;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;7H  len++;[36;15H[K[37;5H  args[argnum++] = newstr(start, len);
    }[38;6H[K[39;3Hargs[argnum] = [33mNULL[m;
  [33mreturn[m args;
[46m}[m[52;87H[K[52;87H114,1[9C62%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m
{[42;1H}[52;87H[K[52;87H113,1[9C61%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H112,1[9C61%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H111,1[9C60%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H110,1[9C60%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H109,1[9C59%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H108,1[9C59%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H107,1[9C58%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H106,1[9C58%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H105,0-1[7C57%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H104,1[9C56%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **/[m[52;87H[K[52;87H103,1[9C56%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H102,1[9C55%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/**[m[52;87H[K[52;87H101,1[9C55%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H100,0-1[7C54%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H99,1[10C54%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[33mreturn[m buf;[52;87H[K[52;87H98,1-8[8C53%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H97,1-8[8C53%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[39C[36m/* say so               */[m[52;87H[K[52;87H96,1-8[8C52%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H95,1-8[8C51%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hfree(buf); [36m// maybe overkill but safe > sorry?[m[52;87H[K[52;87H94,1-8[8C51%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[52;87H[K[52;87H93,1-8[8C50%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H92,1-8[8C50%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hbuf[pos++] = c;[52;87H[K[52;87H91,1-8[8C49%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[36m/* no, add to buffer */[m[52;87H[K[52;87H90,1-8[8C49%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H89,0-1[8C48%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[52;87H[K[52;87H88,1-8[8C48%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[52;87H[K[52;87H87,1-8[8C47%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H}[52;87H[K[52;87H86,1-8[8C46%[1;8H[?25h[?25l[1;51r[1;1H[2L[1;52r[1;33Hfree(commands); [36m// not sure if needed but seems to ensure safety from mee[2;1Hmory leaks      [m[52;87H[K[52;87H85,1-8[8C46%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33H}[52;87H[K[52;87H84,1-8[8C45%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;41Hfree(commands[i]);[52;87H[K[52;87H83,1-8[8C45%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;41Hexecute(splitline(commands[i]));[52;87H[K[52;87H82,1-8[8C44%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33H[33mfor[m(i=[33m0[m; i< command_count; i++){[52;87H[K[52;87H81,1-8[8C43%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H80,1-8[8C43%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[32mint[m i;[52;87H[K[52;87H79,1-8[8C42%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H78,1-8[8C42%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H77,1-8[8C41%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H76,1-8[8C41%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hcommand_count = count_commands(commands);[52;87H[K[52;87H75,1-8[8C40%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hcommands - splitline(buf);[52;87H[K[52;87H74,1-8[8C40%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[36m//split the lines[m[52;87H[K[52;87H73,1-8[8C39%[1;8H[?25h[?25l[52;88H4[2;8H[?25h[?25l[52;88H5[3;8H[?25h[?25l[52;88H6[4;8H[?25h[?25l[52;88H7[5;8H[?25h[?25l[52;88H8[6;8H[?25h[?25l[52;88H9[7;8H[?25h[?25l[52;87H80[8;8H[?25h[?25l[52;88H1[9;8H[?25h[?25l[52;88H2[10;8H[?25h[?25l[52;88H3[11;8H[?25h[?25l[52;88H4[12;8H[?25h[?25l[52;88H5[13;8H[?25h[?25l[52;88H6[15;8H[?25h[?25l[52;88H7[16;8H[?25h[?25l[52;88H8[17;8H[?25h[?25l[52;88H9,0-1[18;1H[?25h[?25l[52;87H90,1-8[19;8H[?25h[?25l[52;88H1[20;8H[?25h[?25l[52;88H2[21;8H[?25h[?25l[52;88H3[22;8H[?25h[?25l[52;88H4[23;8H[?25h[?25l[52;88H5[24;8H[?25h[?25l[52;88H6[25;8H[?25h[?25l[52;88H7[26;8H[?25h[?25l[52;88H8[27;8H[?25h[?25l[52;88H9,1  [28;1H[?25h[?25l[52;87H100,0-1[29;1H[?25h[?25l[52;89H1,1  [30;1H[?25h[?25l[52;89H2[31;1H[?25h[?25l[52;89H3[32;1H[?25h[?25l[52;89H4[33;1H[?25h[?25l[52;89H5,0-1[34;1H[?25h[?25l[52;89H6,1  [35;1H[?25h[?25l[52;89H7[36;1H[?25h[?25l[52;89H8[37;1H[?25h[?25l[52;89H9[38;1H[?25h[?25l[52;88H10[39;1H[?25h[?25l[52;89H1[40;1H[?25h[?25l[52;89H2[41;1H[?25h[?25l[52;89H3[42;1H[?25h[?25l[52;89H4[43;1H[?25h[?25l[52;89H5[44;1H[?25h[?25l[52;89H6[45;1H[?25h[?25l[52;89H7[46;1H[?25h[?25l[52;89H8[47;1H[?25h[?25l[52;89H9[48;1H[?25h[?25l[52;88H20[49;1H[?25h[?25l[52;89H1[50;1H[?25h[?25l[52;89H2[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H123,0-1[7C40%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[52;87H[K[52;87H124,1[9C40%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H125,1[9C41%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H126,0-1[7C41%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[52;87H[K[52;87H127,1[9C42%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hbufspace = [33mBUFSIZ[m;[52;87H[K[52;87H128,1[9C42%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[52;87H[K[52;87H129,1[9C43%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H130,0-1[7C43%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mwhile[m( *cp != [35m'\0'[m )[52;87H[K[52;87H131,1[9C44%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H{[52;87H[K[52;87H132,1[9C45%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[52;87H[K[52;87H133,1[9C45%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hcp++;[52;87H[K[52;87H134,1-8[7C46%[51;8H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[51;9H[33mbreak[m;[52;87H[K[52;87H135,1[9C46%[50;1H[?25h[?25l[52;89H6,1-8[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H137,0-1[7C47%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[36m/* make sure the array has room (+1 for NULL) */[m[52;87H[K[52;87H138,1[9C48%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mif[m ( argnum+[33m1[m >= spots ){[52;87H[K[52;87H139,1[9C48%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H140,1-8[7C49%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hbufspace += [33mBUFSIZ[m;[52;87H[K[52;87H141,1-8[7C49%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[52;87H[K[52;87H142,1-8[7C50%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H}[52;87H[K[52;87H143,1[9C50%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H144,0-1[7C51%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[36m/* mark start, then find end of word */[m[52;87H[K[52;87H145,1[9C51%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hstart = cp;[52;87H[K[52;87H146,1[9C52%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hlen   = [33m1[m;[52;87H[K[52;87H147,1[9C53%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[52;87H[K[52;87H148,1[9C53%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hlen++;[52;87H[K[52;87H149,1-8[7C54%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hargs[argnum++] = newstr(start, len);[52;87H[K[52;87H150,1[9C54%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H}[52;87H[K[52;87H151,1[9C55%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hargs[argnum] = [33mNULL[m;[52;87H[K[52;87H152,1[9C55%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m args;[52;87H[K[52;87H153,1[9C56%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[11;1H[46m{[51;1H}[m[52;87H[K[52;87H154,1[9C56%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[10;1H{[50;1H}[52;87H[K[52;87H155,0-1[7C57%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H156,1[9C58%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: constructor for strings[m[52;87H[K[52;87H157,1[9C58%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a string, never NULL[m[52;87H[K[52;87H158,1[9C59%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H159,1[9C59%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[52;87H[K[52;87H160,1[9C60%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H161,1[9C60%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m *rv = emalloc(l+[33m1[m);[52;87H[K[52;87H162,1[9C61%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H163,0-1[7C61%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hrv[l] = [35m'\0'[m;[52;87H[K[52;87H164,1[9C62%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hstrncpy(rv, s, l);[52;87H[K[52;87H165,1[9C62%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m rv;[52;87H[K[52;87H166,1[9C63%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H[46m{[51;1H}[m[52;87H[K[52;87H167,1[9C64%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[44;1H{[50;1H}[52;87H[K[52;87H168,0-1[7C64%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m freelist([32mchar[m **list)[52;87H[K[52;87H169,1[9C65%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H170,1[9C65%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: free the list returned by splitline[m[52;87H[K[52;87H171,1[9C66%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: nothing[m[52;87H[K[52;87H172,1[9C66%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: free all strings in list and then free the list[m[52;87H[K[52;87H173,1[9C67%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H174,1[9C67%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H175,1[9C68%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  **cp = list;[52;87H[K[52;87H176,1[9C69%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mwhile[m( *cp )[52;87H[K[52;87H177,1[9C69%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfree(*cp++);[52;87H[K[52;87H178,1[9C70%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hfree(list);[52;87H[K[52;87H179,1[9C70%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[46;1H[46m{[51;1H}[m[52;87H[K[52;87H180,1[9C71%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H{[50;1H}[52;87H[K[52;87H181,0-1[7C71%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m * emalloc([32msize_t[m n)[52;87H[K[52;87H182,1[9C72%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H183,1[9C72%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mvoid[m *rv ;[52;87H[K[52;87H184,1[9C73%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mif[m ( (rv = malloc(n)) == [33mNULL[m )[52;87H[K[52;87H185,1[9C74%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);[52;87H[K[52;87H186,1[9C74%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m rv;[52;87H[K[52;87H187,1[9C75%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[46;1H[46m{[51;1H}[m[52;87H[K[52;87H188,1[9C75%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H{[50;1H}[52;87H[K[52;87H189,0-1[7C76%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[52;87H[K[52;87H190,1[9C76%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H191,1[9C77%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mvoid[m *rv;[52;87H[K[52;87H192,1[9C77%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[52;87H[K[52;87H193,1[9C78%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[52;87H[K[52;87H194,1[9C79%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m rv;[52;87H[K[52;87H195,1[9C79%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[46;1H[46m{[51;1H}[m[52;87H[K[52;87H196,1[9C80%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H{[50;1H}[52;87H[K[52;87H197,0-1[7C80%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H198,0-1[7C81%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m setup()[52;87H[K[52;87H199,1[9C81%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H200,1[9C82%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: initialize shell[m[52;87H[K[52;87H201,1[9C82%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: nothing. calls fatal() if trouble[m[52;87H[K[52;87H202,1[9C83%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H203,1[9C83%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H204,1[9C84%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[52;87H[K[52;87H205,1[9C85%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[52;87H[K[52;87H206,1[9C85%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[48;1H[46m{


}[m[52;87H[K[52;87H207,1[9C86%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[47;1H{


}[52;87H[K[52;87H208,0-1[7C86%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[52;87H[K[52;87H209,1[9C87%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H210,1[9C87%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[52;87H[K[52;87H211,1[9C88%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hexit(n);[52;87H[K[52;87H212,1[9C88%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[48;1H[46m{


}[m[52;87H[K[52;87H213,1[9C89%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[47;1H{


}[52;87H[K[52;87H214,0-1[7C90%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mint[m main()[52;87H[K[52;87H215,1[9C90%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H216,1[9C91%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *cmdline, *prompt, **arglist;[52;87H[K[52;87H217,1[9C91%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   result;[52;87H[K[52;87H218,1[9C92%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mvoid[m  setup();[52;87H[K[52;87H219,1[9C92%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H220,0-1[7C93%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hprompt = DFL_PROMPT;[52;87H[K[52;87H221,1[9C93%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hsetup();[52;87H[K[52;87H222,1[9C94%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H223,0-1[7C95%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[52;87H[K[52;87H224,1[9C95%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[52;87H[K[52;87H225,1[9C96%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hresult = execute(arglist);[52;87H[K[52;87H226,1[9C96%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hfreelist(arglist);[52;87H[K[52;87H227,1[9C97%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H}[52;87H[K[52;87H228,1[9C97%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfree(cmdline);[52;87H[K[52;87H229,1[9C98%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H}[52;87H[K[52;87H230,1[9C98%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m [33m0[m;[52;87H[K[52;87H231,1[9C99%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[35;1H[46m{[51;1H}[m[52;87H[K[52;87H232,1[9CBot[51;1H[?25h[?25l[35;1H{[51;1H}[52;89H1[50;1H[?25h[?25l[52;89H0[49;1H[?25h[?25l[52;88H29[48;1H[?25h[?25l[52;89H8[47;1H[?25h[?25l[52;89H7[46;1H[?25h[?25l[52;89H6[45;1H[?25h[?25l[52;89H5[44;1H[?25h[?25l[52;89H4[43;1H[?25h[?25l[52;89H3,0-1[42;1H[?25h[?25l[52;89H2,1  [41;1H[?25h[?25l[52;89H1[40;1H[?25h[?25l[52;89H0,0-1[39;1H[?25h[?25l[52;88H19,1  [38;1H[?25h[?25l[52;89H8[37;1H[?25h[?25l[52;89H7[36;1H[?25h[?25l[35;1H[46m{[51;1H}[m[52;89H6[35;1H[?25h[?25l{[51;1H}[52;89H5[34;1H[?25h[?25l[52;89H4,0-1[33;1H[?25h[?25l[29;1H[46m{


}[m[52;89H3,1  [32;1H[?25h[?25l[29;1H{


}[52;89H2[31;1H[?25h[?25l[52;89H1[30;1H[?25h[?25l[29;1H[46m{


}[m[52;89H0[29;1H[?25h[?25l{


}[52;88H09[28;1H[?25h[?25l[52;89H8,0-1[27;1H[?25h[?25l[23;1H[46m{


}[m[52;89H7,1  [26;1H[?25h[?25l[23;1H{


}[52;89H6[25;1H[?25h[?25l[52;89H5[24;1H[?25h[?25l[23;1H[46m{


}[m[52;89H4[23;1H[?25h[?25l{


}[52;89H3[22;1H[?25h[?25l[52;89H2[21;1H[?25h[?25l[52;89H1[20;1H[?25h[?25l[52;89H0[19;1H[?25h[?25l[52;87H199[18;1H[?25h[?25l[52;89H8,0-1[17;1H[?25h[?25l[52;89H7[16;1H[?25h[?25l[10;1H[46m{[15;1H}[m[52;89H6,1  [15;1H[?25h[?25l[10;1H{[15;1H}[52;89H5[14;1H[?25h[?25l[52;89H4[13;1H[?25h[?25l[52;89H3[12;1H[?25h[?25l[52;89H4[13;1H[?25h[?25l[52;89H3[12;1H[?25h[?25l[52;89H2[11;1H[?25h[?25l[10;1H[46m{[15;1H}[m[52;89H1[10;1H[?25h[?25l{[15;1H}[52;89H0[9;1H[?25h[?25l[52;88H89,0-1[8;1H[?25h[?25l[2;1H[46m{[7;1H}[m[52;89H8,1  [7;1H[?25h[?25l[2;1H{[7;1H}[52;89H7[6;1H[?25h[?25l[52;89H6[5;1H[?25h[?25l[52;89H5[4;1H[?25h[?25l[52;89H4[3;1H[?25h[?25l[2;1H[46m{[7;1H}[m[52;89H3[2;1H[?25h[?25l{[7;1H}[52;89H2[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H181,0-1[7C99%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H180,1[9C98%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hfree(list);[52;87H[K[52;87H179,1[9C98%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5Hfree(*cp++);[52;87H[K[52;87H178,1[9C97%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mwhile[m( *cp )[52;87H[K[52;87H177,1[9C97%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  **cp = list;[52;87H[K[52;87H176,1[9C96%[1;1H[?25h[?25l[6;51r[6;1H[L[1;52r[1;1H[46m{[m[1;3H[K[2;3H[32mchar[m  **cp = list;
  [33mwhile[m( *cp )[3;15H[K[4;3H  free(*cp++);
  free(list);
[46m}[m[52;87H[K[52;87H175,1[9C96%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m
{[7;1H}[52;87H[K[52;87H174,1[9C95%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  action: free all strings in list and then free the list[m[52;87H[K[52;87H173,1[9C95%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: nothing[m[52;87H[K[52;87H172,1[9C94%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: free the list returned by splitline[m[52;87H[K[52;87H171,1[9C93%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H170,1[9C93%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mvoid[m freelist([32mchar[m **list)[52;87H[K[52;87H169,1[9C92%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H168,0-1[7C92%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H167,1[9C91%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mreturn[m rv;[52;87H[K[52;87H166,1[9C91%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hstrncpy(rv, s, l);[52;87H[K[52;87H165,1[9C90%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hrv[l] = [35m'\0'[m;[52;87H[K[52;87H164,1[9C90%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H163,0-1[7C89%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m *rv = emalloc(l+[33m1[m);[52;87H[K[52;87H162,1[9C88%[1;1H[?25h[?25l[7;51r[7;1H[L[1;52r[1;1H[46m{[m[1;3H[K[2;3H[32mchar[m *rv = emalloc(l+[33m1[m);[3;3H[K[4;3Hrv[l] = [35m'\0'[m;[4;16H[K[5;3Hstrncpy(rv, s, l);
  [33mreturn[m rv;
[46m}[m[52;87H[K[52;87H161,1[9C88%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)
{[8;1H}[52;87H[K[52;87H160,1[9C87%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H159,1[9C87%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: a string, never NULL[m[52;87H[K[52;87H158,1[9C86%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: constructor for strings[m[52;87H[K[52;87H157,1[9C86%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H156,1[9C85%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H155,0-1[7C85%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H154,1[9C84%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mreturn[m args;[52;87H[K[52;87H153,1[9C83%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hargs[argnum] = [33mNULL[m;[52;87H[K[52;87H152,1[9C83%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H}[52;87H[K[52;87H151,1[9C82%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7Hargs[argnum++] = newstr(start, len);[52;87H[K[52;87H150,1[9C82%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hlen++;[52;87H[K[52;87H149,1-8[7C81%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[52;87H[K[52;87H148,1[9C81%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7Hlen   = [33m1[m;[52;87H[K[52;87H147,1[9C80%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7Hstart = cp;[52;87H[K[52;87H146,1[9C80%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[36m/* mark start, then find end of word */[m[52;87H[K[52;87H145,1[9C79%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H144,0-1[7C79%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H}[52;87H[K[52;87H143,1[9C78%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[52;87H[K[52;87H142,1-8[7C77%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hbufspace += [33mBUFSIZ[m;[52;87H[K[52;87H141,1-8[7C77%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H140,1-8[7C76%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mif[m ( argnum+[33m1[m >= spots ){[52;87H[K[52;87H139,1[9C76%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[36m/* make sure the array has room (+1 for NULL) */[m[52;87H[K[52;87H138,1[9C75%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H137,0-1[7C75%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mbreak[m;[52;87H[K[52;87H136,1-8[7C74%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[52;87H[K[52;87H135,1[9C74%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hcp++;[52;87H[K[52;87H134,1-8[7C73%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[52;87H[K[52;87H133,1[9C72%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H{[52;87H[K[52;87H132,1[9C72%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mwhile[m( *cp != [35m'\0'[m )[52;87H[K[52;87H131,1[9C71%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H130,0-1[7C71%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[52;87H[K[52;87H129,1[9C70%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hbufspace = [33mBUFSIZ[m;[52;87H[K[52;87H128,1[9C70%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[52;87H[K[52;87H127,1[9C69%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H126,0-1[7C69%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H125,1[9C68%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[52;87H[K[52;87H124,1[9C67%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H123,0-1[7C67%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   len;[52;87H[K[52;87H122,1[9C66%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *start;[52;87H[K[52;87H121,1[9C66%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H120,1[9C65%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H119,1[9C65%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H118,1[9C64%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H117,1[9C64%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  **args ;[52;87H[K[52;87H116,1[9C63%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *newstr();[52;87H[K[52;87H115,1[9C62%[1;1H[?25h[?25l[41;51r[41;1H[L[1;52r[1;1H[46m{[m[1;3H[K[2;10Hnewstr();
  [32mchar[m  **args ;[3;17H[K[4;9Hspots = [33m0[m;   [22C[36mspot[m[5;9Hbufspace = [33m0[m;[22C[36mbytes in table[m
  [32mint[m   argnum = [33m0[m[25C[36mslots used   [m[7;10Hcp = line;[21C[36m/* pos in string        */[m
  [32mchar[m  *start;
  [32mint[m   len;[10;3H[K[11;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
    [33mreturn[m [33mNULL[m;[13;3H[K[14;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
  bufspace[9C;[15;21H[K[16;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;3H[K[18;3H[33mwhile[m( *cp != [35m'\0'[m )
    {[19;7H[K[20;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[21;7H  cp++;[21;14H[K[22;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[23;9H[33mbreak[m;[24;7H[K[25;7H[36m/* make sure the array has room (+1 for NULL) */[m[26;7H[33mif[m ( argnum+[33m1[m >= spots ){[26;32H[K[27;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;9Hbufspace += [33mBUFSIZ[m;[28;28H[K[29;7H  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;7H}[31;7H[K[32;7H[36m/* mark start, then find end of word */[m[33;7Hstart = cp;[34;7Hlen   = [33m1[m;[34;17H[K[35;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;7H  len++;[36;15H[K[37;5H  args[argnum++] = newstr(start, len);
    }[38;6H[K[39;3Hargs[argnum] = [33mNULL[m;
  [33mreturn[m args;
[46m}[m[52;87H[K[52;87H114,1[9C62%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m
{[42;1H}[52;87H[K[52;87H113,1[9C61%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H112,1[9C61%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H111,1[9C60%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H110,1[9C60%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H109,1[9C59%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H108,1[9C59%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H107,1[9C58%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H106,1[9C58%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H105,0-1[7C57%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H104,1[9C56%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **/[m[52;87H[K[52;87H103,1[9C56%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H102,1[9C55%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/**[m[52;87H[K[52;87H101,1[9C55%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H100,0-1[7C54%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H99,1[10C54%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[33mreturn[m buf;[52;87H[K[52;87H98,1-8[8C53%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H97,1-8[8C53%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[39C[36m/* say so               */[m[52;87H[K[52;87H96,1-8[8C52%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H95,1-8[8C51%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hfree(buf); [36m// maybe overkill but safe > sorry?[m[52;87H[K[52;87H94,1-8[8C51%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[52;87H[K[52;87H93,1-8[8C50%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H92,1-8[8C50%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hbuf[pos++] = c;[52;87H[K[52;87H91,1-8[8C49%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[36m/* no, add to buffer */[m[52;87H[K[52;87H90,1-8[8C49%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H89,0-1[8C48%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[52;87H[K[52;87H88,1-8[8C48%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[52;87H[K[52;87H87,1-8[8C47%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H}[52;87H[K[52;87H86,1-8[8C46%[1;8H[?25h[?25l[1;51r[1;1H[2L[1;52r[1;33Hfree(commands); [36m// not sure if needed but seems to ensure safety from mee[2;1Hmory leaks      [m[52;87H[K[52;87H85,1-8[8C46%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33H}[52;87H[K[52;87H84,1-8[8C45%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;41Hfree(commands[i]);[52;87H[K[52;87H83,1-8[8C45%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;41Hexecute(splitline(commands[i]));[52;87H[K[52;87H82,1-8[8C44%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33H[33mfor[m(i=[33m0[m; i< command_count; i++){[52;87H[K[52;87H81,1-8[8C43%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H80,1-8[8C43%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[32mint[m i;[52;87H[K[52;87H79,1-8[8C42%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H78,1-8[8C42%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H77,1-8[8C41%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H76,1-8[8C41%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hcommand_count = count_commands(commands);[52;87H[K[52;87H75,1-8[8C40%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hcommands - splitline(buf);[52;87H[K[52;87H74,1-8[8C40%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[36m//split the lines[m[52;87H[K[52;87H73,1-8[8C39%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H72,1-8[8C39%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H71,1-8[8C38%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[36m/* end of command? */[m[52;87H[K[52;87H70,1-8[8C37%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H69,0-1[8C37%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[52;87H[K[52;87H68,1-8[8C36%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H}[52;87H[K[52;87H67,1-8[8C36%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H66,1-8[8C35%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H65,1-8[8C35%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;26H[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H64,1[10C34%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33Hbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H63,1-8[8C34%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H62,1-8[8C33%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H61,1-8[8C32%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H60,1-8[8C32%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H59,1-8[8C31%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H58,0-1[8C31%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H57,0-1[8C30%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H56,1-8[8C30%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mint[m command_count = [33m0[m;[52;87H[K[52;87H55,1-8[8C29%[1;8H[?25h[?25l[1;51r[1;1H[2L[1;52r[1;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store tt[2;1Hhe commands[m[52;87H[K[52;87H54,1-8[8C28%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H53,1-8[8C28%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    c;[30C[36m/* input char           */[m[52;87H[K[52;87H52,1[10C27%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;87H[K[52;87H51,1-8[8C27%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[52;87H[K[52;87H50,1-8[8C26%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[52;87H[K[52;87H49,1-8[8C26%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H{[52;87H[K[52;87H48,1[10C25%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H47,1[10C25%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[52;87H[K[52;87H46,1[10C24%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          calls fatal from emalloc()[m[52;87H[K[52;87H45,1[10C24%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[52;87H[K[52;87H44,1[10C23%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: dynamically allocated string holding command line[m[52;87H[K[52;87H43,1[10C22%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: read next command line from fp[m[52;87H[K[52;87H42,1[10C22%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H41,1[10C21%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[52;87H[K[52;87H40,1[10C21%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H39,0-1[8C20%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H38,0-1[8C20%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H37,0-1[8C19%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[51;1H[34m@                                                                                                       [m[52;87H[K[52;87H36,0-1[8C19%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H35,1[10C18%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[52;87H[K[52;87H34,1[10C18%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[52;87H[K[52;87H33,1[10C17%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    [m[52;87H[K[52;87H32,1[10C17%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[52;87H[K[52;87H31,1[10C16%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H30,0-1[8C15%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H29,0-1[8C15%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H28,1[10C14%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mreturn[m count;[52;87H[K[52;87H27,1-8[8C14%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H}[52;87H[K[52;87H26,1-8[8C13%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hcmd++;[52;87H[K[52;87H25,1-8[8C13%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hcount++;[52;87H[K[52;87H24,1-8[8C12%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mwhile[m(*cmd != [33mNULL[m){[52;87H[K[52;87H23,1-8[8C12%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hcount = [33m0[m;[52;87H[K[52;87H22,1-8[8C11%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H21,0-1[8C10%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mchar[m** cmd = commands;[52;87H[K[52;87H20,1-8[8C10%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mint[m count;[52;87H[K[52;87H19,1-8[9C9%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mint[m count_commands([32mchar[m** commands){[52;87H[K[52;87H18,1[11C9%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H17,0-1[9C8%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#define DFL_PROMPT      [m[33m"> "[m[52;87H[K[52;87H16,1[11C8%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H15,0-1[9C7%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m"execute.c"[m[52;87H[K[52;87H14,1[11C7%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m"smsh.h"[m[52;87H[K[52;87H13,1[11C6%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<string.h>[m[52;87H[K[52;87H12,1[11C6%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<signal.h>[m[52;87H[K[52;87H11,1[11C5%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<unistd.h>[m[52;87H[K[52;87H10,1[11C4%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdlib.h>[m[52;87H[K[52;87H9,1[12C4%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdio.h>[m[52;87H[K[52;87H8,1[12C3%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H7,0-1[10C3%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **/[m[52;87H[K[52;87H6,1[12C2%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             uses fork, exec, wait, and ignores signals[m[52;87H[K[52;87H5,1[12C2%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             this one parses the command line into strings[m[51;1H[34m@                                                                                                       [m[52;87H[K[52;87H4,1[12C1%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             first really useful version after prompting shell[m[52;87H[K[52;87H3,1[12C1%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m  smsh1.c  small-shell version 1[m[52;87H[K[52;87H2,1[12C0%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m[52;87H[K[52;87H1,1[11CTop[1;1H[?25h[?25l[52;87H2[2;1H[?25h[?25l[52;87H3[3;1H[?25h[?25l[52;87H4[4;1H[?25h[?25l[52;87H5[5;1H[?25h[?25l[52;87H6[6;1H[?25h[?25l[52;87H7,0-1[7;1H[?25h[?25l[52;87H8,1  [8;1H[?25h[?25l[52;87H9[9;1H[?25h[?25l[52;87H10,1[10;1H[?25h[?25l[52;88H1[11;1H[?25h[?25l[52;88H2[12;1H[?25h[?25l[52;88H3[13;1H[?25h[?25l[52;88H4[14;1H[?25h[?25l[52;88H5,0-1[15;1H[?25h[?25l[52;88H6,1  [16;1H[?25h[?25l[52;88H7,0-1[17;1H[?25h[?25l[52;88H8,1  [18;1H[?25h[?25l[52;88H9,1-8[19;8H[?25h[?25l[52;87H20[20;8H[?25h[?25l[52;88H1,0-1[21;1H[?25h[?25l[52;88H2,1-8[22;8H[?25h[?25l[52;88H3[23;8H[?25h[?25l[52;88H4[24;8H[?25h[?25l[52;88H5[25;8H[?25h[?25l[52;88H6[26;8H[?25h[?25l[52;88H7[27;8H[?25h[?25l[18;36H[46m{[28;1H}[m[52;88H8,1  [28;1H[?25h[?25l[18;36H{[28;1H}[52;88H9,0-1[29;1H[?25h[?25l[52;87H30[30;1H[?25h[?25l[52;88H1,1  [31;1H[?25h[?25l[52;88H2[32;1H[?25h[?25l[52;88H3[33;1H[?25h[?25l[52;88H4[34;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H6,0-1[36;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H9[39;1H[?25h[?25l[52;87H40,1  [40;1H[?25h[?25l[52;88H1[41;1H[?25h[?25l[52;88H2[42;1H[?25h[?25l[52;88H3[43;1H[?25h[?25l[52;88H4[44;1H[?25h[?25l[52;88H5[45;1H[?25h[?25l[52;88H6[46;1H[?25h[?25l[52;88H7[47;1H[?25h[?25l[52;88H8[48;1H[?25h[?25l[52;88H9,1-8[49;8H[?25h[?25l[52;87H50[50;8H[?25h[?25l[52;88H1[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;10H[32mint[m    c;[30C[36m/* input char           */[m[52;87H[K[52;87H52,1[11C0%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H53,1-8[9C1%[51;8H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store tt[51;1Hhe commands[m[52;87H[K[52;87H54,1-8[9C2%[50;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[32mint[m command_count = [33m0[m;[52;87H[K[52;87H55,1-8[9C2%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H56,1-8[9C3%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H57,0-1[9C3%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H58,0-1[9C4%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H59,1-8[9C4%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H60,1-8[9C5%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H61,1-8[9C6%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H62,1-8[9C6%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H63,1-8[9C7%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;26H[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H64,1[11C7%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H65,1-8[9C8%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H66,1-8[9C8%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H67,1-8[9C9%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H68,1-8[9C9%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H69,0-1[8C10%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* end of command? */[m[52;87H[K[52;87H70,1-8[8C10%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H71,1-8[8C11%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H72,1-8[8C12%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//split the lines[m[52;87H[K[52;87H73,1-8[8C12%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommands - splitline(buf);[52;87H[K[52;87H74,1-8[8C13%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommand_count = count_commands(commands);[52;87H[K[52;87H75,1-8[8C13%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H76,1-8[8C14%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H77,1-8[8C14%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H78,1-8[8C15%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[32mint[m i;[52;87H[K[52;87H79,1-8[8C15%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H80,1-8[8C16%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33H[33mfor[m(i=[33m0[m; i< command_count; i++){[52;87H[K[52;87H81,1-8[8C17%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;41Hexecute(splitline(commands[i]));[52;87H[K[52;87H82,1-8[8C17%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;41Hfree(commands[i]);[52;87H[K[52;87H83,1-8[8C18%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33H}[52;87H[K[52;87H84,1-8[8C18%[51;8H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;33Hfree(commands); [36m// not sure if needed but seems to ensure safety from mee[51;1Hmory leaks      [m[52;87H[K[52;87H85,1-8[8C19%[50;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H86,1-8[8C20%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[52;87H[K[52;87H87,1-8[8C20%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H88,1-8[8C21%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H89,0-1[8C21%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* no, add to buffer */[m[52;87H[K[52;87H90,1-8[8C22%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos++] = c;[52;87H[K[52;87H91,1-8[8C22%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H92,1-8[8C23%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[52;87H[K[52;87H93,1-8[8C24%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hfree(buf); [36m// maybe overkill but safe > sorry?[m[52;87H[K[52;87H94,1-8[8C24%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H95,1-8[8C25%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[39C[36m/* say so               */[m[52;87H[K[52;87H96,1-8[8C25%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H97,1-8[8C26%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mreturn[m buf;[52;87H[K[52;87H98,1-8[8C26%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H}[52;87H[K[52;87H99,1[10C27%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H100,0-1[7C27%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/**[m[52;87H[K[52;87H101,1[9C28%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H102,1[9C28%[51;1H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;1H[36m **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H103,1[9C29%[50;1H[?25h[?25l[52;89H4[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H105,0-1[7C30%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H106,1[9C30%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H107,1[9C31%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H108,1[9C31%[51;1H[?25h[?25l[52;89H7[50;1H[?25h[?25l[52;89H6[49;1H[?25h[?25l[52;89H7[50;1H[?25h[?25l[52;89H8[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H109,1[9C32%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H110,1[9C32%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H111,1[9C33%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H112,1[9C34%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H113,1[9C34%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H114,1[9C35%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *newstr();[52;87H[K[52;87H115,1[9C35%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  **args ;[52;87H[K[52;87H116,1[9C36%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H117,1[9C36%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H118,1[9C37%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H119,1[9C37%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H120,1[9C38%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *start;[52;87H[K[52;87H121,1[9C39%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   len;[52;87H[K[52;87H122,1[9C39%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H123,0-1[7C40%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[52;87H[K[52;87H124,1[9C40%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H125,1[9C41%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H126,0-1[7C41%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[52;87H[K[52;87H127,1[9C42%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hbufspace = [33mBUFSIZ[m;[52;87H[K[52;87H128,1[9C42%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[52;87H[K[52;87H129,1[9C43%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H130,0-1[7C43%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mwhile[m( *cp != [35m'\0'[m )[52;87H[K[52;87H131,1[9C44%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H{[52;87H[K[52;87H132,1[9C45%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[52;87H[K[52;87H133,1[9C45%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hcp++;[52;87H[K[52;87H134,1-8[7C46%[51;8H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[51;9H[33mbreak[m;[52;87H[K[52;87H135,1[9C46%[50;1H[?25h[?25l[52;89H6,1-8[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H137,0-1[7C47%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[36m/* make sure the array has room (+1 for NULL) */[m[52;87H[K[52;87H138,1[9C48%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mif[m ( argnum+[33m1[m >= spots ){[52;87H[K[52;87H139,1[9C48%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H140,1-8[7C49%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hbufspace += [33mBUFSIZ[m;[52;87H[K[52;87H141,1-8[7C49%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[52;87H[K[52;87H142,1-8[7C50%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H}[52;87H[K[52;87H143,1[9C50%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H144,0-1[7C51%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[36m/* mark start, then find end of word */[m[52;87H[K[52;87H145,1[9C51%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hstart = cp;[52;87H[K[52;87H146,1[9C52%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hlen   = [33m1[m;[52;87H[K[52;87H147,1[9C53%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[52;87H[K[52;87H148,1[9C53%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hlen++;[52;87H[K[52;87H149,1-8[7C54%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hargs[argnum++] = newstr(start, len);[52;87H[K[52;87H150,1[9C54%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H}[52;87H[K[52;87H151,1[9C55%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hargs[argnum] = [33mNULL[m;[52;87H[K[52;87H152,1[9C55%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m args;[52;87H[K[52;87H153,1[9C56%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[11;1H[46m{[51;1H}[m[52;87H[K[52;87H154,1[9C56%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[10;1H{[50;1H}[52;87H[K[52;87H155,0-1[7C57%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H156,1[9C58%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: constructor for strings[m[52;87H[K[52;87H157,1[9C58%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a string, never NULL[m[52;87H[K[52;87H158,1[9C59%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H159,1[9C59%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[52;87H[K[52;87H160,1[9C60%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H161,1[9C60%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m *rv = emalloc(l+[33m1[m);[52;87H[K[52;87H162,1[9C61%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H163,0-1[7C61%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hrv[l] = [35m'\0'[m;[52;87H[K[52;87H164,1[9C62%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hstrncpy(rv, s, l);[52;87H[K[52;87H165,1[9C62%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m rv;[52;87H[K[52;87H166,1[9C63%[51;1H[?25h[?25l[52;89H5[50;1H[?25h[?25l[52;89H4[49;1H[?25h[?25l[52;89H3,0-1[48;1H[?25h[?25l[52;89H2,1  [47;1H[?25h[?25l[52;89H1[46;1H[?25h[?25l[52;89H0[45;1H[?25h[?25l[52;88H59[44;1H[?25h[?25l[52;89H8[43;1H[?25h[?25l[52;89H7[42;1H[?25h[?25l[52;89H6[41;1H[?25h[?25l[52;89H5,0-1[40;1H[?25h[?25l[52;89H4,1  [39;1H[?25h[?25l[52;89H3[38;1H[?25h[?25l[52;89H2[37;1H[?25h[?25l[52;89H1[36;1H[?25h[?25l[52;89H0[35;1H[?25h[52;87H[K[?25l[52;1H"help.txt" [readonly] 236L, 8819C[1;1H[1m[30m*[m[33mhelp.txt[m[1m[30m*[m      For [36mVim version 8.1.[m  Last change: 2019 Jan 17[2;3H[K[3;3H                      VIM - main help file[3;45H[K[4;3H                 [21C                          [7Ck
      Move around:  Use the cursor keys, or "h" to go left,            h   l
                    "j" to go down, "k" to go up, "l" to go right.[7Cj
Close this window:  Use ":q[35m<Enter>[m".
   Get out of Vim:  Use ":qa![35m<Enter>[m" (careful, all changes are lost!).[9;3H[K[10;1HJump to a subject:  Position the cursor on a tag (e.g. [1m[30m|[m[36mbars[m[1m[30m|[m) and hit [35mCTRL-][m.
   With the mouse:  ":set mouse=a" to enable the mouse (in xterm or GUI).
                    Double-click the left mouse button on a tag, e.g. [1m[30m|[m[36mbars[m[1m[30m|[m.
        Jump back:  Type [35mCTRL-O[m.  Repeat to go further back.[14;3H[K[15;1HGet specific help:  It is possible to go directly to whatever you want help
                    on, by giving an argument to the [1m[30m|[m[36m:help[m[1m[30m|[m command.
     [15CPrepend something to specify the context:  [1m[30m*[m[33mhelp-context[m[1m[30m*[m[18;7H[K[19;9H     [13C[35mWHAT                  PREPEND    EXAMPLE[m[1m[30m      ~[m[20;7H                Normal mode command                  :help x[21;9H      [8CVisual mode command[9Cv_[7C:help v_u[22;23HInsert mode command[9Ci_[7C:help i_[35m<Esc>[m[23;7H                Command-line command        :        :help :quit[24;7H                Command-line editing[8Cc_[7C:help c_[35m<Del>[m[25;9H              Vim command argument        -[8C:help -r
[1m[7mhelp.txt [Help][RO]                                                                   1,1            Top[m[27;9Hcp++;[27;15H[K[28;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[29;9H[33mbreak[m;[30;7H[K[31;7H[36m/* make sure the array has room (+1 for NULL) */[m[32;7H[33mif[m ( argnum+[33m1[m >= spots ){[33;7H  args = erealloc(args,bufspace+[33mBUFSIZ[m);[33;48H[K[34;9Hbufspace += [33mBUFSIZ[m;[35;7H  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[35;42H[K[36;5H  }[37;3H[K[38;3H    [36m/* mark start, then find end of word */[m
      start = cp;[40;7Hlen   = [33m1[m;
      [33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )
        len++;[42;15H[K[43;1H      args[argnum++] = newstr(start, len);
    }
  args[argnum] = [33mNULL[m;[45;23H[K[46;1H  [33mreturn[m args;
}[47;3H[K[49;1H[36m/*[m[49;3H[K[50;1H[36m * purpose: constructor for strings[m
[7msm2in.c                                                                               150,1          63%[1;1H[?25h[?25l[?25h[?25l[m[52;1H[K[52;1H:[?2004h[?25hq[?25l[?25h[?25l[?2004h[1;1H  [32mchar[m  **args ;[1;17H[K[2;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m
  [32mint[m   bufspace = [33m0[m;                   [36m/* bytes in table       */[m
  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[4;74H[K[5;3H[32mchar[m  *cp = line;                     [36m/* pos in string        */[m[5;72H[K[6;3H[32mchar[m  *start;[6;21H[K[7;1H  [32mint[m   len;[7;13H[K[8;4H[K[9;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
    [33mreturn[m [33mNULL[m;[10;17H[K[11;4H[K[12;3Hargs     = emalloc([33mBUFSIZ[m);           [36m/* initialize array     */[m[12;67H[K[13;3Hbufspace = [33mBUFSIZ[m;[13;21H[K[14;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[15;1H[K[16;3H[33mwhile[m( *cp != [35m'\0'[m )[16;23H[K[17;5H{[17;21H[K[18;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[19;9Hcp++;[19;27H[K[20;7H[33mif[m ( *cp == [35m'\0'[m )                [36m/* quit at end-o-string */[m[21;9H[33mbreak[m;[21;23H[K[22;23H[K[23;7H[36m/* make sure the array has room (+1 for NULL) */[m[23;60H[K[24;7H[33mif[m ( argnum+[33m1[m >= spots ){[24;32H[K[25;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[25;51H[K[26;1H        bufspace += [33mBUFSIZ[m;[26;28H[K[27;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[28;7H}[28;8H[K[29;9H[K[30;7H[36m/* mark start, then find end of word */[m[31;7Hstart = cp;[31;18H[K[32;7Hlen   = [33m1[m;[32;17H[K[33;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[34;9Hlen++;[34;15H[K[35;7Hargs[argnum++] = newstr(start, len);
    }[36;7H[K[37;3Hargs[argnum] = [33mNULL[m;
  [33mreturn[m args;[38;15H[K[39;1H}[39;7H[K[40;7H[K[41;1H[36m/*[m[41;7H[K[42;1H[36m * purpose: constructor for strings
 * returns: a string, never NULL[m[43;33H[K[44;1H[36m */[m[44;5H[K[45;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)
{[46;3H[K[47;1H  [32mchar[m *rv = emalloc(l+[33m1[m);

  rv[l] = [35m'\0'[m;
  strncpy(rv, s, l);[50;21H[K[51;1H  [33mreturn[m rv;[51;13H[K[52;87H150,1[9C63%[35;1H[?25h[?25l[52;89H1[36;1H[?25h[?25l[52;89H2[37;1H[?25h[?25l[52;89H3[38;1H[?25h[?25l[52;89H4[39;1H[?25h[?25l[52;89H5,0-1[40;1H[?25h[?25l[52;89H6,1  [41;1H[?25h[?25l[52;89H7[42;1H[?25h[?25l[52;89H8[43;1H[?25h[?25l[52;89H9[44;1H[?25h[?25l[52;88H60[45;1H[?25h[?25l[52;89H1[46;1H[?25h[?25l[52;89H2[47;1H[?25h[?25l[52;89H3,0-1[48;1H[?25h[?25l[52;89H4,1  [49;1H[?25h[?25l[52;89H5[50;1H[?25h[?25l[52;89H6[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H[46m{[51;1H}[m[52;1H[K[52;87H167,1[9C64%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[44;1H{[50;1H}[52;87H[K[52;87H168,0-1[7C64%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m freelist([32mchar[m **list)[52;87H[K[52;87H169,1[9C65%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H170,1[9C65%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: free the list returned by splitline[m[52;87H[K[52;87H171,1[9C66%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: nothing[m[52;87H[K[52;87H172,1[9C66%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: free all strings in list and then free the list[m[52;87H[K[52;87H173,1[9C67%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H174,1[9C67%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H175,1[9C68%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  **cp = list;[52;87H[K[52;87H176,1[9C69%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mwhile[m( *cp )[52;87H[K[52;87H177,1[9C69%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfree(*cp++);[52;87H[K[52;87H178,1[9C70%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hfree(list);[52;87H[K[52;87H179,1[9C70%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[46;1H[46m{[51;1H}[m[52;87H[K[52;87H180,1[9C71%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H{[50;1H}[52;87H[K[52;87H181,0-1[7C71%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m * emalloc([32msize_t[m n)[52;87H[K[52;87H182,1[9C72%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H183,1[9C72%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mvoid[m *rv ;[52;87H[K[52;87H184,1[9C73%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mif[m ( (rv = malloc(n)) == [33mNULL[m )[52;87H[K[52;87H185,1[9C74%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);[52;87H[K[52;87H186,1[9C74%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m rv;[52;87H[K[52;87H187,1[9C75%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[46;1H[46m{[51;1H}[m[52;87H[K[52;87H188,1[9C75%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H{[50;1H}[52;87H[K[52;87H189,0-1[7C76%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[52;87H[K[52;87H190,1[9C76%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H191,1[9C77%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mvoid[m *rv;[52;87H[K[52;87H192,1[9C77%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[52;87H[K[52;87H193,1[9C78%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[52;87H[K[52;87H194,1[9C79%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m rv;[52;87H[K[52;87H195,1[9C79%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[46;1H[46m{[51;1H}[m[52;87H[K[52;87H196,1[9C80%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[45;1H{[50;1H}[52;87H[K[52;87H197,0-1[7C80%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H198,0-1[7C81%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m setup()[52;87H[K[52;87H199,1[9C81%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H200,1[9C82%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: initialize shell[m[52;87H[K[52;87H201,1[9C82%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: nothing. calls fatal() if trouble[m[52;87H[K[52;87H202,1[9C83%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H203,1[9C83%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H204,1[9C84%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[52;87H[K[52;87H205,1[9C85%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[52;87H[K[52;87H206,1[9C85%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[48;1H[46m{


}[m[52;87H[K[52;87H207,1[9C86%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[47;1H{


}[52;87H[K[52;87H208,0-1[7C86%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[52;87H[K[52;87H209,1[9C87%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H210,1[9C87%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[52;87H[K[52;87H211,1[9C88%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hexit(n);[52;87H[K[52;87H212,1[9C88%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[48;1H[46m{


}[m[52;87H[K[52;87H213,1[9C89%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[47;1H{


}[52;87H[K[52;87H214,0-1[7C90%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mint[m main()[52;87H[K[52;87H215,1[9C90%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H216,1[9C91%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *cmdline, *prompt, **arglist;[52;87H[K[52;87H217,1[9C91%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   result;[52;87H[K[52;87H218,1[9C92%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mvoid[m  setup();[52;87H[K[52;87H219,1[9C92%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H220,0-1[7C93%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hprompt = DFL_PROMPT;[52;87H[K[52;87H221,1[9C93%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hsetup();[52;87H[K[52;87H222,1[9C94%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H223,0-1[7C95%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[52;87H[K[52;87H224,1[9C95%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[52;87H[K[52;87H225,1[9C96%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hresult = execute(arglist);[52;87H[K[52;87H226,1[9C96%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hfreelist(arglist);[52;87H[K[52;87H227,1[9C97%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H}[52;87H[K[52;87H228,1[9C97%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5Hfree(cmdline);[52;87H[K[52;87H229,1[9C98%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H}[52;87H[K[52;87H230,1[9C98%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m [33m0[m;[52;87H[K[52;87H231,1[9C99%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[35;1H[46m{[51;1H}[m[52;87H[K[52;87H232,1[9CBot[51;1H[?25h[?25l[35;1H{[51;1H}[52;89H1[50;1H[?25h[?25l[52;89H0[49;1H[?25h[?25l[52;88H29[48;1H[?25h[?25l[52;89H8[47;1H[?25h[?25l[52;89H7[46;1H[?25h[?25l[52;89H6[45;1H[?25h[?25l[52;89H5[44;1H[?25h[?25l[52;89H4[43;1H[?25h[?25l[52;89H3,0-1[42;1H[?25h[?25l[52;89H2,1  [41;1H[?25h[?25l[52;89H1[40;1H[?25h[?25l[52;89H0,0-1[39;1H[?25h[?25l[52;88H19,1  [38;1H[?25h[?25l[52;89H8[37;1H[?25h[?25l[52;89H7[36;1H[?25h[?25l[35;1H[46m{[51;1H}[m[52;89H6[35;1H[?25h[?25l{[51;1H}[52;89H5[34;1H[?25h[?25l[52;89H4,0-1[33;1H[?25h[?25l[29;1H[46m{


}[m[52;89H3,1  [32;1H[?25h[?25l[29;1H{


}[52;89H2[31;1H[?25h[?25l[52;89H1[30;1H[?25h[?25l[29;1H[46m{


}[m[52;89H0[29;1H[?25h[?25l{


}[52;88H09[28;1H[?25h[?25l[52;89H8,0-1[27;1H[?25h[?25l[23;1H[46m{


}[m[52;89H7,1  [26;1H[?25h[?25l[23;1H{


}[52;89H6[25;1H[?25h[?25l[52;89H5[24;1H[?25h[?25l[23;1H[46m{


}[m[52;89H4[23;1H[?25h[?25l{


}[52;89H3[22;1H[?25h[?25l[52;89H2[21;1H[?25h[?25l[52;89H1[20;1H[?25h[?25l[52;89H0[19;1H[?25h[?25l[52;87H199[18;1H[?25h[?25l[52;89H8,0-1[17;1H[?25h[?25l[52;89H7[16;1H[?25h[?25l[10;1H[46m{[15;1H}[m[52;89H6,1  [15;1H[?25h[?25l[10;1H{[15;1H}[52;89H5[14;1H[?25h[?25l[52;89H4[13;1H[?25h[?25l[52;89H3[12;1H[?25h[?25l[52;89H2[11;1H[?25h[?25l[10;1H[46m{[15;1H}[m[52;89H1[10;1H[?25h[?25l{[15;1H}[52;89H0[9;1H[?25h[?25l[52;88H89,0-1[8;1H[?25h[?25l[2;1H[46m{[7;1H}[m[52;89H8,1  [7;1H[?25h[?25l[2;1H{[7;1H}[52;89H7[6;1H[?25h[?25l[52;89H6[5;1H[?25h[?25l[52;89H5[4;1H[?25h[?25l[52;89H4[3;1H[?25h[?25l[2;1H[46m{[7;1H}[m[52;89H3[2;1H[?25h[?25l{[7;1H}[52;89H2[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H181,0-1[7C99%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H180,1[9C98%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hfree(list);[52;87H[K[52;87H179,1[9C98%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5Hfree(*cp++);[52;87H[K[52;87H178,1[9C97%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mwhile[m( *cp )[52;87H[K[52;87H177,1[9C97%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  **cp = list;[52;87H[K[52;87H176,1[9C96%[1;1H[?25h[?25l[6;51r[6;1H[L[1;52r[1;1H[46m{[m[1;3H[K[2;3H[32mchar[m  **cp = list;
  [33mwhile[m( *cp )[3;15H[K[4;3H  free(*cp++);
  free(list);
[46m}[m[52;87H[K[52;87H175,1[9C96%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m
{[7;1H}[52;87H[K[52;87H174,1[9C95%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  action: free all strings in list and then free the list[m[52;87H[K[52;87H173,1[9C95%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: nothing[m[52;87H[K[52;87H172,1[9C94%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: free the list returned by splitline[m[52;87H[K[52;87H171,1[9C93%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H170,1[9C93%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mvoid[m freelist([32mchar[m **list)[52;87H[K[52;87H169,1[9C92%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H168,0-1[7C92%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H167,1[9C91%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mreturn[m rv;[52;87H[K[52;87H166,1[9C91%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hstrncpy(rv, s, l);[52;87H[K[52;87H165,1[9C90%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hrv[l] = [35m'\0'[m;[52;87H[K[52;87H164,1[9C90%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H163,0-1[7C89%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m *rv = emalloc(l+[33m1[m);[52;87H[K[52;87H162,1[9C88%[1;1H[?25h[?25l[7;51r[7;1H[L[1;52r[1;1H[46m{[m[1;3H[K[2;3H[32mchar[m *rv = emalloc(l+[33m1[m);[3;3H[K[4;3Hrv[l] = [35m'\0'[m;[4;16H[K[5;3Hstrncpy(rv, s, l);
  [33mreturn[m rv;
[46m}[m[52;87H[K[52;87H161,1[9C88%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)
{[8;1H}[52;87H[K[52;87H160,1[9C87%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H159,1[9C87%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: a string, never NULL[m[52;87H[K[52;87H158,1[9C86%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: constructor for strings[m[52;87H[K[52;87H157,1[9C86%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H156,1[9C85%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H155,0-1[7C85%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H154,1[9C84%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mreturn[m args;[52;87H[K[52;87H153,1[9C83%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hargs[argnum] = [33mNULL[m;[52;87H[K[52;87H152,1[9C83%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H}[52;87H[K[52;87H151,1[9C82%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7Hargs[argnum++] = newstr(start, len);[52;87H[K[52;87H150,1[9C82%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hlen++;[52;87H[K[52;87H149,1-8[7C81%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[52;87H[K[52;87H148,1[9C81%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7Hlen   = [33m1[m;[52;87H[K[52;87H147,1[9C80%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7Hstart = cp;[52;87H[K[52;87H146,1[9C80%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[36m/* mark start, then find end of word */[m[52;87H[K[52;87H145,1[9C79%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H144,0-1[7C79%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H}[52;87H[K[52;87H143,1[9C78%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[52;87H[K[52;87H142,1-8[7C77%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hbufspace += [33mBUFSIZ[m;[52;87H[K[52;87H141,1-8[7C77%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H140,1-8[7C76%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mif[m ( argnum+[33m1[m >= spots ){[52;87H[K[52;87H139,1[9C76%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[36m/* make sure the array has room (+1 for NULL) */[m[52;87H[K[52;87H138,1[9C75%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H137,0-1[7C75%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mbreak[m;[52;87H[K[52;87H136,1-8[7C74%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[52;87H[K[52;87H135,1[9C74%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hcp++;[52;87H[K[52;87H134,1-8[7C73%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[52;87H[K[52;87H133,1[9C72%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H{[52;87H[K[52;87H132,1[9C72%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mwhile[m( *cp != [35m'\0'[m )[52;87H[K[52;87H131,1[9C71%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H130,0-1[7C71%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[52;87H[K[52;87H129,1[9C70%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hbufspace = [33mBUFSIZ[m;[52;87H[K[52;87H128,1[9C70%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[52;87H[K[52;87H127,1[9C69%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H126,0-1[7C69%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;5H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H125,1[9C68%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[52;87H[K[52;87H124,1[9C67%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H123,0-1[7C67%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   len;[52;87H[K[52;87H122,1[9C66%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *start;[52;87H[K[52;87H121,1[9C66%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H120,1[9C65%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H119,1[9C65%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H118,1[9C64%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H117,1[9C64%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  **args ;[52;87H[K[52;87H116,1[9C63%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *newstr();[52;87H[K[52;87H115,1[9C62%[1;1H[?25h[?25l[41;51r[41;1H[L[1;52r[1;1H[46m{[m[1;3H[K[2;10Hnewstr();
  [32mchar[m  **args ;[3;17H[K[4;9Hspots = [33m0[m;   [22C[36mspot[m[5;9Hbufspace = [33m0[m;[22C[36mbytes in table[m
  [32mint[m   argnum = [33m0[m[25C[36mslots used   [m[7;10Hcp = line;[21C[36m/* pos in string        */[m
  [32mchar[m  *start;
  [32mint[m   len;[10;3H[K[11;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
    [33mreturn[m [33mNULL[m;[13;3H[K[14;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
  bufspace[9C;[15;21H[K[16;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;3H[K[18;3H[33mwhile[m( *cp != [35m'\0'[m )
    {[19;7H[K[20;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[21;7H  cp++;[21;14H[K[22;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[23;9H[33mbreak[m;[24;7H[K[25;7H[36m/* make sure the array has room (+1 for NULL) */[m[26;7H[33mif[m ( argnum+[33m1[m >= spots ){[26;32H[K[27;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;9Hbufspace += [33mBUFSIZ[m;[28;28H[K[29;7H  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;7H}[31;7H[K[32;7H[36m/* mark start, then find end of word */[m[33;7Hstart = cp;[34;7Hlen   = [33m1[m;[34;17H[K[35;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;7H  len++;[36;15H[K[37;5H  args[argnum++] = newstr(start, len);
    }[38;6H[K[39;3Hargs[argnum] = [33mNULL[m;
  [33mreturn[m args;
[46m}[m[52;87H[K[52;87H114,1[9C62%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m
{[42;1H}[52;87H[K[52;87H113,1[9C61%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H112,1[9C61%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H111,1[9C60%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H110,1[9C60%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H109,1[9C59%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H108,1[9C59%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H107,1[9C58%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H106,1[9C58%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H105,0-1[7C57%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H104,1[9C56%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **/[m[52;87H[K[52;87H103,1[9C56%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H102,1[9C55%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/**[m[52;87H[K[52;87H101,1[9C55%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H100,0-1[7C54%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H99,1[10C54%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[33mreturn[m buf;[52;87H[K[52;87H98,1-8[8C53%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H97,1-8[8C53%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[39C[36m/* say so               */[m[52;87H[K[52;87H96,1-8[8C52%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H95,1-8[8C51%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hfree(buf); [36m// maybe overkill but safe > sorry?[m[52;87H[K[52;87H94,1-8[8C51%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[52;87H[K[52;87H93,1-8[8C50%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H92,1-8[8C50%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hbuf[pos++] = c;[52;87H[K[52;87H91,1-8[8C49%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[36m/* no, add to buffer */[m[52;87H[K[52;87H90,1-8[8C49%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H89,0-1[8C48%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[52;87H[K[52;87H88,1-8[8C48%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[52;87H[K[52;87H87,1-8[8C47%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H}[52;87H[K[52;87H86,1-8[8C46%[1;8H[?25h[?25l[1;51r[1;1H[2L[1;52r[1;33Hfree(commands); [36m// not sure if needed but seems to ensure safety from mee[2;1Hmory leaks      [m[52;87H[K[52;87H85,1-8[8C46%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33H}[52;87H[K[52;87H84,1-8[8C45%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;41Hfree(commands[i]);[52;87H[K[52;87H83,1-8[8C45%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;41Hexecute(splitline(commands[i]));[52;87H[K[52;87H82,1-8[8C44%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33H[33mfor[m(i=[33m0[m; i< command_count; i++){[52;87H[K[52;87H81,1-8[8C43%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H80,1-8[8C43%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[32mint[m i;[52;87H[K[52;87H79,1-8[8C42%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H78,1-8[8C42%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H77,1-8[8C41%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H76,1-8[8C41%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hcommand_count = count_commands(commands);[52;87H[K[52;87H75,1-8[8C40%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hcommands - splitline(buf);[52;87H[K[52;87H74,1-8[8C40%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[36m//split the lines[m[52;87H[K[52;87H73,1-8[8C39%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H72,1-8[8C39%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H71,1-8[8C38%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[36m/* end of command? */[m[52;87H[K[52;87H70,1-8[8C37%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H69,0-1[8C37%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[52;87H[K[52;87H68,1-8[8C36%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H}[52;87H[K[52;87H67,1-8[8C36%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H66,1-8[8C35%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H65,1-8[8C35%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;26H[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H64,1[10C34%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33Hbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H63,1-8[8C34%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H62,1-8[8C33%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H61,1-8[8C32%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H60,1-8[8C32%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H59,1-8[8C31%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H58,0-1[8C31%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H57,0-1[8C30%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H56,1-8[8C30%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mint[m command_count = [33m0[m;[52;87H[K[52;87H55,1-8[8C29%[1;8H[?25h[?25l[1;51r[1;1H[2L[1;52r[1;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store tt[2;1Hhe commands[m[52;87H[K[52;87H54,1-8[8C28%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H53,1-8[8C28%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    c;[30C[36m/* input char           */[m[52;87H[K[52;87H52,1[10C27%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;87H[K[52;87H51,1-8[8C27%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[52;87H[K[52;87H50,1-8[8C26%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[52;87H[K[52;87H49,1-8[8C26%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H{[52;87H[K[52;87H48,1[10C25%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H47,1[10C25%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[52;87H[K[52;87H46,1[10C24%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          calls fatal from emalloc()[m[52;87H[K[52;87H45,1[10C24%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[52;87H[K[52;87H44,1[10C23%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: dynamically allocated string holding command line[m[52;87H[K[52;87H43,1[10C22%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: read next command line from fp[m[52;87H[K[52;87H42,1[10C22%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H41,1[10C21%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[52;87H[K[52;87H40,1[10C21%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H39,0-1[8C20%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H38,0-1[8C20%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H37,0-1[8C19%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[51;1H[34m@                                                                                                       [m[52;87H[K[52;87H36,0-1[8C19%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H35,1[10C18%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[52;87H[K[52;87H34,1[10C18%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[52;87H[K[52;87H33,1[10C17%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    [m[52;87H[K[52;87H32,1[10C17%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[52;87H[K[52;87H31,1[10C16%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H30,0-1[8C15%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H29,0-1[8C15%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H28,1[10C14%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mreturn[m count;[52;87H[K[52;87H27,1-8[8C14%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H}[52;87H[K[52;87H26,1-8[8C13%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hcmd++;[52;87H[K[52;87H25,1-8[8C13%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hcount++;[52;87H[K[52;87H24,1-8[8C12%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mwhile[m(*cmd != [33mNULL[m){[52;87H[K[52;87H23,1-8[8C12%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9Hcount = [33m0[m;[52;87H[K[52;87H22,1-8[8C11%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H21,0-1[8C10%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mchar[m** cmd = commands;[52;87H[K[52;87H20,1-8[8C10%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mint[m count;[52;87H[K[52;87H19,1-8[9C9%[1;8H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mint[m count_commands([32mchar[m** commands){[52;87H[K[52;87H18,1[11C9%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H17,0-1[9C8%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#define DFL_PROMPT      [m[33m"> "[m[52;87H[K[52;87H16,1[11C8%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H15,0-1[9C7%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m"execute.c"[m[52;87H[K[52;87H14,1[11C7%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m"smsh.h"[m[52;87H[K[52;87H13,1[11C6%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<string.h>[m[52;87H[K[52;87H12,1[11C6%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<signal.h>[m[52;87H[K[52;87H11,1[11C5%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<unistd.h>[m[52;87H[K[52;87H10,1[11C4%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdlib.h>[m[52;87H[K[52;87H9,1[12C4%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#include [m[33m<stdio.h>[m[52;87H[K[52;87H8,1[12C3%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H7,0-1[10C3%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **/[m[52;87H[K[52;87H6,1[12C2%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             uses fork, exec, wait, and ignores signals[m[52;87H[K[52;87H5,1[12C2%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             this one parses the command line into strings[m[51;1H[34m@                                                                                                       [m[52;87H[K[52;87H4,1[12C1%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m **             first really useful version after prompting shell[m[52;87H[K[52;87H3,1[12C1%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m  smsh1.c  small-shell version 1[m[52;87H[K[52;87H2,1[12C0%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m[52;87H[K[52;87H1,1[11CTop[1;1H[?25h[?25l[52;87H2[2;1H[?25h[?25l[52;87H3[3;1H[?25h[?25l[52;87H4[4;1H[?25h[?25l[52;87H5[5;1H[?25h[?25l[52;87H6[6;1H[?25h[?25l[52;87H7,0-1[7;1H[?25h[?25l[52;87H8,1  [8;1H[?25h[?25l[52;87H9[9;1H[?25h[?25l[52;87H10,1[10;1H[?25h[?25l[52;88H1[11;1H[?25h[?25l[52;88H2[12;1H[?25h[?25l[52;88H3[13;1H[?25h[?25l[52;88H4[14;1H[?25h[?25l[52;88H5,0-1[15;1H[?25h[?25l[52;88H6,1  [16;1H[?25h[?25l[52;88H7,0-1[17;1H[?25h[?25l[52;88H8,1  [18;1H[?25h[?25l[52;88H9,1-8[19;8H[?25h[?25l[52;87H20[20;8H[?25h[?25l[52;88H1,0-1[21;1H[?25h[?25l[52;88H2,1-8[22;8H[?25h[?25l[52;88H3[23;8H[?25h[?25l[52;88H4[24;8H[?25h[?25l[52;88H5[25;8H[?25h[?25l[52;88H6[26;8H[?25h[?25l[52;88H7[27;8H[?25h[?25l[18;36H[46m{[28;1H}[m[52;88H8,1  [28;1H[?25h[?25l[18;36H{[28;1H}[52;88H9,0-1[29;1H[?25h[?25l[52;87H30[30;1H[?25h[?25l[52;88H1,1  [31;1H[?25h[?25l[52;88H2[32;1H[?25h[?25l[52;88H3[33;1H[?25h[?25l[52;88H4[34;1H[?25h[?25l[52;88H5[35;1H[?25h[?25l[52;88H6,0-1[36;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H9[39;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H9[39;1H[?25h[?25l[52;87H40,1  [40;1H[?25h[?25l[52;88H1[41;1H[?25h[?25l[52;88H2[42;1H[?25h[?25l[52;88H3[43;1H[?25h[?25l[52;88H4[44;1H[?25h[?25l[52;88H5[45;1H[?25h[?25l[52;88H6[46;1H[?25h[?25l[52;88H7[47;1H[?25h[?25l[52;88H8[48;1H[?25h[?25l[52;88H9,1-8[49;8H[?25h[?25l[52;87H50[50;8H[?25h[?25l[52;88H1[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;10H[32mint[m    c;[30C[36m/* input char           */[m[52;87H[K[52;87H52,1[11C0%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H53,1-8[9C1%[51;8H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store tt[51;1Hhe commands[m[52;87H[K[52;87H54,1-8[9C2%[50;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[32mint[m command_count = [33m0[m;[52;87H[K[52;87H55,1-8[9C2%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H56,1-8[9C3%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H57,0-1[9C3%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H58,0-1[9C4%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H59,1-8[9C4%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H60,1-8[9C5%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H61,1-8[9C6%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H62,1-8[9C6%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H63,1-8[9C7%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;26H[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H64,1[11C7%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H65,1-8[9C8%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H66,1-8[9C8%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H67,1-8[9C9%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H68,1-8[9C9%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H69,0-1[8C10%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* end of command? */[m[52;87H[K[52;87H70,1-8[8C10%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H71,1-8[8C11%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H72,1-8[8C12%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//split the lines[m[52;87H[K[52;87H73,1-8[8C12%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommands - splitline(buf);[52;87H[K[52;87H74,1-8[8C13%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommand_count = count_commands(commands);[52;87H[K[52;87H75,1-8[8C13%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H76,1-8[8C14%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H77,1-8[8C14%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H78,1-8[8C15%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[32mint[m i;[52;87H[K[52;87H79,1-8[8C15%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H80,1-8[8C16%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33H[33mfor[m(i=[33m0[m; i< command_count; i++){[52;87H[K[52;87H81,1-8[8C17%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;41Hexecute(splitline(commands[i]));[52;87H[K[52;87H82,1-8[8C17%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;41Hfree(commands[i]);[52;87H[K[52;87H83,1-8[8C18%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;33H}[52;87H[K[52;87H84,1-8[8C18%[51;8H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;33Hfree(commands); [36m// not sure if needed but seems to ensure safety from mee[51;1Hmory leaks      [m[52;87H[K[52;87H85,1-8[8C19%[50;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H86,1-8[8C20%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[52;87H[K[52;87H87,1-8[8C20%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H88,1-8[8C21%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H89,0-1[8C21%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* no, add to buffer */[m[52;87H[K[52;87H90,1-8[8C22%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos++] = c;[52;87H[K[52;87H91,1-8[8C22%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H92,1-8[8C23%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[52;87H[K[52;87H93,1-8[8C24%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hfree(buf); [36m// maybe overkill but safe > sorry?[m[52;87H[K[52;87H94,1-8[8C24%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H95,1-8[8C25%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[39C[36m/* say so               */[m[52;87H[K[52;87H96,1-8[8C25%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H97,1-8[8C26%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mreturn[m buf;[52;87H[K[52;87H98,1-8[8C26%[51;8H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H}[52;87H[K[52;87H99,1[10C27%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H100,0-1[7C27%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/**[m[52;87H[K[52;87H101,1[9C28%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H102,1[9C28%[51;1H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;1H[36m **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H103,1[9C29%[50;1H[?25h[?25l[52;89H4[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H105,0-1[7C30%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H106,1[9C30%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H107,1[9C31%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H108,1[9C31%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H109,1[9C32%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H110,1[9C32%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H111,1[9C33%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H112,1[9C34%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H113,1[9C34%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H114,1[9C35%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *newstr();[52;87H[K[52;87H115,1[9C35%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  **args ;[52;87H[K[52;87H116,1[9C36%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H117,1[9C36%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H118,1[9C37%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H119,1[9C37%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H120,1[9C38%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *start;[52;87H[K[52;87H121,1[9C39%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   len;[52;87H[K[52;87H122,1[9C39%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H123,0-1[7C40%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[52;87H[K[52;87H124,1[9C40%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H125,1[9C41%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H126,0-1[7C41%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[52;87H[K[52;87H127,1[9C42%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hbufspace = [33mBUFSIZ[m;[52;87H[K[52;87H128,1[9C42%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[52;87H[K[52;87H129,1[9C43%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H130,0-1[7C43%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mwhile[m( *cp != [35m'\0'[m )[52;87H[K[52;87H131,1[9C44%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H{[52;87H[K[52;87H132,1[9C45%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[52;87H[K[52;87H133,1[9C45%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hcp++;[52;87H[K[52;87H134,1-8[7C46%[51;8H[?25h[?25l[52;89H3,1  [50;1H[?25h[?25l[52;89H2[49;1H[?25h[?25l[52;89H1[48;1H[?25h[?25l[52;89H0,0-1[47;1H[?25h[?25l[52;88H29,1  [46;1H[?25h[?25l[52;89H8[45;1H[?25h[?25l[52;89H7[44;1H[?25h[?25l[52;89H6,0-1[43;1H[?25h[?25l[52;89H5,1  [42;1H[?25h[?25l[52;89H4[41;1H[?25h[?25l[52;89H3,0-1[40;1H[?25h[?25l[52;89H2,1  [39;1H[?25h[?25l[52;89H1[38;1H[?25h[?25l[52;89H0[37;1H[?25h[?25l[52;88H19[36;1H[?25h[?25l[52;89H8[35;1H[?25h[?25l[52;89H7[34;1H[?25h[?25l[52;89H6[33;1H[?25h[?25l[52;89H5[32;1H[?25h[?25l[52;89H4[31;1H[?25h[?25l[52;89H3[30;1H[?25h[?25l[52;89H2[29;1H[?25h[?25l[52;89H1[28;1H[?25h[?25l[52;89H0[27;1H[?25h[?25l[52;88H09[26;1H[?25h[?25l[52;89H8[25;1H[?25h[?25l[52;89H7[24;1H[?25h[?25l[52;89H6[23;1H[?25h[?25l[52;89H5,0-1[22;1H[?25h[?25l[52;87H[K[52;1H/[?2004h[?25h/[?25l[?25h[?25l[52;1H[K[52;87H105,0-1[7C46%[22;1H[?25h[?25l[21;21H[35m[46m([19C)[m[52;89H4,41 [21;41H[?25h[?25l[21;21H[35m([19C)[m[52;92H0[21;40H[?25h[?25l[52;89H5,0-1[22;1H[?25h[?25l[52;1H[33m-- INSERT --[m[52;87H[K[52;87H105,1[9C46%[22;1H[?25h[?25li[52;91H2[22;2H[?25h[?25l[22;1H[K[52;91H1[22;1H[?25h[?25l/[52;91H2[22;2H[?25h[?25l[36m//[m[52;91H3[22;3H[?25h[?25l[23;51r[23;1H[L[1;52r[52;87H[K[52;87H106,1[9C45%[23;1H[?25h[?25l[52;89H5[22;1H[?25h[?25l[23;51r[23;1H[L[1;52r[22;1H[K[23;1H[36m//[m[52;87H[K[52;87H106,1[9C45%[23;1H[?25h[?25l[52;89H7[24;1H[?25h[?25l[52;89H6[23;1H[?25h[?25l[52;91H2[23;2H[?25h[?25l[52;91H3[23;3H[?25h[?25l[36mn[m[52;91H4[23;4H[?25h[?25l[36me[m[52;91H5[23;5H[?25h[?25l[36me[m[52;91H6[23;6H[?25h[?25l[36md[m[52;91H7[23;7H[?25h[?25l[36m [m[52;91H8[23;8H[?25h[?25l[36mt[m[52;91H9[23;9H[?25h[?25l[36mo[m[52;91H10[23;10H[?25h[?25l[36m [m[52;92H1[23;11H[?25h[?25l[36ma[m[52;92H2[23;12H[?25h[?25l[36md[m[52;92H3[23;13H[?25h[?25l[36md[m[52;92H4[23;14H[?25h[?25l[36m [m[52;92H5[23;15H[?25h[?25l[36ma[m[52;92H6[23;16H[?25h[?25l[36mf[m[52;92H7[23;17H[?25h[?25l[36mu[m[52;92H8[23;18H[?25h[?25l[36mn[m[52;92H9[23;19H[?25h[?25l[36mc[m[52;91H20[23;20H[?25h[?25l[23;19H[K[52;91H19[23;19H[?25h[?25l[23;18H[K[52;92H8[23;18H[?25h[?25l[23;17H[K[52;92H7[23;17H[?25h[?25l[23;16H[K[52;92H6[23;16H[?25h[?25l[36m [m[52;92H7[23;17H[?25h[?25l[36ma[m[52;92H8[23;18H[?25h[?25l[36m [m[52;92H9[23;19H[?25h[?25l[36mf[m[52;91H20[23;20H[?25h[?25l[36mu[m[52;92H1[23;21H[?25h[?25l[36mn[m[52;92H2[23;22H[?25h[?25l[36mc[m[52;92H3[23;23H[?25h[?25l[36mt[m[52;92H4[23;24H[?25h[?25l[36mi[m[52;92H5[23;25H[?25h[?25l[36mo[m[52;92H6[23;26H[?25h[?25l[36mn[m[52;92H7[23;27H[?25h[?25l[36m [m[52;92H8[23;28H[?25h[?25l[36mt[m[52;92H9[23;29H[?25h[?25l[36mo[m[52;91H30[23;30H[?25h[?25l[36m [m[52;92H1[23;31H[?25h[?25l[36ms[m[52;92H2[23;32H[?25h[?25l[36mp[m[52;92H3[23;33H[?25h[?25l[36ml[m[52;92H4[23;34H[?25h[?25l[36mi[m[52;92H5[23;35H[?25h[?25l[36mt[m[52;92H6[23;36H[?25h[?25l[36m [m[52;92H7[23;37H[?25h[?25l[36mt[m[52;92H8[23;38H[?25h[?25l[36mh[m[52;92H9[23;39H[?25h[?25l[36me[m[52;91H40[23;40H[?25h[?25l[36m [m[52;92H1[23;41H[?25h[?25l[36ml[m[52;92H2[23;42H[?25h[?25l[36mi[m[52;92H3[23;43H[?25h[?25l[36mn[m[52;92H4[23;44H[?25h[?25l[36me[m[52;92H5[23;45H[?25h[?25l[36m [m[52;92H6[23;46H[?25h[?25l[36mi[m[52;92H7[23;47H[?25h[?25l[36mn[m[52;92H8[23;48H[?25h[?25l[36mt[m[52;92H9[23;49H[?25h[?25l[36mo[m[52;91H50[23;50H[?25h[?25l[36m [m[52;92H1[23;51H[?25h[?25l[36ma[m[52;92H2[23;52H[?25h[?25l[36mr[m[52;92H3[23;53H[?25h[?25l[36mg[m[52;92H4[23;54H[?25h[?25l[36mu[m[52;92H5[23;55H[?25h[?25l[36mm[m[52;92H6[23;56H[?25h[?25l[36me[m[52;92H7[23;57H[?25h[?25l[36mn[m[52;92H8[23;58H[?25h[?25l[36mt[m[52;92H9[23;59H[?25h[?25l[36ms[m[52;91H60[23;60H[?25h[?25l[36m [m[52;92H1[23;61H[?25h[?25l[36mw[m[52;92H2[23;62H[?25h[?25l[36mi[m[52;92H3[23;63H[?25h[?25l[36mt[m[52;92H4[23;64H[?25h[?25l[36mh[m[52;92H5[23;65H[?25h[?25l[36ma[m[52;92H6[23;66H[?25h[?25l[36m [m[52;92H7[23;67H[?25h[?25l[36ms[m[52;92H8[23;68H[?25h[?25l[23;67H[K[52;92H7[23;67H[?25h[?25l[23;66H[K[52;92H6[23;66H[?25h[?25l[23;65H[K[52;92H5[23;65H[?25h[?25l[36m [m[52;92H6[23;66H[?25h[?25l[36ma[m[52;92H7[23;67H[?25h[?25l[36m [m[52;92H8[23;68H[?25h[?25l[36ms[m[52;92H9[23;69H[?25h[?25l[36me[m[52;91H70[23;70H[?25h[?25l[36mp[m[52;92H1[23;71H[?25h[?25l[36me[m[52;92H2[23;72H[?25h[?25l[36mr[m[52;92H3[23;73H[?25h[?25l[36ma[m[52;92H4[23;74H[?25h[?25l[36mt[m[52;92H5[23;75H[?25h[?25l[36mo[m[52;92H6[23;76H[?25h[?25l[36mi[m[52;92H7[23;77H[?25h[?25l[36mr[m[52;92H8[23;78H[?25h[?25l[23;77H[K[52;92H7[23;77H[?25h[?25l[23;76H[K[52;92H6[23;76H[?25h[?25l[36mr[m[52;92H7[23;77H[?25h[?25l[36m [m[52;92H8[23;78H[?25h[?25l[36m*[m[52;92H9[23;79H[?25h[?25l[36ma[m[52;91H80[23;80H[?25h[?25l[36my[m[52;92H1[23;81H[?25h[?25l[36mb[m[52;92H2[23;82H[?25h[?25l[36me[m[52;92H3[23;83H[?25h[?25l[23;82H[K[52;92H2[23;82H[?25h[?25l[23;81H[K[52;92H1[23;81H[?25h[?25l[23;80H[K[52;92H0[23;80H[?25h[?25l[23;79H[K[52;91H79[23;79H[?25h[?25l[23;78H[K[52;92H8[23;78H[?25h[?25l[36m*[m[52;92H9[23;79H[?25h[?25l[23;78H[K[52;92H8[23;78H[?25h[?25l[36m([m[52;92H9[23;79H[?25h[?25l[36mm[m[52;91H80[23;80H[?25h[?25l[36ma[m[52;92H1[23;81H[?25h[?25l[36my[m[52;92H2[23;82H[?25h[?25l[36mb[m[52;92H3[23;83H[?25h[?25l[36me[m[52;92H4[23;84H[?25h[?25l[36m [m[52;92H5[23;85H[?25h[?25l[36m'[m[52;92H6[23;86H[?25h[?25l[23;85H[K[52;92H5[23;85H[?25h[?25l[36m'[m[52;92H6[23;86H[?25h[?25l[36m:[m[52;92H7[23;87H[?25h[?25l[36m'[m[52;92H8[23;88H[?25h[?25l[36m [m[52;92H9[23;89H[?25h[?25l[36m?[m[52;91H90[23;90H[?25h[?25l[23;89H[K[52;91H89[23;89H[?25h[?25l[23;88H[K[52;92H8[23;88H[?25h[?25l[36m?[m[52;92H9[23;89H[?25h[?25l[36m)[m[23;78H[36m[46m([10C)[m[52;91H90[23;90H[?25h[?25l[23;78H[36m([10C)[m[52;89H7,1 [24;1H[?25h[?25l[25;18H[46m([10C)[m[52;89H8,30[25;30H[?25h[?25l[25;18H([10C)[52;89H9,3 [26;3H[?25h[?25l[52;88H10,68[27;68H[?25h[?25l[52;89H1,72[28;72H[?25h[?25l[52;89H2,53[29;53H[?25h[?25l[52;89H3,60[30;60H[?25h[?25l[52;89H4,69[31;69H[?25h[?25l[52;89H5,4 [32;4H[?25h[?25l[52;89H6,2[33;2H[?25h[?25l[52;89H7,18-19[34;19H[?25h[?25l[52;89H8,16-17[35;17H[?25h[?25l[52;89H9,40-6[36;67H[?25h[?25l[52;88H20,43[37;67H[?25h[?25l[52;89H1,38[38;67H[?25h[?25l[52;89H2,41[39;67H[?25h[?25l[52;89H3,15-16[40;16H[?25h[?25l[52;89H4,11-13[41;13H[?25h[?25l[52;89H5,1    [42;1H[?25h[?25l[52;89H6,50-67[43;67H[?25h[?25l[52;89H7,17   [44;17H[?25h[?25l[52;89H8,1 [45;1H[?25h[?25l[52;89H9,54-67[46;67H[?25h[?25l[52;88H30,21   [47;21H[?25h[?25l[52;89H1,36[48;36H[?25h[?25l[52;89H2,1 [49;1H[?25h[?25l[50;8H[46m([13C)[m[52;89H3,23[50;23H[?25h[?25l[50;8H([13C)[52;89H4,6 [51;6H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[51;9Hcp++;[52;87H[K[52;87H135,57-67     46%[50;67H[?25h[?25l[52;89H6,7-14 [51;14H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[52;87H[K[52;87H137,53-67     46%[51;67H[?25h[?25l[1;51r[51;1H
[1;52r[51;9H[33mbreak[m;[52;87H[K[52;87H138,8-15      47%[51;15H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H139,1[9C48%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[36m/* make sure the array has room (+1 for NULL) */[m[52;87H[K[52;87H140,55[8C48%[51;55H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mif[m ( argnum+[33m1[m >= spots ){[52;87H[K[52;87H141,32[8C49%[51;32H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H142,40-47     49%[51;47H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hbufspace += [33mBUFSIZ[m;[52;87H[K[52;87H143,21-28     50%[51;28H[?25h[?25l[1;51r[51;1H
[1;52r[51;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[52;87H[K[52;87H144,35-42     50%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H}[52;87H[K[52;87H145,8[9C51%[47;31H[46m{[51;7H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H146,1[9C51%[46;31H{[50;7H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[36m/* mark start, then find end of word */[m[52;87H[K[52;87H147,46[8C52%[51;46H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hstart = cp;[52;87H[K[52;87H148,18[8C53%[51;18H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hlen   = [33m1[m;[52;87H[K[52;87H149,17[8C53%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[52;87H[K[52;87H150,49[8C54%[51;13H[46m([34C)[?25h[?25l[1;51r[m[51;1H
[1;52r[51;9Hlen++;[52;87H[K[52;87H151,8-15      54%[50;13H([34C)[51;15H[?25h[?25l[1;51r[51;1H
[1;52r[51;7Hargs[argnum++] = newstr(start, len);[52;87H[K[52;87H152,43[8C55%[51;43H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H}[52;87H[K[52;87H153,6[9C55%[32;5H[46m{[51;5H}[?25h[?25l[1;51r[m[51;1H
[1;52r[51;3Hargs[argnum] = [33mNULL[m;[52;87H[K[52;87H154,23[8C56%[31;5H{[50;5H}[51;23H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m args;[52;87H[K[52;87H155,15[8C56%[51;15H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H}[52;87H[K[52;87H156,2[9C57%[11;1H[46m{[51;1H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H157,1[9C57%[10;1H{[50;1H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H158,3[9C58%[51;3H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: constructor for strings[m[52;87H[K[52;87H159,36[8C59%[51;36H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a string, never NULL[m[52;87H[K[52;87H160,33[8C59%[51;33H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H161,4[9C60%[51;4H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[52;87H[K[52;87H162,29[8C60%[51;13H[46m([14C)[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H{[52;87H[K[52;87H163,2[9C61%[50;13H([14C)
{[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m *rv = emalloc(l+[33m1[m);[52;87H[K[52;87H164,27[8C61%[51;27H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H165,1[9C62%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hrv[l] = [35m'\0'[m;[52;87H[K[52;87H166,16[8C62%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hstrncpy(rv, s, l);[52;87H[K[52;87H167,21[8C63%[51;21H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mreturn[m rv;[52;87H[K[52;87H168,13[8C63%[51;13H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H}[52;87H[K[52;87H169,2[9C64%[45;1H[46m{[51;1H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H170,1[9C65%[44;1H{[50;1H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mvoid[m freelist([32mchar[m **list)[52;87H[K[52;87H171,27[8C65%[51;14H[46m([11C)[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H172,3[9C66%[50;14H([11C)[51;3H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: free the list returned by splitline[m[52;87H[K[52;87H173,48[8C66%[51;48H[?25h[?25l[52;89H2,3 [50;3H[?25h[?25l[49;14H[46m([11C)[m[52;89H1,27[49;27H[?25h[?25l[49;14H([11C)[52;89H0,1 [48;1H[?25h[?25l[41;1H[46m{[47;1H}[m[52;88H69,2[47;2H[?25h[?25l[41;1H{[47;1H}[52;89H8,13[46;13H[?25h[?25l[52;89H7,21[45;21H[?25h[?25l[52;89H6,16[44;16H[?25h[?25l[52;89H5,1 [43;1H[?25h[?25l[52;89H4,27[42;27H[?25h[?25l[41;1H[46m{[47;1H}[m[52;89H3,2 [41;2H[?25h[?25l[40;13H[46m([14C)[m
{[47;1H}[52;89H2,29[40;29H[?25h[?25l[40;13H([14C)[52;89H1,4 [39;4H[?25h[?25l[52;89H0,33[38;33H[?25h[?25l[52;88H59,36[37;36H[?25h[?25l[52;89H8,3 [36;3H[?25h[?25l[52;89H7,1[35;1H[?25h[?25l[52;89H6,2[34;2H[?25h[?25l[52;89H5,15[33;15H[?25h[?25l[52;89H4,23[32;23H[?25h[?25l[12;5H[46m{[31;5H}[m[52;89H3,6 [31;6H[?25h[?25l[12;5H{[31;5H}[52;89H2,43[30;43H[?25h[?25l[52;89H1,8-15[29;15H[?25h[?25l[28;13H[46m([34C)[m[52;89H0,49  [28;49H[?25h[?25l[28;13H([34C)[52;88H49,17[27;17H[?25h[?25l[52;89H8,18[26;18H[?25h[?25l[52;89H7,46[25;46H[?25h[?25l[52;89H6,1 [24;1H[?25h[?25l[19;31H[46m{[23;7H}[m[52;89H5,8[23;8H[?25h[?25l[19;31H{[23;7H}[52;89H4,35-42[22;42H[?25h[?25l[52;89H3,21-28[21;28H[?25h[?25l[52;89H2,40-47[20;47H[?25h[?25l[19;31H[46m{[23;7H}[m[52;89H1,32   [19;32H[?25h[?25l{[23;7H}[52;89H0,55[18;55H[?25h[?25l[52;88H39,1 [17;1H[?25h[?25l[52;89H8,8-15[16;15H[?25h[?25l[52;89H7,53-67[15;67H[?25h[?25l[52;89H6,7-14 [14;14H[?25h[?25l[52;89H5,57-67[13;67H[?25h[?25l[12;5H[46m{[31;5H}[m[52;89H4,6    [12;6H[?25h[?25l[11;8H[46m([13C)[m
    {[31;5H}[52;89H3,23[11;23H[?25h[?25l[11;8H([13C)[52;89H2,1 [10;1H[?25h[?25l[52;89H1,36[9;36H[?25h[?25l[52;89H0,21[8;21H[?25h[?25l[52;88H29,54-67[7;67H[?25h[?25l[52;89H8,1    [6;1H[?25h[?25l[52;89H7,17[5;17H[?25h[?25l[52;89H6,50-67[4;67H[?25h[?25l[52;89H5,1    [3;1H[?25h[?25l[52;89H4,11-13[2;13H[?25h[?25l[52;89H3,15-16[1;16H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H122,41-67     66%[1;67H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H121,38-67     65%[1;67H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[52;87H[K[52;87H120,43-67     65%[1;67H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H119,40-67     64%[1;67H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  **args ;[52;87H[K[52;87H118,16-17     63%[1;17H[?25h[?25l[1;51r[1;1H[L[1;52r[1;3H[32mchar[m  *newstr();[52;87H[K[52;87H117,18-19     63%[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H{[52;87H[K[52;87H116,2[9C62%[1;1H[46m{[41;1H}[1;2H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H115,4[9C62%[2;1H{[42;1H}[1;4H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H114,69[8C61%[1;69H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H113,60[8C61%[1;60H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H112,53[8C60%[1;53H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H111,72[8C60%[1;72H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H110,68[8C59%[1;68H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H109,3[9C59%[1;3H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H108,30[8C58%[1;18H[46m([10C)[?25h[?25l[1;51r[m[1;1H[L[1;52r[52;87H[K[52;87H107,1[9C57%[2;18H([10C)[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[52;87H[K[52;87H106,90[8C57%[1;78H[36m[46m([10C)[?25h[?25l[1;51r[m[1;1H[L[1;52r[52;87H[K[52;87H105,1[9C56%[2;78H[36m([10C)[1;1H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H104,42[8C56%[1;21H[35m[46m([19C)[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m **/[m[52;87H[K[52;87H103,5[9C55%[2;21H[35m([19C)[1;5H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m **     splitline ( parse a line into an array of strings )[m[52;87H[K[52;87H102,56-60     55%[1;19H[36m[46m([39C)[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m/**[m[52;87H[K[52;87H101,4[9C54%[2;19H[36m([39C)[1;4H[?25h[?25l[1;51r[m[1;1H[L[1;52r[52;87H[K[52;87H100,1[9C54%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H99,2[10C53%[1;2H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[33mreturn[m buf;[52;87H[K[52;87H98,14-28      53%[1;28H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H97,19-33      52%[1;33H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[39C[36m/* say so               */[m[52;87H[K[52;87H96,22-83      51%[1;83H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H95,17-41      51%[1;41H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hfree(buf); [36m// maybe overkill but safe > sorry?[m[52;87H[K[52;87H94,50-71      50%[1;71H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[52;87H[K[52;87H93,55-83      50%[1;83H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H92,3-17[7C49%[1;17H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hbuf[pos++] = c;[52;87H[K[52;87H91,18-32      49%[1;32H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[36m/* no, add to buffer */[m[52;87H[K[52;87H90,26-40      48%[1;40H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H89,1[10C48%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[52;87H[K[52;87H88,4-18[7C47%[1;18H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[52;87H[K[52;87H87,44-65      46%[1;65H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H}[52;87H[K[52;87H86,5-26[7C46%[1;26H[?25h[?25l[1;51r[1;1H[2L[1;52r[1;33Hfree(commands); [36m// not sure if needed but seems to ensure safety from mee[2;1Hmory leaks      [m[52;87H[K[52;87H85,62-90      45%[1;90H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33H}[52;87H[K[52;87H84,6-34[7C45%[1;34H[?25h[?25l[1;51r[1;1H[L[1;52r[1;41Hfree(commands[i]);[52;87H[K[52;87H83,24-59      44%[1;59H[?25h[?25l[1;51r[1;1H[L[1;52r[1;41Hexecute(splitline(commands[i]));[52;87H[K[52;87H82,38-73      44%[1;73H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33H[33mfor[m(i=[33m0[m; i< command_count; i++){[52;87H[K[52;87H81,37-65      43%[1;64H[46m{[4;33H}[1;65H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;25H[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H80,24-45      42%[1;44H[46m{[m[2;64H{[5;33H}[8;25H[46m}[1;45H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;25H[32mint[m i;[52;87H[K[52;87H79,10-31      42%[2;44H{[9;25H}[1;31H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H78,66-87      41%[1;87H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H77,4-25[7C41%[1;25H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H76,33-54      40%[1;54H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hcommand_count = count_commands(commands);[52;87H[K[52;87H75,45-66      40%[1;66H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hcommands - splitline(buf);[52;87H[K[52;87H74,30-51      39%[1;51H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[36m//split the lines[m[52;87H[K[52;87H73,21-42      39%[1;42H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H72,20-41      38%[1;41H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H71,19-33      38%[1;20H[46m([11C)[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;17H[36m/* end of command? */[m[52;87H[K[52;87H70,24-38      37%[2;20H([11C)[1;38H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H69,1[10C36%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17H}[52;87H[K[52;87H68,4-18[7C36%[1;18H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H}[52;87H[K[52;87H67,10-33      35%[1;33H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H66,42-75      35%[1;75H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[52;87H[K[52;87H65,41-69      34%[1;69H[?25h[?25l[1;51r[1;1H[L[1;52r[1;26H[33melse[m{[26C[36m/* or expand    */[m[52;87H[K[52;87H64,34-75      34%[1;75H[?25h[?25l[1;51r[1;1H[L[1;52r[1;33Hbuf = emalloc([33mBUFSIZ[m);[52;87H[K[52;87H63,27-55      33%[1;55H[?25h[?25l[1;51r[1;1H[L[1;52r[1;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[52;87H[K[52;87H62,43-75      33%[1;75H[?25h[?25l[1;51r[1;1H[L[1;52r[1;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[52;87H[K[52;87H61,44-75      32%[1;75H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[52;87H[K[52;87H60,54-61      32%[1;61H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[52;87H[K[52;87H59,45-75      31%[1;75H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H58,1[10C30%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H57,1[10C30%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H56,26-33      29%[1;33H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mint[m command_count = [33m0[m;[52;87H[K[52;87H55,24-31      29%[1;31H[?25h[?25l[1;51r[1;1H[2L[1;52r[1;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store tt[2;1Hhe commands[m[52;87H[K[52;87H54,83-90      28%[1;90H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H53,2-9[8C28%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    c;[30C[36m/* input char           */[m[52;87H[K[52;87H52,31-75      27%[1;75H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;87H[K[52;87H51,40-75      27%[1;75H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[52;87H[K[52;87H50,40-75      26%[1;75H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[52;87H[K[52;87H49,42-83      25%[1;83H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H{[52;87H[K[52;87H48,2[10C25%[1;2H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H47,4[10C24%[1;4H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[52;87H[K[52;87H46,48[9C24%[1;48H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          calls fatal from emalloc()[m[52;87H[K[52;87H45,39[9C23%[1;37H[36m[46m()[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[52;87H[K[52;87H44,46[9C23%[1;25H[36m[46m([19C)[m[2;37H[36m()[1;46H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m * returns: dynamically allocated string holding command line[m[52;87H[K[52;87H43,62[9C22%[2;25H[36m([19C)[1;62H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m * purpose: read next command line from fp[m[52;87H[K[52;87H42,43[9C22%[1;43H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/*[m[52;87H[K[52;87H41,3[10C21%[1;3H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[52;87H[K[52;87H40,40[9C21%[1;16H[46m([22C)[?25h[?25l[1;51r[m[1;1H[L[1;52r[52;87H[K[52;87H39,1[10C20%[2;16H([22C)[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H38,1[10C20%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H37,1[10C19%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[51;1H[34m@                                                                                                       [m[52;87H[K[52;87H36,1[10C18%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H35,4[10C18%[1;4H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[52;87H[K[52;87H34,62[9C17%[1;62H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[52;87H[K[52;87H33,64[9C17%[1;64H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *    [m[52;87H[K[52;87H32,7[10C16%[1;7H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[52;87H[K[52;87H31,65[9C16%[1;65H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H30,1[10C15%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H29,1[10C15%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H}[52;87H[K[52;87H28,2[10C14%[1;2H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mreturn[m count;[52;87H[K[52;87H27,15-22      14%[1;22H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H}[52;87H[K[52;87H26,3-10[7C13%[1;10H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hcmd++;[52;87H[K[52;87H25,9-23[7C13%[1;23H[?25h[?25l[1;51r[1;1H[L[1;52r[1;17Hcount++;[52;87H[K[52;87H24,11-25      12%[1;25H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[33mwhile[m(*cmd != [33mNULL[m){[52;87H[K[52;87H23,22-29      11%[1;28H[46m{[4;9H}[1;29H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;9Hcount = [33m0[m;[52;87H[K[52;87H22,12-19      11%[2;28H{[5;9H}[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H21,1[10C10%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mchar[m** cmd = commands;[52;87H[K[52;87H20,24-31      10%[1;31H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mint[m count;[52;87H[K[52;87H19,12-19[7C9%[1;19H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[32mint[m count_commands([32mchar[m** commands){[52;87H[K[52;87H18,37[10C9%[1;36H[46m{[11;1H}[1;37H[?25h[?25l[1;51r[m[1;1H[L[1;52r[52;87H[K[52;87H17,1[11C8%[2;36H{[12;1H}[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[35m#define DFL_PROMPT      [m[33m"> "[m[52;87H[K[52;87H16,24-29[7C8%[1;29H[?25h[?25l[52;88H7,1    [2;1H[?25h[?25l[3;36H[46m{[13;1H}[m[52;88H8,37[3;37H[?25h[?25l{[13;1H}[52;88H9,12-19[4;19H[?25h[?25l[52;87H20,24-31[5;31H[?25h[?25l[52;88H1,1    [6;1H[?25h[?25l[52;88H2,12-19[7;19H[?25h[?25l[8;28H[46m{[11;9H}[m[52;88H3,22-2[8;29H[?25h[?25l{[11;9H}[52;88H4,11-25[9;25H[?25h[?25l[52;88H5,9-23 [10;23H[?25h[?25l[8;28H[46m{[11;9H}[m[52;88H6,3-10[11;10H[?25h[?25l[8;28H{[11;9H}[52;88H7,15-22[12;22H[?25h[?25l[3;36H[46m{[13;1H}[m[52;88H8,2    [13;2H[?25h[?25l[3;36H{[13;1H}[52;88H9,1[14;1H[?25h[?25l[52;87H30[15;1H[?25h[?25l[52;88H1,65[16;65H[?25h[?25l[52;88H2,7 [17;7H[?25h[?25l[52;88H3,64[18;64H[?25h[?25l[52;88H4,62[19;62H[?25h[?25l[52;88H5,4 [20;4H[?25h[?25l[52;88H6,1[21;1H[?25h[?25l[52;88H7[22;1H[?25h[?25l[52;88H8[23;1H[?25h[?25l[52;88H9[24;1H[?25h[?25l[25;16H[46m([22C)[m[52;87H40,40[25;40H[?25h[?25l[25;16H([22C)[52;88H1,3 [26;3H[?25h[?25l[52;88H2,43[27;43H[?25h[?25l[52;88H3,62[28;62H[?25h[?25l[29;25H[36m[46m([19C)[m[52;88H4,46[29;46H[?25h[?25l[29;25H[36m([19C)[m[30;37H[36m[46m()[m[52;88H5,39[30;39H[?25h[?25l[36m()[m[52;88H6,48[31;48H[?25h[?25l[52;88H7,4 [32;4H[?25h[?25l[52;88H8,2[33;2H[?25h[?25l[52;88H9,42-83[34;83H[?25h[?25l[52;87H50,40-75[35;75H[?25h[?25l[52;88H1[36;75H[?25h[?25l[52;88H2,31[37;75H[?25h[?25l[52;88H3,2-9  [38;9H[?25h[?25l[52;88H4,83-90[39;90H[?25h[?25l[52;88H5,24-31[41;31H[?25h[?25l[52;88H6,26-33[42;33H[?25h[?25l[52;88H7,1    [43;1H[?25h[?25l[52;88H8[44;1H[?25h[?25l[52;88H9,45-75[45;75H[?25h[?25l[52;87H60,54-61[46;61H[?25h[?25l[52;88H1,44-75[47;75H[?25h[?25l[52;88H2,43[48;75H[?25h[?25l[52;88H3,27-5[49;55H[?25h[?25l[52;88H4,34-7[50;75H[?25h[?25l[52;88H5,41-69[51;69H[?25h[?25l[1;51r[51;1H
[1;52r[51;33Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H66,42-75[7C8%[51;75H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H67,10-33[7C9%[51;33H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H68,4-18[8C9%[44;41H[46m{[51;17H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H69,1[10C10%[43;41H{[50;17H}
[?25h[?25l[43;41H[46m{[50;17H}[m[52;88H8,4-18[50;18H[?25h[?25l[43;41H{[50;17H}[52;88H7,10-33[49;33H[?25h[?25l[52;88H6,42-75[48;75H[?25h[?25l[52;88H5,41-69[47;69H[?25h[?25l[52;88H4,34-75[46;75H[?25h[?25l[52;88H3,27-5[45;55H[?25h[?25l[52;88H2,43-7[44;75H[?25h[?25l[52;88H1,44[43;75H[?25h[?25l[52;88H0,54-61[42;61H[?25h[?25l[52;87H59,45-75[41;75H[?25h[?25l[52;87H60,54-61[42;61H[?25h[?25l[52;88H1,44-75[43;75H[?25h[?25l[52;88H2,43[44;75H[?25h[?25l[52;88H3,27-5[45;55H[?25h[?25l[52;88H4,34-7[46;75H[?25h[?25l[52;88H5,41-69[47;69H[?25h[?25l[52;88H6,42-75[48;75H[?25h[?25l[52;88H7,10-33[49;33H[?25h[?25l[43;41H[46m{[50;17H}[m[52;88H8,4-18 [50;18H[?25h[?25l[43;41H{[50;17H}[52;88H9,1   [51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* end of command? */[m[52;87H[K[52;87H70,24-38      10%[51;38H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [35m'\n'[m )[52;87H[K[52;87H71,19-33      11%[51;20H[46m([11C)[?25h[?25l[1;51r[m[51;1H
[1;52r[51;25Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H72,20-41      11%[50;20H([11C)[51;41H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//split the lines[m[52;87H[K[52;87H73,21-42      12%[51;42H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommands - splitline(buf);[52;87H[K[52;87H74,30-51      13%[51;51H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hcommand_count = count_commands(commands);[52;87H[K[52;87H75,45-66      13%[51;66H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hfree(buf); [36m//clear the buffer[m[52;87H[K[52;87H76,33-54      14%[51;54H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H77,4-25[7C14%[51;25H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[36m//execute multiple commands if num>0, i.e. we detect a command[m[52;87H[K[52;87H78,66-87      15%[51;87H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[32mint[m i;[52;87H[K[52;87H79,10-31      15%[51;31H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mif[m(command_count>[33m0[m){[52;87H[K[52;87H80,24-45      16%[51;45H[?25h[?25l[1;51r[51;1H
[1;52r[51;33H[33mfor[m(i=[33m0[m; i< command_count; i++){[52;87H[K[52;87H81,37-65      16%[51;65H[?25h[?25l[1;51r[51;1H
[1;52r[51;41Hexecute(splitline(commands[i]));[52;87H[K[52;87H82,38-73      17%[51;73H[?25h[?25l[1;51r[51;1H
[1;52r[51;41Hfree(commands[i]);[52;87H[K[52;87H83,24-59      17%[51;59H[?25h[?25l[1;51r[51;1H
[1;52r[51;33H}[52;87H[K[52;87H84,6-34[7C18%[48;64H[46m{[51;33H}[?25h[?25l[1;51r[m[1;1H[2M[1;52r[50;33Hfree(commands); [36m// not sure if needed but seems to ensure safety from mee[51;1Hmory leaks      [m[52;87H[K[52;87H85,62-90      19%[46;64H{[49;33H}[50;90H[?25h[?25l[36mi safety from mm[51;1Hemory leaks[m[52;91H3-91[50;91H[?25h[?25l[36m safety from mee[51;1Hmory leaks [m[52;91H2-90[50;90H[?25h[?25l[46;64H[46m{[49;33H}[m[52;88H4,6-34 [49;34H[?25h[?25l[46;64H{[49;33H}[52;88H3,24-59[48;59H[?25h[?25l[52;88H2,38-73[47;73H[?25h[?25l[46;64H[46m{[49;33H}[m[52;88H1,37-65[46;65H[?25h[?25l{[49;33H}[52;88H0,24-4[45;45H[?25h[?25l[52;87H79,10-31[44;31H[?25h[?25l[52;88H8,66-87[43;87H[?25h[?25l[52;88H7,4-25 [42;25H[?25h[?25l[52;88H6,33-54[41;54H[?25h[?25l[52;88H5,45-66[40;66H[?25h[?25l[52;88H4,30-51[39;51H[?25h[?25l[52;88H3,21-42[38;42H[?25h[?25l[52;88H2,20-41[37;41H[?25h[?25l[36;20H[46m([11C)[m[52;88H1,19-33[36;33H[?25h[?25l[36;20H([11C)[52;88H0,24-38[35;38H[?25h[?25l[36;20H[46m([11C)[m[52;88H1,19-33[36;33H[?25h[?25l[36;20H([11C)[52;88H2,20-41[37;41H[?25h[?25l[36;20H[46m([11C)[m[52;88H1,19-33[36;33H[?25h[?25l[37;51r[37;1H[L[1;52r[51;1H[34m@                                                                                                       [m[52;87H[K[52;87H72,1[10C19%[36;20H([11C)
[?25h[?25l[52;90H2-9[37;9H[?25h[?25l[52;90H3-17[37;17H[?25h[?25l[52;90H4-25[37;25H[?25h[?25lb[52;90H5-26[37;26H[?25h[?25lr[52;90H6-27[37;27H[?25h[?25le[52;90H7-28[37;28H[?25h[?25la[52;90H8-29[37;29H[?25h[?25l[33mbreak[m[52;90H9-30[37;30H[?25h[?25l;[52;90H10-31[37;31H[?25h[?25l[52;88H3[38;31H[?25h[?25l[52;90H9-30 [38;30H[?25h[?25l[46m[[mpos[46m][m[52;90H8-29[38;29H[?25h[?25l[52;90H7-28[38;28H[?25h[?25l[pos][52;90H6-27[38;27H[?25h[?25l[52;90H5-26[38;26H[?25h[?25l[52;90H4-25[38;25H[?25h[?25l[52;88H4[39;25H[?25h[?25l[52;88H5[40;25H[?25h[?25l[52;88H6[41;25H[?25h[?25l[52;88H7[42;25H[?25h[?25l[52;88H8[43;25H[?25h[?25l[52;88H9[44;25H[?25h[?25l[52;87H80[45;25H[?25h[?25l[52;88H1[46;25H[?25h[?25l[52;88H2[47;25H[?25h[?25l[52;88H3[48;25H[?25h[?25l[52;88H4[49;25H[?25h[?25l[52;88H5[50;25H[?25h[?25l[1;51r[51;1H
[1;52r[50;1H                                free(commands); [36m// not sure if needed but seems to ensure safety from mee[51;1Hmory leaks      [m[52;87H[K[52;87H86,4-25[7C19%[50;25H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H}[52;87H[K[52;87H87,4-25[7C20%[44;44H[46m{[51;25H}[?25h[?25l[1;51r[m[51;1H
[1;52r[51;25H[33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[52;87H[K[52;87H88,4-25[7C20%[43;44H{[50;25H}[51;25H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[52;87H[K[52;87H89,4-18[7C21%[21;42H[46m{[51;17H}[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H90,1[10C22%[20;42H{[50;17H}
[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[36m/* no, add to buffer */[m[52;87H[K[52;87H91,11-25      22%[51;25H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos++] = c;[52;87H[K[52;87H92,11-25      23%[51;25H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H93,3-17[7C23%[51;17H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[52;87H[K[52;87H94,11-25      24%[51;25H[?25h[?25l[1;51r[51;1H
[1;52r[51;25Hfree(buf); [36m// maybe overkill but safe > sorry?[m[52;87H[K[52;87H95,4-25[7C24%[51;25H[?25h[?25l[1;51r[51;1H
[1;52r[51;25H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H96,4-25[7C25%[51;25H[?25h[?25l[1;51r[51;1H
[1;52r[51;17H}[39C[36m/* say so               */[m[52;87H[K[52;87H97,5-25[7C25%[51;25H[?25h[?25l[1;51r[51;1H
[1;52r[51;17Hbuf[pos] = [35m'\0'[m;[52;87H[K[52;87H98,11-25      26%[51;20H[46m[[mpos[46m][?25h[?25l[1;51r[m[51;1H
[1;52r[51;17H[33mreturn[m buf;[52;87H[K[52;87H99,11-25      26%[50;20H[pos][51;25H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H}[52;87H[K[52;87H100,2[9C27%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H101,1[9C27%[51;1H[?25h[?25l[52;89H0,2[50;2H[?25h[?25l[52;87H99,11-25[49;25H[?25h[?25l[48;20H[46m[[mpos[46m][m[52;88H8[48;25H[?25h[?25l[pos][52;88H7,5-25 [47;25H[?25h[?25l[52;88H6,4[46;25H[?25h[?25l[52;88H5[45;25H[?25h[?25l[52;88H4,11-25[44;25H[?25h[?25l[52;88H3,3-17 [43;17H[?25h[?25l[52;88H4,11-25[44;25H[?25h[?25l[52;88H5,4-25 [45;25H[?25h[?25l[52;88H6[46;25H[?25h[?25l[52;88H7,5[47;25H[?25h[?25l[48;20H[46m[[mpos[46m][m[52;88H8,11-25[48;25H[?25h[?25l[pos][52;88H9[49;25H[?25h[?25l[52;87H100,2   [50;2H[?25h[?25l[52;89H1,1[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/**[m[52;87H[K[52;87H102,4[9C28%[51;4H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;1H[36m **     splitline ( parse a line into an array of strings )
 **/[m[52;87H[K[52;87H103,21-25     29%[50;25H[?25h[?25l[52;89H4,5    [51;5H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;87H[K[52;87H105,25[8C29%[51;22H[35m[46m([1C)[?25h[?25l[1;51r[m[51;1H
[1;52r[52;87H[K[52;87H106,1[9C30%[50;22H[35m(x)
[?25h[?25l[1;51r[m[51;1H
[1;52r[51;1H[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[52;87H[K[52;87H107,25[8C30%[51;25H[?25h[?25l[52;89H6,1 [50;1H[?25h[?25l[49;22H[35m[46m([1C)[m[52;89H5,25[49;25H[?25h[?25l[35m(x)[m[52;89H4,5 [48;5H[?25h[?25l[52;89H3,21-25[47;25H[?25h[?25l[52;89H2,4    [46;4H[?25h[?25l[52;89H1,1[45;1H[?25h[?25l[52;89H0,2[44;2H[?25h[?25l[52;87H99,11-25[43;25H[?25h[?25l[42;20H[46m[[mpos[46m][m[52;88H8[42;25H[?25h[?25l[pos][52;88H7,5-25 [41;25H[?25h[?25l[52;88H6,4[40;25H[?25h[?25l[52;88H7,5[41;25H[?25h[?25l[42;20H[46m[[mpos[46m][m[52;88H8,11-25[42;25H[?25h[?25l[pos][52;88H7,5-25 [41;25H[?25h[?25l[52;88H6,4[40;25H[?25h[?25l[52;88H5[39;25H[?25h[?25l[52;88H4,11-25[38;25H[?25h[?25l[52;88H3,3-17 [37;17H[?25h[?25l[52;88H2,11-25[36;25H[?25h[?25l[52;88H1[35;25H[?25h[?25l[52;88H0,1    [34;1H[?25h[?25l[3;42H[46m{[33;17H}[m[52;87H89,4-18[33;18H[?25h[?25l[3;42H{[33;17H}[52;88H8,4-25[32;25H[?25h[?25l[24;44H[46m{[31;25H}[m[52;88H7[31;25H[?25h[?25l[24;44H{[31;25H}[52;88H6[29;25H[?25h[?25l[52;88H5[28;25H[?25h[?25l[52;88H4[27;25H[?25h[?25l[52;88H3[26;25H[?25h[?25l[52;88H2[25;25H[?25h[?25l[52;88H1[24;25H[?25h[?25l[52;88H0[23;25H[?25h[?25l[52;87H79[22;25H[?25h[?25l[52;88H8[21;25H[?25h[?25l[52;88H7[20;25H[?25h[?25l[52;88H6[19;25H[?25h[?25l[52;88H5[18;25H[?25h[?25l[52;88H4[17;25H[?25h[?25l[52;88H3[16;25H[?25h[?25l[52;88H2[15;25H[?25h[?25l[52;88H1,11-25[14;25H[?25h[?25l[52;88H0[13;25H[?25h[?25l[52;87H69,1    [12;1H[?25h[?25l[4;41H[46m{[11;17H}[m[52;88H8,4-18[11;18H[?25h[?25l[4;41H{[7;30H[46m{[10;25H}[m[11;17H}[52;88H7,4-25[10;25H[?25h[?25l[7;30H{[10;25H}[52;88H6[9;25H[?25h[?25l[52;88H5[8;25H[?25h[?25l[52;88H4,9[7;25H[?25h[?25l[52;88H3,4[6;25H[?25h[?25l[52;88H2[5;25H[?25h[?25l[52;88H1,11-25[4;25H[?25h[?25l[52;88H0,18[3;25H[?25h[?25l[52;87H59[2;25H[?25h[?25l[52;88H8,1    [1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H57,1[10C30%[1;1H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mchar[m** commands = [33mNULL[m;[52;87H[K[52;87H56,18-25      29%[1;25H[?25h[?25l[1;51r[1;1H[L[1;52r[1;9H[32mint[m command_count = [33m0[m;[52;87H[K[52;87H55,18-25      29%[1;25H[?25h[?25l[1;51r[1;1H[2L[1;52r[1;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store tt[2;1Hhe commands[m[52;87H[K[52;87H54,18-25      28%[1;25H[?25h[?25l[1;51r[1;1H[L[1;52r[52;87H[K[52;87H53,2-9[8C27%[1;9H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    c;[30C[36m/* input char           */[m[52;87H[K[52;87H52,11-25      27%[1;25H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;87H[K[52;87H51,15-25      26%[1;25H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[52;87H[K[52;87H50,15-25      26%[1;25H[?25h[?25l[1;51r[1;1H[L[1;52r[1;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[52;87H[K[52;87H49,16-25      25%[1;25H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H{[52;87H[K[52;87H48,2[10C25%[1;2H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m */[m[52;87H[K[52;87H47,4[10C24%[1;4H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[52;87H[K[52;87H46,25[9C24%[1;25H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *          calls fatal from emalloc()[m[52;87H[K[52;87H45,25[9C23%[1;25H[?25h[?25l[1;51r[1;1H[L[1;52r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[52;87H[K[52;87H44,25[9C23%[1;25H[36m[46m([19C)[1;25H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m * returns: dynamically allocated string holding command line[m[52;87H[K[52;87H43,25[9C22%[2;25H[36m([19C)[1;25H[?25h[?25l[1;51r[m[1;1H[L[1;52r[1;1H[36m * purpose: read next command line from fp[m[52;87H[K[52;87H42,25[9C22%[1;25H[?25h[?25l[52;88H3[2;25H[?25h[?25l[3;25H[36m[46m([19C)[m[52;88H4[3;25H[?25h[?25l[36m([19C)[m[52;88H5[4;25H[?25h[?25l[52;88H6[5;25H[?25h[?25l[52;88H7,4 [6;4H[?25h[?25l[52;88H8,2[7;2H[?25h[?25l[52;88H9,16-25[8;25H[?25h[?25l[52;87H50,15[9;25H[?25h[?25l[52;88H1[10;25H[?25h[?25l[52;88H2,11[11;25H[?25h[?25l[52;88H3,2-9  [12;9H[?25h[?25l[52;88H4,18-25[13;25H[?25h[?25l[52;88H5[15;25H[?25h[?25l[52;88H4[13;25H[?25h[?25l[52;88H5[15;25H[?25h[?25l[52;91H7-24[15;24H[?25h[?25l[52;91H6-23[15;23H[?25h[?25l[52;91H5-22[15;22H[?25h[?25l[52;91H4-21[15;21H[?25h[?25l[52;91H3-20[15;20H[?25h[?25l[52;91H2-19[15;19H[?25h[?25l[52;91H1-18[15;18H[?25h[?25l[52;91H0-17[15;17H[?25h[?25l[52;90H9-16 [15;16H[?25h[?25l[52;90H8-15[15;15H[?25h[?25l[52;90H7-14[15;14H[?25h[?25l[52;90H6-13[15;13H[?25h[?25l[52;90H5-12[15;12H[?25h[?25l[52;90H4-11[15;11H[?25h[?25l[52;90H3-10[15;10H[?25h[?25l[52;90H2-9 [15;9H[?25h[?25l[52;90H1  [15;1H[?25h[?25l[52;90H2-9[15;9H[?25h[?25l/[32mint[m command_count = [33m0[m;[52;90H3-10[15;10H[?25h[?25l[36m/*int command_count = 0;
        char** commands = NULL; 


         printf("%s", prompt);                          [m[1m[37m[41m/[m[52;90H4-11[15;11H[?25h[?25l[52;88H6[16;11H[?25h[?25l[52;90H3-10[16;10H[?25h[?25l[52;90H4-11[16;11H[?25h[?25l[52;90H5-12[16;12H[?25h[?25l[52;90H6-13[16;13H[?25h[?25l[52;90H7-14[16;14H[?25h[?25l[52;90H8-15[16;15H[?25h[?25l[52;90H9-16[16;16H[?25h[?25l[52;90H10-17[16;17H[?25h[?25l[52;91H1-18[16;18H[?25h[?25l[52;91H2-19[16;19H[?25h[?25l[52;91H3-20[16;20H[?25h[?25l[52;91H4-21[16;21H[?25h[?25l[52;91H5-22[16;22H[?25h[?25l[52;91H6-23[16;23H[?25h[?25l[52;91H7-24[16;24H[?25h[?25l[52;91H8-25[16;25H[?25h[?25l[52;91H9-26[16;26H[?25h[?25l[52;90H20-27[16;27H[?25h[?25l[52;91H1-28[16;28H[?25h[?25l[52;91H2-29[16;29H[?25h[?25l[52;91H3-30[16;30H[?25h[?25l[52;91H4-31[16;31H[?25h[?25l[52;91H5-32[16;32H[?25h[?25l[52;91H6-33[16;33H[?25h[?25l[36m*[m[52;91H7-34[16;34H[?25h[?25l[36m/[m


         printf([33m"[m[35m%s[m[33m"[m, prompt);                          [36m/*[m[52;91H8-35[16;35H[?25h[?25l[52;88H7,1    [17;1H[?25h[?25l[52;88H8[18;1H[?25h[?25l[52;88H9,25-33[19;33H[?25h[?25l[52;87H60,28-35[20;35H[?25h[?25l[52;88H1,21[21;35H[?25h[?25l[52;88H2,14[22;35H[?25h[?25l[52;88H3,7-35 [23;35H[?25h[?25l[52;88H2,14-35[22;35H[?25h[?25l[52;88H3,7-35 [23;35H[?25h[?25l[52;88H4,16-33[24;33H[?25h[?25l[52;88H5,7-35 [25;35H[?25h[?25l[52;88H6[26;35H[?25h[?25l[52;88H5[25;35H[?25h[?25l[52;88H6[26;35H[?25h[?25l[52;90H6-34[26;34H[?25h[?25l[52;90H5-33[26;33H[?25h[?25l[52;90H4-25[26;25H[?25h[?25l[52;90H5-33[26;33H[?25h[?25libufspace += [33mBUFSIZ[m;[52;90H6-34[26;34H[?25h[?25lbufspace += [33mBUFSIZ[m; [52;90H5-33[26;33H[?25h[?25l[26;25Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[26;67H[K[52;90H4-25[26;25H[?25h[?25l[24;30H[46m{[27;25H}[m[52;88H7[27;25H[?25h[?25l[46m [m[24;30H{[27;25H [?25h[?25l[52;88H6[26;25H[?25h[?25l[52;88H5[25;25H[?25h[?25l[52;88H4,9[24;25H[?25h[?25l[52;90H10-26[24;26H[?25h[?25l[52;91H1-27[24;27H[?25h[?25l[52;91H2-28[24;28H[?25h[?25l[52;91H3-29[24;29H[?25h[?25l[1C[46m{[28;17H}[m[52;91H4-30[24;30H[?25h[?25l[46m   [m   [28;17H}[24;30H[?25h[?25l[52;88H3,4-25 [23;25H[?25h[?25l[52;88H2,9-30[22;30H[?25h[?25l[52;88H3,4-25[23;25H[?25h[?25l[52;88H4,14-30[24;30H[?25h[?25l[52;88H5,4-25 [25;25H[?25h[?25l[52;88H6,9-30[26;30H[?25h[?25l[52;90H8-29[26;29H[?25h[?25l[52;90H7-28[26;28H[?25h[?25l[52;90H6-27[26;27H[?25h[?25l[52;90H5-26[26;26H[?25h[?25l[52;90H4-25[26;25H[?25h[?25l[27;51r[27;1H[L[1;52r[26;25H[K[27;1Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;87H[K[52;87H67,1[10C21%[27;1H[?25h[?25l        bufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;90H2-9[27;9H[?25h[?25l        bufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;90H3-17[27;17H[?25h[?25l        bufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[52;90H4-25[27;25H[?25h[?25l[52;88H8[28;25H[?25h[?25l[21;41H[46m{[29;17H}[m[52;88H9,4-18[29;18H[?25h[?25l[21;41H{[29;17H}[52;87H70,1   [30;1H[?25h[?25l[21;41H[46m{[29;17H}[m[52;87H69,4-18[29;18H[?25h[?25l[21;41H{[29;17H}[52;88H8,4-25[28;25H[?25h[?25l[52;88H7[27;25H[?25h[?25l[52;88H6[26;25H[?25h[?25l[52;88H7[27;25H[?25h[?25l[52;88H8[28;25H[?25h[?25l[21;41H[46m{[29;17H}[m[52;88H9,4-18[29;18H[?25h[?25l[21;41H{[29;17H}[52;87H70,1   [30;1H[?25h[?25l[52;88H1,11-25[31;25H[?25h[?25l[52;88H2[32;25H[?25h[?25l[52;88H3,4-25 [33;25H[?25h[?25l[52;88H4[34;25H[?25h[?25lvbuf[pos] = [35m'\0'[m;[52;90H5-26[34;26H[?25h[?25lbuf[pos] = [35m'\0'[m;[34;41H[K[52;90H4-25[34;25H[?25h[52;1H[K[34;24H[?25l[52;87H74,3-24[7C21%[34;24H[?25h[?25l[34;17H[7m       [m[52;1H[33m-- VISUAL --[m[52;87H[K[52;87H74,3-24[7C21%[34;24H[?25h[?25l[7m buf[pos] = [m[7m[35m'\0'[m[7m; 
                       [m[52;88H5[35;24H[?25h[?25l[7m [m[7m[36m//split the lines[m[7m 
                       [m[52;88H6[36;24H[?25h[?25l[7m commands - splitline(buf); 
                       [m[52;88H7[37;24H[?25h[?25l[7m command_count = count_commands(commands); 
                       [m[52;88H8[38;24H[?25h[?25l[7m [m[52;90H4-25[38;25H[?25h[?25l[7mf[m[52;90H5-26[38;26H[?25h[?25l[7mr[m[52;90H6-27[38;27H[?25h[?25l[7me[m[52;90H7-28[38;28H[?25h[?25l[7me[m[46m([mbuf[46m)[m[52;90H8-29[38;29H[?25h[?25l[7m([mbuf)[52;90H9-30[38;30H[?25h[?25l[7mb[m[52;90H10-31[38;31H[?25h[?25l[7mu[m[52;91H1-32[38;32H[?25h[?25l[7mf[m[46m)[m[52;91H2-33[38;33H[?25h[?25l[7m)[m[52;91H3-34[38;34H[?25h[?25l[7m;[m[52;91H4-35[38;35H[?25h[?25l[7m [m[52;91H5-36[38;36H[?25h[?25l[7m[36m/[m[52;91H6-37[38;37H[?25h[?25l[7m[36m/[m[52;91H7-38[38;38H[?25h[?25l[7m[36mc[m[52;91H8-39[38;39H[?25h[?25l[7m[36ml[m[52;91H9-40[38;40H[?25h[?25l[7m[36me[m[52;90H20-41[38;41H[?25h[?25l[7m[36ma[m[52;91H1-42[38;42H[?25h[?25l[7m[36mr[m[52;91H2-43[38;43H[?25h[?25l[7m[36m [m[52;91H3-44[38;44H[?25h[?25l[7m[36mt[m[52;91H4-45[38;45H[?25h[?25l[7m[36mh[m[52;91H5-46[38;46H[?25h[?25l[7m[36me[m[52;91H6-47[38;47H[?25h[?25l[7m[36m [m[52;91H7-48[38;48H[?25h[?25l[7m[36mb[m[52;91H8-49[38;49H[?25h[?25l[7m[36mu[m[52;91H9-50[38;50H[?25h[?25l[7m[36mf[m[52;90H30-51[38;51H[?25h[?25l[7m[36mf[m[52;91H1-52[38;52H[?25h[?25l[7m[36me[m[52;91H2-53[38;53H[?25h[?25l[7m[36mr[m[52;91H3-54[38;54H[?25h[?25l[?25h[?25l[52;1H5 fewer lines[52;87H[K[34;51r[34;1H[5M[1;52r[48;17H[36m/* no, add to buffer */[m[49;17Hbuf[pos++] = c;[51;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[52;1H[K[52;87H74,3-24[7C22%5 fewer lines[52;87H[K[52;87H74,3-24[7C22%[34;24H[?25h[?25l[52;88H5[35;24H[?25h[?25l[35;17H[7m       [m[52;1H[33m-- VISUAL --[m[52;13H[K[52;87H75,3-24[7C22%[35;24H[?25h[?25l[7m [m[7m[36m//execute multiple commands if num>0, i.e. we detect a command[m[7m 
                       [m[52;88H6[36;24H[?25h[?25l[7m [m[7m[32mint[m[7m i; 
                       [m[52;88H7[37;24H[?25h[?25l[7m [m[7m[33mif[m[7m(command_count>[m[7m[33m0[m[7m){ 
                       [m[52;88H8[38;24H[?25h[?25l[7m         [m[7m[33mfor[m[7m(i=[m[7m[33m0[m[7m; i< command_count; i++){ 
                       [m[52;88H9[39;24H[?25h[?25l[7m                 execute(splitline(commands[i])); 
                       [m[52;87H80[40;24H[?25h[?25l[7m                 free(commands[i]); 
                       [m[52;88H1[41;24H[?25h[?25l[7m         } 
                       [m[80C[36mee[43;1Hm[m[52;88H2[42;24H[?25h[?25l[7m         free(commands); [m[7m[36m// not sure if needed but seems to ensure safety from mee[43;1Hmory leaks [m[7m      
                       [m[52;88H3[44;24H[?25h[?25l[7m } 
                       [m[52;88H4[45;24H[?25h[?25l[7m [m[7m[33mreturn[m[7m [m[7m[33mNULL[m[7m;[m[7m[36m//end of command line buffer[m[7m 
                }[m[52;88H5,4-18[46;18H[?25h[?25l[45;24H [33mreturn[m [33mNULL[m;[36m//end of command line buffer[m[45;65H[K[46;1H                }[52;88H4,3-24[45;24H[?25h[?25l[44;24H }[44;26H[K[45;1H                       [52;88H3[44;24H[?25h[?25l[42;24H         free(commands); [36m// not sure if needed but seems to ensure safety from mee[43;1Hmory leaks      [m[43;17H[K[44;1H                       [52;88H2[42;24H[?25h[?25l[41;24H         }[41;34H[K[42;1H                       [80C[36mee[43;1Hm[m[52;88H1[41;24H[?25h[?25l[40;24H                 free(commands[i]);[40;59H[K[41;1H                       [52;88H0[40;24H[?25h[?25l[39;24H                 execute(splitline(commands[i]));[39;73H[K[40;1H                       [52;87H79[39;24H[?25h[?25l[7m                 execute(splitline(commands[i])); 
                       [m[52;87H80[40;24H[?25h[?25l[39;24H                 execute(splitline(commands[i]));[39;73H[K[40;1H                       [52;87H79[39;24H[?25h[?25l[38;24H         [33mfor[m(i=[33m0[m; i< command_count; i++){[38;65H[K[39;1H                       [52;88H8[38;24H[?25h[?25l[37;24H [33mif[m(command_count>[33m0[m){[37;45H[K[38;1H                       [52;88H7[37;24H[?25h[?25l[36;24H [32mint[m i;[36;31H[K[37;1H                       [52;88H6[36;24H[?25h[?25l[35;17H [7C[36m//execute multiple commands if num>0, i.e. we detect a command[m[35;87H[K[36;1H                       [52;88H5,3-17[35;17H[?25h[?25l[34;18H[7m                        
                 [m[52;88H4[34;17H[?25h[?25l[33;18H[7m       [m[7m[33mbreak[m[7m; 
                 [m[52;88H3[33;17H[?25h[?25l        [33mbreak[m;[33;31H[K[34;1H                 [52;88H4[34;17H[?25h[?25l                        [34;41H[K[35;1H                 [52;88H5[35;17H[?25h[?25l[7m [m[7C[7m[36m//execute multiple commands if num>0, i.e. we detect a command[m[7m 
                       [m[52;88H6,3-24[36;24H[?25h[?25l[7m [m[7m[32mint[m[7m i; 
                       [m[52;88H7[37;24H[?25h[?25l[7m [m[7m[33mif[m[7m(command_count>[m[7m[33m0[m[7m){ 
                       [m[52;88H8[38;24H[?25h[?25l[7m         [m[7m[33mfor[m[7m(i=[m[7m[33m0[m[7m; i< command_count; i++){ 
                       [m[52;88H9[39;24H[?25h[?25l[7m                 execute(splitline(commands[i])); 
                       [m[52;87H80[40;24H[?25h[?25l[7m                 free(commands[i]); 
                       [m[52;88H1[41;24H[?25h[?25l[7m         } 
                       [m[80C[36mee[43;1Hm[m[52;88H2[42;24H[?25h[?25l[7m         free(commands); [m[7m[36m// not sure if needed but seems to ensure safety from mee[43;1Hmory leaks [m[7m      
                       [m[52;88H3[44;24H[?25h[?25l[7m } 
                       [m[52;88H4[45;24H[?25h[?25l[7m [m[7m[33mreturn[m[7m [m[7m[33mNULL[m[7m;[m[7m[36m//end of command line buffer[m[7m 
                }[m[52;88H5,4-18[46;18H[?25h[?25l[7m [m[52;88H6,0-1 [47;1H[?25h[?25l[7m 
                [m[7m[36m/* no, [m[52;88H7,10-24[48;24H[?25h[?25l[47;1H[K[48;1H                [36m/* no, [m[52;88H6,0-1  [47;1H[?25h[?25l[46;18H[K[52;88H5,4-18[46;18H[?25h[?25l[52;1H11 fewer lines[52;87H[K[35;51r[35;1H[12M[1;52r[40;25Hfree(buf); [36m// maybe overkill but safe > sorry?[m[41;25H[33mreturn[m [33mNULL[m;[42;17H}[39C[36m/* say so               */[m[43;17Hbuf[pos] = [35m'\0'[m;[44;17H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[52;1H[K[52;87H75,2-16[7C24%11 fewer lines[52;87H[K[52;87H75,2-16[7C24%[35;16H[?25h[?25l[52;88H4[34;16H[?25h[?25l[52;88H5[35;16H[?25h[?25l[52;90H1-8 [35;8H[?25h[?25l[52;90H0-1[35;1H[?25h[?25l[52;1H[33m-- INSERT --[m[52;13H[K[52;87H75,1[10C24%[35;1H[?25h[?25l[35;51r[51;1H
[1;52r[51;1H[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[52;87H[K[52;87H75,1[10C24%[35;1H[?25h[?25l[52;88H6[36;1H[?25h[?25l[52;88H7[37;1H[?25h[?25l[52;88H8[38;1H[?25h[?25l[52;88H9[39;1H[?25h[?25l[52;87H80[40;1H[?25h[?25l[52;90H2-9[40;9H[?25h[?25l[52;90H3-17[40;17H[?25h[?25l[52;90H4-25[40;25H[?25h[?25l[52;90H5-26[40;26H[?25h[52;1H[K[40;25H[?25l[52;87H80,4-25[7C24%[40;25H[?25h[?25l[52;87H79[39;25H[?25h[?25l[39;51r[51;1H
[1;52r[52;87H[K[52;87H79,4-25[7C24%[39;25H[?25h[?25l[52;87H80,5-32[40;32H[?25h[?25l[52;90H4-24[40;24H[?25h[?25l[38;44H[46m{[40;17H}[m[52;90H3-17[40;17H[?25h[?25l[38;44H{[40;17H}[52;90H2-16[40;16H[?25h[?25l[52;88H1[41;16H[?25h[?25l[52;88H2[42;16H[?25h[?25l[20;42H[46m{[43;1H}[m[52;88H3,1   [43;1H[?25h[?25l[20;42H{[43;1H}[52;88H4,0-1[44;1H[?25h[?25l[52;88H5,3  [45;3H[?25h[?25l[52;88H6,12-16[46;16H[?25h[?25l[52;88H7,4    [47;4H[?25h[?25l[52;88H8,16[48;16H[?25h[?25l[52;88H9,0-1[49;1H[?25h[?25l[52;87H90,16 [50;16H[?25h[?25l[52;88H1,0-1[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[32mchar[m ** splitline([32mchar[m *line)[52;87H[K[52;87H92,16[9C25%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m/*[m[52;87H[K[52;87H93,2[10C25%[51;2H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * purpose: split a line into array of white-space separated tokens[m[52;87H[K[52;87H94,16[9C26%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[52;87H[K[52;87H95,16[9C26%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *          or NULL if line if no tokens on the line[m[52;87H[K[52;87H96,16[9C27%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *  action: traverse the array, locate strings, make copies[m[52;87H[K[52;87H97,16[9C27%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[52;87H[K[52;87H98,16[9C28%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H[36m */[m[52;87H[K[52;87H99,3[10C29%[51;3H[?25h[?25l[1;51r[51;1H
[1;52r[51;1H{[52;87H[K[52;87H100,1[9C29%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *newstr[46m()[m;[52;87H[K[52;87H101,15-16     30%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[50;16H()
  [32mchar[m  **args ;[52;87H[K[52;87H102,15-16     30%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[52;87H[K[52;87H103,14-16     31%[51;16H[?25h[?25l[1;51r[1;1H[2M[1;52r[50;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m
  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[52;87H[K[52;87H104,14-16     32%[50;16H[?25h[?25l[52;89H5[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[52;87H[K[52;87H106,15-16     32%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mchar[m  *start;[52;87H[K[52;87H107,14-15     33%[51;15H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[32mint[m   len;[52;87H[K[52;87H108,10-12     34%[51;12H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H109,0-1[7C34%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[52;87H[K[52;87H110,16[8C35%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;5H[33mreturn[m [33mNULL[m;[52;87H[K[52;87H111,16[8C35%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H112,0-1[7C36%[51;1H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[52;87H[K[52;87H113,16[8C37%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hbufspace = [33mBUFSIZ[m;[52;87H[K[52;87H114,16[8C37%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[51;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[52;87H[K[52;87H115,16[8C38%[51;16H[?25h[?25l[1;51r[51;1H
[1;52r[52;87H[K[52;87H116,0-1[7C38%[51;1H[?25h[?25l[52;89H5,16 [50;16H[?25h[?25l[52;89H4[49;16H[?25h[?25l[52;89H3[48;16H[?25h[?25l[52;89H2,0-1[47;1H[?25h[?25l[52;89H1,16 [46;16H[?25h[?25l[52;89H0[45;16H[?25h[?25l[52;88H09,0-1[44;1H[?25h[?25l[52;89H8,10-12[43;12H[?25h[?25l[52;89H7,14-15[42;15H[?25h[?25l[52;89H6,15-16[41;16H[?25h[?25l[52;89H5,14[40;16H[?25h[?25l[52;89H4[39;16H[?25h[?25l[52;89H3[38;16H[?25h[?25l[52;89H2,15[37;16H[?25h[?25l[36;16H[46m()[m[52;89H1[36;16H[?25h[?25l()[52;89H0,1    [35;1H[?25h[?25l[52;87H99,3 [34;3H[?25h[?25l[52;88H8,16[33;16H[?25h[?25l[52;88H7[32;16H[?25h[?25l[52;88H6[31;16H[?25h[?25l[52;88H5[30;16H[?25h[?25l[52;88H4[29;16H[?25h[?25l[52;88H3,2 [28;2H[?25h[?25l[52;88H2,16[27;16H[?25h[?25l[52;88H1,0-1[26;1H[?25h[?25l[52;88H0,16 [25;16H[?25h[?25l[52;87H89,0-1[24;1H[?25h[?25l[52;88H8,16 [23;16H[?25h[?25l[52;88H7,4 [22;4H[?25h[?25l[52;88H6,12-16[21;16H[?25h[?25l[52;88H5,3    [20;3H[?25h[?25l[52;88H4,0-1[19;1H[?25h[?25l[52;88H3,1  [18;1H[?25h[?25l[52;88H2,2-16[17;16H[?25h[?25l[52;88H1[16;16H[?25h[?25l[52;88H0[15;16H[?25h[?25l[52;87H79[14;16H[?25h[?25l[52;87H80[15;16H[?25h[?25l[52;88H1[16;16H[?25h[?25l[52;88H2[17;16H[?25h[?25l[52;88H3,1   [18;1H[?25h[?25l[52;88H4,0-1[19;1H[?25h[?25l[52;88H5,3  [20;3H[?25h[?25l[52;88H6,12-16[21;16H[?25h[?25l[52;88H7,4    [22;4H[?25h[?25l[52;88H8,16[23;16H[?25h[?25l[52;88H9,0-1[24;1H[?25h[?25l[52;87H90,16 [25;16H[?25h[?25l[52;88H1,0-1[26;1H[?25h[?25l[52;88H2,16 [27;16H[?25h[?25l[52;88H3,2 [28;2H[?25h[?25l[52;88H4,16[29;16H[?25h[?25l[52;88H5[30;16H[?25h[?25l[52;88H6[31;16H[?25h[?25l[52;88H7[32;16H[?25h[?25l[52;88H8[33;16H[?25h[?25l[52;88H9,3 [34;3H[?25h[?25l[52;87H100,1[35;1H[?25h[?25l[36;16H[46m()[m[52;89H1,15-16[36;16H[?25h[?25l()[52;89H2[37;16H[?25h[?25l[52;89H3,14[38;16H[?25h[?25l[52;89H4[39;16H[?25h[?25l[52;89H5[40;16H[?25h[?25l[52;89H6,15[41;16H[?25h[?25l[52;89H7,14-15[42;15H[?25h[?25l[52;89H8,10-12[43;12H[?25h[?25l[52;89H9,0-1  [44;1H[?25h[?25l[52;88H10,16 [45;16H[?25h[27m[23m[29m[m[H[2J[?25l[1;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[3;25Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[5;17H}[7;17H[36m/* end of command? */[m[8;17H[33mif[m ( c == [35m'\n'[m )[9;25H[33mbreak[m;[11;17H[36m/* no, add to buffer */[m[12;17Hbuf[pos++] = c;[14;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[15;25H[33mreturn[m [33mNULL[m;[16;17H}[39C[36m/* say so               */[m[17;17Hbuf[pos] = [35m'\0'[m;[18;17H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens
 *          or NULL if line if no tokens on the line
 *  action: traverse the array, locate strings, make copies
 *    note: strtok() could work, but we may want to add quotes later
 */[m
{
  [32mchar[m  *newstr();
  [32mchar[m  **args ;
  [32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m
  [32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m
  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m
  [32mchar[m  *cp = line;[21C[36m/* pos in string        */[m
  [32mchar[m  *start;
  [32mint[m   len;

  [33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
    [33mreturn[m [33mNULL[m;

  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
  bufspace = [33mBUFSIZ[m;
  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[53;194H110,16[8C38%[46;16H[?25h[?25l[53;195H09,0-1[45;1H[?25h[?25l[53;196H8,10-12[44;12H[?25h[?25l[53;196H7,14-15[43;15H[?25h[?25l[53;196H6,15-16[42;16H[?25h[?25l[53;196H5,14[41;16H[?25h[?25l[53;196H4[40;16H[?25h[?25l[53;196H3[39;16H[?25h[?25l[53;196H2,15[38;16H[?25h[?25l[37;16H[46m()[m[53;196H1[37;16H[?25h[?25l()[53;196H0,1    [36;1H[?25h[?25l[53;194H99,3 [35;3H[?25h[?25l[53;195H8,16[34;16H[?25h[?25l[53;195H7[33;16H[?25h[?25l[53;195H6[32;16H[?25h[?25l[53;195H5[31;16H[?25h[?25l[53;195H4[30;16H[?25h[?25l[53;195H3,2 [29;2H[?25h[?25l[53;195H2,16[28;16H[?25h[?25l[53;195H1,0-1[27;1H[?25h[?25l[53;195H0,16 [26;16H[?25h[?25l[53;194H89,0-1[25;1H[?25h[?25l[53;195H8,16 [24;16H[?25h[?25l[53;195H7,4 [23;4H[?25h[?25l[53;195H6,12-16[22;16H[?25h[?25l[53;195H5,3    [21;3H[?25h[?25l[53;195H4,0-1[20;1H[?25h[?25l[53;195H3,1  [19;1H[?25h[?25l[53;195H2,2-16[18;16H[?25h[?25l[53;195H1[17;16H[?25h[?25l[53;195H0[16;16H[?25h[?25l[53;194H79[15;16H[?25h[?25l[53;195H8[14;16H[?25h[?25l[53;195H7[13;16H[?25h[?25l[53;195H6[12;16H[?25h[?25l[53;195H5[11;16H[?25h[?25l[53;195H4[10;16H[?25h[?25l[53;195H3[9;16H[?25h[?25l[53;195H2[8;16H[?25h[?25l[53;195H1[7;16H[?25h[?25l[53;195H0,0-1 [6;1H[?25h[?25l[53;194H69,2-16[5;16H[?25h[?25l[53;195H8[4;16H[?25h[?25l[53;195H7[3;16H[?25h[?25l[53;195H6[2;16H[?25h[?25l[53;195H5[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;26H[33melse[m[27C[36m/* or expand    */[m[53;194H[K[53;194H64,7-16[7C37%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;33Hbuf = emalloc([33mBUFSIZ[m);[53;194H[K[53;194H63,2-16[7C37%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[53;194H[K[53;194H62,2-16[7C36%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[53;194H[K[53;194H61,2-16[7C36%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[53;194H[K[53;194H60,9-16[7C35%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;10Hprintf[46m([m[33m"[m[35m%s[m[33m"[m, prompt[46m)[m;[26C[36m/* prompt user  */[m[53;194H[K[53;194H59,9-16[7C34%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[2;16H([12C)[53;194H[K[53;194H58,0-1[8C34%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[53;194H[K[53;194H57,0-1[8C33%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m        char** commands = NULL; */[m[53;194H[K[53;194H56,9-16[7C33%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;9H[36m/*int command_count = 0;[m[53;194H[K[53;194H55,9-16[7C32%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store the commands[m[53;194H[K[53;194H54,9-16[7C31%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[53;194H[K[53;194H53,1-8[8C31%[1;8H[?25h[?25l[1;52r[1;1H[L[1;53r[1;10H[32mint[m    c;[30C[36m/* input char           */[m[53;194H[K[53;194H52,7-16[7C30%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[53;194H[K[53;194H51,6-16[7C30%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[53;194H[K[53;194H50,6-16[7C29%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[53;194H[K[53;194H49,7-16[7C28%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H{[53;194H[K[53;194H48,1[10C28%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m */[m[53;194H[K[53;194H47,3[10C27%[1;3H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[53;194H[K[53;194H46,16[9C27%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m *          calls fatal from emalloc()[m[53;194H[K[53;194H45,16[9C26%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[53;194H[K[53;194H44,16[9C25%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m * returns: dynamically allocated string holding command line[m[53;194H[K[53;194H43,16[9C25%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m * purpose: read next command line from fp[m[53;194H[K[53;194H42,16[9C24%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m/*[m[53;194H[K[53;194H41,2[10C24%[1;2H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[32mchar[m * next_cmd[46m([m[32mchar[m *prompt, [32mFILE[m *fp[46m)[m[53;194H[K[53;194H40,16[9C23%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[2;16H([22C)[53;194H[K[53;194H39,0-1[8C22%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[53;194H[K[53;194H38,0-1[8C22%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[53;194H[K[53;194H37,0-1[8C21%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[53;194H[K[53;194H36,0-1[8C21%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m */[m[53;194H[K[53;194H35,3[10C20%[1;3H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[53;194H[K[53;194H34,16[9C19%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[53;194H[K[53;194H33,16[9C19%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m *    [m[53;194H[K[53;194H32,6[10C18%[1;6H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[53;194H[K[53;194H31,16[9C18%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[53;194H[K[53;194H30,0-1[8C17%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[53;194H[K[53;194H29,0-1[8C16%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H}[53;194H[K[53;194H28,1[10C16%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[1;9H[33mreturn[m count;[53;194H[K[53;194H27,9-16[7C15%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;9H}[53;194H[K[53;194H26,2-9[8C15%[1;9H[?25h[?25l[1;52r[1;1H[L[1;53r[1;17Hcmd++;[53;194H[K[53;194H25,2-16[7C14%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;17Hcount++;[53;194H[K[53;194H24,2-16[7C13%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;9H[33mwhile[m(*cmd != [33mNULL[m){[53;194H[K[53;194H23,9-16[7C13%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;9Hcount = [33m0[m;[53;194H[K[53;194H22,9-16[7C12%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[53;194H[K[53;194H21,0-1[8C12%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[1;9H[32mchar[m** cmd = commands;[53;194H[K[53;194H20,9-16[7C11%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;9H[32mint[m count;[53;194H[K[53;194H19,9-16[7C10%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[32mint[m count_commands([32mchar[m** commands){[53;194H[K[53;194H18,16[9C10%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[53;194H[K[53;194H17,0-1[9C9%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[35m#define DFL_PROMPT      [m[33m"> "[m[53;194H[K[53;194H16,16[10C9%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[53;194H[K[53;194H15,0-1[9C8%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[35m#include [m[33m"execute.c"[m[53;194H[K[53;194H14,16[10C7%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[35m#include [m[33m"smsh.h"[m[53;194H[K[53;194H13,16[10C7%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[35m#include [m[33m<string.h>[m[53;194H[K[53;194H12,16[10C6%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[35m#include [m[33m<signal.h>[m[53;194H[K[53;194H11,16[10C6%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[35m#include [m[33m<unistd.h>[m[53;194H[K[53;194H10,16[10C5%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[35m#include [m[33m<stdlib.h>[m[53;194H[K[53;194H9,16[11C4%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[35m#include [m[33m<stdio.h>[m[53;194H[K[53;194H8,16[11C4%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[53;194H[K[53;194H7,0-1[10C3%[1;1H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m **/[m[53;194H[K[53;194H6,4[12C3%[1;4H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m **             uses fork, exec, wait, and ignores signals[m[53;194H[K[53;194H5,5-16[9C2%[1;16H[?25h[?25l[53;194H6,4   [2;4H[?25h[?25l[53;194H7,0-1[3;1H[?25h[?25l[53;194H8,16 [4;16H[?25h[?25l[53;194H9[5;16H[?25h[?25l[53;194H10,16[6;16H[?25h[?25l[53;195H1[7;16H[?25h[?25l[53;195H2[8;16H[?25h[?25l[53;195H3[9;16H[?25h[?25l[53;195H4[10;16H[?25h[?25l[53;195H5,0-1[11;1H[?25h[?25l[53;195H6,16 [12;16H[?25h[?25l[53;195H7,0-1[13;1H[?25h[?25l[53;195H8,16 [14;16H[?25h[?25l[53;195H9,9-16[15;16H[?25h[?25l[53;194H20[16;16H[?25h[?25l[53;195H1,0-1 [17;1H[?25h[?25l[53;195H0,9-16[16;16H[?25h[?25l[53;194H19[15;16H[?25h[?25l[53;195H8,16  [14;16H[?25h[?25l[53;195H7,0-1[13;1H[?25h[?25l[53;195H6,16 [12;16H[?25h[?25l[53;195H5,0-1[11;1H[?25h[?25l[53;195H4,16 [10;16H[?25h[?25l[53;195H3[9;16H[?25h[?25l[53;195H2[8;16H[?25h[?25l[53;195H1[7;16H[?25h[?25l[53;195H0[6;16H[?25h[?25l[53;194H9,16 [5;16H[?25h[?25l[53;194H8[4;16H[?25h[?25l[53;194H7,0-1[3;1H[?25h[?25l[53;194H6,4  [2;4H[?25h[?25l[53;194H5,5-16[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m **             this one parses the command line into strings[m[53;194H[K[53;194H4,5-16[9C1%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m **             first really useful version after prompting shell[m[53;194H[K[53;194H3,5-16[9C1%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m  smsh1.c  small-shell version 1[m[53;194H[K[53;194H2,16[11C0%[1;16H[?25h[?25l[1;52r[1;1H[L[1;53r[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m[53;194H[K[53;194H1,16[10CTop[1;16H[?25h[?25l[53;194H[K[53;1H:[?2004h[?25hs[?25l[?25he[?25l[?25ht[?25l[?25h[?25l [?25hn[?25l[?25hu[?25l[?25hm[?25l[?25hb[?25l[?25he[?25l[?25hr[?25l[?25h[?25l[1;1H[33m  1 [m[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m
[33m  2 [m[36m  smsh1.c  small-shell version 1[m
[33m  3 [m[1C[36m**[9C    first really useful version after prompting shell[m
[33m  4 [m[1C[36m**[9C    this one parses the command line into strings[m
[33m  5 [m[1C[36m**[9C    uses fork, exec, wait, and ignores signals[m
[33m  6 [m[36m **/[m
[33m  7 
  8 [m[35m#include [m[33m<stdio.h>[m
[33m  9 [m[35m#include [m[33m<stdlib.h>[m
[33m 10 [m[35m#include [m[33m<unistd.h>[m
[33m 11 [m[35m#include [m[33m<signal.h>[m
[33m 12 [m[35m#include [m[33m<string.h>[m
[33m 13 [m[35m#include [m[33m"smsh.h"[m
[33m 14 [m[35m#include [m[33m"execute.c"[m
[33m 15 
 16 [m[35m#define DFL_PROMPT      [m[33m"> "[m
[33m 17 
 18 [m[32mint[m count_commands([32mchar[m** commands){
[33m 19 [m        [32mint[m count;
[33m 20 [m        [32mchar[m** cmd = commands;
[33m 21 
 22 [m        count = [33m0[m;
[33m 23 [m        [33mwhile[m(*cmd != [33mNULL[m){
[33m 24 [m[12C    count++;
[33m 25 [m[12C    cmd++;
[33m 26 [m        }
[33m 27 [m        [1C[33meturn[m count;
[33m 28 [m}
[33m 29 
 30 
 31 [m[36m/* splitline.c - commmand reading and parsing functions for smsh[m
[33m 32 [m[1C[36m*    [m
[33m 33 [m[1C[36m*    char *next_cmd(char *prompt, FILE *fp) - get next command[m
[33m 34 [m[1C[36m*    char **splitline(char *str);[7C    - parse a string[m
[33m 35 [m[36m */[m
[33m 36 
 37 
 38 
 39 
 40 [m[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[33m 41 [m[36m/*[m
[33m 42 [m[36m * purpose: read next command line from fp[m
[33m 43 [m[36m * returns: dynamically allocated string holding command line[m
[33m 44 [m[36m *  errors: NULL at EOF (not really an error)[m
[33m 45 [m[1C[36m*          calls fatal from emalloc()[m
[33m 46 [m[1C[36m*   notes: allocates space in BUFSIZ chunks.  [m
[33m 47 [m[36m */[m
[33m 48 [m{
[33m 49 [m         [32mchar[m   *buf = [33mNULL[m;[24C    [36m/* the buffer[7C    */[m
[33m 50 [m         [32mint[m    bufspace = [33m0[m;[15C    [36m/* total size[7C    */[m
[33m 51 [m         [32mint[m    pos = [33m0[m;[20C    [36m/* current position     */[m
[33m 52 [m         [32mint[m    c;[26C    [36m/* input char[7C    */[m[53;194H1,16[10CTop[1;20H[?25h[?25l[53;194H2[2;20H[?25h[?25l[53;194H3,5-16[3;20H[?25h[?25l[53;194H4[4;20H[?25h[?25l[53;194H5[5;20H[?25h[?25l[53;194H6,4   [6;8H[?25h[?25l[53;194H7,0-1[7;5H[?25h[?25l[53;194H8,16 [8;20H[?25h[?25l[53;194H9[9;20H[?25h[?25l[53;194H10,16[10;20H[?25h[?25l[53;195H1[11;20H[?25h[?25l[53;195H2[12;20H[?25h[?25l[53;195H3[13;20H[?25h[?25l[53;195H4[14;20H[?25h[?25l[53;195H5,0-1[15;5H[?25h[?25l[53;195H6,16 [16;20H[?25h[?25l[53;195H7,0-1[17;5H[?25h[?25l[53;195H8,16 [18;20H[?25h[?25l[53;195H9,9-16[19;20H[?25h[?25l[53;194H20[20;20H[?25h[?25l[53;195H1,0-1 [21;5H[?25h[?25l[53;195H2,9-16[22;20H[?25h[?25l[53;195H3[23;20H[?25h[?25l[53;195H4,2[24;20H[?25h[?25l[53;195H5[25;20H[?25h[?25l[23;32H[46m{[26;13H}[m[53;195H6,2-9 [26;13H[?25h[?25l[23;32H{[26;13H}[53;195H7,9-16[27;20H[?25h[?25l[18;40H[46m{[28;5H}[m[53;195H8,1   [28;5H[?25h[?25l[18;40H{[28;5H}[53;195H9,0-1[29;5H[?25h[?25l[53;194H30[30;5H[?25h[?25l[53;195H1,16 [31;20H[?25h[?25l[53;195H2,6 [32;10H[?25h[?25l[53;195H3,16[33;20H[?25h[?25l[53;195H4[34;20H[?25h[?25l[53;195H5,3 [35;7H[?25h[?25l[53;195H6,0-1[36;5H[?25h[?25l[53;195H7[37;5H[?25h[?25l[53;195H8[38;5H[?25h[?25l[53;195H9[39;5H[?25h[?25l[40;20H[46m([22C)[m[53;194H40,16 [40;20H[?25h[?25l([22C)[53;195H1,2 [41;6H[?25h[?25l[53;195H2,16[42;20H[?25h[?25l[53;195H3[43;20H[?25h[?25l[53;195H4[44;20H[?25h[?25l[53;195H5[45;20H[?25h[?25l[53;195H6[46;20H[?25h[?25l[53;195H7,3 [47;7H[?25h[?25l[53;195H8,1[48;5H[?25h[?25l[53;195H9,7-16[49;20H[?25h[?25l[53;194H50,6[50;20H[?25h[?25l[53;195H1[51;20H[?25h[?25l[53;195H2,7[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 53 [m[53;1H[K[53;194H53,1-8[9C0%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 54 [m[8C[36m//new variable to store number of commands and array of pointer (double pointer char) to store the commands[m[53;194H[K[53;194H54,9-16[8C1%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 55 [m[8C[36m/*int command_count = 0;[m[53;194H[K[53;194H55,9-16[8C1%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 56 [m[36m        char** commands = NULL; */[m[53;194H[K[53;194H56,9-16[8C2%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 57 [m[53;194H[K[53;194H57,0-1[9C3%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 58 [m[53;194H[K[53;194H58,0-1[9C3%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 59 [m[9Cprintf[46m([m[33m"[m[35m%s[m[33m"[m, prompt[46m)[m;[26C[36m/* prompt user  */[m[53;194H[K[53;194H59,9-16[8C4%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[51;20H([12C)
[33m 60 [m[9C[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[53;194H[K[53;194H60,9-16[8C4%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 61 [m[17C[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[53;194H[K[53;194H61,2-16[8C5%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 62 [m[24C[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[53;194H[K[53;194H62,2-16[8C6%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 63 [m[32Cbuf = emalloc([33mBUFSIZ[m);[53;194H[K[53;194H63,2-16[8C6%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 64 [m[25C[33melse[m[27C[36m/* or expand    */[m[53;194H[K[53;194H64,7-16[8C7%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 65 [m[32Cbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[53;194H[K[53;194H65,2-16[8C7%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 66 [m[53;194H[K[53;194H66,2-16[8C8%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 67 [m[24Cbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[53;194H[K[53;194H67,2-16[8C9%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 68 [m[53;194H[K[53;194H68,2-16[8C9%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 69 [m[16C}[53;194H[K[53;194H69,2-16[7C10%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 70 [m[53;194H[K[53;194H70,0-1[8C10%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 71 [m[16C[36m/* end of command? */[m[53;194H[K[53;194H71,2-16[7C11%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 72 [m[16C[33mif[m ( c == [35m'\n'[m )[53;194H[K[53;194H72,2-16[7C12%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 73 [m[24C[33mbreak[m;[53;194H[K[53;194H73,2-16[7C12%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 74 [m[53;194H[K[53;194H74,2-16[7C13%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 75 [m[16C[36m/* no, add to buffer */[m[53;194H[K[53;194H75,2-16[7C13%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 76 [m[16Cbuf[pos++] = c;[53;194H[K[53;194H76,2-16[7C14%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 77 [m[53;194H[K[53;194H77,2-16[7C15%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 78 [m[16C[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[53;194H[K[53;194H78,2-16[7C15%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 79 [m[24C[33mreturn[m [33mNULL[m;[53;194H[K[53;194H79,2-16[7C16%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 80 [m[16C}[39C[36m/* say so               */[m[53;194H[K[53;194H80,2-16[7C16%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 81 [m[16Cbuf[pos] = [35m'\0'[m;[53;194H[K[53;194H81,2-16[7C17%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 82 [m[16C[33mreturn[m buf;[53;194H[K[53;194H82,2-16[7C18%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[29;46H[46m{[m[52;1H[33m 83 [m[46m}[m[53;194H[K[53;194H83,1[10C18%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[28;46H{[51;5H}
[33m 84 [m[53;194H[K[53;194H84,0-1[8C19%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 85 [m[36m/**[m[53;194H[K[53;194H85,3[10C19%[52;7H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 86 [m[36m **     splitline ( parse a line into an array of strings )[m[53;194H[K[53;194H86,12-16      20%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 87 [m[36m **/[m[53;194H[K[53;194H87,4[10C21%[52;8H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 88 [m[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[53;194H[K[53;194H88,16[9C21%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 89 [m[53;194H[K[53;194H89,0-1[8C22%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 90 [m[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[53;194H[K[53;194H90,16[9C22%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 91 [m[53;194H[K[53;194H91,0-1[8C23%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 92 [m[32mchar[m ** splitline([32mchar[m *line)[53;194H[K[53;194H92,16[9C24%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 93 [m[36m/*[m[53;194H[K[53;194H93,2[10C24%[52;6H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 94 [m[36m * purpose: split a line into array of white-space separated tokens[m[53;194H[K[53;194H94,16[9C25%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 95 [m[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[53;194H[K[53;194H95,16[9C25%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 96 [m[36m *          or NULL if line if no tokens on the line[m[53;194H[K[53;194H96,16[9C26%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 97 [m[36m *  action: traverse the array, locate strings, make copies[m[53;194H[K[53;194H97,16[9C27%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 98 [m[36m *    note: strtok() could work, but we may want to add quotes later[m[53;194H[K[53;194H98,16[9C27%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 99 [m[36m */[m[53;194H[K[53;194H99,3[10C28%[52;7H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m100 [m{[53;194H[K[53;194H100,1[9C28%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m101 [m  [32mchar[m  *newstr[46m()[m;[53;194H[K[53;194H101,15-16     29%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[51;20H()
[33m102 [m  [32mchar[m  **args ;[53;194H[K[53;194H102,15-16     30%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m103 [m  [32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[53;194H[K[53;194H103,14-16     30%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m104 [m  [32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[53;194H[K[53;194H104,14-16     31%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m105 [m  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[53;194H[K[53;194H105,14-16     31%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m106 [m  [32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[53;194H[K[53;194H106,15-16     32%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m107 [m  [32mchar[m  *start;[53;194H[K[53;194H107,14-15     33%[52;19H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m108 [m  [32mint[m   len;[53;194H[K[53;194H108,10-12     33%[52;16H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m109 [m[53;194H[K[53;194H109,0-1[7C34%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m110 [m  [33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[53;194H[K[53;194H110,16[8C34%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m111 [m    [33mreturn[m [33mNULL[m;[53;194H[K[53;194H111,16[8C35%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m112 [m[53;194H[K[53;194H112,0-1[7C36%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m113 [m  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[53;194H[K[53;194H113,16[8C36%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m114 [m  bufspace = [33mBUFSIZ[m;[53;194H[K[53;194H114,16[8C37%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m115 [m  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[53;194H[K[53;194H115,16[8C37%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m116 [m[53;194H[K[53;194H116,0-1[7C38%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m117 [m  [33mwhile[m( *cp != [35m'\0'[m )[53;194H[K[53;194H117,16[8C39%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m118 [m    {[53;194H[K[53;194H118,5[9C39%[52;9H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m119 [m      [33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[53;194H[K[53;194H119,16[8C40%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m120 [m[8Ccp++;[53;194H[K[53;194H120,6-13      40%[52;17H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m121 [m      [33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[53;194H[K[53;194H121,16[8C41%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m122 [m[8C[33mbreak[m;[53;194H[K[53;194H122,7-14      42%[52;18H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m123 [m[53;194H[K[53;194H123,0-1[7C42%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m124 [m      [36m/* make sure the array has room (+1 for NULL) */[m[53;194H[K[53;194H124,16[8C43%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m125 [m      [33mif[m ( argnum+[33m1[m >= spots ){[53;194H[K[53;194H125,16[8C43%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m126 [m[8Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);[53;194H[K[53;194H126,9-16      44%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m127 [m[8Cbufspace += [33mBUFSIZ[m;[53;194H[K[53;194H127,9-16      45%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m128 [m[8Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[53;194H[K[53;194H128,9-16      45%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[48;35H[46m{[m[52;1H[33m129 [m      [46m}[m[53;194H[K[53;194H129,7[9C46%[52;11H[?25h[?25l[1;52r[52;1H
[1;53r[47;35H{[51;11H}
[33m130 [m[53;194H[K[53;194H130,0-1[7C46%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m131 [m      [36m/* mark start, then find end of word */[m[53;194H[K[53;194H131,16[8C47%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m132 [m      start = cp;[53;194H[K[53;194H132,16[8C48%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m133 [m      len   = [33m1[m;[53;194H[K[53;194H133,16[8C48%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m134 [m      [33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[53;194H[K[53;194H134,16[8C49%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m135 [m[8Clen++;[53;194H[K[53;194H135,7-14      50%[52;18H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m136 [m      args[argnum++] = newstr(start, len);[53;194H[K[53;194H136,16[8C50%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[33;9H[46m{[m[52;1H[33m137 [m    [46m}[m[53;194H[K[53;194H137,5[9C51%[52;9H[?25h[?25l[1;52r[52;1H
[1;53r[32;9H{[51;9H}
[33m138 [m  args[argnum] = [33mNULL[m;[53;194H[K[53;194H138,16[8C51%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m139 [m  [33mreturn[m args;[53;194H[K[53;194H139,14[8C52%[52;18H[?25h[?25l[1;52r[52;1H
[1;53r[12;5H[46m{[m[52;1H[33m140 [m[46m}[m[53;194H[K[53;194H140,1[9C53%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[11;5H{[51;5H}
[33m141 [m[53;194H[K[53;194H141,0-1[7C53%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m142 [m[36m/*[m[53;194H[K[53;194H142,2[9C54%[52;6H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m143 [m[36m * purpose: constructor for strings[m[53;194H[K[53;194H143,16[8C54%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m144 [m[36m * returns: a string, never NULL[m[53;194H[K[53;194H144,16[8C55%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m145 [m[36m */[m[53;194H[K[53;194H145,3[9C56%[52;7H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m146 [m[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[53;194H[K[53;194H146,16[8C56%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m147 [m{[53;194H[K[53;194H147,1[9C57%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m148 [m  [32mchar[m *rv = emalloc(l+[33m1[m);[53;194H[K[53;194H148,16[8C57%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m149 [m[53;194H[K[53;194H149,0-1[7C58%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m150 [m  rv[l] = [35m'\0'[m;[53;194H[K[53;194H150,15[8C59%[52;19H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m151 [m  strncpy(rv, s, l);[53;194H[K[53;194H151,16[8C59%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m152 [m  [33mreturn[m rv;[53;194H[K[53;194H152,12[8C60%[52;16H[?25h[?25l[1;52r[52;1H
[1;53r[46;5H[46m{[m[52;1H[33m153 [m[46m}[m[53;194H[K[53;194H153,1[9C60%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[45;5H{[51;5H}
[33m154 [m[53;194H[K[53;194H154,0-1[7C61%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m155 [m[32mvoid[m freelist([32mchar[m **list)[53;194H[K[53;194H155,16[8C62%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m156 [m[36m/*[m[53;194H[K[53;194H156,2[9C62%[52;6H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m157 [m[36m * purpose: free the list returned by splitline[m[53;194H[K[53;194H157,16[8C63%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m158 [m[36m * returns: nothing[m[53;194H[K[53;194H158,16[8C63%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m159 [m[36m *  action: free all strings in list and then free the list[m[53;194H[K[53;194H159,16[8C64%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m160 [m[36m */[m[53;194H[K[53;194H160,3[9C65%[52;7H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m161 [m{[53;194H[K[53;194H161,1[9C65%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m162 [m  [32mchar[m  **cp = list;[53;194H[K[53;194H162,15-16     66%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m163 [m  [33mwhile[m[46m([m *cp [46m)[m[53;194H[K[53;194H163,14[8C66%[52;18H[?25h[?25l[1;52r[52;1H
[1;53r[51;12H( *cp )
[33m164 [m    free(*cp++);[53;194H[K[53;194H164,16[8C67%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m165 [m  free(list);[53;194H[K[53;194H165,13[8C68%[52;17H[?25h[?25l[1;52r[52;1H
[1;53r[47;5H[46m{[m[52;1H[33m166 [m[46m}[m[53;194H[K[53;194H166,1[9C68%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[46;5H{[51;5H}
[33m167 [m[53;194H[K[53;194H167,0-1[7C69%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m168 [m[32mvoid[m * emalloc([32msize_t[m n)[53;194H[K[53;194H168,16[8C69%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m169 [m{[53;194H[K[53;194H169,1[9C70%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m170 [m  [32mvoid[m *rv ;[53;194H[K[53;194H170,12[8C71%[52;16H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m171 [m  [33mif[m ( (rv = malloc(n)) == [33mNULL[m )[53;194H[K[53;194H171,16[8C71%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m172 [m    fatal([33m"out of memory"[m,[33m""[m,[33m1[m);[53;194H[K[53;194H172,16[8C72%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m173 [m  [33mreturn[m rv;[53;194H[K[53;194H173,12[8C72%[52;16H[?25h[?25l[1;52r[52;1H
[1;53r[47;5H[46m{[m[52;1H[33m174 [m[46m}[m[53;194H[K[53;194H174,1[9C73%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[46;5H{[51;5H}
[33m175 [m[53;194H[K[53;194H175,0-1[7C74%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m176 [m[32mvoid[m * erealloc[46m([m[32mvoid[m *p, [32msize_t[m n[46m)[m[53;194H[K[53;194H176,16[8C74%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[51;20H([17C)
[33m177 [m{[53;194H[K[53;194H177,1[9C75%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m178 [m  [32mvoid[m *rv;[53;194H[K[53;194H178,11[8C75%[52;15H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m179 [m  [33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[53;194H[K[53;194H179,16[8C76%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m180 [m    fatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[53;194H[K[53;194H180,16[8C77%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m181 [m  [33mreturn[m rv;[53;194H[K[53;194H181,12[8C77%[52;16H[?25h[?25l[1;52r[52;1H
[1;53r[47;5H[46m{[m[52;1H[33m182 [m[46m}[m[53;194H[K[53;194H182,1[9C78%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[46;5H{[51;5H}
[33m183 [m[53;194H[K[53;194H183,0-1[7C78%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m184 [m[53;194H[K[53;194H184,0-1[7C79%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m185 [m[32mvoid[m setup[46m()[m[53;194H[K[53;194H185,12[8C80%[52;16H[?25h[?25l[1;52r[52;1H
[1;53r[51;15H()
[33m186 [m[36m/*[m[53;194H[K[53;194H186,2[9C80%[52;6H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m187 [m[36m * purpose: initialize shell[m[53;194H[K[53;194H187,16[8C81%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m188 [m[36m * returns: nothing. calls fatal() if trouble[m[53;194H[K[53;194H188,16[8C81%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m189 [m[36m */[m[53;194H[K[53;194H189,3[9C82%[52;7H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m190 [m{[53;194H[K[53;194H190,1[9C83%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m191 [m  signal([33mSIGINT[m,  [33mSIG_IGN[m);[53;194H[K[53;194H191,16[8C83%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m192 [m  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[53;194H[K[53;194H192,16[8C84%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[49;5H[46m{[m


[33m193 [m[46m}[m[53;194H[K[53;194H193,1[9C84%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[48;5H{[51;5H}
[33m194 [m[53;194H[K[53;194H194,0-1[7C85%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m195 [m[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[53;194H[K[53;194H195,16[8C86%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m196 [m{[53;194H[K[53;194H196,1[9C86%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m197 [m  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[53;194H[K[53;194H197,16[8C87%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m198 [m  exit(n);[53;194H[K[53;194H198,10[8C87%[52;14H[?25h[?25l[1;52r[52;1H
[1;53r[49;5H[46m{[m


[33m199 [m[46m}[m[53;194H[K[53;194H199,1[9C88%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[48;5H{[51;5H}
[33m200 [m[53;194H[K[53;194H200,0-1[7C89%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m201 [m[32mint[m main[46m()[m[53;194H[K[53;194H201,10[8C89%[52;14H[?25h[?25l[1;52r[52;1H
[1;53r[51;13H()
[33m202 [m{[53;194H[K[53;194H202,1[9C90%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m203 [m  [32mchar[m  *cmdline, *prompt, **arglist;[53;194H[K[53;194H203,15-16     90%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m204 [m  [32mint[m   result;[53;194H[K[53;194H204,13-15     91%[52;19H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m205 [m  [32mvoid[m  setup();[53;194H[K[53;194H205,15-16     92%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m206 [m[53;194H[K[53;194H206,0-1[7C92%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m207 [m  prompt = DFL_PROMPT;[53;194H[K[53;194H207,16[8C93%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m208 [m  setup();[53;194H[K[53;194H208,10[8C93%[52;14H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m209 [m[53;194H[K[53;194H209,0-1[7C94%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m210 [m  [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[53;194H[K[53;194H210,16[8C95%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m211 [m    [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[53;194H[K[53;194H211,16[8C95%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m212 [m[8Cresult = execute(arglist);[53;194H[K[53;194H212,16[8C96%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m213 [m[8Cfreelist(arglist);[53;194H[K[53;194H213,16[8C96%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[49;55H[46m{[m


[33m214 [m    [46m}[m[53;194H[K[53;194H214,5[9C97%[52;9H[?25h[?25l[1;52r[52;1H
[1;53r[48;55H{[51;9H}
[33m215 [m    free(cmdline);[53;194H[K[53;194H215,16[8C98%[52;20H[?25h[?25l[1;52r[52;1H
[1;53r[46;60H[46m{[m[52;1H[33m216 [m  [46m}[m[53;194H[K[53;194H216,3[9C98%[52;7H[?25h[?25l[1;52r[52;1H
[1;53r[45;60H{[51;7H}
[33m217 [m  [33mreturn[m [33m0[m;[53;194H[K[53;194H217,11[8C99%[52;15H[?25h[?25l[1;52r[52;1H
[1;53r[36;5H[46m{[m[52;1H[33m218 [m[46m}[m[53;194H[K[53;194H218,1[9CBot[52;5H[?25h[?25l[53;194H[K[53;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[53;3H[K[53;3H[?25h[?25l[53;2H[K[53;2H[?25h [?25l[192C218,1[9CBot[52;5H[?25h[?25l[27m[23m[29m[m[H[2J[1;1H[33m117 [m  [33mwhile[m( *cp != [35m'\0'[m )
[33m118 [m    {
[33m119 [m      [33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m
[33m120 [m[8Ccp++;
[33m121 [m      [33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m
[33m122 [m[8C[33mbreak[m;
[33m123 
124 [m      [36m/* make sure the array has room (+1 for NULL) */[m
[33m125 [m      [33mif[m ( argnum+[33m1[m >= spots ){
[33m126 [m[8Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);
[33m127 [m[8Cbufspace += [33mBUFSIZ[m;
[33m128 [m[8Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));
[33m129 [m      }
[33m130 
131 [m      [36m/* mark start, then find end of word */[m
[33m132 [m      start = cp;
[33m133 [m      len   = [33m1[m;
[33m134 [m      [33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )
[33m135 [m[8Clen++;
[33m136 [m      args[argnum++] = newstr(start, len);
[33m137 [m    }
[33m138 [m  args[argnum] = [33mNULL[m;
[33m139 [m  [33mreturn[m args;
[33m140 [m}
[33m141 
142 [m[36m/*[m
[33m143 [m[36m * purpose: constructor for strings[m
[33m144 [m[36m * returns: a string, never NULL[m
[33m145 [m[36m */[m
[33m146 [m[32mchar[m *newstr([32mchar[m *s, [32mint[m l)
[33m147 [m{
[33m148 [m  [32mchar[m *rv = emalloc(l+[33m1[m);
[33m149 
150 [m  rv[l] = [35m'\0'[m;
[33m151 [m  strncpy(rv, s, l);
[33m152 [m  [33mreturn[m rv;
[33m153 [m}
[33m154 
155 [m[32mvoid[m freelist([32mchar[m **list)
[33m156 [m[36m/*[m
[33m157 [m[36m * purpose: free the list returned by splitline[m
[33m158 [m[36m * returns: nothing[m
[33m159 [m[36m *  action: free all strings in list and then free the list[m
[33m160 [m[36m */[m
[33m161 [m{
[33m162 [m  [32mchar[m  **cp = list;
[33m163 [m  [33mwhile[m( *cp )
[33m164 [m    free(*cp++);
[33m165 [m  free(list);
[33m166 [m}
[33m167 
168 [m[32mvoid[m * emalloc([32msize_t[m n)[53;194H168,1[9C69%[52;5H[?25h[?25l[27m[23m[29m[m[H[2J[1;1H[33m 67 [m[24Cbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m
[33m 68 
 69 [m[16C}
[33m 70 
 71 [m[16C[36m/* end of command? */[m
[33m 72 [m[16C[33mif[m ( c == [35m'\n'[m )
[33m 73 [m[24C[33mbreak[m;
[33m 74 
 75 [m[16C[36m/* no, add to buffer */[m
[33m 76 [m[16Cbuf[pos++] = c;
[33m 77 
 78 [m[16C[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m
[33m 79 [m[24C[33mreturn[m [33mNULL[m;
[33m 80 [m[16C}[39C[36m/* say so               */[m
[33m 81 [m[16Cbuf[pos] = [35m'\0'[m;
[33m 82 [m[16C[33mreturn[m buf;
[33m 83 [m}
[33m 84 
 85 [m[36m/**[m
[33m 86 [m[36m **     splitline ( parse a line into an array of strings )[m
[33m 87 [m[36m **/[m
[33m 88 [m[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m
[33m 89 
 90 [m[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m
[33m 91 
 92 [m[32mchar[m ** splitline([32mchar[m *line)
[33m 93 [m[36m/*[m
[33m 94 [m[36m * purpose: split a line into array of white-space separated tokens[m
[33m 95 [m[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m
[33m 96 [m[36m *          or NULL if line if no tokens on the line[m
[33m 97 [m[36m *  action: traverse the array, locate strings, make copies[m
[33m 98 [m[36m *    note: strtok() could work, but we may want to add quotes later[m
[33m 99 [m[36m */[m
[33m100 [m{
[33m101 [m  [32mchar[m  *newstr();
[33m102 [m  [32mchar[m  **args ;
[33m103 [m  [32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m
[33m104 [m  [32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m
[33m105 [m  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m
[33m106 [m  [32mchar[m  *cp = line;[21C[36m/* pos in string        */[m
[33m107 [m  [32mchar[m  *start;
[33m108 [m  [32mint[m   len;
[33m109 
110 [m  [33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
[33m111 [m    [33mreturn[m [33mNULL[m;
[33m112 
113 [m  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
[33m114 [m  bufspace = [33mBUFSIZ[m;
[33m115 [m  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);
[33m116 
117 [m  [33mwhile[m( *cp != [35m'\0'[m )
[33m118 [m    {[53;194H118,5[9C39%[52;9H[?25h[?25l[27m[23m[29m[m[H[2J[1;1H[33m 17 
 18 [m[32mint[m count_commands([32mchar[m** commands){
[33m 19 [m[8C[32mint[m count;
[33m 20 [m[8C[32mchar[m** cmd = commands;
[33m 21 
 22 [m[8Ccount = [33m0[m;
[33m 23 [m[8C[33mwhile[m(*cmd != [33mNULL[m){
[33m 24 [m[16Ccount++;
[33m 25 [m[16Ccmd++;
[33m 26 [m[8C}
[33m 27 [m[8C[33mreturn[m count;
[33m 28 [m}
[33m 29 
 30 
 31 [m[36m/* splitline.c - commmand reading and parsing functions for smsh[m
[33m 32 [m[36m *    [m
[33m 33 [m[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m
[33m 34 [m[36m *    char **splitline(char *str);           - parse a string[m
[33m 35 [m[36m */[m
[33m 36 
 37 
 38 
 39 
 40 [m[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[33m 41 [m[36m/*[m
[33m 42 [m[36m * purpose: read next command line from fp[m
[33m 43 [m[36m * returns: dynamically allocated string holding command line[m
[33m 44 [m[36m *  errors: NULL at EOF (not really an error)[m
[33m 45 [m[36m *          calls fatal from emalloc()[m
[33m 46 [m[36m *   notes: allocates space in BUFSIZ chunks.  [m
[33m 47 [m[36m */[m
[33m 48 [m{
[33m 49 [m[9C[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m
[33m 50 [m[9C[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m
[33m 51 [m[9C[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m
[33m 52 [m[9C[32mint[m    c;[30C[36m/* input char           */[m
[33m 53 
 54 [m[8C[36m//new variable to store number of commands and array of pointer (double pointer char) to store the commands[m
[33m 55 [m[8C[36m/*int command_count = 0;[m
[33m 56 [m[36m        char** commands = NULL; */[m
[33m 57 
 58 
 59 [m[9Cprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m
[33m 60 [m[9C[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m
[33m 61 [m[17C[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m
[33m 62 [m[24C[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m
[33m 63 [m[32Cbuf = emalloc([33mBUFSIZ[m);
[33m 64 [m[25C[33melse[m[27C[36m/* or expand    */[m
[33m 65 [m[32Cbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);
[33m 66 
 67 [m[24Cbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m
[33m 68 [m[53;194H68,8-32[8C9%[52;36H[?25h[?25l[1;52r[1;1H[16L[1;53r[1;1H[33m  1 [m[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m
[33m  2 [m[36m  smsh1.c  small-shell version 1[m
[33m  3 [m[36m **             first really useful version after prompting shell[m
[33m  4 [m[36m **             this one parses the command line into strings[m
[33m  5 [m[36m **             uses fork, exec, wait, and ignores signals[m
[33m  6 [m[36m **/[m
[33m  7 
  8 [m[35m#include [m[33m<stdio.h>[m
[33m  9 [m[35m#include [m[33m<stdlib.h>[m
[33m 10 [m[35m#include [m[33m<unistd.h>[m
[33m 11 [m[35m#include [m[33m<signal.h>[m
[33m 12 [m[35m#include [m[33m<string.h>[m
[33m 13 [m[35m#include [m[33m"smsh.h"[m
[33m 14 [m[35m#include [m[33m"execute.c"[m
[33m 15 
 16 [m[35m#define DFL_PROMPT      [m[33m"> "[m[53;194H[K[53;194H18,1[10CTop[18;5H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[53;195H9,1-8[19;12H[?25h[?25l[53;194H20[20;12H[?25h[?25l[53;195H1,0-1[21;5H[?25h[?25l[53;195H2,1-8[22;12H[?25h[?25l[53;195H3[23;12H[?25h[?25l[53;195H4[24;12H[?25h[?25l[53;195H5[25;12H[?25h[?25l[53;195H6[26;12H[?25h[?25l[53;195H7[27;12H[?25h[?25l[18;40H[46m{[28;5H}[m[53;195H8,1  [28;5H[?25h[?25l[18;40H{[28;5H}[53;195H9,0-1[29;5H[?25h[?25l[53;194H30[30;5H[?25h[?25l[53;195H1,1  [31;5H[?25h[?25l[53;195H2[32;5H[?25h[?25l[53;195H3[33;5H[?25h[?25l[53;195H4[34;5H[?25h[?25l[53;195H5[35;5H[?25h[?25l[53;195H6,0-1[36;5H[?25h[?25l[53;195H7[37;5H[?25h[?25l[53;195H8[38;5H[?25h[?25l[53;195H9[39;5H[?25h[?25l[53;194H40,1  [40;5H[?25h[?25l[53;195H1[41;5H[?25h[?25l[53;195H2[42;5H[?25h[?25l[53;195H3[43;5H[?25h[?25l[53;195H4[44;5H[?25h[?25l[53;195H5[45;5H[?25h[?25l[53;195H6[46;5H[?25h[?25l[53;195H7[47;5H[?25h[?25l[53;195H8[48;5H[?25h[?25l[53;195H9,1-8[49;12H[?25h[?25l[53;194H50[50;12H[?25h[?25l[53;195H1[51;12H[?25h[?25l[53;195H2,1  [52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 53 [m[53;194H[K[53;194H53,1-8[9C0%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 54 [m[8C[36m//new variable to store number of commands and array of pointer (double pointer char) to store the commands[m[53;194H[K[53;194H54,1-8[9C1%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 55 [m[8C[36m/*int command_count = 0;[m[53;194H[K[53;194H55,1-8[9C1%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 56 [m[36m        char** commands = NULL; */[m[53;194H[K[53;194H56,1-8[9C2%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 57 [m[53;194H[K[53;194H57,0-1[9C3%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 58 [m[53;194H[K[53;194H58,0-1[9C3%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 59 [m[9Cprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[53;194H[K[53;194H59,1-8[9C4%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 60 [m[9C[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[53;194H[K[53;194H60,1-8[9C4%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 61 [m[17C[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[53;194H[K[53;194H61,1-8[9C5%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 62 [m[24C[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[53;194H[K[53;194H62,1-8[9C6%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 63 [m[32Cbuf = emalloc([33mBUFSIZ[m);[53;194H[K[53;194H63,1-8[9C6%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 64 [m[25C[33melse[m[27C[36m/* or expand    */[m[53;194H[K[53;194H64,1[11C7%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 65 [m[32Cbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[53;194H[K[53;194H65,1-8[9C7%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 66 [m[53;194H[K[53;194H66,1-8[9C8%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 67 [m[24Cbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[53;194H[K[53;194H67,1-8[9C9%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 68 [m[53;194H[K[53;194H68,1-8[9C9%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 69 [m[16C}[53;194H[K[53;194H69,1-8[8C10%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 70 [m[53;194H[K[53;194H70,0-1[8C10%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 71 [m[16C[36m/* end of command? */[m[53;194H[K[53;194H71,1-8[8C11%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 72 [m[16C[33mif[m ( c == [35m'\n'[m )[53;194H[K[53;194H72,1-8[8C12%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 73 [m[24C[33mbreak[m;[53;194H[K[53;194H73,1-8[8C12%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 74 [m[53;194H[K[53;194H74,1-8[8C13%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 75 [m[16C[36m/* no, add to buffer */[m[53;194H[K[53;194H75,1-8[8C13%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 76 [m[16Cbuf[pos++] = c;[53;194H[K[53;194H76,1-8[8C14%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 77 [m[53;194H[K[53;194H77,1-8[8C15%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 78 [m[16C[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[53;194H[K[53;194H78,1-8[8C15%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 79 [m[24C[33mreturn[m [33mNULL[m;[53;194H[K[53;194H79,1-8[8C16%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 80 [m[16C}[39C[36m/* say so               */[m[53;194H[K[53;194H80,1-8[8C16%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 81 [m[16Cbuf[pos] = [35m'\0'[m;[53;194H[K[53;194H81,1-8[8C17%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 82 [m[16C[33mreturn[m buf;[53;194H[K[53;194H82,1-8[8C18%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[29;46H[46m{[m[52;1H[33m 83 [m[46m}[m[53;194H[K[53;194H83,1[10C18%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[28;46H{[51;5H}
[33m 84 [m[53;194H[K[53;194H84,0-1[8C19%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 85 [m[36m/**[m[53;194H[K[53;194H85,1[10C19%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 86 [m[36m **     splitline ( parse a line into an array of strings )[m[53;194H[K[53;194H86,1[10C20%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 87 [m[36m **/[m[53;194H[K[53;194H87,1[10C21%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 88 [m[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[53;194H[K[53;194H88,1[10C21%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 89 [m[53;194H[K[53;194H89,0-1[8C22%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 90 [m[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[53;194H[K[53;194H90,1[10C22%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 91 [m[53;194H[K[53;194H91,0-1[8C23%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 92 [m[32mchar[m ** splitline([32mchar[m *line)[53;194H[K[53;194H92,1[10C24%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 93 [m[36m/*[m[53;194H[K[53;194H93,1[10C24%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 94 [m[36m * purpose: split a line into array of white-space separated tokens[m[53;194H[K[53;194H94,1[10C25%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 95 [m[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[53;194H[K[53;194H95,1[10C25%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 96 [m[36m *          or NULL if line if no tokens on the line[m[53;194H[K[53;194H96,1[10C26%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 97 [m[36m *  action: traverse the array, locate strings, make copies[m[53;194H[K[53;194H97,1[10C27%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 98 [m[36m *    note: strtok() could work, but we may want to add quotes later[m[53;194H[K[53;194H98,1[10C27%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m 99 [m[36m */[m[53;194H[K[53;194H99,1[10C28%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m100 [m{[53;194H[K[53;194H100,1[9C28%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m101 [m  [32mchar[m  *newstr();[53;194H[K[53;194H101,1[9C29%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m102 [m  [32mchar[m  **args ;[53;194H[K[53;194H102,1[9C30%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m103 [m  [32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[53;194H[K[53;194H103,1[9C30%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m104 [m  [32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[53;194H[K[53;194H104,1[9C31%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m105 [m  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[53;194H[K[53;194H105,1[9C31%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m106 [m  [32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[53;194H[K[53;194H106,1[9C32%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m107 [m  [32mchar[m  *start;[53;194H[K[53;194H107,1[9C33%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m108 [m  [32mint[m   len;[53;194H[K[53;194H108,1[9C33%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m109 [m[53;194H[K[53;194H109,0-1[7C34%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m110 [m  [33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[53;194H[K[53;194H110,1[9C34%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m111 [m    [33mreturn[m [33mNULL[m;[53;194H[K[53;194H111,1[9C35%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m112 [m[53;194H[K[53;194H112,0-1[7C36%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m113 [m  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[53;194H[K[53;194H113,1[9C36%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m114 [m  bufspace = [33mBUFSIZ[m;[53;194H[K[53;194H114,1[9C37%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m115 [m  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[53;194H[K[53;194H115,1[9C37%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m116 [m[53;194H[K[53;194H116,0-1[7C38%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m117 [m  [33mwhile[m( *cp != [35m'\0'[m )[53;194H[K[53;194H117,1[9C39%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m118 [m    {[53;194H[K[53;194H118,1[9C39%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m119 [m      [33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[53;194H[K[53;194H119,1[9C40%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m120 [m[8Ccp++;[53;194H[K[53;194H120,1-8[7C40%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m121 [m      [33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[53;194H[K[53;194H121,1[9C41%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m122 [m[8C[33mbreak[m;[53;194H[K[53;194H122,1-8[7C42%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m123 [m[53;194H[K[53;194H123,0-1[7C42%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m124 [m      [36m/* make sure the array has room (+1 for NULL) */[m[53;194H[K[53;194H124,1[9C43%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m125 [m      [33mif[m ( argnum+[33m1[m >= spots ){[53;194H[K[53;194H125,1[9C43%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m126 [m[8Cargs = erealloc(args,bufspace+[33mBUFSIZ[m);[53;194H[K[53;194H126,1-8[7C44%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m127 [m[8Cbufspace += [33mBUFSIZ[m;[53;194H[K[53;194H127,1-8[7C45%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m128 [m[8Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[53;194H[K[53;194H128,1-8[7C45%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m129 [m      }[53;194H[K[53;194H129,1[9C46%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m130 [m[53;194H[K[53;194H130,0-1[7C46%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m131 [m      [36m/* mark start, then find end of word */[m[53;194H[K[53;194H131,1[9C47%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m132 [m      start = cp;[53;194H[K[53;194H132,1[9C48%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m133 [m      len   = [33m1[m;[53;194H[K[53;194H133,1[9C48%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m134 [m      [33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[53;194H[K[53;194H134,1[9C49%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m135 [m[8Clen++;[53;194H[K[53;194H135,1-8[7C50%[52;12H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m136 [m      args[argnum++] = newstr(start, len);[53;194H[K[53;194H136,1[9C50%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m137 [m    }[53;194H[K[53;194H137,1[9C51%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m138 [m  args[argnum] = [33mNULL[m;[53;194H[K[53;194H138,1[9C51%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m139 [m  [33mreturn[m args;[53;194H[K[53;194H139,1[9C52%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[12;5H[46m{[m[52;1H[33m140 [m[46m}[m[53;194H[K[53;194H140,1[9C53%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[11;5H{[51;5H}
[33m141 [m[53;194H[K[53;194H141,0-1[7C53%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m142 [m[36m/*[m[53;194H[K[53;194H142,1[9C54%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m143 [m[36m * purpose: constructor for strings[m[53;194H[K[53;194H143,1[9C54%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m144 [m[36m * returns: a string, never NULL[m[53;194H[K[53;194H144,1[9C55%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m145 [m[36m */[m[53;194H[K[53;194H145,1[9C56%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m146 [m[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[53;194H[K[53;194H146,1[9C56%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m147 [m{[53;194H[K[53;194H147,1[9C57%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m148 [m  [32mchar[m *rv = emalloc(l+[33m1[m);[53;194H[K[53;194H148,1[9C57%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m149 [m[53;194H[K[53;194H149,0-1[7C58%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m150 [m  rv[l] = [35m'\0'[m;[53;194H[K[53;194H150,1[9C59%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m151 [m  strncpy(rv, s, l);[53;194H[K[53;194H151,1[9C59%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m152 [m  [33mreturn[m rv;[53;194H[K[53;194H152,1[9C60%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[46;5H[46m{[m[52;1H[33m153 [m[46m}[m[53;194H[K[53;194H153,1[9C60%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[45;5H{[51;5H}
[33m154 [m[53;194H[K[53;194H154,0-1[7C61%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m155 [m[32mvoid[m freelist([32mchar[m **list)[53;194H[K[53;194H155,1[9C62%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m156 [m[36m/*[m[53;194H[K[53;194H156,1[9C62%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m157 [m[36m * purpose: free the list returned by splitline[m[53;194H[K[53;194H157,1[9C63%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m158 [m[36m * returns: nothing[m[53;194H[K[53;194H158,1[9C63%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m159 [m[36m *  action: free all strings in list and then free the list[m[53;194H[K[53;194H159,1[9C64%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m160 [m[36m */[m[53;194H[K[53;194H160,1[9C65%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m161 [m{[53;194H[K[53;194H161,1[9C65%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m162 [m  [32mchar[m  **cp = list;[53;194H[K[53;194H162,1[9C66%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m163 [m  [33mwhile[m( *cp )[53;194H[K[53;194H163,1[9C66%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m164 [m    free(*cp++);[53;194H[K[53;194H164,1[9C67%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m165 [m  free(list);[53;194H[K[53;194H165,1[9C68%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[47;5H[46m{[m[52;1H[33m166 [m[46m}[m[53;194H[K[53;194H166,1[9C68%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[46;5H{[51;5H}
[33m167 [m[53;194H[K[53;194H167,0-1[7C69%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m168 [m[32mvoid[m * emalloc([32msize_t[m n)[53;194H[K[53;194H168,1[9C69%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m169 [m{[53;194H[K[53;194H169,1[9C70%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m170 [m  [32mvoid[m *rv ;[53;194H[K[53;194H170,1[9C71%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m171 [m  [33mif[m ( (rv = malloc(n)) == [33mNULL[m )[53;194H[K[53;194H171,1[9C71%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m172 [m    fatal([33m"out of memory"[m,[33m""[m,[33m1[m);[53;194H[K[53;194H172,1[9C72%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m173 [m  [33mreturn[m rv;[53;194H[K[53;194H173,1[9C72%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[47;5H[46m{[m[52;1H[33m174 [m[46m}[m[53;194H[K[53;194H174,1[9C73%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[46;5H{[51;5H}
[33m175 [m[53;194H[K[53;194H175,0-1[7C74%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m176 [m[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[53;194H[K[53;194H176,1[9C74%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m177 [m{[53;194H[K[53;194H177,1[9C75%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m178 [m  [32mvoid[m *rv;[53;194H[K[53;194H178,1[9C75%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m179 [m  [33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[53;194H[K[53;194H179,1[9C76%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m180 [m    fatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[53;194H[K[53;194H180,1[9C77%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m181 [m  [33mreturn[m rv;[53;194H[K[53;194H181,1[9C77%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[47;5H[46m{[m[52;1H[33m182 [m[46m}[m[53;194H[K[53;194H182,1[9C78%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[46;5H{[51;5H}
[33m183 [m[53;194H[K[53;194H183,0-1[7C78%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m184 [m[53;194H[K[53;194H184,0-1[7C79%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m185 [m[32mvoid[m setup()[53;194H[K[53;194H185,1[9C80%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m186 [m[36m/*[m[53;194H[K[53;194H186,1[9C80%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m187 [m[36m * purpose: initialize shell[m[53;194H[K[53;194H187,1[9C81%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m188 [m[36m * returns: nothing. calls fatal() if trouble[m[53;194H[K[53;194H188,1[9C81%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m189 [m[36m */[m[53;194H[K[53;194H189,1[9C82%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m190 [m{[53;194H[K[53;194H190,1[9C83%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m191 [m  signal([33mSIGINT[m,  [33mSIG_IGN[m);[53;194H[K[53;194H191,1[9C83%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m192 [m  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[53;194H[K[53;194H192,1[9C84%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[49;5H[46m{[m


[33m193 [m[46m}[m[53;194H[K[53;194H193,1[9C84%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[48;5H{[51;5H}
[33m194 [m[53;194H[K[53;194H194,0-1[7C85%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m195 [m[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[53;194H[K[53;194H195,1[9C86%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m196 [m{[53;194H[K[53;194H196,1[9C86%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m197 [m  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[53;194H[K[53;194H197,1[9C87%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m198 [m  exit(n);[53;194H[K[53;194H198,1[9C87%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[49;5H[46m{[m


[33m199 [m[46m}[m[53;194H[K[53;194H199,1[9C88%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[48;5H{[51;5H}
[33m200 [m[53;194H[K[53;194H200,0-1[7C89%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m201 [m[32mint[m main()[53;194H[K[53;194H201,1[9C89%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m202 [m{[53;194H[K[53;194H202,1[9C90%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m203 [m  [32mchar[m  *cmdline, *prompt, **arglist;[53;194H[K[53;194H203,1[9C90%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m204 [m  [32mint[m   result;[53;194H[K[53;194H204,1[9C91%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m205 [m  [32mvoid[m  setup();[53;194H[K[53;194H205,1[9C92%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m206 [m[53;194H[K[53;194H206,0-1[7C92%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m207 [m  prompt = DFL_PROMPT;[53;194H[K[53;194H207,1[9C93%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m208 [m  setup();[53;194H[K[53;194H208,1[9C93%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m209 [m[53;194H[K[53;194H209,0-1[7C94%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m210 [m  [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[53;194H[K[53;194H210,1[9C95%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m211 [m    [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[53;194H[K[53;194H211,1[9C95%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m212 [m[8Cresult = execute(arglist);[53;194H[K[53;194H212,1[9C96%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m213 [m[8Cfreelist(arglist);[53;194H[K[53;194H213,1[9C96%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m214 [m    }[53;194H[K[53;194H214,1[9C97%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m215 [m    free(cmdline);[53;194H[K[53;194H215,1[9C98%[52;5H[?25h[?25l[1;52r[52;1H
[1;53r[52;1H[33m216 [m  }[53;194H[K[53;194H216,1[9C98%[52;5H[?25h[?25l[53;194H[K[53;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"sm2in.c" 218L, 4764C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ exuit[K[K[Kit
exit

Script done on 2023-07-04 21:39:38-04:00 [COMMAND_EXIT_CODE="0"]
Script started on 2023-07-05 13:40:05-04:00 [TERM="xterm" TTY="/dev/pts/1" COLUMNS="237" LINES="63"]
]0;s23-cs648-s02@vulcan: ~/public_html/week5s23-cs648-s02@vulcan:~/public_html/week5$ ls
[0m[01;34mchap7[0m  [01;34mchap8[0m  [01;34mchap9[0m  ex7-16Log  ex8Log  ex9Log
]0;s23-cs648-s02@vulcan: ~/public_html/week5s23-cs648-s02@vulcan:~/public_html/week5$ cdvh[K[K chap
bash: cd: chap: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5s23-cs648-s02@vulcan:~/public_html/week5$ cd h[Kchap9
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ cd ms2[K[K[Ksm2[K[K[K[K[K[Kvi sm2in.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;63r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[63;1H"sm2in.c" 218L, 4764C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments
  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m<string.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"execute.c"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m count_commands([32mchar[m** commands){[19;9H[32mint[m count;[20;9H[32mchar[m** cmd = commands;[22;9Hcount = [33m0[m;[23;9H[33mwhile[m(*cmd != [33mNULL[m){[24;17Hcount++;[25;17Hcmd++;[26;9H}[27;9H[33mreturn[m count;
}


[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string
 */[m[40;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[49;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[50;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[51;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;10H[32mint[m    c;[30C[36m/* input char           */[54;9H//new variable to store number of commands and array of pointer (double pointer char) to store the commands[55;9H/*int command_count = 0;
        char** commands = NULL; */[m[59;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[60;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[61;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[62;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[63;220H1,1[11CTop[1;1H[?25h[?25l[63;220H2[2;1H[?25h[?25l[63;220H3[3;1H[?25h[?25l[63;220H4[4;1H[?25h[?25l[63;220H5[5;1H[?25h[?25l[63;220H6[6;1H[?25h[?25l[63;220H7,0-1[7;1H[?25h[?25l[63;220H8,1  [8;1H[?25h[?25l[63;220H9[9;1H[?25h[?25l[63;220H10,1[10;1H[?25h[?25l[63;221H1[11;1H[?25h[?25l[63;221H2[12;1H[?25h[?25l[63;221H3[13;1H[?25h[?25l[63;221H4[14;1H[?25h[?25l[63;221H5,0-1[15;1H[?25h[?25l[63;221H6,1  [16;1H[?25h[?25l[63;221H7,0-1[17;1H[?25h[?25l[63;221H8,1  [18;1H[?25h[?25l[63;221H9,1-8[19;8H[?25h[?25l[63;220H20[20;8H[?25h[?25l[63;221H1,0-1[21;1H[?25h[?25l[63;221H2,1-8[22;8H[?25h[?25l[63;221H3[23;8H[?25h[?25l[63;221H4[24;8H[?25h[?25l[63;221H5[25;8H[?25h[?25l[63;221H6[26;8H[?25h[?25l[63;221H7[27;8H[?25h[?25l[18;36H[46m{[28;1H}[m[63;221H8,1  [28;1H[?25h[?25l[18;36H{[28;1H}[63;221H9,0-1[29;1H[?25h[?25l[63;220H30[30;1H[?25h[?25l[63;221H1,1  [31;1H[?25h[?25l[63;221H2[32;1H[?25h[?25l[63;221H3[33;1H[?25h[?25l[63;221H4[34;1H[?25h[?25l[63;221H5[35;1H[?25h[?25l[63;221H6,0-1[36;1H[?25h[?25l[63;221H7[37;1H[?25h[?25l[63;221H8[38;1H[?25h[?25l[63;221H9[39;1H[?25h[?25l[63;220H40,1  [40;1H[?25h[?25l[63;221H1[41;1H[?25h[?25l[63;221H2[42;1H[?25h[?25l[63;221H3[43;1H[?25h[?25l[63;221H4[44;1H[?25h[?25l[63;221H5[45;1H[?25h[?25l[63;221H6[46;1H[?25h[?25l[63;221H7[47;1H[?25h[?25l[63;221H8[48;1H[?25h[?25l[63;221H9,1-8[49;8H[?25h[?25l[63;220H50[50;8H[?25h[?25l[63;221H1[51;8H[?25h[?25l[63;221H2,1  [52;1H[?25h[?25l[63;221H3,1-8[53;8H[?25h[?25l[63;221H4[54;8H[?25h[?25l[63;221H5[55;8H[?25h[?25l[63;221H6[56;8H[?25h[?25l[63;221H7,0-1[57;1H[?25h[?25l[63;221H8[58;1H[?25h[?25l[63;221H9,1-8[59;8H[?25h[?25l[63;220H60[60;8H[?25h[?25l[63;221H1[61;8H[?25h[?25l[63;221H2[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;33Hbuf = emalloc([33mBUFSIZ[m);[63;1H[K[63;220H63,1-8[9C0%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;26H[33melse[m[27C[36m/* or expand    */[m[63;220H[K[63;220H64,1[11C1%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[63;220H[K[63;220H65,1-8[9C1%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H66,1-8[9C2%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;25Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[63;220H[K[63;220H67,1-8[9C3%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H68,1-8[9C3%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H}[63;220H[K[63;220H69,1-8[9C4%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H70,0-1[9C5%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H[36m/* end of command? */[m[63;220H[K[63;220H71,1-8[9C5%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H[33mif[m ( c == [35m'\n'[m )[63;220H[K[63;220H72,1-8[9C6%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;25H[33mbreak[m;[63;220H[K[63;220H73,1-8[9C7%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H74,1-8[9C7%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H[36m/* no, add to buffer */[m[63;220H[K[63;220H75,1-8[9C8%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17Hbuf[pos++] = c;[63;220H[K[63;220H76,1-8[9C8%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H77,1-8[9C9%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[63;220H[K[63;220H78,1-8[8C10%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;25H[33mreturn[m [33mNULL[m;[63;220H[K[63;220H79,1-8[8C10%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H}[39C[36m/* say so               */[m[63;220H[K[63;220H80,1-8[8C11%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17Hbuf[pos] = [35m'\0'[m;[63;220H[K[63;220H81,1-8[8C12%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H[33mreturn[m buf;[63;220H[K[63;220H82,1-8[8C12%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[39;42H[46m{[62;1H}[m[63;220H[K[63;220H83,1[10C13%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[38;42H{[61;1H}[63;220H[K[63;220H84,0-1[8C14%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m/**[m[63;220H[K[63;220H85,1[10C14%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m **     splitline ( parse a line into an array of strings )[m[63;220H[K[63;220H86,1[10C15%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m **/[m[63;220H[K[63;220H87,1[10C16%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[63;220H[K[63;220H88,1[10C16%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H89,0-1[8C17%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[63;220H[K[63;220H90,1[10C17%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H91,0-1[8C18%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[32mchar[m ** splitline([32mchar[m *line)[63;220H[K[63;220H92,1[10C19%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m/*[m[63;220H[K[63;220H93,1[10C19%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * purpose: split a line into array of white-space separated tokens[m[63;220H[K[63;220H94,1[10C20%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[63;220H[K[63;220H95,1[10C21%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m *          or NULL if line if no tokens on the line[m[63;220H[K[63;220H96,1[10C21%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m *  action: traverse the array, locate strings, make copies[m[63;220H[K[63;220H97,1[10C22%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[63;220H[K[63;220H98,1[10C23%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m */[m[63;220H[K[63;220H99,1[10C23%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H{[63;220H[K[63;220H100,1[9C24%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m  *newstr();[63;220H[K[63;220H101,1[9C25%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m  **args ;[63;220H[K[63;220H102,1[9C25%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[63;220H[K[63;220H103,1[9C26%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[63;220H[K[63;220H104,1[9C26%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[63;220H[K[63;220H105,1[9C27%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[63;220H[K[63;220H106,1[9C28%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m  *start;[63;220H[K[63;220H107,1[9C28%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mint[m   len;[63;220H[K[63;220H108,1[9C29%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H109,0-1[7C30%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[63;220H[K[63;220H110,1[9C30%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5H[33mreturn[m [33mNULL[m;[63;220H[K[63;220H111,1[9C31%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H112,0-1[7C32%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[63;220H[K[63;220H113,1[9C32%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hbufspace = [33mBUFSIZ[m;[63;220H[K[63;220H114,1[9C33%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[63;220H[K[63;220H115,1[9C33%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H116,0-1[7C34%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mwhile[m( *cp != [35m'\0'[m )[63;220H[K[63;220H117,1[9C35%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5H{[63;220H[K[63;220H118,1[9C35%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[63;220H[K[63;220H119,1[9C36%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;9Hcp++;[63;220H[K[63;220H120,1-8[7C37%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[63;220H[K[63;220H121,1[9C37%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;9H[33mbreak[m;[63;220H[K[63;220H122,1-8[7C38%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H123,0-1[7C39%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H[36m/* make sure the array has room (+1 for NULL) */[m[63;220H[K[63;220H124,1[9C39%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H[33mif[m ( argnum+[33m1[m >= spots ){[63;220H[K[63;220H125,1[9C40%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[63;220H[K[63;220H126,1-8[7C41%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;9Hbufspace += [33mBUFSIZ[m;[63;220H[K[63;220H127,1-8[7C41%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[63;220H[K[63;220H128,1-8[7C42%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H}[63;220H[K[63;220H129,1[9C42%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H130,0-1[7C43%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H[36m/* mark start, then find end of word */[m[63;220H[K[63;220H131,1[9C44%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7Hstart = cp;[63;220H[K[63;220H132,1[9C44%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7Hlen   = [33m1[m;[63;220H[K[63;220H133,1[9C45%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[63;220H[K[63;220H134,1[9C46%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;9Hlen++;[63;220H[K[63;220H135,1-8[7C46%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;7Hargs[argnum++] = newstr(start, len);[63;220H[K[63;220H136,1[9C47%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5H}[63;220H[K[63;220H137,1[9C48%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hargs[argnum] = [33mNULL[m;[63;220H[K[63;220H138,1[9C48%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mreturn[m args;[63;220H[K[63;220H139,1[9C49%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[22;1H[46m{[62;1H}[m[63;220H[K[63;220H140,1[9C50%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[21;1H{[61;1H}[63;220H[K[63;220H141,0-1[7C50%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m/*[m[63;220H[K[63;220H142,1[9C51%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * purpose: constructor for strings[m[63;220H[K[63;220H143,1[9C51%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * returns: a string, never NULL[m[63;220H[K[63;220H144,1[9C52%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m */[m[63;220H[K[63;220H145,1[9C53%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[63;220H[K[63;220H146,1[9C53%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H{[63;220H[K[63;220H147,1[9C54%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m *rv = emalloc(l+[33m1[m);[63;220H[K[63;220H148,1[9C55%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H149,0-1[7C55%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hrv[l] = [35m'\0'[m;[63;220H[K[63;220H150,1[9C56%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hstrncpy(rv, s, l);[63;220H[K[63;220H151,1[9C57%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mreturn[m rv;[63;220H[K[63;220H152,1[9C57%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[56;1H[46m{[62;1H}[m[63;220H[K[63;220H153,1[9C58%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[55;1H{[61;1H}[63;220H[K[63;220H154,0-1[7C58%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[32mvoid[m freelist([32mchar[m **list)[63;220H[K[63;220H155,1[9C59%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m/*[m[63;220H[K[63;220H156,1[9C60%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * purpose: free the list returned by splitline[m[63;220H[K[63;220H157,1[9C60%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * returns: nothing[m[63;220H[K[63;220H158,1[9C61%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m *  action: free all strings in list and then free the list[m[63;220H[K[63;220H159,1[9C62%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m */[m[63;220H[K[63;220H160,1[9C62%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H{[63;220H[K[63;220H161,1[9C63%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m  **cp = list;[63;220H[K[63;220H162,1[9C64%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mwhile[m( *cp )[63;220H[K[63;220H163,1[9C64%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5Hfree(*cp++);[63;220H[K[63;220H164,1[9C65%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hfree(list);[63;220H[K[63;220H165,1[9C66%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[57;1H[46m{[62;1H}[m[63;220H[K[63;220H166,1[9C66%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[56;1H{[61;1H}[63;220H[K[63;220H167,0-1[7C67%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[32mvoid[m * emalloc([32msize_t[m n)[63;220H[K[63;220H168,1[9C67%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H{[63;220H[K[63;220H169,1[9C68%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mvoid[m *rv ;[63;220H[K[63;220H170,1[9C69%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mif[m ( (rv = malloc(n)) == [33mNULL[m )[63;220H[K[63;220H171,1[9C69%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);[63;220H[K[63;220H172,1[9C70%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mreturn[m rv;[63;220H[K[63;220H173,1[9C71%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[57;1H[46m{[62;1H}[m[63;220H[K[63;220H174,1[9C71%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[56;1H{[61;1H}[63;220H[K[63;220H175,0-1[7C72%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[63;220H[K[63;220H176,1[9C73%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H{[63;220H[K[63;220H177,1[9C73%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mvoid[m *rv;[63;220H[K[63;220H178,1[9C74%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[63;220H[K[63;220H179,1[9C75%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5Hfatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[63;220H[K[63;220H180,1[9C75%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mreturn[m rv;[63;220H[K[63;220H181,1[9C76%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[57;1H[46m{[62;1H}[m[63;220H[K[63;220H182,1[9C76%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[56;1H{[61;1H}[63;220H[K[63;220H183,0-1[7C77%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H184,0-1[7C78%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[32mvoid[m setup()[63;220H[K[63;220H185,1[9C78%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m/*[m[63;220H[K[63;220H186,1[9C79%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * purpose: initialize shell[m[63;220H[K[63;220H187,1[9C80%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * returns: nothing. calls fatal() if trouble[m[63;220H[K[63;220H188,1[9C80%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m */[m[63;220H[K[63;220H189,1[9C81%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H{[63;220H[K[63;220H190,1[9C82%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[63;220H[K[63;220H191,1[9C82%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[63;220H[K[63;220H192,1[9C83%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[59;1H[46m{


}[m[63;220H[K[63;220H193,1[9C83%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[58;1H{


}[63;220H[K[63;220H194,0-1[7C84%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[63;220H[K[63;220H195,1[9C85%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H{[63;220H[K[63;220H196,1[9C85%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[63;220H[K[63;220H197,1[9C86%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hexit(n);[63;220H[K[63;220H198,1[9C87%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[59;1H[46m{


}[m[63;220H[K[63;220H199,1[9C87%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[58;1H{


}[63;220H[K[63;220H200,0-1[7C88%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[32mint[m main()[63;220H[K[63;220H201,1[9C89%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H{[63;220H[K[63;220H202,1[9C89%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m  *cmdline, *prompt, **arglist;[63;220H[K[63;220H203,1[9C90%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mint[m   result;[63;220H[K[63;220H204,1[9C91%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mvoid[m  setup();[63;220H[K[63;220H205,1[9C91%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H206,0-1[7C92%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hprompt = DFL_PROMPT;[63;220H[K[63;220H207,1[9C92%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hsetup();[63;220H[K[63;220H208,1[9C93%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H209,0-1[7C94%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[63;220H[K[63;220H210,1[9C94%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[63;220H[K[63;220H211,1[9C95%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;9Hresult = execute(arglist);[63;220H[K[63;220H212,1[9C96%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;9Hfreelist(arglist);[63;220H[K[63;220H213,1[9C96%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5H}[63;220H[K[63;220H214,1[9C97%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5Hfree(cmdline);[63;220H[K[63;220H215,1[9C98%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H}[63;220H[K[63;220H216,1[9C98%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mreturn[m [33m0[m;[63;220H[K[63;220H217,1[9C99%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[46;1H[46m{[62;1H}[m[63;220H[K[63;220H218,1[9CBot[62;1H[?25h[?25l[46;1H{[62;1H}[63;222H7[61;1H[?25h[?25l[63;222H6[60;1H[?25h[?25l[63;222H5[59;1H[?25h[?25l[63;222H4[58;1H[?25h[?25l[63;222H3[57;1H[?25h[?25l[63;222H2[56;1H[?25h[?25l[63;222H1[55;1H[?25h[?25l[63;222H0[54;1H[?25h[?25l[63;221H09,0-1[53;1H[?25h[?25l[63;222H8,1  [52;1H[?25h[?25l[63;222H7[51;1H[?25h[?25l[63;222H6,0-1[50;1H[?25h[?25l[63;222H5,1  [49;1H[?25h[?25l[63;222H4[48;1H[?25h[?25l[63;222H3[47;1H[?25h[?25l[46;1H[46m{[62;1H}[m[63;222H2[46;1H[?25h[?25l{[62;1H}[63;222H1[45;1H[?25h[?25l[63;222H0,0-1[44;1H[?25h[?25l[40;1H[46m{


}[m[63;220H199,1  [43;1H[?25h[?25l[40;1H{


}[63;222H8[42;1H[?25h[?25l[63;222H7[41;1H[?25h[?25l[40;1H[46m{


}[m[63;222H6[40;1H[?25h[?25l{


}[63;222H5[39;1H[?25h[?25l[63;222H4,0-1[38;1H[?25h[?25l[34;1H[46m{


}[m[63;222H3,1  [37;1H[?25h[?25l[34;1H{


}[63;222H2[36;1H[?25h[?25l[63;222H1[35;1H[?25h[?25l[34;1H[46m{


}[m[63;222H0[34;1H[?25h[?25l{


}[63;221H89[33;1H[?25h[?25l[63;222H8[32;1H[?25h[?25l[63;222H7[31;1H[?25h[?25l[63;222H6[30;1H[?25h[?25l[63;222H5[29;1H[?25h[?25l[63;222H4,0-1[28;1H[?25h[?25l[63;222H3[27;1H[?25h[?25l[21;1H[46m{[26;1H}[m[63;222H2,1  [26;1H[?25h[?25l[21;1H{[26;1H}[63;222H1[25;1H[?25h[?25l[63;222H0[24;1H[?25h[?25l[63;221H79[23;1H[?25h[?25l[63;222H8[22;1H[?25h[?25l[21;1H[46m{[26;1H}[m[63;222H7[21;1H[?25h[?25l{[26;1H}[63;222H6[20;1H[?25h[?25l[63;222H5,0-1[19;1H[?25h[?25l[13;1H[46m{[18;1H}[m[63;222H4,1  [18;1H[?25h[?25l[13;1H{[18;1H}[63;222H3[17;1H[?25h[?25l[63;222H2[16;1H[?25h[?25l[63;222H1[15;1H[?25h[?25l[63;222H0[14;1H[?25h[?25l[13;1H[46m{[18;1H}[m[63;221H69[13;1H[?25h[?25l{[18;1H}[63;222H8[12;1H[?25h[?25l[63;222H7,0-1[11;1H[?25h[?25l[5;1H[46m{[10;1H}[m[63;222H6,1  [10;1H[?25h[?25l[5;1H{[10;1H}[63;222H5[9;1H[?25h[?25l[63;222H4[8;1H[?25h[?25l[63;222H3[7;1H[?25h[?25l[63;222H2[6;1H[?25h[?25l[5;1H[46m{[10;1H}[m[63;222H1[5;1H[?25h[?25l{[10;1H}[63;222H0[4;1H[?25h[?25l[63;221H59[3;1H[?25h[?25l[63;222H8[2;1H[?25h[?25l[63;222H7[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m/*[m[63;220H[K[63;220H156,1[9C99%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[32mvoid[m freelist([32mchar[m **list)[63;220H[K[63;220H155,1[9C98%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H154,0-1[7C98%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H}[63;220H[K[63;220H153,1[9C97%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[33mreturn[m rv;[63;220H[K[63;220H152,1[9C96%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3Hstrncpy(rv, s, l);[63;220H[K[63;220H151,1[9C96%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3Hrv[l] = [35m'\0'[m;[63;220H[K[63;220H150,1[9C95%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H149,0-1[7C94%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mchar[m *rv = emalloc(l+[33m1[m);[63;220H[K[63;220H148,1[9C94%[1;1H[?25h[?25l[7;62r[7;1H[L[1;63r[1;1H[46m{[m[1;3H[K[2;3H[32mchar[m *rv = emalloc(l+[33m1[m);[3;3H[K[4;3Hrv[l] = [35m'\0'[m;[4;16H[K[5;3Hstrncpy(rv, s, l);
  [33mreturn[m rv;
[46m}[m[63;220H[K[63;220H147,1[9C93%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)
{[8;1H}[63;220H[K[63;220H146,1[9C92%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m */[m[63;220H[K[63;220H145,1[9C92%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m * returns: a string, never NULL[m[63;220H[K[63;220H144,1[9C91%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m * purpose: constructor for strings[m[63;220H[K[63;220H143,1[9C91%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m/*[m[63;220H[K[63;220H142,1[9C90%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H141,0-1[7C89%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H}[63;220H[K[63;220H140,1[9C89%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[33mreturn[m args;[63;220H[K[63;220H139,1[9C88%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3Hargs[argnum] = [33mNULL[m;[63;220H[K[63;220H138,1[9C87%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;5H}[63;220H[K[63;220H137,1[9C87%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;7Hargs[argnum++] = newstr(start, len);[63;220H[K[63;220H136,1[9C86%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9Hlen++;[63;220H[K[63;220H135,1-8[7C85%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[63;220H[K[63;220H134,1[9C85%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;7Hlen   = [33m1[m;[63;220H[K[63;220H133,1[9C84%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;7Hstart = cp;[63;220H[K[63;220H132,1[9C83%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;7H[36m/* mark start, then find end of word */[m[63;220H[K[63;220H131,1[9C83%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H130,0-1[7C82%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;7H}[63;220H[K[63;220H129,1[9C82%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[63;220H[K[63;220H128,1-8[7C81%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9Hbufspace += [33mBUFSIZ[m;[63;220H[K[63;220H127,1-8[7C80%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[63;220H[K[63;220H126,1-8[7C80%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;7H[33mif[m ( argnum+[33m1[m >= spots ){[63;220H[K[63;220H125,1[9C79%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;7H[36m/* make sure the array has room (+1 for NULL) */[m[63;220H[K[63;220H124,1[9C78%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H123,0-1[7C78%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9H[33mbreak[m;[63;220H[K[63;220H122,1-8[7C77%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[63;220H[K[63;220H121,1[9C76%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9Hcp++;[63;220H[K[63;220H120,1-8[7C76%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[63;220H[K[63;220H119,1[9C75%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;5H{[63;220H[K[63;220H118,1[9C75%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[33mwhile[m( *cp != [35m'\0'[m )[63;220H[K[63;220H117,1[9C74%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H116,0-1[7C73%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[63;220H[K[63;220H115,1[9C73%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3Hbufspace = [33mBUFSIZ[m;[63;220H[K[63;220H114,1[9C72%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[63;220H[K[63;220H113,1[9C71%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H112,0-1[7C71%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;5H[33mreturn[m [33mNULL[m;[63;220H[K[63;220H111,1[9C70%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[63;220H[K[63;220H110,1[9C69%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H109,0-1[7C69%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mint[m   len;[63;220H[K[63;220H108,1[9C68%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mchar[m  *start;[63;220H[K[63;220H107,1[9C67%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[63;220H[K[63;220H106,1[9C67%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[63;220H[K[63;220H105,1[9C66%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[63;220H[K[63;220H104,1[9C66%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[63;220H[K[63;220H103,1[9C65%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mchar[m  **args ;[63;220H[K[63;220H102,1[9C64%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mchar[m  *newstr();[63;220H[K[63;220H101,1[9C64%[1;1H[?25h[?25l[41;62r[41;1H[L[1;63r[1;1H[46m{[m[1;3H[K[2;10Hnewstr();
  [32mchar[m  **args ;[3;17H[K[4;9Hspots = [33m0[m;   [22C[36mspot[m[5;9Hbufspace = [33m0[m;[22C[36mbytes in table[m
  [32mint[m   argnum = [33m0[m[25C[36mslots used   [m[7;10Hcp = line;[21C[36m/* pos in string        */[m
  [32mchar[m  *start;
  [32mint[m   len;[10;3H[K[11;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
    [33mreturn[m [33mNULL[m;[13;3H[K[14;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
  bufspace[9C;[15;21H[K[16;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;3H[K[18;3H[33mwhile[m( *cp != [35m'\0'[m )
    {[19;7H[K[20;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[21;7H  cp++;[21;14H[K[22;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[23;9H[33mbreak[m;[24;7H[K[25;7H[36m/* make sure the array has room (+1 for NULL) */[m[26;7H[33mif[m ( argnum+[33m1[m >= spots ){[26;32H[K[27;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;9Hbufspace += [33mBUFSIZ[m;[28;28H[K[29;7H  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;7H}[31;7H[K[32;7H[36m/* mark start, then find end of word */[m[33;7Hstart = cp;[34;7Hlen   = [33m1[m;[34;17H[K[35;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;7H  len++;[36;15H[K[37;5H  args[argnum++] = newstr(start, len);
    }[38;6H[K[39;3Hargs[argnum] = [33mNULL[m;
  [33mreturn[m args;
[46m}[m[63;220H[K[63;220H100,1[9C63%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m */[m
{[42;1H}[63;220H[K[63;220H99,1[10C62%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[63;220H[K[63;220H98,1[10C62%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *  action: traverse the array, locate strings, make copies[m[63;220H[K[63;220H97,1[10C61%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *          or NULL if line if no tokens on the line[m[63;220H[K[63;220H96,1[10C60%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[63;220H[K[63;220H95,1[10C60%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m * purpose: split a line into array of white-space separated tokens[m[63;220H[K[63;220H94,1[10C59%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m/*[m[63;220H[K[63;220H93,1[10C58%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[32mchar[m ** splitline([32mchar[m *line)[63;220H[K[63;220H92,1[10C58%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H91,0-1[8C57%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[63;220H[K[63;220H90,1[10C57%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H89,0-1[8C56%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[63;220H[K[63;220H88,1[10C55%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m **/[m[63;220H[K[63;220H87,1[10C55%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m **     splitline ( parse a line into an array of strings )[m[63;220H[K[63;220H86,1[10C54%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m/**[m[63;220H[K[63;220H85,1[10C53%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H84,0-1[8C53%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H}[63;220H[K[63;220H83,1[10C52%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H[33mreturn[m buf;[63;220H[K[63;220H82,1-8[8C51%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17Hbuf[pos] = [35m'\0'[m;[63;220H[K[63;220H81,1-8[8C51%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H}[39C[36m/* say so               */[m[63;220H[K[63;220H80,1-8[8C50%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;25H[33mreturn[m [33mNULL[m;[63;220H[K[63;220H79,1-8[8C50%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[63;220H[K[63;220H78,1-8[8C49%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H77,1-8[8C48%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17Hbuf[pos++] = c;[63;220H[K[63;220H76,1-8[8C48%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H[36m/* no, add to buffer */[m[63;220H[K[63;220H75,1-8[8C47%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H74,1-8[8C46%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;25H[33mbreak[m;[63;220H[K[63;220H73,1-8[8C46%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H[33mif[m ( c == [35m'\n'[m )[63;220H[K[63;220H72,1-8[8C45%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H[36m/* end of command? */[m[63;220H[K[63;220H71,1-8[8C44%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H70,0-1[8C44%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H}[63;220H[K[63;220H69,1-8[8C43%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H68,1-8[8C42%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;25Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[63;220H[K[63;220H67,1-8[8C42%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H66,1-8[8C41%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[63;220H[K[63;220H65,1-8[8C41%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;26H[33melse[m[27C[36m/* or expand    */[m[63;220H[K[63;220H64,1[10C40%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;33Hbuf = emalloc([33mBUFSIZ[m);[63;220H[K[63;220H63,1-8[8C39%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[63;220H[K[63;220H62,1-8[8C39%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[63;220H[K[63;220H61,1-8[8C38%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[63;220H[K[63;220H60,1-8[8C37%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[63;220H[K[63;220H59,1-8[8C37%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H58,0-1[8C36%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H57,0-1[8C35%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m        char** commands = NULL; */[m[63;220H[K[63;220H56,1-8[8C35%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9H[36m/*int command_count = 0;[m[63;220H[K[63;220H55,1-8[8C34%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store the commands[m[63;220H[K[63;220H54,1-8[8C33%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H53,1-8[8C33%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;10H[32mint[m    c;[30C[36m/* input char           */[m[63;220H[K[63;220H52,1[10C32%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[63;220H[K[63;220H51,1-8[8C32%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[63;220H[K[63;220H50,1-8[8C31%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[63;220H[K[63;220H49,1-8[8C30%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H{[63;220H[K[63;220H48,1[10C30%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m */[m[63;220H[K[63;220H47,1[10C29%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[63;220H[K[63;220H46,1[10C28%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *          calls fatal from emalloc()[m[63;220H[K[63;220H45,1[10C28%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[63;220H[K[63;220H44,1[10C27%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m * returns: dynamically allocated string holding command line[m[63;220H[K[63;220H43,1[10C26%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m * purpose: read next command line from fp[m[63;220H[K[63;220H42,1[10C26%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m/*[m[63;220H[K[63;220H41,1[10C25%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[63;220H[K[63;220H40,1[10C25%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H39,0-1[8C24%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H38,0-1[8C23%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H37,0-1[8C23%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H36,0-1[8C22%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m */[m[63;220H[K[63;220H35,1[10C21%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[63;220H[K[63;220H34,1[10C21%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[63;220H[K[63;220H33,1[10C20%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *    [m[63;220H[K[63;220H32,1[10C19%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[63;220H[K[63;220H31,1[10C19%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H30,0-1[8C18%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H29,0-1[8C17%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H}[63;220H[K[63;220H28,1[10C17%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9H[33mreturn[m count;[63;220H[K[63;220H27,1-8[8C16%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9H}[63;220H[K[63;220H26,1-8[8C16%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17Hcmd++;[63;220H[K[63;220H25,1-8[8C15%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17Hcount++;[63;220H[K[63;220H24,1-8[8C14%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9H[33mwhile[m(*cmd != [33mNULL[m){[63;220H[K[63;220H23,1-8[8C14%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9Hcount = [33m0[m;[63;220H[K[63;220H22,1-8[8C13%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H21,0-1[8C12%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9H[32mchar[m** cmd = commands;[63;220H[K[63;220H20,1-8[8C12%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9H[32mint[m count;[63;220H[K[63;220H19,1-8[8C11%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[32mint[m count_commands([32mchar[m** commands){[63;220H[K[63;220H18,1[10C10%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H17,0-1[8C10%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[35m#define DFL_PROMPT      [m[33m"> "[m[63;220H[K[63;220H16,1[11C9%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H15,0-1[9C8%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[35m#include [m[33m"execute.c"[m[63;220H[K[63;220H14,1[11C8%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[35m#include [m[33m"smsh.h"[m[63;220H[K[63;220H13,1[11C7%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[35m#include [m[33m<string.h>[m[63;220H[K[63;220H12,1[11C7%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[35m#include [m[33m<signal.h>[m[63;220H[K[63;220H11,1[11C6%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[35m#include [m[33m<unistd.h>[m[63;220H[K[63;220H10,1[11C5%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[35m#include [m[33m<stdlib.h>[m[63;220H[K[63;220H9,1[12C5%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[35m#include [m[33m<stdio.h>[m[63;220H[K[63;220H8,1[12C4%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H7,0-1[10C3%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m **/[m[63;220H[K[63;220H6,1[12C3%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m **             uses fork, exec, wait, and ignores signals[m[63;220H[K[63;220H5,1[12C2%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m **             this one parses the command line into strings[m[63;220H[K[63;220H4,1[12C1%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m **             first really useful version after prompting shell[m[63;220H[K[63;220H3,1[12C1%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m  smsh1.c  small-shell version 1[m[63;220H[K[63;220H2,1[12C0%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments[m[63;220H[K[63;220H1,1[11CTop[1;1H[?25h[?25l[63;220H2[2;1H[?25h[?25l[63;220H3[3;1H[?25h[?25l[63;220H4[4;1H[?25h[?25l[63;220H5[5;1H[?25h[?25l[63;220H6[6;1H[?25h[?25l[63;220H7,0-1[7;1H[?25h[?25l[63;220H8,1  [8;1H[?25h[?25l[63;220H9[9;1H[?25h[?25l[63;220H10,1[10;1H[?25h[?25l[63;221H1[11;1H[?25h[?25l[63;221H2[12;1H[?25h[?25l[63;221H3[13;1H[?25h[?25l[63;221H4[14;1H[?25h[?25l[63;221H5,0-1[15;1H[?25h[?25l[63;221H6,1  [16;1H[?25h[?25l[63;221H7,0-1[17;1H[?25h[?25l[63;221H8,1  [18;1H[?25h[?25l[63;221H9,2-9[19;9H[?25h[?25l[63;221H8,9  [18;9H[?25h[?25l[63;223H8[18;8H[?25h[?25l[63;223H7[18;7H[?25h[?25l[63;223H6[18;6H[?25h[?25l[63;223H5[18;5H[?25h[?25l[63;223H4[18;4H[?25h[?25l[63;223H3[18;3H[?25h[?25l[63;223H2[18;2H[?25h[?25l[63;223H1[18;1H[?25h[?25l[63;221H9,1-8[19;8H[?25h[?25l[63;220H20[20;8H[?25h[?25l[63;221H1,0-1[21;1H[?25h[?25l[63;221H2,1-8[22;8H[?25h[?25l[63;221H3[23;8H[?25h[?25l[63;221H4[24;8H[?25h[?25l[63;221H5[25;8H[?25h[?25l[63;221H6[26;8H[?25h[?25l[63;221H7[27;8H[?25h[?25l[18;36H[46m{[28;1H}[m[63;221H8,1  [28;1H[?25h[?25l[18;36H{[28;1H}[63;221H9,0-1[29;1H[?25h[?25l[63;220H30[30;1H[?25h[?25l[63;221H1,1  [31;1H[?25h[?25l[63;221H2[32;1H[?25h[?25l[63;221H3[33;1H[?25h[?25l[63;221H4[34;1H[?25h[?25l[63;221H5[35;1H[?25h[?25l[63;221H6,0-1[36;1H[?25h[?25l[63;221H7[37;1H[?25h[?25l[63;221H8[38;1H[?25h[?25l[63;221H9[39;1H[?25h[?25l[63;220H40,1  [40;1H[?25h[?25l[63;221H1[41;1H[?25h[?25l[63;221H2[42;1H[?25h[?25l[63;221H3[43;1H[?25h[?25l[63;221H4[44;1H[?25h[?25l[63;221H5[45;1H[?25h[?25l[63;221H6[46;1H[?25h[?25l[63;221H7[47;1H[?25h[?25l[63;221H8[48;1H[?25h[?25l[63;221H9,1-8[49;8H[?25h[?25l[63;220H50[50;8H[?25h[?25l[63;221H1[51;8H[?25h[?25l[63;221H2,1  [52;1H[?25h[?25l[63;221H3,1-8[53;8H[?25h[?25l[63;221H4[54;8H[?25h[?25l[63;221H5[55;8H[?25h[?25l[63;221H6[56;8H[?25h[?25l[63;221H7,0-1[57;1H[?25h[?25l[63;221H8[58;1H[?25h[?25l[63;221H9,1-8[59;8H[?25h[?25l[63;220H60[60;8H[?25h[?25l[63;221H1[61;8H[?25h[?25l[63;221H2[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;33Hbuf = emalloc([33mBUFSIZ[m);[63;220H[K[63;220H63,1-8[9C0%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;26H[33melse[m[27C[36m/* or expand    */[m[63;220H[K[63;220H64,1[11C1%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[63;220H[K[63;220H65,1-8[9C1%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H66,1-8[9C2%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;25Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[63;220H[K[63;220H67,1-8[9C3%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H68,1-8[9C3%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H}[63;220H[K[63;220H69,1-8[9C4%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H70,0-1[9C5%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H[36m/* end of command? */[m[63;220H[K[63;220H71,1-8[9C5%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H[33mif[m ( c == [35m'\n'[m )[63;220H[K[63;220H72,1-8[9C6%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;25H[33mbreak[m;[63;220H[K[63;220H73,1-8[9C7%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H74,1-8[9C7%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H[36m/* no, add to buffer */[m[63;220H[K[63;220H75,1-8[9C8%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17Hbuf[pos++] = c;[63;220H[K[63;220H76,1-8[9C8%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H77,1-8[9C9%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[63;220H[K[63;220H78,1-8[8C10%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;25H[33mreturn[m [33mNULL[m;[63;220H[K[63;220H79,1-8[8C10%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H}[39C[36m/* say so               */[m[63;220H[K[63;220H80,1-8[8C11%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17Hbuf[pos] = [35m'\0'[m;[63;220H[K[63;220H81,1-8[8C12%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;17H[33mreturn[m buf;[63;220H[K[63;220H82,1-8[8C12%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[39;42H[46m{[62;1H}[m[63;220H[K[63;220H83,1[10C13%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[38;42H{[61;1H}[63;220H[K[63;220H84,0-1[8C14%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m/**[m[63;220H[K[63;220H85,1[10C14%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m **     splitline ( parse a line into an array of strings )[m[63;220H[K[63;220H86,1[10C15%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m **/[m[63;220H[K[63;220H87,1[10C16%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[63;220H[K[63;220H88,1[10C16%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H89,0-1[8C17%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[63;220H[K[63;220H90,1[10C17%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H91,0-1[8C18%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[32mchar[m ** splitline([32mchar[m *line)[63;220H[K[63;220H92,1[10C19%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m/*[m[63;220H[K[63;220H93,1[10C19%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * purpose: split a line into array of white-space separated tokens[m[63;220H[K[63;220H94,1[10C20%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[63;220H[K[63;220H95,1[10C21%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m *          or NULL if line if no tokens on the line[m[63;220H[K[63;220H96,1[10C21%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m *  action: traverse the array, locate strings, make copies[m[63;220H[K[63;220H97,1[10C22%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[63;220H[K[63;220H98,1[10C23%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m */[m[63;220H[K[63;220H99,1[10C23%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H{[63;220H[K[63;220H100,1[9C24%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m  *newstr();[63;220H[K[63;220H101,1[9C25%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m  **args ;[63;220H[K[63;220H102,1[9C25%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[63;220H[K[63;220H103,1[9C26%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[63;220H[K[63;220H104,1[9C26%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[63;220H[K[63;220H105,1[9C27%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[63;220H[K[63;220H106,1[9C28%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m  *start;[63;220H[K[63;220H107,1[9C28%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mint[m   len;[63;220H[K[63;220H108,1[9C29%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H109,0-1[7C30%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[63;220H[K[63;220H110,1[9C30%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5H[33mreturn[m [33mNULL[m;[63;220H[K[63;220H111,1[9C31%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H112,0-1[7C32%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[63;220H[K[63;220H113,1[9C32%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hbufspace = [33mBUFSIZ[m;[63;220H[K[63;220H114,1[9C33%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[63;220H[K[63;220H115,1[9C33%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H116,0-1[7C34%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mwhile[m( *cp != [35m'\0'[m )[63;220H[K[63;220H117,1[9C35%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5H{[63;220H[K[63;220H118,1[9C35%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[63;220H[K[63;220H119,1[9C36%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;9Hcp++;[63;220H[K[63;220H120,1-8[7C37%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[63;220H[K[63;220H121,1[9C37%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;9H[33mbreak[m;[63;220H[K[63;220H122,1-8[7C38%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H123,0-1[7C39%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H[36m/* make sure the array has room (+1 for NULL) */[m[63;220H[K[63;220H124,1[9C39%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H[33mif[m ( argnum+[33m1[m >= spots ){[63;220H[K[63;220H125,1[9C40%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[63;220H[K[63;220H126,1-8[7C41%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;9Hbufspace += [33mBUFSIZ[m;[63;220H[K[63;220H127,1-8[7C41%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[63;220H[K[63;220H128,1-8[7C42%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H}[63;220H[K[63;220H129,1[9C42%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H130,0-1[7C43%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H[36m/* mark start, then find end of word */[m[63;220H[K[63;220H131,1[9C44%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7Hstart = cp;[63;220H[K[63;220H132,1[9C44%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7Hlen   = [33m1[m;[63;220H[K[63;220H133,1[9C45%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[63;220H[K[63;220H134,1[9C46%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;9Hlen++;[63;220H[K[63;220H135,1-8[7C46%[62;8H[?25h[?25l[1;62r[62;1H
[1;63r[62;7Hargs[argnum++] = newstr(start, len);[63;220H[K[63;220H136,1[9C47%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5H}[63;220H[K[63;220H137,1[9C48%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hargs[argnum] = [33mNULL[m;[63;220H[K[63;220H138,1[9C48%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mreturn[m args;[63;220H[K[63;220H139,1[9C49%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[22;1H[46m{[62;1H}[m[63;220H[K[63;220H140,1[9C50%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[21;1H{[61;1H}[63;220H[K[63;220H141,0-1[7C50%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m/*[m[63;220H[K[63;220H142,1[9C51%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * purpose: constructor for strings[m[63;220H[K[63;220H143,1[9C51%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * returns: a string, never NULL[m[63;220H[K[63;220H144,1[9C52%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m */[m[63;220H[K[63;220H145,1[9C53%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[63;220H[K[63;220H146,1[9C53%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H{[63;220H[K[63;220H147,1[9C54%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m *rv = emalloc(l+[33m1[m);[63;220H[K[63;220H148,1[9C55%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[63;220H[K[63;220H149,0-1[7C55%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hrv[l] = [35m'\0'[m;[63;220H[K[63;220H150,1[9C56%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hstrncpy(rv, s, l);[63;220H[K[63;220H151,1[9C57%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mreturn[m rv;[63;220H[K[63;220H152,1[9C57%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[56;1H[46m{[62;1H}[m[63;220H[K[63;220H153,1[9C58%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[55;1H{[61;1H}[63;220H[K[63;220H154,0-1[7C58%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[32mvoid[m freelist([32mchar[m **list)[63;220H[K[63;220H155,1[9C59%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m/*[m[63;220H[K[63;220H156,1[9C60%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * purpose: free the list returned by splitline[m[63;220H[K[63;220H157,1[9C60%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m * returns: nothing[m[63;220H[K[63;220H158,1[9C61%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m *  action: free all strings in list and then free the list[m[63;220H[K[63;220H159,1[9C62%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[36m */[m[63;220H[K[63;220H160,1[9C62%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H{[63;220H[K[63;220H161,1[9C63%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[32mchar[m  **cp = list;[63;220H[K[63;220H162,1[9C64%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3H[33mwhile[m( *cp )[63;220H[K[63;220H163,1[9C64%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;5Hfree(*cp++);[63;220H[K[63;220H164,1[9C65%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;3Hfree(list);[63;220H[K[63;220H165,1[9C66%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[57;1H[46m{[62;1H}[m[63;220H[K[63;220H166,1[9C66%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[56;1H{[61;1H}[63;220H[K[63;220H167,0-1[7C67%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H[32mvoid[m * emalloc([32msize_t[m n)[63;220H[K[63;220H168,1[9C67%[62;1H[?25h[?25l[1;62r[62;1H
[1;63r[62;1H{[63;220H[K[63;220H169,1[9C68%[62;1H[?25h[?25l[63;222H8[61;1H[?25h[?25l[63;222H7,0-1[60;1H[?25h[?25l[54;1H[46m{[59;1H}[m[63;222H6,1  [59;1H[?25h[?25l[54;1H{[59;1H}[63;222H5[58;1H[?25h[?25l[63;222H4[57;1H[?25h[?25l[63;222H3[56;1H[?25h[?25l[63;222H2[55;1H[?25h[?25l[54;1H[46m{[59;1H}[m[63;222H1[54;1H[?25h[?25l{[59;1H}[63;222H0[53;1H[?25h[?25l[63;221H59[52;1H[?25h[?25l[63;222H8[51;1H[?25h[?25l[63;222H7[50;1H[?25h[?25l[63;222H6[49;1H[?25h[?25l[63;222H5[48;1H[?25h[?25l[63;222H4,0-1[47;1H[?25h[?25l[40;1H[46m{[46;1H}[m[63;222H3,1  [46;1H[?25h[?25l[40;1H{[46;1H}[63;222H2[45;1H[?25h[?25l[63;222H1[44;1H[?25h[?25l[63;222H0[43;1H[?25h[?25l[63;221H49,0-1[42;1H[?25h[?25l[63;222H8,1  [41;1H[?25h[?25l[40;1H[46m{[46;1H}[m[63;222H7[40;1H[?25h[?25l{[46;1H}[63;222H6[39;1H[?25h[?25l[63;222H5[38;1H[?25h[?25l[63;222H4[37;1H[?25h[?25l[63;222H3[36;1H[?25h[?25l[63;222H2[35;1H[?25h[?25l[63;222H1,0-1[34;1H[?25h[?25l[63;222H0,1  [33;1H[?25h[?25l[63;221H39[32;1H[?25h[?25l[63;222H8[31;1H[?25h[?25l[63;222H7[30;1H[?25h[?25l[63;222H6[29;1H[?25h[?25l[63;222H5,1-8[28;8H[?25h[?25l[63;222H4,1  [27;1H[?25h[?25l[63;222H3[26;1H[?25h[?25l[63;222H2[25;1H[?25h[?25l[63;222H1[24;1H[?25h[?25l[63;222H0,0-1[23;1H[?25h[?25l[63;221H29,1  [22;1H[?25h[?25l[63;222H8,1-8[21;8H[?25h[?25l[63;222H7[20;8H[?25h[?25l[63;222H6[19;8H[?25h[?25l[63;222H5,1  [18;1H[?25h[?25l[63;222H4[17;1H[?25h[?25l[63;222H3,0-1[16;1H[?25h[?25l[63;222H2,1-8[15;8H[?25h[?25l[63;222H1,1  [14;1H[?25h[?25l[63;222H0,1-8[13;8H[?25h[?25l[63;221H19,1  [12;1H[?25h[?25l[63;222H8[11;1H[?25h[?25l[63;222H7[10;1H[?25h[?25l[63;222H6,0-1[9;1H[?25h[?25l[63;222H5,1  [8;1H[?25h[?25l[63;222H4[7;1H[?25h[?25l[63;222H3[6;1H[?25h[?25l[63;222H2,0-1[5;1H[?25h[?25l[63;222H1,1  [4;1H[?25h[?25l[63;222H0[3;1H[?25h[?25l[63;221H09,0-1[2;1H[?25h[?25l[63;222H8,1  [1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mchar[m  *start;[63;220H[K[63;220H107,1[9C67%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[63;220H[K[63;220H106,1[9C67%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[63;220H[K[63;220H105,1[9C66%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[63;220H[K[63;220H104,1[9C66%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[63;220H[K[63;220H103,1[9C65%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mchar[m  **args ;[63;220H[K[63;220H102,1[9C64%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;3H[32mchar[m  *newstr();[63;220H[K[63;220H101,1[9C64%[1;1H[?25h[?25l[41;62r[41;1H[L[1;63r[1;1H[46m{[m[1;3H[K[2;10Hnewstr();
  [32mchar[m  **args ;[3;17H[K[4;9Hspots = [33m0[m;   [22C[36mspot[m[5;9Hbufspace = [33m0[m;[22C[36mbytes in table[m
  [32mint[m   argnum = [33m0[m[25C[36mslots used   [m[7;10Hcp = line;[21C[36m/* pos in string        */[m
  [32mchar[m  *start;
  [32mint[m   len;[10;3H[K[11;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
    [33mreturn[m [33mNULL[m;[13;3H[K[14;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
  bufspace[9C;[15;21H[K[16;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;3H[K[18;3H[33mwhile[m( *cp != [35m'\0'[m )
    {[19;7H[K[20;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[21;7H  cp++;[21;14H[K[22;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[23;9H[33mbreak[m;[24;7H[K[25;7H[36m/* make sure the array has room (+1 for NULL) */[m[26;7H[33mif[m ( argnum+[33m1[m >= spots ){[26;32H[K[27;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;9Hbufspace += [33mBUFSIZ[m;[28;28H[K[29;7H  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;7H}[31;7H[K[32;7H[36m/* mark start, then find end of word */[m[33;7Hstart = cp;[34;7Hlen   = [33m1[m;[34;17H[K[35;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;7H  len++;[36;15H[K[37;5H  args[argnum++] = newstr(start, len);
    }[38;6H[K[39;3Hargs[argnum] = [33mNULL[m;
  [33mreturn[m args;
[46m}[m[63;220H[K[63;220H100,1[9C63%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m */[m
{[42;1H}[63;220H[K[63;220H99,1[10C62%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[63;220H[K[63;220H98,1[10C62%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *  action: traverse the array, locate strings, make copies[m[63;220H[K[63;220H97,1[10C61%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *          or NULL if line if no tokens on the line[m[63;220H[K[63;220H96,1[10C60%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[63;220H[K[63;220H95,1[10C60%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m * purpose: split a line into array of white-space separated tokens[m[63;220H[K[63;220H94,1[10C59%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m/*[m[63;220H[K[63;220H93,1[10C58%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[32mchar[m ** splitline([32mchar[m *line)[63;220H[K[63;220H92,1[10C58%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H91,0-1[8C57%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[63;220H[K[63;220H90,1[10C57%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H89,0-1[8C56%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[63;220H[K[63;220H88,1[10C55%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m **/[m[63;220H[K[63;220H87,1[10C55%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m **     splitline ( parse a line into an array of strings )[m[63;220H[K[63;220H86,1[10C54%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m/**[m[63;220H[K[63;220H85,1[10C53%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H84,0-1[8C53%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H}[63;220H[K[63;220H83,1[10C52%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H[33mreturn[m buf;[63;220H[K[63;220H82,1-8[8C51%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17Hbuf[pos] = [35m'\0'[m;[63;220H[K[63;220H81,1-8[8C51%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H}[39C[36m/* say so               */[m[63;220H[K[63;220H80,1-8[8C50%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;25H[33mreturn[m [33mNULL[m;[63;220H[K[63;220H79,1-8[8C50%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[63;220H[K[63;220H78,1-8[8C49%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H77,1-8[8C48%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17Hbuf[pos++] = c;[63;220H[K[63;220H76,1-8[8C48%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H[36m/* no, add to buffer */[m[63;220H[K[63;220H75,1-8[8C47%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H74,1-8[8C46%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;25H[33mbreak[m;[63;220H[K[63;220H73,1-8[8C46%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H[33mif[m ( c == [35m'\n'[m )[63;220H[K[63;220H72,1-8[8C45%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H[36m/* end of command? */[m[63;220H[K[63;220H71,1-8[8C44%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H70,0-1[8C44%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;17H}[63;220H[K[63;220H69,1-8[8C43%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H68,1-8[8C42%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;25Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[63;220H[K[63;220H67,1-8[8C42%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H66,1-8[8C41%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[63;220H[K[63;220H65,1-8[8C41%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;26H[33melse[m[27C[36m/* or expand    */[m[63;220H[K[63;220H64,1[10C40%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;33Hbuf = emalloc([33mBUFSIZ[m);[63;220H[K[63;220H63,1-8[8C39%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[63;220H[K[63;220H62,1-8[8C39%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[63;220H[K[63;220H61,1-8[8C38%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[63;220H[K[63;220H60,1-8[8C37%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[63;220H[K[63;220H59,1-8[8C37%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H58,0-1[8C36%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H57,0-1[8C35%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m        char** commands = NULL; */[m[63;220H[K[63;220H56,1-8[8C35%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9H[36m/*int command_count = 0;[m[63;220H[K[63;220H55,1-8[8C34%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;9H[36m//new variable to store number of commands and array of pointer (double pointer char) to store the commands[m[63;220H[K[63;220H54,1-8[8C33%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H53,1-8[8C33%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;10H[32mint[m    c;[30C[36m/* input char           */[m[63;220H[K[63;220H52,1[10C32%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[63;220H[K[63;220H51,1-8[8C32%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[63;220H[K[63;220H50,1-8[8C31%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[63;220H[K[63;220H49,1-8[8C30%[1;8H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H{[63;220H[K[63;220H48,1[10C30%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m */[m[63;220H[K[63;220H47,1[10C29%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[63;220H[K[63;220H46,1[10C28%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *          calls fatal from emalloc()[m[63;220H[K[63;220H45,1[10C28%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[63;220H[K[63;220H44,1[10C27%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m * returns: dynamically allocated string holding command line[m[63;220H[K[63;220H43,1[10C26%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m * purpose: read next command line from fp[m[63;220H[K[63;220H42,1[10C26%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m/*[m[63;220H[K[63;220H41,1[10C25%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[63;220H[K[63;220H40,1[10C25%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H39,0-1[8C24%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H38,0-1[8C23%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H37,0-1[8C23%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[63;220H[K[63;220H36,0-1[8C22%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m */[m[63;220H[K[63;220H35,1[10C21%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[63;220H[K[63;220H34,1[10C21%[1;1H[?25h[?25l[1;62r[1;1H[L[1;63r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[63;220H[K[63;220H33,1[10C20%[1;1H[?25h[?25l[63;221H4[2;1H[?25h[?25l[63;220H[K[63;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"sm2in.c" 218L, 4764C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git --verion
unknown option: --verion
usage: git [--version] [--help] [-C <path>] [-c <name>=<value>]
           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           <command> [<args>]
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git 00versi[K[K[K[K[K[K[K-v
unknown option: -v
usage: git [--version] [--help] [-C <path>] [-c <name>=<value>]
           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           <command> [<args>]
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git--version
bash: git--version: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git --version
git version 2.20.1
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git help[K[K[K[K--help
usage: git [--version] [--help] [-C <path>] [-c <name>=<value>]
           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           <command> [<args>]

These are common Git commands used in various situations:

start a working area (see also: git help tutorial)
   clone      Clone a repository into a new directory
   init       Create an empty Git repository or reinitialize an existing one

work on the current change (see also: git help everyday)
   add        Add file contents to the index
   mv         Move or rename a file, a directory, or a symlink
   reset      Reset current HEAD to the specified state
   rm         Remove files from the working tree and from the index

examine the history and state (see also: git help revisions)
   bisect     Use binary search to find the commit that introduced a bug
   grep       Print lines matching a pattern
   log        Show commit logs
   show       Show various types of objects
   status     Show the working tree status

grow, mark and tweak your common history
   branch     List, create, or delete branches
   checkout    Switch branches or restore working tree files
   commit     Record changes to the repository
   diff       Show changes between commits, commit and working tree, etc
   merge      Join two or more development histories together
   rebase     Reapply commits on top of another base tip
   tag        Create, list, delete or verify a tag object signed with GPG

collaborate (see also: git help workflows)
   fetch      Download objects and refs from another repository
   pull       Fetch from and integrate with another repository or a local branch
   push       Update remote refs along with associated objects

'git help -a' and 'git help -g' list available subcommands and some
concept guides. See 'git help <command>' or 'git help <concept>'
to read about a specific subcommand or concept.
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git init
Initialized empty Git repository in /home/s23-cs648-s02/public_html/week5/chap9/.git/
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ cd ../
]0;s23-cs648-s02@vulcan: ~/public_html/week5s23-cs648-s02@vulcan:~/public_html/week5$ ;s[K[Kls
[0m[01;34mchap7[0m  [01;34mchap8[0m  [01;34mchap9[0m  ex7-16Log  ex8Log  ex9Log
]0;s23-cs648-s02@vulcan: ~/public_html/week5s23-cs648-s02@vulcan:~/public_html/week5$ cd chap
bash: cd: chap: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5s23-cs648-s02@vulcan:~/public_html/week5$ ls -a
[0m[01;34m.[0m  [01;34m..[0m  [01;34mchap7[0m  [01;34mchap8[0m  [01;34mchap9[0m  ex7-16Log  ex8Log  ex9Log
]0;s23-cs648-s02@vulcan: ~/public_html/week5s23-cs648-s02@vulcan:~/public_html/week5$ cd chap9
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls -a
[0m[01;34m.[0m  [01;34m..[0m  execute.c  [01;34m.git[0m  sm2in.c  smsh1.c  smsh.h  splitline.c  [01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls[K[Kgit -v
unknown option: -v
usage: git [--version] [--help] [-C <path>] [-c <name>=<value>]
           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           <command> [<args>]
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git --v
unknown option: --v
usage: git [--version] [--help] [-C <path>] [-c <name>=<value>]
           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           <command> [<args>]
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git -0-s[K[K[K-se[K[Kversion
git version 2.20.1
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ [K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  git [K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  git connect set-url https://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cohttps://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git[A]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Crhttps://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git[A]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cihttps://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git[A]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cghttps://github.com/Jkrin393/Unix-Linux-Progra[Cming-Assignments.git[A]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cihttps://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git[A]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cnhttps://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git[A]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C https://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git[A]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C

git: 'connect' is not a git command. See 'git --help'.
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git remote [K[K[K[K[K[K[K[K[K[K[Kgit --version[K[1Pv[4Pls -acd chap9[3Pls -acd chapls[Kcd chap[B[K[K[K[K[K[K[K[K[Kls[Kls -acd chap9[3Pls -a[Kgit -v-version[Kgit --version[K[1Pv[4Pls -acd chap9[3Pls -a[Klscd ../[4Plsgit initls[Kgit --helpversion[1P--version[6P -v-verion[1Pvi sm2in.c ls[Kcd chap9[K[K[K[K[K[K[K[Kgit commect [K[K[K[K[K[K[K[Krepte[K[K[Kmote set-url https://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git
usage: git remote set-url [--push] <name> <newurl> [<oldurl>]
   or: git remote set-url --add <name> <newurl>
   or: git remote set-url --delete <name> <url>

    --push                manipulate push URLs
    --add                 add URL
    --delete              delete URLs

]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git status
On branch master

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	[31mexecute.c[m
	[31msm2in.c[m
	[31msmsh.h[m
	[31msmsh1.c[m
	[31msplitline.c[m
	[31mtest.o[m

nothing added to commit but untracked files present (use "git add" to track)
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git fetch
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git clone
fatal: You must specify a repository to clone.

usage: git clone [<options>] [--] <repo> [<dir>]

    -v, --verbose         be more verbose
    -q, --quiet           be more quiet
    --progress            force progress reporting
    -n, --no-checkout     don't create a checkout
    --bare                create a bare repository
    --mirror              create a mirror repository (implies bare)
    -l, --local           to clone from a local repository
    --no-hardlinks        don't use local hardlinks, always copy
    -s, --shared          setup as shared repository
    --recurse-submodules[=<pathspec>]
                          initialize submodules in the clone
    -j, --jobs <n>        number of submodules cloned in parallel
    --template <template-directory>
                          directory from which templates will be used
    --reference <repo>    reference repository
    --reference-if-able <repo>
                          reference repository
    --dissociate          use --reference only while cloning
    -o, --origin <name>   use <name> instead of 'origin' to track upstream
    -b, --branch <branch>
                          checkout <branch> instead of the remote's HEAD
    -u, --upload-pack <path>
                          path to git-upload-pack on the remote
    --depth <depth>       create a shallow clone of that depth
    --shallow-since <time>
                          create a shallow clone since a specific time
    --shallow-exclude <revision>
                          deepen history of shallow clone, excluding rev
    --single-branch       clone only one branch, HEAD or --branch
    --no-tags             don't clone any tags, and make later fetches not to follow them
    --shallow-submodules  any cloned submodules will be shallow
    --separate-git-dir <gitdir>
                          separate git dir from working tree
    -c, --config <key=value>
                          set config inside the new repository
    -4, --ipv4            use IPv4 addresses only
    -6, --ipv6            use IPv6 addresses only
    --filter <args>       object filtering

]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git inint[K[K[K[K[K[K[K[K[Kls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls -l
total 44
-rw-r--r-- 1 s23-cs648-s02 students   817 Jul  4 20:39 execute.c
-rw-r--r-- 1 s23-cs648-s02 students  4764 Jul  5 13:44 sm2in.c
-rw-r--r-- 1 s23-cs648-s02 students   904 Jul  4 20:39 smsh1.c
-rw-r--r-- 1 s23-cs648-s02 students   223 Jul  4 20:36 smsh.h
-rw-r--r-- 1 s23-cs648-s02 students  3419 Jul  4 20:38 splitline.c
-rwxr-xr-x 1 s23-cs648-s02 students 17616 Jul  4 21:22 [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git[K[K[Kls -a
[0m[01;34m.[0m  [01;34m..[0m  execute.c  [01;34m.git[0m  sm2in.c  smsh1.c  smsh.h  splitline.c  [01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  git
usage: git [--version] [--help] [-C <path>] [-c <name>=<value>]
           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           <command> [<args>]

These are common Git commands used in various situations:

start a working area (see also: git help tutorial)
   clone      Clone a repository into a new directory
   init       Create an empty Git repository or reinitialize an existing one

work on the current change (see also: git help everyday)
   add        Add file contents to the index
   mv         Move or rename a file, a directory, or a symlink
   reset      Reset current HEAD to the specified state
   rm         Remove files from the working tree and from the index

examine the history and state (see also: git help revisions)
   bisect     Use binary search to find the commit that introduced a bug
   grep       Print lines matching a pattern
   log        Show commit logs
   show       Show various types of objects
   status     Show the working tree status

grow, mark and tweak your common history
   branch     List, create, or delete branches
   checkout    Switch branches or restore working tree files
   commit     Record changes to the repository
   diff       Show changes between commits, commit and working tree, etc
   merge      Join two or more development histories together
   rebase     Reapply commits on top of another base tip
   tag        Create, list, delete or verify a tag object signed with GPG

collaborate (see also: git help workflows)
   fetch      Download objects and refs from another repository
   pull       Fetch from and integrate with another repository or a local branch
   push       Update remote refs along with associated objects

'git help -a' and 'git help -g' list available subcommands and some
concept guides. See 'git help <command>' or 'git help <concept>'
to read about a specific subcommand or concept.
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git remote -v
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git remote addo[K origin https://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git remote -v
origin	https://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git (fetch)
origin	https://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git (push)
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git et[K[Kgetch[K[K[K[K[Kfetch
remote: Enumerating objects: 5, done.[K
remote: Counting objects:  20% (1/5)[Kremote: Counting objects:  40% (2/5)[Kremote: Counting objects:  60% (3/5)[Kremote: Counting objects:  80% (4/5)[Kremote: Counting objects: 100% (5/5)[Kremote: Counting objects: 100% (5/5), done.[K
remote: Compressing objects:  20% (1/5)[Kremote: Compressing objects:  40% (2/5)[Kremote: Compressing objects:  60% (3/5)[Kremote: Compressing objects:  80% (4/5)[Kremote: Compressing objects: 100% (5/5)[Kremote: Compressing objects: 100% (5/5), done.[K
remote: Total 5 (delta 0), reused 5 (delta 0), pack-reused 0[K
Unpacking objects:  20% (1/5)   Unpacking objects:  40% (2/5)   Unpacking objects:  60% (3/5)   Unpacking objects:  80% (4/5)   Unpacking objects: 100% (5/5)   Unpacking objects: 100% (5/5), done.
From https://github.com/Jkrin393/Unix-Linux-Programming-Assignments
 * [new branch]      main       -> origin/main
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi [K[K[Kgit pull
There is no tracking information for the current branch.
Please specify which branch you want to merge with.
See git-pull(1) for details.

    git pull <remote> <branch>

If you wish to set tracking information for this branch you can do so with:

    git branch --set-upstream-to=origin/<branch> master

]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git pull remote main
fatal: 'remote' does not appear to be a git repository
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git -v
unknown option: -v
usage: git [--version] [--help] [-C <path>] [-c <name>=<value>]
           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           <command> [<args>]
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ git remote -v
origin	https://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git (fetch)
origin	https://github.com/Jkrin393/Unix-Linux-Programming-Assignments.git (push)
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
execute.c  sm2in.c  smsh1.c  smsh.h  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ rm smdh[K[Ksh[K[K[K[K[K[K[Kgit rmeote[K[K[K[K[K[K[K[K[K[Kgit pull origin main
From https://github.com/Jkrin393/Unix-Linux-Programming-Assignments
 * branch            main       -> FETCH_HEAD
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  execute.c  pid.c  sm2in.c  smsh1.c  smsh.h  split.c  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ rm execute.c
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ rm [K[K[Kls
exec.c  pid.c  sm2in.c  smsh1.c  smsh.h  split.c  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  pid.c  sm2in.c  smsh1.c  smsh.h  split.c  splitline.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ rm splitline.c
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  pid.c  sm2in.c  smsh1.c  smsh.h  split.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi sm2in.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"sm2in.c" 218L, 4764C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments
  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m<string.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"execute.c"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m count_commands([32mchar[m** commands){[19;9H[32mint[m count;[20;9H[32mchar[m** cmd = commands;[22;9Hcount = [33m0[m;[23;9H[33mwhile[m(*cmd != [33mNULL[m){[24;17Hcount++;[25;17Hcmd++;[26;9H}[27;9H[33mreturn[m count;
}


[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string
 */[m[40;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[49;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[50;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[51;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;10H[32mint[m    c;[30C[36m/* input char           */[54;9H//new variable to store number of commands and array of pointer (double pointer char) to store the commands[55;9H/*int command_count = 0;
        char** commands = NULL; */[m[59;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[60;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[61;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6[6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5,0-1[15;1H[?25h[?25l[62;101H6,1  [16;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l[62;101H9,1-8[19;8H[?25h[?25l[62;100H20[20;8H[?25h[?25l[62;101H1,0-1[21;1H[?25h[?25l[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[18;36H[46m{[28;1H}[m[62;101H8,1  [28;1H[?25h[?25l[18;36H{[28;1H}[62;101H9,0-1[29;1H[?25h[?25l[62;100H30[30;1H[?25h[?25l[62;101H1,1  [31;1H[?25h[?25l[62;101H2[32;1H[?25h[?25l[62;101H3[33;1H[?25h[?25l[62;101H4[34;1H[?25h[?25l[62;101H5[35;1H[?25h[?25l[62;101H6,0-1[36;1H[?25h[?25l[62;101H7[37;1H[?25h[?25l[62;101H8[38;1H[?25h[?25l[62;101H9[39;1H[?25h[?25l[62;100H40,1  [40;1H[?25h[?25l[62;101H1[41;1H[?25h[?25l[62;101H2[42;1H[?25h[?25l[62;101H1[41;1H[?25h[?25l[62;101H0[40;1H[?25h[?25l[62;1H[33m-- VISUAL --[m[62;13H[K[62;100H40,1[10CTop[40;1H[?25h[?25l[7m[32mchar[m[7m * next_cmd([m[7m[32mchar[m[7m *prompt, [m[7m[32mFILE[m[7m *fp) [m[62;101H1[41;1H[?25h[?25l[7m[36m/*[m[7m [m[62;101H2[42;1H[?25h[?25l[7m[36m * purpose: read next command line from fp[m[7m [m[62;101H3[43;1H[?25h[?25l[7m[36m * returns: dynamically allocated string holding command line[m[7m [m[62;101H4[44;1H[?25h[?25l[7m[36m *  errors: NULL at EOF (not really an error)[m[7m [m[62;101H5[45;1H[?25h[?25l[7m[36m *          calls fatal from emalloc()[m[7m [m[62;101H6[46;1H[?25h[?25l[7m[36m *   notes: allocates space in BUFSIZ chunks.  [m[7m [m[62;101H7[47;1H[?25h[?25l[7m[36m */[m[7m [m[62;101H8[48;1H[?25h[?25l[7m{ 
       [m[62;101H9,1-8[49;8H[?25h[?25l[7m  [m[7m[32mchar[m[7m   *buf = [m[7m[33mNULL[m[7m;                            [m[7m[36m/* the buffer [m[7m  [m[7m[36m [m[7m       [m[7m[36m*/[m[7m 
       [m[62;100H50[50;8H[?25h[?25l[7m  [m[7m[32mint[m[7m    bufspace = [m[7m[33m0[m[7m;                   [m[7m[36m/* total size [m[7m  [m[7m[36m [m[7m       [m[7m[36m*/[m[7m 
       [m[62;101H1[51;8H[?25h[?25l[7m  [m[7m[32mint[m[7m    pos = [m[7m[33m0[m[7m;                        [m[7m[36m/* current position [m[7m    [m[7m[36m*/[m[7m [m[62;101H2,1  [52;1H[?25h[?25l[7m         [m[7m[32mint[m[7m    c;                              [m[7m[36m/* input char [m[7m  [m[7m[36m [m[7m       [m[7m[36m*/[m[7m 
       [m[62;101H3,1-8[53;8H[?25h[?25l[7m  
       [m[62;101H4[54;8H[?25h[?25l[7m [m[7m[36m//new variable to store number of commands and array of pointer (double pointer char) to store the commands[m[7m 
       [m[62;101H5[55;8H[?25h[?25l[7m [m[7m[36m/*int command_count = 0;[m[7m [m
[7m[36m [m[7m      [m[62;101H6[56;8H[?25h[?25l[7m [m[7m[36mchar** commands = NULL; */[m[7m [m[62;101H7,0-1[57;1H[?25h[?25l[7m [m[62;101H8[58;1H[?25h[?25l[7m 
       [m[62;101H9,1-8[59;8H[?25h[?25l[7m  printf([m[7m[33m"[m[7m[35m%s[m[7m[33m"[m[7m, prompt);                          [m[7m[36m/* prompt user [m[7m [m[7m[36m*/[m[7m 
       [m[62;100H60[60;8H[?25h[?25l[7m  [m[7m[33mwhile[m[7m( ( c = getc(fp)) != [m[7m[33mEOF[m[7m ) { [m[7m[36m/* need space? */[m[7m 
       [m[62;101H1[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m          [m[7m[33mif[m[7m( pos+[m[7m[33m1[m[7m >= bufspace ){               [m[7m[36m/* 1 for \0 [m[7m    [m[7m[36m*/[m[7m 
       [m[17C[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[62;100H[K[62;100H62,1-8[9C0%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m                 [m[7m[33mif[m[7m ( bufspace == [m[7m[33m0[m[7m )            [m[7m[36m/* y: 1st time [m[7m [m[7m[36m*/[m[7m 
       [m[25Cbuf = emalloc([33mBUFSIZ[m);[62;100H[K[62;100H63,1-8[9C1%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m                         buf = emalloc([m[7m[33mBUFSIZ[m[7m); [m[61;26H[33melse[m[27C[36m/* or expand    */[m[62;100H[K[62;100H64,1[11C1%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m                         [m[7m[33melse[m[7m                           [m[7m[36m/* or expand [m[7m   [m[7m[36m*/[m[7m 
       [m[25Cbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H65,1-8[9C2%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m                         buf = erealloc(buf,bufspace+[m[7m[33mBUFSIZ[m[7m); 
       [m[62;100H[K[62;100H66,1-8[9C3%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m                  
       [m[17Cbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[62;100H[K[62;100H67,1-8[9C3%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m                 bufspace += [m[7m[33mBUFSIZ[m[7m;     [m[7m[36m/* update size [m[7m [m[7m[36m*/[m[7m 
       [m[62;100H[K[62;100H68,1-8[9C4%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m                          
       [m[9C}[62;100H[K[62;100H69,1-8[9C5%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m         } [m[62;100H[K[62;100H70,0-1[9C5%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m 
       [m[9C[36m/* end of command? */[m[62;100H[K[62;100H71,1-8[9C6%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m         [m[7m[36m/* end of command? */[m[7m 
       [m[9C[33mif[m ( c == [35m'\n'[m )[62;100H[K[62;100H72,1-8[9C7%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m         [m[7m[33mif[m[7m ( c == [m[7m[35m'\n'[m[7m ) 
       [m[17C[33mbreak[m;[62;100H[K[62;100H73,1-8[9C7%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m                 [m[7m[33mbreak[m[7m; 
       [m[62;100H[K[62;100H74,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m                                  
       [m[9C[36m/* no, add to buffer */[m[62;100H[K[62;100H75,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m         [m[7m[36m/* no, add to buffer */[m[7m 
       [m[9Cbuf[pos++] = c;[62;100H[K[62;100H76,1-8[9C9%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m         buf[pos++] = c; 
       [m[62;100H[K[62;100H77,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m          
       [m[9C[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[62;100H[K[62;100H78,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m         [m[7m[33mif[m[7m ( c == [m[7m[33mEOF[m[7m && pos == [m[7m[33m0[m[7m ){            [m[7m[36m/* EOF and no input [m[7m    [m[7m[36m*/[m[7m 
       [m[17C[33mreturn[m [33mNULL[m;[62;100H[K[62;100H79,1-8[8C11%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m                 [m[7m[33mreturn[m[7m [m[7m[33mNULL[m[7m;     
       [m[9C}[39C[36m/* say so               */[m[62;100H[K[62;100H80,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m         }                                       [m[7m[36m/* say so [m[7m      [m[7m[36m [m[7m       [m[7m[36m*/[m[7m 
       [m[9Cbuf[pos] = [35m'\0'[m;[62;100H[K[62;100H81,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m         buf[pos] = [m[7m[35m'\0'[m[7m; 
       [m[9C[33mreturn[m buf;[62;100H[K[62;100H82,1-8[8C13%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m         [m[7m[33mreturn[m[7m buf; [m
[46m}[m[62;100H[K[62;100H83,1[10C14%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m} [m[62;100H[K[62;100H84,0-1[8C14%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
[36m/**[m[62;100H[K[62;100H85,1[10C15%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m/**[m[7m [m
[36m **     splitline ( parse a line into an array of strings )[m[62;100H[K[62;100H86,1[10C15%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m ** [m[7m    [m[7m[36msplitline ( parse a line into an array of strings )[m[7m [m
[36m **/[m[62;100H[K[62;100H87,1[10C16%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m **/[m[7m [m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[62;100H[K[62;100H88,1[10C17%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[35m#define is_delim(x) ((x)==[m[7m[33m' '[m[7m[35m||(x)=='\t')[m[7m [m[62;100H[K[62;100H89,0-1[8C17%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[62;100H[K[62;100H90,1[10C18%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[7m [m[62;100H[K[62;100H91,0-1[8C19%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
[32mchar[m ** splitline([32mchar[m *line)[62;100H[K[62;100H92,1[10C19%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[32mchar[m[7m ** splitline([m[7m[32mchar[m[7m *line) [m
[36m/*[m[62;100H[K[62;100H93,1[10C20%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m/*[m[7m [m
[36m * purpose: split a line into array of white-space separated tokens[m[62;100H[K[62;100H94,1[10C21%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m * purpose: split a line into array of white-space separated tokens[m[7m [m
[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H[K[62;100H95,1[10C21%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[7m [m
[36m *          or NULL if line if no tokens on the line[m[62;100H[K[62;100H96,1[10C22%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m *          or NULL if line if no tokens on the line[m[7m [m
[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H97,1[10C22%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m *  action: traverse the array, locate strings, make copies[m[7m [m
[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H98,1[10C23%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m *    note: strtok() could work, but we may want to add quotes later[m[7m [m
[36m */[m[62;100H[K[62;100H99,1[10C24%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m */[m[7m [m
{[62;100H[K[62;100H100,1[9C24%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m{ [m
  [32mchar[m  *newstr();[62;100H[K[62;100H101,1[9C25%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mchar[m[7m  *newstr(); [m
  [32mchar[m  **args ;[62;100H[K[62;100H102,1[9C26%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mchar[m[7m  **args ; [m
  [32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H103,1[9C26%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mint[m[7m   spots = [m[7m[33m0[m[7m;                      [m[7m[36m/* spots in table [m[7m      [m[7m[36m*/[m[7m [m
  [32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H104,1[9C27%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mint[m[7m   bufspace = [m[7m[33m0[m[7m;                   [m[7m[36m/* bytes in table [m[7m      [m[7m[36m*/[m[7m [m
  [32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H105,1[9C28%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mint[m[7m   argnum = [m[7m[33m0[m[7m;                     [m[7m[36m/* slots used [m[7m  [m[7m[36m [m[7m       [m[7m[36m*/[m[7m [m
  [32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H106,1[9C28%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mchar[m[7m  *cp = line;                     [m[7m[36m/* pos in string [m[7m       [m[7m[36m*/[m[7m [m
  [32mchar[m  *start;[62;100H[K[62;100H107,1[9C29%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mchar[m[7m  *start; [m
  [32mint[m   len;[62;100H[K[62;100H108,1[9C29%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mint[m[7m   len; [m[62;100H[K[62;100H109,0-1[7C30%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
  [33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[62;100H[K[62;100H110,1[9C31%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[33mif[m[7m ( line == [m[7m[33mNULL[m[7m )                   [m[7m[36m/* handle special case [m[7m [m[7m[36m*/[m[7m [m
    [33mreturn[m [33mNULL[m;[62;100H[K[62;100H111,1[9C31%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m    [m[7m[33mreturn[m[7m [m[7m[33mNULL[m[7m; [m[62;100H[K[62;100H112,0-1[7C32%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
  args     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[62;100H[K[62;100H113,1[9C33%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  args     = emalloc([m[7m[33mBUFSIZ[m[7m);           [m[7m[36m/* initialize array [m[7m    [m[7m[36m*/[m[7m [m
  bufspace = [33mBUFSIZ[m;[62;100H[K[62;100H114,1[9C33%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  bufspace = [m[7m[33mBUFSIZ[m[7m; [m
  spots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H115,1[9C34%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  spots    = [m[7m[33mBUFSIZ[m[7m/[m[7m[33msizeof[m[7m([m[7m[32mchar[m[7m *); [m[62;100H[K[62;100H116,0-1[7C35%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
  [33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H117,1[9C35%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[33mwhile[m[7m( *cp != [m[7m[35m'\0'[m[7m ) [m
    {[62;100H[K[62;100H118,1[9C36%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m    { [m[61;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[62;100H[K[62;100H119,1[9C36%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m      [m[7m[33mwhile[m[7m ( is_delim(*cp) )           [m[7m[36m/* skip leading spaces [m[7m [m[7m[36m*/[m[7m 
       [m cp++;[62;100H[K[62;100H120,1-8[7C37%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m cp++; [m[61;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[62;100H[K[62;100H121,1[9C38%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m      [m[7m[33mif[m[7m ( *cp == [m[7m[35m'\0'[m[7m )                [m[7m[36m/* quit at end-o-string */[m[7m 
       [m [33mbreak[m;[62;100H[K[62;100H122,1-8[7C38%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m [m[7m[33mbreak[m[7m; [m[62;100H[K[62;100H123,0-1[7C39%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m[61;7H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H124,1[9C40%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m      [m[7m[36m/* make sure the array has room (+1 for NULL) */[m[7m [m[61;7H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H125,1[9C40%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m      [m[7m[33mif[m[7m ( argnum+[m[7m[33m1[m[7m >= spots ){ 
       [m args = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H126,1-8[7C41%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m args = erealloc(args,bufspace+[m[7m[33mBUFSIZ[m[7m); 
       [m bufspace += [33mBUFSIZ[m;[62;100H[K[62;100H127,1-8[7C42%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m bufspace += [m[7m[33mBUFSIZ[m[7m; 
       [m spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H128,1-8[7C42%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m spots += ([m[7m[33mBUFSIZ[m[7m/[m[7m[33msizeof[m[7m([m[7m[32mchar[m[7m *)); [m[61;7H}[62;100H[K[62;100H129,1[9C43%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m      } [m[62;100H[K[62;100H130,0-1[7C43%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m[61;7H[36m/* mark start, then find end of word */[m[62;100H[K[62;100H131,1[9C44%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m      [m[7m[36m/* mark start, then find end of word */[m[7m [m[61;7Hstart = cp;[62;100H[K[62;100H132,1[9C45%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m      start = cp; [m[61;7Hlen   = [33m1[m;[62;100H[K[62;100H133,1[9C45%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m      len   = [m[7m[33m1[m[7m; [m[61;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[62;100H[K[62;100H134,1[9C46%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m      [m[7m[33mwhile[m[7m (*++cp != [m[7m[35m'\0'[m[7m && !(is_delim(*cp)) ) 
       [m len++;[62;100H[K[62;100H135,1-8[7C47%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[60;8H[7m len++; [m[61;7Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H136,1[9C47%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m      args[argnum++] = newstr(start, len); [m
    }[62;100H[K[62;100H137,1[9C48%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m    } [m
  args[argnum] = [33mNULL[m;[62;100H[K[62;100H138,1[9C49%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  args[argnum] = [m[7m[33mNULL[m[7m; [m
  [33mreturn[m args;[62;100H[K[62;100H139,1[9C49%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[33mreturn[m[7m args; [m
[46m}[m[62;100H[K[62;100H140,1[9C50%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m} [m[62;100H[K[62;100H141,0-1[7C50%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
[36m/*[m[62;100H[K[62;100H142,1[9C51%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m/*[m[7m [m
[36m * purpose: constructor for strings[m[62;100H[K[62;100H143,1[9C52%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m * purpose: constructor for strings[m[7m [m
[36m * returns: a string, never NULL[m[62;100H[K[62;100H144,1[9C52%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m * returns: a string, never NULL[m[7m [m
[36m */[m[62;100H[K[62;100H145,1[9C53%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m */[m[7m [m
[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[62;100H[K[62;100H146,1[9C54%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[32mchar[m[7m *newstr([m[7m[32mchar[m[7m *s, [m[7m[32mint[m[7m l) [m
{[62;100H[K[62;100H147,1[9C54%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m{ [m
  [32mchar[m *rv = emalloc(l+[33m1[m);[62;100H[K[62;100H148,1[9C55%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mchar[m[7m *rv = emalloc(l+[m[7m[33m1[m[7m); [m[62;100H[K[62;100H149,0-1[7C56%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
  rv[l] = [35m'\0'[m;[62;100H[K[62;100H150,1[9C56%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  rv[l] = [m[7m[35m'\0'[m[7m; [m
  strncpy(rv, s, l);[62;100H[K[62;100H151,1[9C57%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  strncpy(rv, s, l); [m
  [33mreturn[m rv;[62;100H[K[62;100H152,1[9C57%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[33mreturn[m[7m rv; [m
[46m}[m[62;100H[K[62;100H153,1[9C58%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m} [m[62;100H[K[62;100H154,0-1[7C59%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
[32mvoid[m freelist([32mchar[m **list)[62;100H[K[62;100H155,1[9C59%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[32mvoid[m[7m freelist([m[7m[32mchar[m[7m **list) [m
[36m/*[m[62;100H[K[62;100H156,1[9C60%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m/*[m[7m [m
[36m * purpose: free the list returned by splitline[m[62;100H[K[62;100H157,1[9C61%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m * purpose: free the list returned by splitline[m[7m [m
[36m * returns: nothing[m[62;100H[K[62;100H158,1[9C61%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m * returns: nothing[m[7m [m
[36m *  action: free all strings in list and then free the list[m[62;100H[K[62;100H159,1[9C62%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m *  action: free all strings in list and then free the list[m[7m [m
[36m */[m[62;100H[K[62;100H160,1[9C63%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m */[m[7m [m
{[62;100H[K[62;100H161,1[9C63%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m{ [m
  [32mchar[m  **cp = list;[62;100H[K[62;100H162,1[9C64%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mchar[m[7m  **cp = list; [m
  [33mwhile[m( *cp )[62;100H[K[62;100H163,1[9C64%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[33mwhile[m[7m( *cp ) [m
    free(*cp++);[62;100H[K[62;100H164,1[9C65%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m    free(*cp++); [m
  free(list);[62;100H[K[62;100H165,1[9C66%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  free(list); [m
[46m}[m[62;100H[K[62;100H166,1[9C66%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m} [m[62;100H[K[62;100H167,0-1[7C67%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
[32mvoid[m * emalloc([32msize_t[m n)[62;100H[K[62;100H168,1[9C68%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[32mvoid[m[7m * emalloc([m[7m[32msize_t[m[7m n) [m
{[62;100H[K[62;100H169,1[9C68%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m{ [m
  [32mvoid[m *rv ;[62;100H[K[62;100H170,1[9C69%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mvoid[m[7m *rv ; [m
  [33mif[m ( (rv = malloc(n)) == [33mNULL[m )[62;100H[K[62;100H171,1[9C70%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[33mif[m[7m ( (rv = malloc(n)) == [m[7m[33mNULL[m[7m ) [m
    fatal([33m"out of memory"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H172,1[9C70%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m    fatal([m[7m[33m"out of memory"[m[7m,[m[7m[33m""[m[7m,[m[7m[33m1[m[7m); [m
  [33mreturn[m rv;[62;100H[K[62;100H173,1[9C71%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[33mreturn[m[7m rv; [m
[46m}[m[62;100H[K[62;100H174,1[9C71%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m} [m[62;100H[K[62;100H175,0-1[7C72%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[62;100H[K[62;100H176,1[9C73%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[32mvoid[m[7m * erealloc([m[7m[32mvoid[m[7m *p, [m[7m[32msize_t[m[7m n) [m
{[62;100H[K[62;100H177,1[9C73%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m{ [m
  [32mvoid[m *rv;[62;100H[K[62;100H178,1[9C74%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mvoid[m[7m *rv; [m
  [33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[62;100H[K[62;100H179,1[9C75%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[33mif[m[7m ( (rv = realloc(p,n)) == [m[7m[33mNULL[m[7m ) [m
    fatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H180,1[9C75%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m    fatal([m[7m[33m"realloc() failed"[m[7m,[m[7m[33m""[m[7m,[m[7m[33m1[m[7m); [m
  [33mreturn[m rv;[62;100H[K[62;100H181,1[9C76%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[33mreturn[m[7m rv; [m
[46m}[m[62;100H[K[62;100H182,1[9C77%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m} [m[62;100H[K[62;100H183,0-1[7C77%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m[62;100H[K[62;100H184,0-1[7C78%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
[32mvoid[m setup()[62;100H[K[62;100H185,1[9C78%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[32mvoid[m[7m setup() [m
[36m/*[m[62;100H[K[62;100H186,1[9C79%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m/*[m[7m [m
[36m * purpose: initialize shell[m[62;100H[K[62;100H187,1[9C80%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m * purpose: initialize shell[m[7m [m
[36m * returns: nothing. calls fatal() if trouble[m[62;100H[K[62;100H188,1[9C80%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m * returns: nothing. calls fatal() if trouble[m[7m [m
[36m */[m[62;100H[K[62;100H189,1[9C81%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[36m */[m[7m [m
{[62;100H[K[62;100H190,1[9C82%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m{ [m
  signal([33mSIGINT[m,  [33mSIG_IGN[m);[62;100H[K[62;100H191,1[9C82%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  signal([m[7m[33mSIGINT[m[7m,  [m[7m[33mSIG_IGN[m[7m); [m
  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[62;100H[K[62;100H192,1[9C83%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  signal([m[7m[33mSIGQUIT[m[7m, [m[7m[33mSIG_IGN[m[7m); [m
[46m}[m[62;100H[K[62;100H193,1[9C84%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m} [m[62;100H[K[62;100H194,0-1[7C84%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[62;100H[K[62;100H195,1[9C85%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[32mvoid[m[7m fatal([m[7m[32mchar[m[7m *s1, [m[7m[32mchar[m[7m *s2, [m[7m[32mint[m[7m n) [m
{[62;100H[K[62;100H196,1[9C85%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m{ [m
  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[62;100H[K[62;100H197,1[9C86%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  fprintf([m[7m[33mstderr[m[7m,[m[7m[33m"Error: [m[7m[35m%s[m[7m[33m,[m[7m[35m%s\n[m[7m[33m"[m[7m, s1, s2); [m
  exit(n);[62;100H[K[62;100H198,1[9C87%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  exit(n); [m
[46m}[m[62;100H[K[62;100H199,1[9C87%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m} [m[62;100H[K[62;100H200,0-1[7C88%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
[32mint[m main()[62;100H[K[62;100H201,1[9C89%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m[32mint[m[7m main() [m
{[62;100H[K[62;100H202,1[9C89%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m{ [m
  [32mchar[m  *cmdline, *prompt, **arglist;[62;100H[K[62;100H203,1[9C90%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mchar[m[7m  *cmdline, *prompt, **arglist; [m
  [32mint[m   result;[62;100H[K[62;100H204,1[9C91%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mint[m[7m   result; [m
  [32mvoid[m  setup();[62;100H[K[62;100H205,1[9C91%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[32mvoid[m[7m  setup(); [m[62;100H[K[62;100H206,0-1[7C92%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
  prompt = DFL_PROMPT;[62;100H[K[62;100H207,1[9C92%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  prompt = DFL_PROMPT; [m
  setup();[62;100H[K[62;100H208,1[9C93%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  setup(); [m[62;100H[K[62;100H209,0-1[7C94%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m [m
  [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[62;100H[K[62;100H210,1[9C94%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[33mwhile[m[7m ( (cmdline = next_cmd(prompt, [m[7m[33mstdin[m[7m)) != [m[7m[33mNULL[m[7m ){ [m
    [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[62;100H[K[62;100H211,1[9C95%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m    [m[7m[33mif[m[7m ( (arglist = splitline(cmdline)) != [m[7m[33mNULL[m[7m  ){ [m[61;9Hresult = execute(arglist);[62;100H[K[62;100H212,1[9C96%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m        result = execute(arglist); [m[61;9Hfreelist(arglist);[62;100H[K[62;100H213,1[9C96%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m        freelist(arglist); [m
    }[62;100H[K[62;100H214,1[9C97%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m    } [m
    free(cmdline);[62;100H[K[62;100H215,1[9C98%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m    free(cmdline); [m
  }[62;100H[K[62;100H216,1[9C98%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  } [m
  [33mreturn[m [33m0[m;[62;100H[K[62;100H217,1[9C99%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[60;1H[7m  [m[7m[33mreturn[m[7m [m[7m[33m0[m[7m; [m
[46m}[m[62;100H[K[62;100H218,1[9CBot[61;1H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[60;1H  [33mreturn[m [33m0[m;[60;12H[K[61;1H}[62;102H7[60;1H[?25h[?25l[59;1H  }[59;4H[K[62;102H6[59;1H[?25h[?25l[58;1H    free(cmdline);[58;19H[K[62;102H5[58;1H[?25h[?25l[57;1H    }[57;6H[K[62;102H4[57;1H[?25h[?25l[56;1H        freelist(arglist);[56;27H[K[62;102H3[56;1H[?25h[?25l[55;1H        result = execute(arglist);[55;35H[K[62;102H2[55;1H[?25h[?25l[54;1H    [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[54;52H[K[62;102H1[54;1H[?25h[?25l[53;1H  [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[53;57H[K[62;102H0[53;1H[?25h[?25l[52;1H[K[62;101H09,0-1[52;1H[?25h[?25l[51;1H  setup();[51;11H[K[62;102H8,1  [51;1H[?25h[?25l[50;1H  prompt = DFL_PROMPT;[50;23H[K[62;102H7[50;1H[?25h[?25l[49;1H[K[62;102H6,0-1[49;1H[?25h[?25l[48;1H  [32mvoid[m  setup();[48;17H[K[62;102H5,1  [48;1H[?25h[?25l[47;1H  [32mint[m   result;[47;16H[K[62;102H4[47;1H[?25h[?25l[46;1H  [32mchar[m  *cmdline, *prompt, **arglist;[46;38H[K[62;102H3[46;1H[?25h[?25l[45;1H[46m{[m[45;2H[K[61;1H[46m}[m[62;102H2[45;1H[?25h[?25l[44;1H[32mint[m main()[44;11H[K[45;1H{[61;1H}[62;102H1[44;1H[?25h[?25l[43;1H[K[62;102H0,0-1[43;1H[?25h[?25l[42;1H[46m}[m[42;2H[K[62;100H199,1  [42;1H[?25h[?25l[41;1H  exit(n);[41;11H[K[42;1H}[62;102H8[41;1H[?25h[?25l[40;1H  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[40;44H[K[62;102H7[40;1H[?25h[?25l[39;1H[46m{[m[39;2H[K[42;1H[46m}[m[62;102H6[39;1H[?25h[?25l[38;1H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[38;38H[K[39;1H{


}[62;102H5[38;1H[?25h[?25l[37;1H[K[62;102H4,0-1[37;1H[?25h[?25l[36;1H[46m}[m[36;2H[K[62;102H3,1  [36;1H[?25h[?25l[35;1H  signal([33mSIGQUIT[m, [33mSIG_IGN[m);[35;28H[K[36;1H}[62;102H2[35;1H[?25h[?25l[34;1H  signal([33mSIGINT[m,  [33mSIG_IGN[m);[34;28H[K[62;102H1[34;1H[?25h[?25l[33;1H[46m{[m[33;2H[K[36;1H[46m}[m[62;102H0[33;1H[?25h[?25l[32;1H[36m */[m[32;4H[K[33;1H{


}[62;101H89[32;1H[?25h[?25l[31;1H[36m * returns: nothing. calls fatal() if trouble[m[31;46H[K[62;102H8[31;1H[?25h[?25l[30;1H[36m * purpose: initialize shell[m[30;29H[K[62;102H7[30;1H[?25h[?25l[29;1H[36m/*[m[29;3H[K[62;102H6[29;1H[?25h[?25l[28;1H[32mvoid[m setup()[28;13H[K[62;102H5[28;1H[?25h[?25l[27;1H[K[62;102H4,0-1[27;1H[?25h[?25l[26;1H[K[62;102H3[26;1H[?25h[?25l[25;1H[46m}[m[25;2H[K[62;102H2,1  [25;1H[?25h[?25l[24;1H  [33mreturn[m rv;[24;13H[K[25;1H}[62;102H1[24;1H[?25h[?25l[23;1H    fatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[23;36H[K[62;102H0[23;1H[?25h[?25l[22;1H  [33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[22;37H[K[62;101H79[22;1H[?25h[?25l[21;1H  [32mvoid[m *rv;[21;12H[K[62;102H8[21;1H[?25h[?25l[20;1H[46m{[m[20;2H[K[25;1H[46m}[m[62;102H7[20;1H[?25h[?25l[19;1H[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[19;35H[K[20;1H{[25;1H}[62;102H6[19;1H[?25h[?25l[18;1H[K[62;102H5,0-1[18;1H[?25h[?25l[17;1H[46m}[m[17;2H[K[62;102H4,1  [17;1H[?25h[?25l[16;1H  [33mreturn[m rv;[16;13H[K[17;1H}[62;102H3[16;1H[?25h[?25l[15;1H    fatal([33m"out of memory"[m,[33m""[m,[33m1[m);[15;33H[K[62;102H2[15;1H[?25h[?25l[14;1H  [33mif[m ( (rv = malloc(n)) == [33mNULL[m )[14;34H[K[62;102H1[14;1H[?25h[?25l[13;1H  [32mvoid[m *rv ;[13;13H[K[62;102H0[13;1H[?25h[?25l[12;1H[46m{[m[12;2H[K[17;1H[46m}[m[62;101H69[12;1H[?25h[?25l[11;1H[32mvoid[m * emalloc([32msize_t[m n)[11;25H[K[12;1H{[17;1H}[62;102H8[11;1H[?25h[?25l[10;1H[K[62;102H7,0-1[10;1H[?25h[?25l[9;1H[46m}[m[9;2H[K[62;102H6,1  [9;1H[?25h[?25l[8;1H  free(list);[8;14H[K[9;1H}[62;102H5[8;1H[?25h[?25l[7;1H    free(*cp++);[7;17H[K[62;102H4[7;1H[?25h[?25l[6;1H  [33mwhile[m( *cp )[6;15H[K[62;102H3[6;1H[?25h[?25l[5;1H  [32mchar[m  **cp = list;[5;21H[K[62;102H2[5;1H[?25h[?25l[4;1H[46m{[m[4;2H[K[9;1H[46m}[m[62;102H1[4;1H[?25h[?25l[3;1H[36m */[m[3;4H[K[4;1H{[9;1H}[62;102H0[3;1H[?25h[?25l[2;1H[36m *  action: free all strings in list and then free the list[m[2;60H[K[62;101H59[2;1H[?25h[?25l[1;1H[36m * returns: nothing[m[1;20H[K[62;102H8[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * purpose: free the list returned by splitline[m[62;100H[K[62;100H157,1[9C99%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/*[m[62;100H[K[62;100H156,1[9C98%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[32mvoid[m freelist([32mchar[m **list)[62;100H[K[62;100H155,1[9C98%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H154,0-1[7C97%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H}[62;100H[K[62;100H153,1[9C96%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[33mreturn[m rv;[62;100H[K[62;100H152,1[9C96%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3Hstrncpy(rv, s, l);[62;100H[K[62;100H151,1[9C95%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3Hrv[l] = [35m'\0'[m;[62;100H[K[62;100H150,1[9C94%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H149,0-1[7C94%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[32mchar[m *rv = emalloc(l+[33m1[m);[62;100H[K[62;100H148,1[9C93%[1;1H[?25h[?25l[7;61r[7;1H[L[1;62r[1;1H[46m{[m[1;3H[K[2;3H[32mchar[m *rv = emalloc(l+[33m1[m);[3;3H[K[4;3Hrv[l] = [35m'\0'[m;[4;16H[K[5;3Hstrncpy(rv, s, l);
  [33mreturn[m rv;
[46m}[m[62;100H[K[62;100H147,1[9C92%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)
{[8;1H}[62;100H[K[62;100H146,1[9C92%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m */[m[62;100H[K[62;100H145,1[9C91%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * returns: a string, never NULL[m[62;100H[K[62;100H144,1[9C91%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * purpose: constructor for strings[m[62;100H[K[62;100H143,1[9C90%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/*[m[62;100H[K[62;100H142,1[9C89%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H141,0-1[7C89%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H}[62;100H[K[62;100H140,1[9C88%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[33mreturn[m args;[62;100H[K[62;100H139,1[9C87%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3Hargs[argnum] = [33mNULL[m;[62;100H[K[62;100H138,1[9C87%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;5H}[62;100H[K[62;100H137,1[9C86%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;7Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H136,1[9C85%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m len++;[62;100H[K[62;100H135,1-8[7C85%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )
       [62;100H[K[62;100H134,1[9C84%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;7Hlen   = [33m1[m;[62;100H[K[62;100H133,1[9C84%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;7Hstart = cp;[62;100H[K[62;100H132,1[9C83%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;7H[36m/* mark start, then find end of word */[m[62;100H[K[62;100H131,1[9C82%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H130,0-1[7C82%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;7H}[62;100H[K[62;100H129,1[9C81%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H128,1-8[7C80%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m bufspace += [33mBUFSIZ[m;
       [62;100H[K[62;100H127,1-8[7C80%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m args = erealloc(args,bufspace+[33mBUFSIZ[m);
       [62;100H[K[62;100H126,1-8[7C79%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;7H[33mif[m ( argnum+[33m1[m >= spots ){
       [62;100H[K[62;100H125,1[9C78%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;7H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H124,1[9C78%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H123,0-1[7C77%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m [33mbreak[m;[62;100H[K[62;100H122,1-8[7C77%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m
       [62;100H[K[62;100H121,1[9C76%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m cp++;[62;100H[K[62;100H120,1-8[7C75%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m
       [62;100H[K[62;100H119,1[9C75%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;5H{[62;100H[K[62;100H118,1[9C74%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H117,1[9C73%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H116,0-1[7C73%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H115,1[9C72%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H114,1[9C71%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[62;100H[K[62;100H113,1[9C71%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H112,0-1[7C70%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;5H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H111,1[9C70%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[62;100H[K[62;100H110,1[9C69%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H109,0-1[7C68%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[32mint[m   len;[62;100H[K[62;100H108,1[9C68%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[32mchar[m  *start;[62;100H[K[62;100H107,1[9C67%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H106,1[9C66%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H105,1[9C66%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H104,1[9C65%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H103,1[9C64%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[32mchar[m  **args ;[62;100H[K[62;100H102,1[9C64%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;3H[32mchar[m  *newstr();[62;100H[K[62;100H101,1[9C63%[1;1H[?25h[?25l[41;61r[41;1H[L[1;62r[1;1H[46m{[m[1;3H[K[2;10Hnewstr();
  [32mchar[m  **args ;[3;17H[K[4;9Hspots = [33m0[m;   [22C[36mspot[m[5;9Hbufspace = [33m0[m;[22C[36mbytes in table[m
  [32mint[m   argnum = [33m0[m[25C[36mslots used   [m[7;10Hcp = line;[21C[36m/* pos in string        */[m
  [32mchar[m  *start;
  [32mint[m   len;[10;3H[K[11;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m
    [33mreturn[m [33mNULL[m;[13;3H[K[14;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m
  bufspace[9C;[15;21H[K[16;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;3H[K[18;3H[33mwhile[m( *cp != [35m'\0'[m )
    {[19;7H[K[20;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[21;7H  cp++;[21;14H[K[22;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[23;9H[33mbreak[m;[24;7H[K[25;7H[36m/* make sure the array has room (+1 for NULL) */[m[26;7H[33mif[m ( argnum+[33m1[m >= spots ){[26;32H[K[27;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;9Hbufspace += [33mBUFSIZ[m;[28;28H[K[29;7H  spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;7H}[31;7H[K[32;7H[36m/* mark start, then find end of word */[m[33;7Hstart = cp;[34;7Hlen   = [33m1[m;[34;17H[K[35;7H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;7H  len++;[36;15H[K[37;5H  args[argnum++] = newstr(start, len);
    }[38;6H[K[39;3Hargs[argnum] = [33mNULL[m;
  [33mreturn[m args;
[46m}[m[62;100H[K[62;100H100,1[9C63%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m */[m
{[42;1H}[62;100H[K[62;100H99,1[10C62%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H98,1[10C61%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H97,1[10C61%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *          or NULL if line if no tokens on the line[m[62;100H[K[62;100H96,1[10C60%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H[K[62;100H95,1[10C59%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * purpose: split a line into array of white-space separated tokens[m[62;100H[K[62;100H94,1[10C59%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/*[m[62;100H[K[62;100H93,1[10C58%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[32mchar[m ** splitline([32mchar[m *line)[62;100H[K[62;100H92,1[10C57%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H91,0-1[8C57%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[62;100H[K[62;100H90,1[10C56%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H89,0-1[8C56%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[62;100H[K[62;100H88,1[10C55%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m **/[m[62;100H[K[62;100H87,1[10C54%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m **     splitline ( parse a line into an array of strings )[m[62;100H[K[62;100H86,1[10C54%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/**[m[62;100H[K[62;100H85,1[10C53%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H84,0-1[8C52%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H}[62;100H[K[62;100H83,1[10C52%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[9C[33mreturn[m buf;[62;100H[K[62;100H82,1-8[8C51%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[9Cbuf[pos] = [35m'\0'[m;
       [62;100H[K[62;100H81,1-8[8C50%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[9C}[39C[36m/* say so               */[m
       [62;100H[K[62;100H80,1-8[8C50%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[17C[33mreturn[m [33mNULL[m;
       [62;100H[K[62;100H79,1-8[8C49%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[9C[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m
       [62;100H[K[62;100H78,1-8[8C49%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m
       [62;100H[K[62;100H77,1-8[8C48%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[9Cbuf[pos++] = c;
       [62;100H[K[62;100H76,1-8[8C47%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[9C[36m/* no, add to buffer */[m
       [62;100H[K[62;100H75,1-8[8C47%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m
       [62;100H[K[62;100H74,1-8[8C46%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[17C[33mbreak[m;
       [62;100H[K[62;100H73,1-8[8C45%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[9C[33mif[m ( c == [35m'\n'[m )
       [62;100H[K[62;100H72,1-8[8C45%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[9C[36m/* end of command? */[m
       [62;100H[K[62;100H71,1-8[8C44%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[2;1H       [62;100H[K[62;100H70,0-1[8C43%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[9C}[62;100H[K[62;100H69,1-8[8C43%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m
       [62;100H[K[62;100H68,1-8[8C42%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[17Cbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m
       [62;100H[K[62;100H67,1-8[8C42%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m
       [62;100H[K[62;100H66,1-8[8C41%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[25Cbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);
       [62;100H[K[62;100H65,1-8[8C40%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;26H[33melse[m[27C[36m/* or expand    */[m
       [62;100H[K[62;100H64,1[10C40%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[25Cbuf = emalloc([33mBUFSIZ[m);[62;100H[K[62;100H63,1-8[8C39%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[17C[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m
       [62;100H[K[62;100H62,1-8[8C38%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m[10C[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m
       [62;100H[K[62;100H61,1-8[8C38%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m  [33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m
       [62;100H[K[62;100H60,1-8[8C37%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m  printf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m
       [62;100H[K[62;100H59,1-8[8C36%[1;8H[?25h[?25l[7m  printf([m[7m[33m"[m[7m[35m%s[m[7m[33m"[m[7m, prompt);                          [m[7m[36m/* prompt user [m[7m [m[7m[36m*/[m[7m 
       [m[62;100H60[2;8H[?25h[?25l[7m  [m[7m[33mwhile[m[7m( ( c = getc(fp)) != [m[7m[33mEOF[m[7m ) { [m[7m[36m/* need space? */[m[7m 
       [m[62;101H1[3;8H[?25h[?25l[7m          [m[7m[33mif[m[7m( pos+[m[7m[33m1[m[7m >= bufspace ){               [m[7m[36m/* 1 for \0 [m[7m    [m[7m[36m*/[m[7m 
       [m[62;101H2[4;8H[?25h[?25l[7m                 [m[7m[33mif[m[7m ( bufspace == [m[7m[33m0[m[7m )            [m[7m[36m/* y: 1st time [m[7m [m[7m[36m*/[m[7m 
       [m[62;101H3[5;8H[?25h[?25l[7m                         buf = emalloc([m[7m[33mBUFSIZ[m[7m); [m[62;101H4,1  [6;1H[?25h[?25l[7m                         [m[7m[33melse[m[7m                           [m[7m[36m/* or expand [m[7m   [m[7m[36m*/[m[7m 
       [m[62;101H5,1-8[7;8H[?25h[?25l[7m                         buf = erealloc(buf,bufspace+[m[7m[33mBUFSIZ[m[7m); 
       [m[62;101H6[8;8H[?25h[?25l[7m                  
       [m[62;101H7[9;8H[?25h[?25l[7m                 bufspace += [m[7m[33mBUFSIZ[m[7m;     [m[7m[36m/* update size [m[7m [m[7m[36m*/[m[7m 
       [m[62;101H8[10;8H[?25h[?25l[7m                          
       [m[62;101H9[11;8H[?25h[?25l[7m         } [m[62;100H70,0-1[12;1H[?25h[?25l[7m 
       [m[62;101H1,1-8[13;8H[?25h[?25l[7m         [m[7m[36m/* end of command? */[m[7m 
       [m[62;101H2[14;8H[?25h[?25l[7m         [m[7m[33mif[m[7m ( c == [m[7m[35m'\n'[m[7m ) 
       [m[62;101H3[15;8H[?25h[?25l[14;8H         [33mif[m ( c == [35m'\n'[m )[14;33H[K[15;1H       [62;101H2[14;8H[?25h[?25l[13;8H         [36m/* end of command? */[m[13;38H[K[14;1H       [62;101H1[13;8H[?25h[?25l[12;1H[K[13;1H       [62;101H0,0-1[12;1H[?25h[?25l[11;8H         }[11;18H[K[62;100H69,1-8[11;8H[?25h[?25l[10;8H                         [10;33H[K[11;1H       [62;101H8[10;8H[?25h[?25l[9;8H                 bufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[9;67H[K[10;1H       [62;101H7[9;8H[?25h[?25l[8;8H                 [8;25H[K[9;1H       [62;101H6[8;8H[?25h[?25l[7;8H                         buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[7;69H[K[8;1H       [62;101H5[7;8H[?25h[?25l[6;1H                         [33melse[m                           [36m/* or expand    */[m[6;75H[K[7;1H       [62;101H4,1  [6;1H[?25h[?25l[5;8H                         buf = emalloc([33mBUFSIZ[m);[5;55H[K[62;101H3,1-8[5;8H[?25h[?25l[4;8H                 [33mif[m ( bufspace == [33m0[m )            [36m/* y: 1st time  */[m[4;75H[K[5;1H       [62;101H2[4;8H[?25h[?25l[3;8H          [33mif[m( pos+[33m1[m >= bufspace ){               [36m/* 1 for \0     */[m[3;75H[K[4;1H       [62;101H1[3;8H[?25h[?25l[2;8H  [33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[2;61H[K[3;1H       [62;101H0[2;8H[?25h[?25l[1;8H  printf([33m"[m[35m%s[m[33m"[m, prompt);                          [36m/* prompt user  */[m[1;75H[K[2;1H       [62;100H59[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[2;1H       [62;100H[K[62;100H58,0-1[8C36%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H57,0-1[8C35%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m[36m [m[7m      [m[36m char** commands = NULL; */[m[62;100H[K[62;100H56,1-8[8C35%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m [36m/*int command_count = 0;
       [m[62;100H[K[62;100H55,1-8[8C34%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m [36m//new variable to store number of commands and array of pointer (double pointer char) to store the commands[m
       [62;100H[K[62;100H54,1-8[8C33%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m
       [62;100H[K[62;100H53,1-8[8C33%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;10H[32mint[m    c;[30C[36m/* input char           */[m
       [62;100H[K[62;100H52,1[10C32%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m  [32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[62;100H[K[62;100H51,1-8[8C31%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m  [32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m
       [62;100H[K[62;100H50,1-8[8C31%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[7m       [m  [32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m
       [62;100H[K[62;100H49,1-8[8C30%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H{
       [62;100H[K[62;100H48,1[10C29%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m */[m[62;100H[K[62;100H47,1[10C29%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[62;100H[K[62;100H46,1[10C28%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *          calls fatal from emalloc()[m[62;100H[K[62;100H45,1[10C28%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[62;100H[K[62;100H44,1[10C27%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * returns: dynamically allocated string holding command line[m[62;100H[K[62;100H43,1[10C26%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * purpose: read next command line from fp[m[62;100H[K[62;100H42,1[10C26%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/*[m[62;100H[K[62;100H41,1[10C25%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[62;100H[K[62;100H40,1[10C24%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[2;1H[7m[32mc[m[62;100H[K[62;100H39,0-1[8C24%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[2;1H[7m [m[62;100H[K[62;100H38,0-1[8C23%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[2;1H[7m [m[62;100H[K[62;100H37,0-1[8C22%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[2;1H[7m [m[62;100H[K[62;100H36,0-1[8C22%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m [m[7m[36m*/[m[7m 
 [m[62;100H[K[62;100H35,1[10C21%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m [m[7m[36m*    char **splitline(char *str);           - parse a string[m[7m [m
[7m[36m [m[62;100H[K[62;100H34,1[10C21%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m [m[7m[36m*    char *next_cmd(char *prompt, FILE *fp) - get next command[m[7m [m
[7m[36m [m[62;100H[K[62;100H33,1[10C20%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m [m[7m[36m*    [m[7m [m
[7m[36m [m[62;100H[K[62;100H32,1[10C19%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/[m[7m[36m* splitline.c - commmand reading and parsing functions for smsh[m[7m [m
[7m[36m [m[62;100H[K[62;100H31,1[10C19%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[2;1H[7m[36m/[m[62;100H[K[62;100H30,0-1[8C18%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[2;1H[7m [m[62;100H[K[62;100H29,0-1[8C17%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H}[7m 
 [m[62;100H[K[62;100H28,1[10C17%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;2H[7m       [m[7m[33mreturn[m[7m count; 
}[m[62;100H[K[62;100H27,1[10C16%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;2H[7m       } 
 [m[62;100H[K[62;100H26,1[10C15%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;2H[7m               cmd++; 
 [m[62;100H[K[62;100H25,1[10C15%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;2H[7m               count++; 
 [m[62;100H[K[62;100H24,1[10C14%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;2H[7m       [m[7m[33mwhile[m[7m(*cmd != [m[7m[33mNULL[m[7m){ 
 [m[62;100H[K[62;100H23,1[10C14%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;2H[7m       count = [m[7m[33m0[m[7m; 
 [m[62;100H[K[62;100H22,1[10C13%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[2;1H[7m [m[62;100H[K[62;100H21,0-1[8C12%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;2H[7m       [m[7m[32mchar[m[7m** cmd = commands; 
 [m[62;100H[K[62;100H20,1[10C12%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;2H[7m       [m[7m[32mint[m[7m count; 
 [m[62;100H[K[62;100H19,1[10C11%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[32mi[m[7m[32mnt[m[7m count_commands([m[7m[32mchar[m[7m** commands){ 
 [m[62;100H[K[62;100H18,1[10C10%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[2;1H[7m[32mi[m[62;100H[K[62;100H17,0-1[8C10%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#[m[7m[35mdefine DFL_PROMPT [m[7m     [m[7m[33m"> "[m[7m 
 [m[62;100H[K[62;100H16,1[11C9%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[2;1H[7m[35m#[m[62;100H[K[62;100H15,0-1[9C8%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#[m[7m[35minclude [m[7m[33m"execute.c"[m[7m 
 [m[62;100H[K[62;100H14,1[11C8%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#[m[7m[35minclude [m[7m[33m"smsh.h"[m[7m [m
[7m[35m#[m[62;100H[K[62;100H13,1[11C7%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#[m[7m[35minclude [m[7m[33m<string.h>[m[7m [m
[7m[35m#[m[62;100H[K[62;100H12,1[11C7%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#[m[7m[35minclude [m[7m[33m<signal.h>[m[7m [m
[7m[35m#[m[62;100H[K[62;100H11,1[11C6%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#[m[7m[35minclude [m[7m[33m<unistd.h>[m[7m [m
[7m[35m#[m[62;100H[K[62;100H10,1[11C5%[1;1H[?25h[?25l[1C[35minclude [m[33m<unistd.h>[m[1;20H[K[2;1H[35m#include [m[33m<signal.h>[m[2;20H[K[3;1H[35m#include [m[33m<string.h>[m[3;20H[K[4;1H[35m#include [m[33m"smsh.h"[m[4;18H[K[5;1H[35m#include [m[33m"execute.c"[m[5;21H[K[6;1H[K[7;1H[35m#define DFL_PROMPT      [m[33m"> "[m[7;29H[K[8;1H[K[9;1H[32mint[m count_commands([32mchar[m** commands){[9;37H[K[10;1H        [32mint[m count;[10;19H[K[11;1H        [32mchar[m** cmd = commands;[11;31H[K[12;1H[K[13;1H        count = [33m0[m;[13;19H[K[14;1H        [33mwhile[m(*cmd != [33mNULL[m){[14;29H[K[15;1H                count++;[15;25H[K[16;1H                cmd++;[16;23H[K[17;1H        }[17;10H[K[18;1H        [33mreturn[m count;[18;22H[K[19;1H}[19;2H[K[20;1H[K[21;1H[K[22;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[22;65H[K[23;1H[36m *    [m[23;7H[K[24;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[24;64H[K[25;1H[36m *    char **splitline(char *str);           - parse a string[m[25;62H[K[26;1H[36m */[m[26;4H[K[27;1H[K[28;1H[K[29;1H[K[30;1H[K[31;1H[32mc[m[62;1H[K[62;100H10,1[11C5%[1;1H[?25h[?25l[62;101H1[2;1H[?25h[?25l[62;101H2[3;1H[?25h[?25l[62;101H3[4;1H[?25h[?25l[62;101H4[5;1H[?25h[?25l[62;101H5,0-1[6;1H[?25h[?25l[62;101H6,1  [7;1H[?25h[?25l[62;101H7,0-1[8;1H[?25h[?25l[62;101H8,1  [9;1H[?25h[?25l[62;101H9,1-8[10;8H[?25h[?25l[62;100H20[11;8H[?25h[?25l[62;101H1,0-1[12;1H[?25h[?25l[62;101H2,1-8[13;8H[?25h[?25l[62;101H3[14;8H[?25h[?25l[62;101H4[15;8H[?25h[?25l[62;101H5[16;8H[?25h[?25l[62;101H6[17;8H[?25h[?25l[62;101H7[18;8H[?25h[?25l[9;36H[46m{[19;1H}[m[62;101H8,1  [19;1H[?25h[?25l[9;36H{[19;1H}[62;101H9,0-1[20;1H[?25h[?25l[62;100H30[21;1H[?25h[?25l[62;101H1,1  [22;1H[?25h[?25l[62;101H2[23;1H[?25h[?25l[62;101H3[24;1H[?25h[?25l[62;101H4[25;1H[?25h[?25l[62;101H5[26;1H[?25h[?25l[62;101H6,0-1[27;1H[?25h[?25l[62;101H7[28;1H[?25h[?25l[62;101H8[29;1H[?25h[?25l[62;101H9[30;1H[?25h[?25l[62;100H40,1  [31;1H[?25h[?25l[62;101H1[32;1H[?25h[?25l[62;101H2[33;1H[?25h[?25l[62;101H3[34;1H[?25h[?25l[62;101H4[35;1H[?25h[?25l[62;101H5[36;1H[?25h[?25l[62;101H6[37;1H[?25h[?25l[62;101H7[38;1H[?25h[?25l[62;101H8[39;1H[?25h[?25l[62;101H9,1-8[40;8H[?25h[?25l[62;100H50[41;8H[?25h[?25l[62;101H1[42;8H[?25h[?25l[62;101H2,1  [43;1H[?25h[?25l[62;101H3,1-8[44;8H[?25h[?25l[62;101H4[45;8H[?25h[?25l[62;101H5[46;8H[?25h[?25l[62;101H6[47;8H[?25h[?25l[62;101H7,0-1[48;1H[?25h[?25l[62;101H8[49;1H[?25h[?25l[62;101H9,1-8[50;8H[?25h[?25l[62;100H60[51;8H[?25h[?25l[62;101H1[52;8H[?25h[?25l[62;103H2-16[52;16H[?25h[?25l[62;103H1-8 [52;8H[?25h[?25l[62;101H0,53-60[51;60H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[62;3H[K[62;3H[?25h\[?25l[?25hq[?25l[?25h\[?25l[?25h\[?25l[?25h\[?25l[?25h\[?25l[?25h\[?25l[?25h[?25l[62;9H[K[62;9H[?25h[?25l[62;8H[K[62;8H[?25h[?25l[62;7H[K[62;7H[?25h[?25l[62;6H[K[62;6H[?25h[?25l[62;5H[K[62;5H[?25h[?25l[62;4H[K[62;4H[?25h[?25l[62;3H[K[62;3H[?25h[?25l[62;2H[K[62;2H[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh1.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh1.c" 49L, 904C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m main()
{
  [32mchar[m  *cmdline, *prompt, **arglist;
  [32mint[m   result;
  [32mvoid[m  setup();

  prompt = DFL_PROMPT;
  setup();

  [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){
    [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[26;9Hresult = execute(arglist);[27;9Hfreelist(arglist);
    }
    free(cmdline);
  }
  [33mreturn[m [33m0[m;
}

[32mvoid[m setup()
[36m/*
 * purpose: initialize shell
 * returns: nothing. calls fatal() if trouble
 */[m
{
  signal([33mSIGINT[m,  [33mSIG_IGN[m);
  signal([33mSIGQUIT[m, [33mSIG_IGN[m);
}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)
{
  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);
  exit(n);
}

[34m~                                                                                                                    [51;1H~                                                                                                                    [52;1H~                                                                                                                    [53;1H~                                                                                                                    [54;1H~                                                                                                                    [55;1H~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4,0-1[14;1H[?25h[?25l[62;101H5,1  [15;1H[?25h[?25l
[46m{[32;1H}[m[62;101H6[16;1H[?25h[?25l{[32;1H}[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hQ[?25l[?25h[?25l[1m[37m[41mE492: Not an editor command: Q[m[69C18,1[10CAll[18;1H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hQ[?25l[?25h[?25l[1m[37m[41mE492: Not an editor command: Q[m[69C18,1[10CAll[18;1H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ sm[K[Kvism2[K[K s,2[K[K[K[K[K[K[Kvi sm2in.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"sm2in.c" 218L, 4764C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/** ex 9.4 - modify shsh1.c to accept multiple arguments
  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m<string.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"execute.c"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m count_commands([32mchar[m** commands){[19;9H[32mint[m count;[20;9H[32mchar[m** cmd = commands;[22;9Hcount = [33m0[m;[23;9H[33mwhile[m(*cmd != [33mNULL[m){[24;17Hcount++;[25;17Hcmd++;[26;9H}[27;9H[33mreturn[m count;
}


[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string
 */[m[40;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[49;10H[32mchar[m   *buf = [33mNULL[m;[28C[36m/* the buffer           */[m[50;10H[32mint[m    bufspace = [33m0[m;[19C[36m/* total size           */[m[51;10H[32mint[m    pos = [33m0[m;[24C[36m/* current position     */[m[52;10H[32mint[m    c;[30C[36m/* input char           */[54;9H//new variable to store number of commands and array of pointer (double pointer char) to store the commands[55;9H/*int command_count = 0;
        char** commands = NULL; */[m[59;10Hprintf([33m"[m[35m%s[m[33m"[m, prompt);[26C[36m/* prompt user  */[m[60;10H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) { [36m/* need space? */[m[61;18H[33mif[m( pos+[33m1[m >= bufspace ){[15C[36m/* 1 for \0     */[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6[6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5,0-1[15;1H[?25h[?25l[62;101H6,1  [16;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l[62;101H9,1-8[19;8H[?25h[?25l[62;100H20[20;8H[?25h[?25l[62;101H1,0-1[21;1H[?25h[?25l[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[18;36H[46m{[28;1H}[m[62;101H8,1  [28;1H[?25h[?25l[18;36H{[28;1H}[62;101H9,0-1[29;1H[?25h[?25l[62;100H30[30;1H[?25h[?25l[62;101H1,1  [31;1H[?25h[?25l[62;101H2[32;1H[?25h[?25l[62;101H3[33;1H[?25h[?25l[62;101H4[34;1H[?25h[?25l[62;101H5[35;1H[?25h[?25l[62;101H6,0-1[36;1H[?25h[?25l[62;101H7[37;1H[?25h[?25l[62;101H8[38;1H[?25h[?25l[62;101H9[39;1H[?25h[?25l[62;100H40,1  [40;1H[?25h[?25l[62;101H1[41;1H[?25h[?25l[62;101H2[42;1H[?25h[?25l[62;101H3[43;1H[?25h[?25l[62;101H4[44;1H[?25h[?25l[62;101H5[45;1H[?25h[?25l[62;101H6[46;1H[?25h[?25l[62;101H7[47;1H[?25h[?25l[62;101H8[48;1H[?25h[?25l[62;101H9,1-8[49;8H[?25h[?25l[62;100H50[50;8H[?25h[?25l[62;101H1[51;8H[?25h[?25l[62;101H2,1  [52;1H[?25h[?25l[62;101H3,1-8[53;8H[?25h[?25l[62;101H4[54;8H[?25h[?25l[62;101H5[55;8H[?25h[?25l[62;101H6[56;8H[?25h[?25l[62;101H7,0-1[57;1H[?25h[?25l[62;101H8[58;1H[?25h[?25l[62;101H9,1-8[59;8H[?25h[?25l[62;100H60[60;8H[?25h[?25l[62;101H1[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[62;1H[K[62;100H62,1-8[9C0%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;33Hbuf = emalloc([33mBUFSIZ[m);[62;100H[K[62;100H63,1-8[9C1%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;26H[33melse[m[27C[36m/* or expand    */[m[62;100H[K[62;100H64,1[11C1%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H65,1-8[9C2%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H66,1-8[9C3%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hbufspace += [33mBUFSIZ[m;     [36m/* update size  */[m[62;100H[K[62;100H67,1-8[9C3%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H68,1-8[9C4%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H69,1-8[9C5%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H70,0-1[9C5%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* end of command? */[m[62;100H[K[62;100H71,1-8[9C6%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( c == [35m'\n'[m )[62;100H[K[62;100H72,1-8[9C7%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mbreak[m;[62;100H[K[62;100H73,1-8[9C7%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H74,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* no, add to buffer */[m[62;100H[K[62;100H75,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hbuf[pos++] = c;[62;100H[K[62;100H76,1-8[9C9%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H77,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( c == [33mEOF[m && pos == [33m0[m ){[12C[36m/* EOF and no input     */[m[62;100H[K[62;100H78,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H79,1-8[8C11%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[39C[36m/* say so               */[m[62;100H[K[62;100H80,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hbuf[pos] = [35m'\0'[m;[62;100H[K[62;100H81,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m buf;[62;100H[K[62;100H82,1-8[8C13%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[38;42H[46m{[61;1H}[m[62;100H[K[62;100H83,1[10C14%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[37;42H{[60;1H}[62;100H[K[62;100H84,0-1[8C14%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/**[m[62;100H[K[62;100H85,1[10C15%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m **     splitline ( parse a line into an array of strings )[m[62;100H[K[62;100H86,1[10C15%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m **/[m[62;100H[K[62;100H87,1[10C16%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[62;100H[K[62;100H88,1[10C17%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H89,0-1[8C17%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m//need to add a a function to split the line into arguments with a seperator (maybe ':'?)[m[62;100H[K[62;100H90,1[10C18%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H91,0-1[8C19%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mchar[m ** splitline([32mchar[m *line)[62;100H[K[62;100H92,1[10C19%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H93,1[10C20%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: split a line into array of white-space separated tokens[m[62;100H[K[62;100H94,1[10C21%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H[K[62;100H95,1[10C21%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;100H[K[62;100H96,1[10C22%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H97,1[10C22%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H98,1[10C23%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H99,1[10C24%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H100,1[9C24%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3H[32mchar[m  *newstr();[62;100H[K[62;100H101,1[9C25%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3H[32mchar[m  **args ;[62;100H[K[62;100H102,1[9C26%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3H[32mint[m   spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H103,1[9C26%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3H[32mint[m   bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H104,1[9C27%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3H[32mint[m   argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H105,1[9C28%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3H[32mchar[m  *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H106,1[9C28%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3H[32mchar[m  *start;[62;100H[K[62;100H107,1[9C29%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3H[32mint[m   len;[62;100H[K[62;100H108,1[9C29%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H109,0-1[7C30%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3H[33mif[m ( line == [33mNULL[m )[19C[36m/* handle special case  */[m[62;100H[K[62;100H110,1[9C31%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;5H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H111,1[9C31%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H112,0-1[7C32%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3Hargs     = emalloc([33mBUFSIZ[m);[11C[36m/* initialize array     */[m[62;100H[K[62;100H113,1[9C33%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H114,1[9C33%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H115,1[9C34%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H116,0-1[7C35%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;3H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H117,1[9C35%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;5H{[62;100H[K[62;100H118,1[9C36%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;7H[33mwhile[m ( is_delim(*cp) )[11C[36m/* skip leading spaces  */[m[62;100H[K[62;100H119,1[9C36%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hcp++;[62;100H[K[62;100H120,1-8[7C37%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;7H[33mif[m ( *cp == [35m'\0'[m )[16C[36m/* quit at end-o-string */[m[62;100H[K[62;100H121,1[9C38%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mbreak[m;[62;100H[K[62;100H122,1-8[7C38%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H123,0-1[7C39%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;7H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H124,1[9C40%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;7H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H125,1[9C40%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H126,1-8[7C41%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace += [33mBUFSIZ[m;[62;100H[K[62;100H127,1-8[7C42%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H128,1-8[7C42%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;7H}[62;100H[K[62;100H129,1[9C43%[61;1H[?25h[?25l[62;102H8,1-8[60;8H[?25h[?25l[62;102H7[59;8H[?25h[?25l[62;102H6[58;8H[?25h[?25l[62;102H5,1  [57;1H[?25h[?25l[62;102H4[56;1H[?25h[?25l[62;102H3,0-1[55;1H[?25h[?25l[62;102H2,1-8[54;8H[?25h[?25l[62;102H1,1  [53;1H[?25h[?25l[62;102H0,1-8[52;8H[?25h[?25l[62;101H19,1  [51;1H[?25h[?25l[62;102H8[50;1H[?25h[?25l[62;102H7[49;1H[?25h[?25l[62;102H6,0-1[48;1H[?25h[?25l[62;102H5,1  [47;1H[?25h[?25l[62;102H4[46;1H[?25h[?25l[62;102H3[45;1H[?25h[?25l[62;102H2,0-1[44;1H[?25h[?25l[62;102H1,1  [43;1H[?25h[?25l[62;102H0[42;1H[?25h[?25l[62;101H09,0-1[41;1H[?25h[?25l[62;102H8,1  [40;1H[?25h[?25l[62;102H7[39;1H[?25h[?25l[62;102H6[38;1H[?25h[?25l[62;102H5[37;1H[?25h[?25l[62;102H4[36;1H[?25h[?25l[62;102H3[35;1H[?25h[?25l[62;102H2[34;1H[?25h[?25l[62;102H1[33;1H[?25h[?25l[62;102H0[32;1H[?25h[?25l[62;100H99,1 [31;1H[?25h[?25l[62;101H8[30;1H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ mv sm2in.c [K[K[K[K[K[K[K[K[K[K[Kcp smsh1.c smsh.c
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 49L, 904C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m main()
{
  [32mchar[m  *cmdline, *prompt, **arglist;
  [32mint[m   result;
  [32mvoid[m  setup();

  prompt = DFL_PROMPT;
  setup();

  [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){
    [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[26;9Hresult = execute(arglist);[27;9Hfreelist(arglist);
    }
    free(cmdline);
  }
  [33mreturn[m [33m0[m;
}

[32mvoid[m setup()
[36m/*
 * purpose: initialize shell
 * returns: nothing. calls fatal() if trouble
 */[m
{
  signal([33mSIGINT[m,  [33mSIG_IGN[m);
  signal([33mSIGQUIT[m, [33mSIG_IGN[m);
}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)
{
  fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);
  exit(n);
}

[34m~                                                                                                                    [51;1H~                                                                                                                    [52;1H~                                                                                                                    [53;1H~                                                                                                                    [54;1H~                                                                                                                    [55;1H~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H12,1[10CAll[12;1H[?25h[?25l[13;61r[13;1H[L[1;62r[62;100H[K[62;100H13,1[10CAll[13;1H[?25h[?25l[14;61r[14;1H[L[1;62r[62;100H[K[62;100H14,1[10CAll[14;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l#[62;103H2[12;2H[?25h[?25li[62;103H3[12;3H[?25h[?25ln[62;103H4[12;4H[?25h[?25lc[62;103H5[12;5H[?25h[?25ll[62;103H6[12;6H[?25h[?25lu[62;103H7[12;7H[?25h[?25ld[62;103H8[12;8H[?25h[?25le[62;103H9[12;9H[?25h[?25l[62;103H10[12;10H[?25h[?25l[35m#include <[m[62;104H1[12;11H[?25h[?25ls[62;104H2[12;12H[?25h[?25lp[62;104H3[12;13H[?25h[?25ll[62;104H4[12;14H[?25h[?25li[62;104H5[12;15H[?25h[?25lt[62;104H6[12;16H[?25h[?25l.[62;104H7[12;17H[?25h[?25lc[62;104H8[12;18H[?25h[?25l[12;10H[33m<split.c>[m[62;104H9[12;19H[?25h[?25l[13;61r[13;1H[L[1;62r[62;100H[K[62;100H13,1[10CAll[13;1H[?25h[?25l[12;61r[61;1H
[1;62r[12;1H[35m#include [m[33m<split.c>[m[61;1H[34m~                                                                                                                    [m[62;100H[K[62;100H12,19[9CAll[12;19H[?25h[?25l[12;10H[35m<[msplit.c[12;18H[K[62;104H8[12;18H[?25h[?25l[33m"[m[62;104H9[12;19H[?25h[?25l[62;104H8[12;18H[?25h[?25l[62;104H7[12;17H[?25h[?25l[62;104H6[12;16H[?25h[?25l[62;104H5[12;15H[?25h[?25l[62;104H4[12;14H[?25h[?25l[62;104H3[12;13H[?25h[?25l[62;104H2[12;12H[?25h[?25l[62;104H1[12;11H[?25h[?25l[62;104H0[12;10H[?25h[?25l#include split.c[33m"[m[12;18H[K[12;10H[?25h[?25l[35m#include [m[33m"split.c"[m[62;104H1[12;11H[?25h[?25l[62;104H2[12;12H[?25h[?25l[62;104H3[12;13H[?25h[?25l[62;104H4[12;14H[?25h[?25l[62;104H5[12;15H[?25h[?25l[62;104H6[12;16H[?25h[?25l[62;104H7[12;17H[?25h[?25l[62;104H8[12;18H[?25h[?25l[62;104H9[12;19H[?25h[?25l[13;61r[13;1H[L[1;62r[62;100H[K[62;100H13,1[10CAll[13;1H[?25h[?25l#[62;103H2[13;2H[?25h[?25li[62;103H3[13;3H[?25h[?25ln[62;103H4[13;4H[?25h[?25lc[62;103H5[13;5H[?25h[?25ll[62;103H6[13;6H[?25h[?25lu[62;103H7[13;7H[?25h[?25ld[62;103H8[13;8H[?25h[?25le[62;103H9[13;9H[?25h[?25l[62;103H10[13;10H[?25h[?25le[62;104H1[13;11H[?25h[?25lx[62;104H2[13;12H[?25h[?25le[62;104H3[13;13H[?25h[?25lc[62;104H4[13;14H[?25h[?25l.[62;104H5[13;15H[?25h[?25lc[62;104H6[13;16H[?25h[?25l[33m"[m[62;104H7[13;17H[?25h[?25l[62;104H6[13;16H[?25h[?25l[62;104H5[13;15H[?25h[?25l[62;104H4[13;14H[?25h[?25l[62;104H3[13;13H[?25h[?25l[62;104H2[13;12H[?25h[?25l[62;104H1[13;11H[?25h[?25l[62;104H0[13;10H[?25h[?25l[62;103H9 [13;9H[?25h[?25l[35m#include[m[33m" exec.c"[m[62;103H10[13;10H[?25h[?25l[62;103H9 [13;9H[?25h[?25l[35m [m[33m" exec.c"[m[62;103H10[13;10H[?25h[?25l[62;104H1[13;11H[?25h[?25l[33mexec.c"[m[13;18H[K[13;11H[?25h[?25l[62;104H2[13;12H[?25h[?25l[62;104H3[13;13H[?25h[?25l[62;104H4[13;14H[?25h[?25l[62;104H5[13;15H[?25h[?25l[62;104H6[13;16H[?25h[?25l[62;104H7[13;17H[?25h[?25l[62;104H8[13;18H[?25h[?25l[62;101H4,1 [14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6,18[16;18H[?25h[?25l[62;101H7,1 [17;1H[?25h[?25l[18;9H[46m()[m[62;101H8,11[18;11H[?25h[?25l()
[46m{[35;1H}[m[62;101H9,2 [19;2H[?25h[?25l{[35;1H}[62;100H20,17-18[20;18H[?25h[?25l[62;101H1,14-16[21;16H[?25h[?25l[62;101H0,17-18[20;18H[?25h[?25l[62;104H6-17[20;17H[?25h[?25l[62;104H5-16[20;16H[?25h[?25l[62;104H4-15[20;15H[?25h[?25l[62;104H3-14[20;14H[?25h[?25l[62;104H2-13[20;13H[?25h[?25l[62;104H1-12[20;12H[?25h[?25l[62;104H0-11[20;11H[?25h[?25l[62;103H9-10 [20;10H[?25h[?25l[62;103H8-9 [20;9H[?25h[?25l[62;103H7  [20;7H[?25h[?25l[62;103H6[20;6H[?25h[?25l[62;103H5[20;5H[?25h[?25l[62;103H4[20;4H[?25h[?25l[62;103H3[20;3H[?25h[?25l[62;103H2[20;2H[?25h[?25l[62;103H1[20;1H[?25h[?25l [32mchar[m [?25h[?25l[62;101H1[21;1H[?25h[?25l [32mint[m [?25h[?25l[62;101H2[22;1H[?25h[?25l [32mvoid[m [?25h[?25l[62;101H1[21;1H[?25h[?25l[62;101H0[20;1H[?25h[?25l[32mchar[m [?25h[?25l[62;101H1[21;1H[?25h[?25l[32mint[m [?25h[?25l[62;101H2[22;1H[?25h[?25l[32mvoid[m [?25h[?25l[62;101H3[23;1H[?25h[?25l[62;101H4[24;1H[?25h[?25l prompt = DFL_PROMPT;[24;22H[K[24;1H[?25h[?25lprompt = DFL_PROMPT;[24;21H[K[24;1H[?25h[?25l[62;101H5[25;1H[?25h[?25l[62;101H6[26;1H[?25h[?25l[62;101H5[25;1H[?25h[?25l setup();[25;10H[K[25;1H[?25h[?25lsetup();[25;9H[K[25;1H[?25h[?25l[62;101H6[26;1H[?25h[?25l[62;101H7[27;1H[?25h[?25l [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNUL[m[1C ){[27;56H[K[27;1H[?25h[?25l[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNUL[m[1C ){[27;55H[K[27;1H[?25h[?25l[62;101H8[28;1H[?25h[?25l   [33mif[m ( (arglist = splitline(cmdline)) != [33mNUL[m[1C  ){[28;51H[K[28;1H[?25h[?25l  [33mif[m ( (arglist = splitline(cmdline)) != [33mNUL[m[1C  ){[28;50H[K[28;1H[?25h[?25l [33mif[m ( (arglist = splitline(cmdline)) != [33mNUL[m[1C  ){[28;49H[K[28;1H[?25h[?25l[33mif[m ( (arglist = splitline(cmdline)) != [33mNUL[m[1C  ){[28;48H[K[28;1H[?25h[?25l[62;101H9[29;1H[?25h[?25l[7Cresult = execute(arglist);[29;34H[K[29;1H[?25h[?25l      result = execute(arglist);[29;33H[K[29;1H[?25h[?25l     result = execute(arglist);[29;32H[K[29;1H[?25h[?25l    result = execute(arglist);[29;31H[K[29;1H[?25h[?25l   result = execute(arglist);[29;30H[K[29;1H[?25h[?25l  result = execute(arglist);[29;29H[K[29;1H[?25h[?25l result = execute(arglist);[29;28H[K[29;1H[?25h[?25lresult = execute(arglist);[29;27H[K[29;1H[?25h[?25l[62;100H30[30;1H[?25h[?25l[7Cfreelist(arglist);[30;26H[K[30;1H[?25h[?25l      freelist(arglist);[30;25H[K[30;1H[?25h[?25l     freelist(arglist);[30;24H[K[30;1H[?25h[?25l    freelist(arglist);[30;23H[K[30;1H[?25h[?25l   freelist(arglist);[30;22H[K[30;1H[?25h[?25l  freelist(arglist);[30;21H[K[30;1H[?25h[?25l freelist(arglist);[30;20H[K[30;1H[?25h[?25lfreelist(arglist);[30;19H[K[30;1H[?25h[?25l[62;101H1[31;1H[?25h[?25l   }[31;5H[K[31;1H[?25h[?25l  }[31;4H[K[31;1H[?25h[?25l }[31;3H[K[31;1H[?25h[?25l[62;101H2[32;1H[?25h[?25l[62;101H1[31;1H[?25h[?25l}[31;2H[K[28;47H[46m{


}[?25h[?25l[m[28;47H{


}[62;101H2[32;1H[?25h[?25l   free(cmdline);[32;18H[K[32;1H[?25h[?25l  free(cmdline);[32;17H[K[32;1H[?25h[?25l free(cmdline);[32;16H[K[32;1H[?25h[?25lfree(cmdline);[32;15H[K[32;1H[?25h[?25l[62;101H3[33;1H[?25h[?25l }[33;3H[K[33;1H[?25h[?25l}[33;2H[K[27;54H[46m{[33;1H}[?25h[?25l[m[27;54H{[33;1H}[62;101H4[34;1H[?25h[?25l [33mreturn[m [33m0[m;[34;11H[K[34;1H[?25h[?25l[33mreturn[m [33m0[m;[34;10H[K[34;1H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5[35;1H[?25h[?25l[19;1H{[35;1H}[62;101H6[36;1H[?25h[?25l[62;101H7[37;1H[?25h[?25l[62;101H8[38;1H[?25h[?25l[62;101H9[39;1H[?25h[?25l[62;100H40[40;1H[?25h[?25l[62;101H1[41;1H[?25h[?25l
[46m{


}[m[62;101H2[42;1H[?25h[?25l{


}[62;101H3[43;1H[?25h[?25l signal([33mSIGINT[m,  [33mSIG_IGN[m);[43;27H[K[43;1H[?25h[?25l[62;101H4[44;1H[?25h[?25l signal([33mSIGQUIT[m, [33mSIG_IGN[m);[44;27H[K[44;1H[?25h[?25l[62;101H3[43;1H[?25h[?25lsignal([33mSIGINT[m,  [33mSIG_IGN[m);[43;26H[K[43;1H[?25h[?25l[62;101H4[44;1H[?25h[?25lsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[44;26H[K[44;1H[?25h[?25l[42;1H[46m{


}[m[62;101H5[45;1H[?25h[?25l[42;1H{


}[62;101H6[46;1H[?25h[?25l[62;101H7[47;1H[?25h[?25l
[46m{


}[m[62;101H8[48;1H[?25h[?25l{


}[62;101H9[49;1H[?25h[?25l fprintf([33mstder[m[1C,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[49;43H[K[49;1H[?25h[?25l[62;100H50[50;1H[?25h[?25l exit(n);[50;10H[K[50;1H[?25h[?25l[62;100H49[49;1H[?25h[?25lfprintf([33mstder[m[1C,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[49;42H[K[49;1H[?25h[?25l[62;100H50[50;1H[?25h[?25lexit(n);[50;9H[K[50;1H[?25h[?25l[62;100H49[49;1H[?25h[?25l[48;1H[46m{


}[m[62;101H8[48;1H[?25h[?25l{


}[62;101H7[47;1H[?25h[?25l[62;101H6[46;1H[?25h[?25l[42;1H[46m{


}[m[62;101H5[45;1H[?25h[?25l[42;1H{


}[62;101H4[44;1H[?25h[?25l[62;101H3[43;1H[?25h[?25l[42;1H[46m{


}[m[62;101H2[42;1H[?25h[?25l{


}[62;101H1[41;1H[?25h[?25l[62;101H0[40;1H[?25h[?25l[62;100H39[39;1H[?25h[?25l[62;101H8[38;1H[?25h[?25l[62;101H7[37;1H[?25h[?25l[62;101H6[36;1H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5[35;1H[?25h[?25l[19;1H{[35;1H}[62;101H4[34;1H[?25h[?25l[27;54H[46m{[33;1H}[m[62;101H3[33;1H[?25h[?25l[27;54H{[33;1H}[62;101H2[32;1H[?25h[?25l[28;47H[46m{


}[m[62;101H1[31;1H[?25h[?25l[28;47H{


}[62;101H0[30;1H[?25h[?25l[62;100H29[29;1H[?25h[?25l[62;101H8[28;1H[?25h[?25l[62;101H7[27;1H[?25h[?25l[62;101H6[26;1H[?25h[?25l[62;101H5[25;1H[?25h[?25l[62;101H4[24;1H[?25h[?25l[62;101H3[23;1H[?25h[?25l[62;101H2[22;1H[?25h[?25l[62;101H1[21;1H[?25h[?25l[62;101H0[20;1H[?25h[?25l[19;1H[46m{[35;1H}[m[62;100H19[19;1H[?25h[?25l{[35;1H}[62;101H8[18;1H[?25h[?25lvint main()[62;103H2[18;2H[?25h[?25l
[46m{[35;1H}[m[62;101H9[19;2H[?25h[?25l{[35;1H}[62;100H20[20;2H[?25h[?25l[62;101H1[21;2H[?25h[?25l[62;101H2[22;2H[?25h[?25l[62;101H3,1[23;1H[?25h[?25l[62;101H4,2[24;2H[?25h[?25l[62;101H5[25;2H[?25h[?25l[62;101H6,1[26;1H[?25h[?25l[62;101H7,2[27;2H[?25h[?25l[62;101H8[28;2H[?25h[?25l[62;101H9[29;2H[?25h[?25l[62;100H30[30;2H[?25h[?25l[28;47H[46m{


}[m[62;101H1[31;2H[?25h[?25l[28;47H{


}[62;101H2[32;2H[?25h[?25l[27;54H[46m{[33;1H}[m[62;101H3[33;2H[?25h[?25l[27;54H{[33;1H}[62;101H4[34;2H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5[35;2H[?25h[?25l[19;1H{[35;1H}[62;101H6,1[36;1H[?25h[?25l[62;101H7,2[37;2H[?25h[?25l[62;101H8[38;2H[?25h[?25l[62;101H9[39;2H[?25h[?25l[62;100H40[40;2H[?25h[?25l[62;101H1[41;2H[?25h[?25l
[46m{


}[m[62;101H2[42;2H[?25h[?25l{


}[62;101H3[43;2H[?25h[?25l[62;101H4[44;2H[?25h[?25l[42;1H[46m{


}[m[62;101H5[45;2H[?25h[?25l[42;1H{


}[62;101H6,1[46;1H[?25h[?25l[62;101H7,2[47;2H[?25h[?25l
[46m{


}[m[62;101H8[48;2H[?25h[?25l{


}[62;101H9[49;2H[?25h[62;1H[K[49;1H[?25l[62;100H49,1[10CAll[49;1H[?25h[?25l[62;100H50[50;1H[?25h[?25l[62;1H[33m-- VISUAL --[m[62;100H[K[62;100H50,1[10CAll[50;1H[?25h[?25l[49;2H[7mprintf([m[7m[33mstderr[m[7m,[m[7m[33m"Error: [m[7m[35m%s[m[7m[33m,[m[7m[35m%s\n[m[7m[33m"[m[7m, s1, s2); 
e[m[62;100H49[49;1H[?25h[?25l[48;1H[46m{[m[7m 
f[m

[46m}[m[62;101H8[48;1H[?25h[?25l[47;2H[7m[32moid[m[7m fatal([m[7m[32mchar[m[7m *s1, [m[7m[32mchar[m[7m *s2, [m[7m[32mint[m[7m n) 
{[m


}[62;101H7[47;1H[?25h[?25l[7m[32mv[m[62;101H6,0-1[46;1H[?25h[?25l[42;1H[46m{


}[m[7m 
 [m[62;101H5,1  [45;1H[?25h[?25l[42;1H{

s[7mignal([m[7m[33mSIGQUIT[m[7m, [m[7m[33mSIG_IGN[m[7m); 
}[m[62;101H4[44;1H[?25h[?25l[43;2H[7mignal([m[7m[33mSIGINT[m[7m,  [m[7m[33mSIG_IGN[m[7m); 
s[m[62;101H3[43;1H[?25h[?25l[42;1H[46m{[m[7m 
s[m[62;101H2[42;1H[?25h[?25l[41;2H[7m[36m*/[m[7m 
{[m[62;101H1[41;1H[?25h[?25l[40;2H[7m[36m* returns: nothing. calls fatal() if trouble[m[7m [m
[7m[36m [m[62;101H0[40;1H[?25h[?25l[39;2H[7m[36m* purpose: initialize shell[m[7m [m
[7m[36m [m[62;100H39[39;1H[?25h[?25l[38;2H[7m[36m*[m[7m [m
[7m[36m [m[62;101H8[38;1H[?25h[?25l[37;2H[7m[32moid[m[7m setup() [m
[7m[36m/[m[62;101H7[37;1H[?25h[?25l[7m[32mv[m[62;101H6,0-1[36;1H[?25h[?25l[19;1H[46m{[35;1H}[m[7m 
 [m[62;101H5,1  [35;1H[?25h[?25l[19;1H{[34;2H[7m[33meturn[m[7m [m[7m[33m0[m[7m; 
}[m[62;101H4[34;1H[?25h[?25l[27;54H[46m{[33;1H}[m[7m [m
[7m[33mr[m[62;101H3[33;1H[?25h[?25l[27;54H{[32;2H[7mree(cmdline); 
}[m[62;101H2[32;1H[?25h[?25l[28;47H[46m{


}[m[7m 
f[m[62;101H1[31;1H[?25h[?25l[28;47H{

f[7mreelist(arglist); 
}[m[62;101H0[30;1H[?25h[?25l[29;2H[7mesult = execute(arglist); 
f[m[62;100H29[29;1H[?25h[?25l[28;2H[7m[33mf[m[7m ( (arglist = splitline(cmdline)) != [m[7m[33mNULL[m[7m  ){ 
r[m[62;101H8[28;1H[?25h[?25l[27;2H[7m[33mhile[m[7m ( (cmdline = next_cmd(prompt, [m[7m[33mstdin[m[7m)) != [m[7m[33mNULL[m[7m ){ [m
[7m[33mi[m[62;101H7[27;1H[?25h[?25l[7m[33mw[m[62;101H6,0-1[26;1H[?25h[?25l[25;2H[7metup(); 
 [m[62;101H5,1  [25;1H[?25h[?25l[24;2H[7mrompt = DFL_PROMPT; 
s[m[62;101H4[24;1H[?25h[?25l[7mp[m[62;101H3,0-1[23;1H[?25h[?25l[22;2H[7m[32moid[m[7m    setup(); 
 [m[62;101H2,1  [22;1H[?25h[?25l[21;2H[7m[32mnt[m[7m     result; [m
[7m[32mv[m[62;101H1[21;1H[?25h[?25l[20;2H[7m[32mhar[m[7m    *cmdline, *prompt, **arglist; [m
[7m[32mi[m[62;101H0[20;1H[?25h[?25l[62;1H31 lines >ed 1 time[62;100H[K[20;1H        [32mchar[m    *cmdline, *prompt, **arglist;
        [32mint[m     result;
        [32mvoid[m    setup();[23;1H[K[24;1H        prompt = DFL_PROMPT;
        setup();[26;1H[K[27;1H        [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){
        [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){
        result = execute(arglist);
        freelist(arglist);
        }
        free(cmdline);
        }
        [33mreturn[m [33m0[m;
        }[36;1H[K[37;1H        [32mvoid[m setup()
        [36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m
        {
        signal([33mSIGINT[m,  [33mSIG_IGN[m);
        signal([33mSIGQUIT[m, [33mSIG_IGN[m);
        }[46;1H[K[47;1H        [32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)
        {
        fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);
        exit(n);[62;1H[K[62;100H20,2-9[8CAll[20;9H[?25h[?25l[62;101H1[21;9H[?25h[?25l[62;101H2[22;9H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H4,2-9[24;9H[?25h[?25l[62;101H5[25;9H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,2-9[27;9H[?25h[?25l[62;101H8[28;9H[?25h[?25l[62;1H[33m-- VISUAL --[m[62;100H[K[62;100H28,2-9[8CAll[28;9H[?25h[?25l[7m[33mif[m[7m ( (arglist = splitline(cmdline)) != [m[7m[33mNULL[m[7m  ){ 
        [m[62;101H9[29;9H[?25h[?25l[7mresult = execute(arglist); 
        [m[62;100H30[30;9H[?25h[?25l[7mfreelist(arglist); 
        [m[46m}[m[62;101H1[31;9H[?25h[?25l[7m} 
        [m[62;101H2[32;9H[?25h[?25l[27;62H[46m{[m[32;9H[7mfree(cmdline); 
        [m[46m}[m[62;101H3[33;9H[?25h[?25l[27;62H{[33;9H[7m} 
        [m[62;101H4[34;9H[?25h[?25l[19;1H[46m{[m[34;9H[7m[33mreturn[m[7m [m[7m[33m0[m[7m; 
        [m[46m}[m[62;101H5[35;9H[?25h[?25l[19;1H{[34;9H[33mreturn[m [33m0[m;[34;18H[K[35;1H        }[62;101H4[34;9H[?25h[?25l[19;1H[46m{[m[34;9H[7m[33mreturn[m[7m [m[7m[33m0[m[7m; 
        [m[46m}[m[62;101H5[35;9H[?25h[?25l[19;1H{[34;9H[33mreturn[m [33m0[m;[34;18H[K[35;1H        }[62;101H4[34;9H[?25h[?25l[62;1H7 lines >ed 1 time[62;100H[K[28;9H        [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){
                result = execute(arglist);
                freelist(arglist);
                }
                free(cmdline);
                }
                [33mreturn[m [33m0[m;[62;1H[K[62;100H28,3-17[7CAll[28;17H[?25h[?25l[62;101H9[29;17H[?25h[?25l[62;100H30[30;17H[?25h[?25l[28;63H[46m{[31;17H}[m[62;101H1[31;17H[?25h[?25l[28;63H{[31;17H}[62;101H2[32;17H[?25h[?25l[27;62H[46m{[33;17H}[m[62;101H3[33;17H[?25h[?25l[27;62H{[33;17H}[62;101H4[34;17H[?25h[?25l[19;1H[46m{[35;9H}[m[62;101H5,2-9 [35;9H[?25h[?25l[19;1H{[35;9H}[62;103H1-8[35;8H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H35,1[10CAll[35;1H[?25h[?25l[34;61r[61;1H
[1;62r[34;9H [7C[33mreturn[m [33m0[m;[7C}[61;1H[34m~                                                                                                                    [m[62;100H[K[62;100H34,12-26      All[34;26H[?25h[?25l[35;61r[35;1H[L[1;62r[34;33H[K[35;9H}[62;100H[K[62;100H35,1[10CAll[35;1H[?25h[?25l}[35;9H[K[19;1H[46m{[35;1H}[?25h[?25l[m[19;1H{[35;1H}[62;101H4[34;1H[?25h[?25l[62;101H3[33;1H[?25h[?25l[62;101H2[32;1H[?25h[?25l[62;101H1[31;1H[?25h[?25l[62;103H2-9[31;9H[?25h[?25l[28;63H[46m{[31;17H}[m[62;103H3-17[31;17H[?25h[?25l[28;63H{[31;17H}[62;103H2-9 [31;9H[?25h[?25l[62;103H1  [31;1H[?25h[?25l[62;101H0[30;1H[?25h[?25l[62;100H29[29;1H[?25h[?25l[62;101H8[28;1H[?25h[?25l[62;101H7[27;1H[?25h[?25l[62;101H6[26;1H[?25h[?25l[62;101H5[25;1H[?25h[?25l[62;101H4[24;1H[?25h[?25l[62;101H3[23;1H[?25h[?25l[62;101H2[22;1H[?25h[?25l[62;101H1[21;1H[?25h[?25l[62;101H0[20;1H[?25h[?25l[19;1H[46m{[35;1H}[m[62;100H19[19;1H[?25h[?25l{[35;1H}[62;101H8[18;1H[?25h[?25l[32mint[m main()[18;11H[K[18;1H[?25h[?25l
[46m{[35;1H}[m[62;101H9[19;1H[?25h[?25l{[35;1H}[62;100H20[20;1H[?25h[?25l[62;101H1[21;1H[?25h[?25l[62;101H2[22;1H[?25h[?25l[62;101H3[23;1H[?25h[?25l[62;101H4[24;1H[?25h[?25l[62;101H5[25;1H[?25h[?25l[62;101H6[26;1H[?25h[?25l[62;101H7[27;1H[?25h[?25l[62;101H8[28;1H[?25h[?25l[62;101H9[29;1H[?25h[?25l[62;100H30[30;1H[?25h[?25l[62;103H2-9[30;9H[?25h[?25l[62;100H29[29;9H[?25h[?25l[8C        result = execute(arglist);[62;103H3-17[29;17H[?25h[?25l[62;100H30[30;17H[?25h[?25l[62;103H2-9 [30;9H[?25h[?25l[62;103H3-17[30;17H[?25h[?25l        freelist(arglist);[62;103H4-25[30;25H[?25h[?25l[28;63H[46m{[31;17H}[m[62;101H1,4-18[31;18H[?25h[?25l[62;103H3-17[31;17H[?25h[?25l[62;103H4-18[31;18H[?25h[?25l[28;63H{[31;17H}[62;101H0,3-17[30;17H[?25h[?25l[62;103H4-25[30;25H[?25h[?25l[62;103H5-26[30;26H[?25h[?25l[62;103H4-25[30;25H[?25h[?25l[62;100H29[29;25H[?25h[?25l[62;101H8,11-25[28;25H[?25h[?25l[62;104H0-24[28;24H[?25h[?25l[46m([28C)[m[62;103H9-23 [28;23H[?25h[?25l[62;103H8-22[28;22H[?25h[?25l[62;103H9-23[28;23H[?25h[?25l([28C)[62;101H9,3-17[29;17H[?25h[?25l[62;100H30[30;17H[?25h[?25l[28;63H[46m{[31;17H}[m[62;101H1,4-18[31;18H[?25h[?25l[28;63H{[31;17H}[62;101H0,3-17[30;17H[?25h[?25l[62;100H29[29;17H[?25h[?25l[62;100H30[30;17H[?25h[?25l[28;63H[46m{[31;17H}[m[62;101H1,4-18[31;18H[?25h[?25l[28;63H{[31;17H}[62;101H2,9-23[32;23H[?25h[?25l[28;63H[46m{[31;17H}[m[62;101H1,4-18[31;18H[?25h[?25l[28;63H{[31;17H}[62;101H0,3-17[30;17H[?25h[?25l[62;100H29[29;17H[?25h[?25l[62;100H30[30;17H[?25h[?25l[62;100H29[29;17H[?25h[?25l[28;22H[46m([28C)[m[62;101H8,9-23[28;23H[?25h[?25l([28C)[62;101H7,16-23[27;23H[?25h[?25l[62;101H6,1    [26;1H[?25h[?25l[62;101H7,16-23[27;23H[?25h[?25l[28;22H[46m([28C)[m[62;101H8,9-23 [28;23H[?25h[?25l([28C)[62;101H9,3-17[29;17H[?25h[?25l[28;22H[46m([28C)[m[62;101H8,9-23[28;23H[?25h[?25l[62;103H8-22[28;22H[?25h[?25l[62;103H9-23[28;23H[?25h[?25l([28C)[62;101H7,16-23[27;23H[?25h[?25l[62;104H7-24[27;24H[?25h[?25l[62;104H8-25[27;25H[?25h[?25l[62;104H9-26[27;26H[?25h[?25l[62;103H20-27[27;27H[?25h[?25l[62;104H1-28[27;28H[?25h[?25l[62;104H2-29[27;29H[?25h[?25l[62;104H3-30[27;30H[?25h[?25l[62;104H4-31[27;31H[?25h[?25l[62;104H5-32[27;32H[?25h[?25l[62;104H6-33[27;33H[?25h[?25l[62;104H7-34[27;34H[?25h[?25l[62;104H8-35[27;35H[?25h[?25ld[46m([13C)[m[62;104H9-36[27;36H[?25h[?25l[62;103H30-37[27;37H[?25h[?25l([13C)[62;104H1-38[27;38H[?25h[?25l[62;104H2-39[27;39H[?25h[?25l[62;104H3-40[27;40H[?25h[?25l[62;104H4-41[27;41H[?25h[?25l[62;104H5-42[27;42H[?25h[?25l[62;104H6-43[27;43H[?25h[?25l[62;104H7-44[27;44H[?25h[?25l[62;104H8-45[27;45H[?25h[?25l[62;104H9-46[27;46H[?25h[?25l[62;103H40-47[27;47H[?25h[?25l[62;104H1-48[27;48H[?25h[?25l[62;104H2-49[27;49H[?25h[?25l[27;36H[46m([13C)[m[62;104H3-50[27;50H[?25h[?25l[27;17H[46m([m[18C([13C)[46m)[m[62;104H4-51[27;51H[?25h[?25l[62;104H5-52[27;52H[?25h[?25l[27;17H([33C)[62;104H6-53[27;53H[?25h[?25l[62;104H7-54[27;54H[?25h[?25l[62;104H8-55[27;55H[?25h[?25l[62;104H9-56[27;56H[?25h[?25l[62;103H50-57[27;57H[?25h[?25l[62;104H1-58[27;58H[?25h[?25l[62;104H2-59[27;59H[?25h[?25l[62;104H3-60[27;60H[?25h[?25l[62;101H8,46[28;60H[?25h[?25l[62;101H9,30-51[29;51H[?25h[?25l[62;100H30,22-43[30;43H[?25h[?25l[28;63H[46m{[31;17H}[m[62;101H1,4-18 [31;18H[?25h[?25l[28;63H{[31;17H}[62;101H2,17-31[32;31H[?25h[?25l[27;62H[46m{[33;17H}[m[62;101H3,4-18 [33;18H[?25h[?25l[27;62H{[33;17H}[62;101H4,12-26[34;26H[?25h[?25l[27;62H[46m{[33;17H}[m[62;101H3,4-18 [33;18H[?25h[?25l[62;103H3-17[33;17H[?25h[?25l[27;62H{[33;17H}[62;103H2-9 [33;9H[?25h[?25l[27;62H[46m{[33;17H}[m[62;103H3-17[33;17H[?25h[?25l[33;9H}[33;17H[K[33;9H[46m}[m[62;103H2-9 [33;9H[?25h[?25l[27;62H{[33;9H}[62;101H2[32;9H[?25h[?25l[62;103H3-17[32;17H[?25h[?25l[62;103H4-18[32;18H[?25h[?25l[62;103H3-17[32;17H[?25h[?25l[28;63H[46m{[31;17H}[m[62;101H1[31;17H[?25h[?25l[28;63H{[31;17H}[62;101H0[30;17H[?25h[?25l[62;103H4-25[30;25H[?25h[?25l[30;17Hfreelist(arglist);[30;35H[K[62;103H3-17[30;17H[?25h[?25l[62;100H29[29;17H[?25h[?25l[62;101H8[28;17H[?25h[?25l[27;17H[46m([33C)[m[62;101H7,10-17[27;17H[?25h[?25l([33C)[62;101H6,1    [26;1H[?25h[?25l[62;101H5,10-17[25;17H[?25h[?25l[62;101H6,1    [26;1H[?25h[?25l[27;17H[46m([33C)[m[62;101H7,10-17[27;17H[?25h[?25l[62;104H1-18[27;18H[?25h[?25l([33C)[62;104H2-19[27;19H[?25h[?25l[62;104H3-20[27;20H[?25h[?25l[62;104H4-21[27;21H[?25h[?25l[62;104H5-22[27;22H[?25h[?25l[62;104H6-23[27;23H[?25h[?25l[62;104H7-24[27;24H[?25h[?25l[62;104H8-25[27;25H[?25h[?25l[62;104H9-26[27;26H[?25h[?25l[62;103H20-27[27;27H[?25h[?25l[62;104H1-28[27;28H[?25h[?25l[62;104H2-29[27;29H[?25h[?25l[62;104H3-30[27;30H[?25h[?25l[62;104H4-31[27;31H[?25h[?25l[62;104H5-32[27;32H[?25h[?25l[62;104H6-33[27;33H[?25h[?25l[62;104H7-34[27;34H[?25h[?25l[62;104H8-35[27;35H[?25h[?25ld[46m([13C)[m[62;104H9-36[27;36H[?25h[?25l[62;103H30-37[27;37H[?25h[?25l([13C)[62;104H1-38[27;38H[?25h[?25l[62;104H2-39[27;39H[?25h[?25l[62;104H3-40[27;40H[?25h[?25l[62;104H4-41[27;41H[?25h[?25l[62;104H5-42[27;42H[?25h[?25l[62;104H6-43[27;43H[?25h[?25l[62;104H7-44[27;44H[?25h[?25l[62;104H8-45[27;45H[?25h[?25l[62;104H9-46[27;46H[?25h[?25l[62;103H40-47[27;47H[?25h[?25l[62;104H1-48[27;48H[?25h[?25l[62;104H2-49[27;49H[?25h[?25l[27;36H[46m([13C)[m[62;104H3-50[27;50H[?25h[?25l[27;17H[46m([m[18C([13C)[46m)[m[62;104H4-51[27;51H[?25h[?25l[62;104H5-52[27;52H[?25h[?25l[27;17H([33C)[62;104H6-53[27;53H[?25h[?25l[62;104H7-54[27;54H[?25h[?25l[62;104H8-55[27;55H[?25h[?25l[62;104H9-56[27;56H[?25h[?25l[62;103H50-57[27;57H[?25h[?25l[62;104H1-58[27;58H[?25h[?25l[62;104H2-59[27;59H[?25h[?25l[62;104H3-60[27;60H[?25h[?25l[27;15H[46m([45C)[m[62;104H4-61[27;61H[?25h[?25l[27;15H([45C)[46m{[33;9H}[m[62;104H5-62[27;62H[?25h[?25l{[28;20H[46m([41C)[m[33;9H}[62;101H8,48[28;62H[?25h[?25l[28;20H([41C)[46m{[31;17H}[m[62;104H9-63[28;63H[?25h[?25l{[31;17H}[62;101H9,30-51[29;51H[?25h[?25l[62;100H30,21-35[30;35H[?25h[?25l[30;25H[46m([7C)[m[62;104H0-34[30;34H[?25h[?25l[62;103H19-33[30;33H[?25h[?25l[30;25H([7C)[62;104H8-32[30;32H[?25h[?25l[62;104H7-31[30;31H[?25h[?25l[62;104H6-30[30;30H[?25h[?25l[62;104H5-29[30;29H[?25h[?25l[62;104H4-28[30;28H[?25h[?25l[62;104H3-27[30;27H[?25h[?25l[46m([7C)[m[62;104H2-26[30;26H[?25h[?25l[62;104H1-25[30;25H[?25h[?25l([7C)[62;104H0-24[30;24H[?25h[?25l[62;103H9-23 [30;23H[?25h[?25l[62;103H8-22[30;22H[?25h[?25l[62;103H7-21[30;21H[?25h[?25l[62;103H6-20[30;20H[?25h[?25l[62;103H5-19[30;19H[?25h[?25l[62;103H4-18[30;18H[?25h[?25l[62;103H3-17[30;17H[?25h[?25l        freelist(arglist);[62;103H4-25[30;25H[?25h[?25l[62;100H29[29;25H[?25h[?25l[62;101H8,11-25[28;25H[?25h[?25l[62;101H9,4-25 [29;25H[?25h[?25l[62;100H30[30;25H[?25h[?25l[28;63H[46m{[31;17H}[m[62;101H1,4-18[31;18H[?25h[?25l[28;63H{[31;17H}[62;101H2,11-25[32;25H[?25h[?25l[27;62H[46m{[33;9H}[m[62;101H3,3-10 [33;10H[?25h[?25l[27;62H{[33;9H}[62;101H4,11-25[34;25H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5,2    [35;2H[?25h[?25l[19;1H{[35;1H}[62;101H6,1[36;1H[?25h[?25l[37;19H[46m()[m[62;101H7,14-21[37;21H[?25h[?25l[62;104H3-20[37;20H[?25h[?25l[62;104H2-19[37;19H[?25h[?25l()[62;104H1-18[37;18H[?25h[?25l[62;104H0-17[37;17H[?25h[?25l[62;103H9-16 [37;16H[?25h[?25l[62;103H8-15[37;15H[?25h[?25l[62;103H7-14[37;14H[?25h[?25l[62;103H6-13[37;13H[?25h[?25l[62;103H5-12[37;12H[?25h[?25l[62;103H4-11[37;11H[?25h[?25l[62;103H3-10[37;10H[?25h[?25l[62;103H2-9 [37;9H[?25h[?25l[32mvoid[m setup()[37;14H[K[62;103H1  [37;1H[?25h[?25l[62;101H8[38;1H[?25h[?25l[62;101H9[39;1H[?25h[?25l[62;100H40[40;1H[?25h[?25l[62;101H1[41;1H[?25h[?25l[62;101H2[42;1H[?25h[?25l[62;101H3[43;1H[?25h[?25l[62;101H4[44;1H[?25h[?25l[62;101H5[45;1H[?25h[?25l[62;101H6[46;1H[?25h[?25l[62;101H7[47;1H[?25h[?25l[62;101H8[48;1H[?25h[?25l[62;101H9[49;1H[?25h[?25l[62;100H50[50;1H[?25h[?25l[48;9H[46m{


}[m[62;101H1[51;1H[?25h[?25l[48;9H{


}[62;101H0[50;1H[?25h[?25l[62;100H49[49;1H[?25h[?25l[62;101H8[48;1H[?25h[?25l[62;101H9[49;1H[?25h[?25l[62;100H50[50;1H[?25h[?25l[62;100H49[49;1H[?25h[?25l[62;101H8[48;1H[?25h[?25l[62;101H7[47;1H[?25h[?25l[62;101H6[46;1H[?25h[?25l[62;101H7[47;1H[?25h[?25l[62;101H8[48;1H[?25h[?25l[62;101H9[49;1H[?25h[?25l[62;100H50[50;1H[?25h[?25l[48;9H[46m{


}[m[62;101H1[51;1H[?25h[?25l[48;9H{


}[62;101H2[52;1H[?25h[?25l[48;9H[46m{


}[m[62;101H1[51;1H[?25h[?25l[48;9H{


}[62;101H2[52;1H[?25h[?25l[48;9H[46m{


}[m[62;101H1[51;1H[?25h[?25l[48;9H{


}[62;101H0[50;1H[?25h[?25l[62;100H49[49;1H[?25h[?25l[62;101H8[48;1H[?25h[?25l[62;101H7[47;1H[?25h[?25l[62;101H6[46;1H[?25h[?25l[62;101H5[45;1H[?25h[?25l[62;101H4[44;1H[?25h[?25l[62;101H3[43;1H[?25h[?25l[62;101H2[42;1H[?25h[?25l[62;101H1[41;1H[?25h[?25l[62;101H0[40;1H[?25h[?25l[62;100H39[39;1H[?25h[?25l[62;101H8[38;1H[?25h[?25l[62;103H2-9[38;9H[?25h[?25l[62;101H9[39;9H[?25h[?25l[62;100H40[40;9H[?25h[?25l[62;101H1[41;9H[?25h[?25l[42;9H[46m{[45;9H}[m[62;101H2[42;9H[?25h[?25l{[45;9H}[62;101H3[43;9H[?25h[?25l[62;101H4[44;9H[?25h[?25l[42;9H[46m{[45;9H}[m[62;101H5[45;9H[?25h[?25l[42;9H{[45;9H}[62;101H6,1  [46;1H[?25h[?25l[62;101H7,2-9[47;9H[?25h[?25l[48;9H[46m{


}[m[62;101H8[48;9H[?25h[?25l{


}[62;101H9[49;9H[?25h[?25l[48;9H[46m{


}[m[62;101H8[48;9H[?25h[?25l{


}[62;101H9[49;9H[?25h[?25l[62;100H50[50;9H[?25h[?25l[48;9H[46m{


}[m[62;101H1,2  [51;2H[?25h[?25l[48;9H{


}[62;101H2,1[52;1H[?25h[?25l[48;9H[46m{


}[m[62;101H1,2[51;2H[?25h[?25l[48;9H{


}[62;101H0,2-9[50;9H[?25h[?25l[62;100H49[49;9H[?25h[?25l[48;9H[46m{


}[m[62;101H8[48;9H[?25h[?25l{


}[62;101H7[47;9H[?25h[?25l[62;103H1  [47;1H[?25h[?25l[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[47;38H[K[47;1H[?25h[?25l[62;101H8[48;1H[?25h[?25l[47;61r[61;1H
[1;62r[47;1H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)   {[61;1H[34m~                                                                                                                    [m[62;100H[K[62;100H47,38[9CAll[47;11H[46m([25C)[?25h[?25l[m{[47;41H[K[47;11H([25C)[46m{


}[47;38H[?25h[?25l[m[47;38H[K[47;11H[46m([25C)[m


}[47;38H[?25h[?25l[47;11H([25C)[62;101H8,31-38[48;38H[?25h[?25l[62;101H9,10-17[49;17H[?25h[?25l[62;100H50,2    [50;2H[?25h[?25l[62;100H49,10-17[49;17H[?25h[?25l[62;101H8,31-38[48;38H[?25h[?25l[47;11H[46m([25C)[m[62;101H7,38   [47;38H[?25h[?25l[47;11H([25C)[62;101H6,1 [46;1H[?25h[?25l[42;9H[46m{[45;9H}[m[62;101H5,3-10[45;10H[?25h[?25l[42;9H{[45;9H}[62;101H4,27-34[44;34H[?25h[?25l[62;101H3[43;34H[?25h[?25l[62;101H4[44;34H[?25h[?25l[42;9H[46m{[45;9H}[m[62;101H5,3-10 [45;10H[?25h[?25l[42;9H{[45;9H}[62;101H6,1   [46;1H[?25h[?25l[42;9H[46m{[45;9H}[m[62;101H5,3-10[45;10H[?25h[?25l[42;9H{[45;9H}[62;101H4,27-34[44;34H[?25h[?25l[62;101H3[43;34H[?25h[?25l[42;9H[46m{[45;9H}[m[62;101H2,3-10 [42;10H[?25h[?25l{[45;9H}[62;101H1,5-12[41;12H[?25h[?25l[42;9H[46m{[45;9H}[m[62;101H2,3-10[42;10H[?25h[?25l{[45;9H}[62;101H3,27-34[43;34H[?25h[?25l[62;101H4[44;34H[?25h[?25l[42;9H[46m{[45;9H}[m[62;101H5,3-10 [45;10H[?25h[?25l[42;9H{[45;9H}[62;101H6,1   [46;1H[?25h[?25l[47;11H[46m([25C)[m[62;101H7,38[47;38H[?25h[?25l[47;11H([25C)[62;101H8,31-38[48;38H[?25h[?25l[62;101H9,10-17[49;17H[?25h[?25l[62;100H50,2    [50;2H[?25h[?25l[62;101H1,1[51;1H[?25h[?25l[52;1H[K[62;101H2[52;1H[?25h[?25l:[62;103H2[52;2H[?25h[?25lq[62;103H3[52;3H[?25h[?25l[53;1H[K[62;101H3,1[53;1H[?25h[?25l[34m~                                                                                                                    [m[62;101H2,3[52;3H[?25h[?25l[52;2H[K[62;103H2[52;2H[?25h[?25l[52;1H[K[62;103H1[52;1H[?25h[62;1H[K[52;1H[?25l[62;100H52,0-1[8CAll[52;1H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25h[?25l"smsh.c" 52L, 920C written[73C52,0-1[8CAll[62;100H[K[62;100H52,0-1[8CAll[52;1H[?25h[?25l[62;101H1[51;1H[?25h[?25l[62;101H0,1  [50;1H[?25h[?25l[62;100H49,1-8[49;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H7,1  [47;1H[?25h[?25l[62;101H6,0-1[46;1H[?25h[?25l[62;101H5,1-8[45;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H0[40;8H[?25h[?25l[62;100H39[39;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H7,1  [37;1H[?25h[?25l[62;101H6,0-1[36;1H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5,1  [35;1H[?25h[?25l[19;1H{[35;1H}[62;101H4,1-8[34;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H0[30;8H[?25h[?25l[62;100H29[29;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H5,1-8[25;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H2,1-8[22;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H0[20;8H[?25h[?25l[19;1H[46m{[35;1H}[m[62;100H19,1  [19;1H[?25h[?25l{[35;1H}[62;101H8[18;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H6,1  [16;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l
[46m{[35;1H}[m[62;101H9[19;1H[?25h[?25l{[35;1H}[62;100H20,1-8[20;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H4,1-8[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5,1  [35;1H[?25h[?25l[19;1H{[35;1H}[62;101H6,0-1[36;1H[?25h[?25l[62;101H7,1  [37;1H[?25h[?25l[62;101H8,1-8[38;8H[?25h[?25l[62;101H9[39;8H[?25h[?25l[62;100H40[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6,0-1[46;1H[?25h[?25l[62;101H7,1  [47;1H[?25h[?25l[62;101H8,1-8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[62;100H50,1  [50;1H[?25h[?25l[62;100H49,1-8[49;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H7,1  [47;1H[?25h[?25l[62;101H6,0-1[46;1H[?25h[?25l[62;101H5,1-8[45;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H0[40;8H[?25h[?25l[62;100H39[39;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H7,1  [37;1H[?25h[?25l[62;101H6,0-1[36;1H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5,1  [35;1H[?25h[?25l[19;1H{[35;1H}[62;101H4,1-8[34;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H0[30;8H[?25h[?25l[62;100H29[29;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H5,1-8[25;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H2,1-8[22;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H0[20;8H[?25h[?25l[19;1H[46m{[35;1H}[m[62;100H19,1  [19;1H[?25h[?25l{[35;1H}[62;101H8[18;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H6,1  [16;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l
[46m{[35;1H}[m[62;101H9[19;1H[?25h[?25l{[35;1H}[62;100H20,1-8[20;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H4,1-8[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5,1  [35;1H[?25h[?25l[19;1H{[35;1H}[62;101H6,0-1[36;1H[?25h[?25l[62;101H7,1  [37;1H[?25h[?25l[62;101H8,1-8[38;8H[?25h[?25l[62;101H9[39;8H[?25h[?25l[62;100H40[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6,0-1[46;1H[?25h[?25l[62;101H7,1  [47;1H[?25h[?25l[62;101H8,1-8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[62;100H50,1  [50;1H[?25h[?25l[62;101H1,0-1[51;1H[?25h[?25l[62;101H2[52;1H[?25h[?25l[62;101H1[51;1H[?25h[?25l[62;101H0,1  [50;1H[?25h[?25l[62;100H49,1-8[49;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H7,1  [47;1H[?25h[?25l[62;101H6,0-1[46;1H[?25h[?25l[62;101H5,1-8[45;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H0[40;8H[?25h[?25l[62;100H39[39;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H7,1  [37;1H[?25h[?25l[62;101H6,0-1[36;1H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5,1  [35;1H[?25h[?25l[19;1H{[35;1H}[62;101H4,1-8[34;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H0[30;8H[?25h[?25l[62;100H29[29;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H5,1-8[25;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H2,1-8[22;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H4,1-8[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5,1  [35;1H[?25h[?25l[19;1H{[35;1H}[62;101H6,0-1[36;1H[?25h[?25l[62;101H7,1  [37;1H[?25h[?25l[62;101H8,1-8[38;8H[?25h[?25l[62;101H9[39;8H[?25h[?25l[62;100H40[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6,0-1[46;1H[?25h[?25l[62;101H7,1  [47;1H[?25h[?25l[62;101H8,1-8[48;8H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 52L, 920C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc mssh[K[K[K[Ksmsh.c -o test/o[K[K.o _w[K[K-Wa[K[K[K[K
In file included from [01m[Ksmsh.c:12[m[K:
[01m[Ksplit.c:[m[K In function â€˜[01m[Knext_cmd[m[Kâ€™:
[01m[Ksplit.c:27:12:[m[K [01;35m[Kwarning: [m[Kimplicit declaration of function â€˜[01m[KVgetcurpath[m[Kâ€™ [[01;35m[K-Wimplicit-function-declaration[m[K]
  curpath = [01;35m[KVgetcurpath[m[K();
            [01;35m[K^~~~~~~~~~~[m[K
[01m[Ksplit.c:27:10:[m[K [01;35m[Kwarning: [m[Kassignment to â€˜[01m[Kchar *[m[Kâ€™ from â€˜[01m[Kint[m[Kâ€™ makes pointer from integer without a cast [[01;35m[K-Wint-conversion[m[K]
  curpath [01;35m[K=[m[K Vgetcurpath();
          [01;35m[K^[m[K
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kfatal[m[Kâ€™:
[01m[Ksmsh.c:48:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kfprintf[m[Kâ€™
  [01;31m[Kfprintf[m[K(stderr,"Error: %s,%s\n", s1, s2);
  [01;31m[K^~~~~~~[m[K
[01m[Ksmsh.c:49:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kexit[m[Kâ€™
  [01;31m[Kexit[m[K(n);
  [01;31m[K^~~~[m[K
[01m[Ksmsh.c:50:1:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[K}[m[Kâ€™ token
 [01;31m[K}[m[K
 [01;31m[K^[m[K
[01m[Ksmsh.c:52:[m[K [01;31m[Kerror: [m[Kexpected â€˜[01m[K{[m[Kâ€™ at end of input
 
 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 52L, 920C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"split.c"[m
[35m#include [m[33m"exec.c"[m


[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[24;9Hprompt = DFL_PROMPT;[25;9Hsetup();[27;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[28;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[29;25Hresult = execute(arglist);[30;25Hfreelist(arglist);[31;17H}[32;17Hfree(cmdline);[33;9H}[34;17H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[38;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[42;9H{[43;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[44;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[45;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[48;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[49;9Hexit(n);
}


[34m~                                                                                                                    [54;1H~                                                                                                                    [55;1H~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,0-1[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6,1  [16;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l
[46m{[35;1H}[m[62;101H9[19;1H[?25h[?25l{[35;1H}[62;100H20,1-8[20;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H4,1-8[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H0[30;8H[?25h[?25l[62;100H29[29;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H5,1-8[25;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H2,1-8[22;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H4,1-8[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5,1  [35;1H[?25h[?25l[19;1H{[35;1H}[62;101H6,0-1[36;1H[?25h[?25l[62;101H7,1  [37;1H[?25h[?25l[62;101H8,1-8[38;8H[?25h[?25l[62;101H9[39;8H[?25h[?25l[62;100H40[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H0[40;8H[?25h[?25l[62;100H39[39;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H7,1  [37;1H[?25h[?25l[62;101H6,0-1[36;1H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5,1  [35;1H[?25h[?25l[19;1H{[35;1H}[62;101H4,1-8[34;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H0[30;8H[?25h[?25l[62;100H29[29;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H5,1-8[25;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H2,1-8[22;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H0[20;8H[?25h[?25l[19;1H[46m{[35;1H}[m[62;100H19,1  [19;1H[?25h[?25l{[35;1H}[62;101H8[18;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H6,1  [16;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l
[46m{[35;1H}[m[62;101H9[19;1H[?25h[?25l{[35;1H}[62;100H20,1-8[20;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H4,1-8[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5,1  [35;1H[?25h[?25l[19;1H{[35;1H}[62;101H6,0-1[36;1H[?25h[?25l[62;101H7,1  [37;1H[?25h[?25l[62;101H8,1-8[38;8H[?25h[?25l[62;101H9[39;8H[?25h[?25l[62;100H40[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H0[40;8H[?25h[?25l[62;100H39[39;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H7,1  [37;1H[?25h[?25l[62;101H6,0-1[36;1H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5,1  [35;1H[?25h[?25l[19;1H{[35;1H}[62;101H4,1-8[34;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H0[30;8H[?25h[?25l[62;100H29[29;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H5,1-8[25;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H2,1-8[22;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H0[20;8H[?25h[?25l[19;1H[46m{[35;1H}[m[62;100H19,1  [19;1H[?25h[?25l{[35;1H}[62;101H8[18;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H6,1  [16;1H[?25h[?25l[62;101H5,0-1[15;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H0[10;1H[?25h[?25l[62;100H9,1 [9;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H7[7;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H5,1  [5;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H1[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,0-1[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hs[?25l[?25he[?25l[?25ht[?25l[?25h[?25l [?25hn[?25l[?25hu[?25l[?25hm[?25l[?25hb[?25l[?25he[?25l[?25hr[?25l[?25h[?25l[1;1H[33m  1 [m[36m/**  smsh1.c  small-shell version 1[m
[33m  2 [m[1C[36m**[9C    first really useful version after prompting shell[m
[33m  3 [m[1C[36m**[9C    this one parses the command line into strings[m
[33m  4 [m[1C[36m**[9C    uses fork, exec, wait, and ignores signals[m
[33m  5 [m[36m **/[m
[33m  6 
  7 [m[35m#include [m[33m<stdio.h>[m
[33m  8 [m[35m#include [m[33m<stdlib.h>[m
[33m  9 [m[35m#include [m[33m<unistd.h>[m
[33m 10 [m[35m#include [m[33m<signal.h>[m
[33m 11 [m[35m#include [m[33m"smsh.h"[m
[33m 12 [m[35m#include [m[33m"split.c"[m
[33m 13 [m[35m#include [m[33m"exec.c"[m
[33m 14 
 15 
 16 [m[35m#define DFL_PROMPT      [m[33m"> "[m
[33m 17 
 18 [m[32mint[m main()
[33m 19 [m{
[33m 20 [m        [32mchar[m    *cmdline, *prompt, **arglist;
[33m 21 [m        [32mint[m     result;
[33m 22 [m        [32mvoid[m    setup();
[33m 23 
 24 [m        prompt = DFL_PROMPT;
[33m 25 [m        setup();
[33m 26 
 27 [m        [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){
[33m 28 [m[12C    [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){
[33m 29 [m[20C    result = execute(arglist);
[33m 30 [m[20C    freelist(arglist);
[33m 31 [m[12C    }
[33m 32 [m[12C    free(cmdline);
[33m 33 [m        }
[33m 34 [m[12C    [1C[33meturn[m [33m0[m;
[33m 35 [m}
[33m 36 
 37 [m[32mvoid[m setup()
[33m 38 [m        [36m/*[m
[33m 39 [m[5C[36m    * purpose: initialize shell[m
[33m 40 [m[5C[36m    * returns: nothing. calls fatal() if trouble[m
[33m 41 [m[5C[36m    */[m
[33m 42 [m        {
[33m 43 [m        signal([33mSIGINT[m,  [33mSIG_IGN[m);
[33m 44 [m        signal([33mSIGQUIT[m, [33mSIG_IGN[m);
[33m 45 [m        }
[33m 46 
 47 [m[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)
[33m 48 [m        fprintf([33mstder[m[1C,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);
[33m 49 [m        exit(n);
[33m 50 [m}
[33m 51 
 52 [m[62;100H15,0-1[8CAll[15;5H[?25h[?25l[62;101H6,1  [16;5H[?25h[?25l[62;101H7,0-1[17;5H[?25h[?25l[62;101H8,1  [18;5H[?25h[?25l[19;5H[46m{[35;5H}[m[62;101H9[19;5H[?25h[?25l{[35;5H}[62;100H20,1-8[20;12H[?25h[?25l[62;101H1[21;12H[?25h[?25l[62;101H2[22;12H[?25h[?25l[62;101H3,0-1[23;5H[?25h[?25l[62;101H4,1-8[24;12H[?25h[?25l[62;101H5[25;12H[?25h[?25l[62;101H6,0-1[26;5H[?25h[?25l[62;101H7,1-8[27;12H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 52L, 920C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ [K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;63r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[63;1H"smsh.c" 52L, 920C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"split.c"[m
[35m#include [m[33m"exec.c"[m


[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[24;9Hprompt = DFL_PROMPT;[25;9Hsetup();[27;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[28;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[29;25Hresult = execute(arglist);[30;25Hfreelist(arglist);[31;17H}[32;17Hfree(cmdline);[33;9H}[34;17H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[38;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[42;9H{[43;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[44;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[45;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[48;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[49;9Hexit(n);
}


[34m~                                                                                                                                                                                                                                            [54;1H~                                                                                                                                                                                                                                            [55;1H~                                                                                                                                                                                                                                            [56;1H~                                                                                                                                                                                                                                            [57;1H~                                                                                                                                                                                                                                            [58;1H~                                                                                                                                                                                                                                            [59;1H~                                                                                                                                                                                                                                            [60;1H~                                                                                                                                                                                                                                            [61;1H~                                                                                                                                                                                                                                            [62;1H~                                                                                                                                                                                                                                            [m[63;220H1,1[11CAll[1;1H[?25h[?25l[63;220H2[2;1H[?25h[?25l[63;220H3[3;1H[?25h[?25l[63;220H4[4;1H[?25h[?25l[63;220H5[5;1H[?25h[?25l[63;220H6,0-1[6;1H[?25h[?25l[63;220H7,1  [7;1H[?25h[?25l[63;220H8[8;1H[?25h[?25l[63;220H9[9;1H[?25h[?25l[63;220H10,1[10;1H[?25h[?25l[63;221H1[11;1H[?25h[?25l[63;221H2[12;1H[?25h[?25l[63;221H3[13;1H[?25h[?25l[63;221H4,0-1[14;1H[?25h[?25l[63;221H5[15;1H[?25h[?25l[63;221H6,1  [16;1H[?25h[?25l[63;221H7,0-1[17;1H[?25h[?25l[63;221H8,1  [18;1H[?25h[?25l
[46m{[35;1H}[m[63;221H9[19;1H[?25h[?25l{[35;1H}[63;220H20,1-8[20;8H[?25h[?25l[63;221H1[21;8H[?25h[?25l[63;221H2[22;8H[?25h[?25l[63;221H3,0-1[23;1H[?25h[?25l[63;221H4,1-8[24;8H[?25h[?25l[63;221H5[25;8H[?25h[?25l[63;221H6,0-1[26;1H[?25h[?25l[63;221H7,1-8[27;8H[?25h[?25l[63;221H8[28;8H[?25h[?25l[63;221H9[29;8H[?25h[?25l[63;220H30[30;8H[?25h[?25l[63;221H1[31;8H[?25h[?25l[63;221H2[32;8H[?25h[?25l[63;221H3[33;8H[?25h[?25l[63;221H4[34;8H[?25h[?25l[63;221H3[33;8H[?25h[?25l[63;221H2[32;8H[?25h[?25l[63;1H[1m[37m[41mE78: Unknown mark[m[63;18H[K[63;220H32,1-8[8CAll[32;8H[?25h[?25l[28;63H[46m{[31;17H}[m[63;221H1,3-17[31;17H[?25h[?25l[28;63H{[31;17H}[63;223H2-16[31;16H[?25h[?25l[63;223H1-8 [31;8H[?25h[?25l[63;1H[K[63;1H:[?2004h[1;1H[36m **/[m[1;5H[K[2;1H[K[3;1H[35m#include [m[33m<stdio.h>[m[3;19H[K[4;1H[35m#include [m[33m<stdlib.h>[m[4;20H[K[5;1H[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[7;10H"smsh.h"[m[7;18H[K[8;10H[33m"split.c"[m[8;19H[K[9;10H[33m"exec.c"[m[9;18H[K[10;1H[K[11;1H[K[12;2H[35mdefine DFL_PROMPT      [m[33m"> "[m[13;1H[K[14;1H[32mint[m main()
{
        [32mchar[m    *cmdline, *prompt, **arglist;[17;9H[32mint[m     result;
        [32mvoid[m    setup();[19;1H[K[20;9Hprompt = DFL_PROMPT;[20;29H[K[21;9Hsetup();[21;17H[K[22;9H[K[23;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[24;9H        [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[25;9H        [8Cresult = execute(arglist);[26;25Hfreelist(arglist);[27;9H        }[27;18H[K[28;17Hfree(cmdline);[28;31H[K[29;9H}[29;25H[K[30;17H[33mreturn[m [33m0[m;[30;26H[K[31;1H}[31;17H[K[32;17H[K[33;1H[32mvoid[m setup()[34;9H[36m/*[m[34;17H[K[35;1H[36m         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[37;12H[K[38;9H{[38;10H[K[39;1H        signal([33mSIGINT[m,  [33mSIG_IGN[m);[39;34H[K[40;1H        signal([33mSIGQUIT[m, [33mSIG_IGN[m);[40;34H[K[41;1H        }[41;10H[K[42;9H[K[43;1H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[44;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[45;9Hexit(n);
}[47;1H[K[48;9H[K[49;1H[34m~                                                                                                                                                                                                                                            [50;1H~                                                                                                                                                                                                                                            [51;1H~                                                                                                                                                                                                                                            [52;1H~                                                                                                                                                                                                                                            [m[54;1H[7msmsh.c                                                                                                                                                                                                                     31,1           Bot[m[55;1H[34m:[m[33mset[m [35mnumber[m relative[55;21H[K[56;1H[34m:[mQ[56;3H[K[57;1H[34m:[m[33mq[m[57;3H[K[58;1H[34m:[m[33mw[m[58;3H[K[59;1H[34m:[m[33mset[m [35mnumber[m[59;12H[K[60;1H[34m:[m[33mwq[m[60;4H[K[61;1H[34m:[m[61;2H[K[62;1H[1m[7m[Command Line]                                                                                                                                                                                                             36,0-1         Bot[61;2H[?25h[?25l

[m:[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[63;1H[K[63;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ sok[K[K[Kvi split,c[K[K.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;63r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[63;1H"split.c" 148L, 3371C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[27;9Hcurpath = Vgetcurpath();[28;9Hprintf([33m"[m[35m%s[m[33m$[m[35m%s[m[33m"[m, curpath,prompt);[32C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m )[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens
 *          or NULL if line if no tokens on the line[m[63;220H1,1[11CTop[1;1H[?25h[?25l[63;220H2[2;1H[?25h[?25l[63;220H3[3;1H[?25h[?25l[63;220H4[4;1H[?25h[?25l[63;220H5,0-1[5;1H[?25h[?25l[63;220H6,1  [6;1H[?25h[?25l[63;220H7,0-1[7;1H[?25h[?25l[63;220H8,1  [8;1H[?25h[?25l[63;220H9[9;1H[?25h[?25l[63;220H10,1[10;1H[?25h[?25l[63;221H1[11;1H[?25h[?25l[63;221H2,0-1[12;1H[?25h[?25l[63;221H3,1  [13;1H[?25h[?25l[63;221H4[14;1H[?25h[?25l[63;221H5[15;1H[?25h[?25l[63;221H6[16;1H[?25h[?25l[63;221H7[17;1H[?25h[?25l[63;221H8[18;1H[?25h[?25l[63;221H9[19;1H[?25h[?25l[63;220H20[20;1H[?25h[?25l
[46m{[51;1H}[m[63;221H1[21;1H[?25h[?25l{[51;1H}[63;221H2,1-8[22;8H[?25h[?25l[63;221H3[23;8H[?25h[?25l[63;221H4[24;8H[?25h[?25l[63;221H5[25;8H[?25h[?25l[63;221H6[26;8H[?25h[?25l[63;221H7[27;8H[?25h[?25l[63;223H2-9[27;9H[?25h[?25l[63;223H3-10[27;10H[?25h[?25l[63;223H4-11[27;11H[?25h[?25l[63;223H5-12[27;12H[?25h[?25l[63;223H6-13[27;13H[?25h[?25l[63;223H7-14[27;14H[?25h[?25l[63;223H8-15[27;15H[?25h[?25l[63;223H9-16[27;16H[?25h[?25l[63;223H10-17[27;17H[?25h[?25l[63;224H1-18[27;18H[?25h[?25l[63;224H2-19[27;19H[?25h[?25l[63;224H3-20[27;20H[?25h[?25l[63;1H[33m-- INSERT --[m[63;13H[K[63;220H27,13-20      Top[27;20H[?25h[?25lgetcurpath();[27;32H[K[63;224H2-19[27;19H[?25h[63;1H[K[27;18H[?25l[63;220H27,11-18      Top[27;18H[?25h[?25l[63;220H[K[63;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"split.c" 148L, 3370C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.cls[Kvi smsh.c[K[K[K[K[K[K[K[K[Kgcc -smch.c [K[K[K[K[Ksh.c -o test.o
[01m[Kgcc:[m[K [01;31m[Kerror: [m[Kunrecognized command line option â€˜[01m[K-smsh.c[m[Kâ€™; did you mean â€˜[01m[K-msha[m[Kâ€™?
[01m[Kgcc:[m[K [01;31m[Kfatal error: [m[Kno input files
compilation terminated.
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc -smsh.c -o test.o[1@i[1P[1P[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C
In file included from [01m[Ksmsh.c:12[m[K:
[01m[Ksplit.c:[m[K In function â€˜[01m[Knext_cmd[m[Kâ€™:
[01m[Ksplit.c:27:12:[m[K [01;35m[Kwarning: [m[Kimplicit declaration of function â€˜[01m[Kgetcurpath[m[Kâ€™; did you mean â€˜[01m[Kgetpass[m[Kâ€™? [[01;35m[K-Wimplicit-function-declaration[m[K]
  curpath = [01;35m[Kgetcurpath[m[K();
            [01;35m[K^~~~~~~~~~[m[K
            [32m[Kgetpass[m[K
[01m[Ksplit.c:27:10:[m[K [01;35m[Kwarning: [m[Kassignment to â€˜[01m[Kchar *[m[Kâ€™ from â€˜[01m[Kint[m[Kâ€™ makes pointer from integer without a cast [[01;35m[K-Wint-conversion[m[K]
  curpath [01;35m[K=[m[K getcurpath();
          [01;35m[K^[m[K
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kfatal[m[Kâ€™:
[01m[Ksmsh.c:48:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kfprintf[m[Kâ€™
  [01;31m[Kfprintf[m[K(stderr,"Error: %s,%s\n", s1, s2);
  [01;31m[K^~~~~~~[m[K
[01m[Ksmsh.c:49:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kexit[m[Kâ€™
  [01;31m[Kexit[m[K(n);
  [01;31m[K^~~~[m[K
[01m[Ksmsh.c:50:1:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[K}[m[Kâ€™ token
 [01;31m[K}[m[K
 [01;31m[K^[m[K
[01m[Ksmsh.c:52:[m[K [01;31m[Kerror: [m[Kexpected â€˜[01m[K{[m[Kâ€™ at end of input
 
 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ smsh.c[K[K[K[K[K[Kvi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;63r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[63;1H"smsh.c" 52L, 920C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"split.c"[m
[35m#include [m[33m"exec.c"[m


[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[24;9Hprompt = DFL_PROMPT;[25;9Hsetup();[27;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[28;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[29;25Hresult = execute(arglist);[30;25Hfreelist(arglist);[31;17H}[32;17Hfree(cmdline);[33;9H}[34;17H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[38;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[42;9H{[43;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[44;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[45;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[48;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[49;9Hexit(n);
}


[34m~                                                                                                                                                                                                                                            [54;1H~                                                                                                                                                                                                                                            [55;1H~                                                                                                                                                                                                                                            [56;1H~                                                                                                                                                                                                                                            [57;1H~                                                                                                                                                                                                                                            [58;1H~                                                                                                                                                                                                                                            [59;1H~                                                                                                                                                                                                                                            [60;1H~                                                                                                                                                                                                                                            [61;1H~                                                                                                                                                                                                                                            [62;1H~                                                                                                                                                                                                                                            [m[63;220H1,1[11CAll[1;1H[?25h[?25l[63;220H2[2;1H[?25h[?25l[63;220H3[3;1H[?25h[?25l[63;220H4[4;1H[?25h[?25l[63;220H5[5;1H[?25h[?25l[63;220H6,0-1[6;1H[?25h[?25l[63;220H7,1  [7;1H[?25h[?25l[63;220H8[8;1H[?25h[?25l[63;220H9[9;1H[?25h[?25l[63;220H10,1[10;1H[?25h[?25l[63;221H1[11;1H[?25h[?25l[63;221H2[12;1H[?25h[?25l[63;221H3[13;1H[?25h[?25l[63;221H4,0-1[14;1H[?25h[?25l[63;221H5[15;1H[?25h[?25l[63;221H6,1  [16;1H[?25h[?25l[63;1H[K[63;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 52L, 920C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c[Kcmd[K[K[Kvi split.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;63r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[63;1H"split.c" 148L, 3370C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[27;9Hcurpath = getcurpath();[28;9Hprintf([33m"[m[35m%s[m[33m$[m[35m%s[m[33m"[m, curpath,prompt);[32C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m )[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens
 *          or NULL if line if no tokens on the line[m[63;220H1,1[11CTop[1;1H[?25h[?25l[63;220H2[2;1H[?25h[?25l[63;220H3[3;1H[?25h[?25l[63;220H4[4;1H[?25h[?25l[63;220H5,0-1[5;1H[?25h[?25l[63;220H6,1  [6;1H[?25h[?25l[63;220H7,0-1[7;1H[?25h[?25l[63;220H8,1  [8;1H[?25h[?25l[63;220H9[9;1H[?25h[?25l[63;220H10,1[10;1H[?25h[?25l[63;221H1[11;1H[?25h[?25l[63;221H2,0-1[12;1H[?25h[?25l[63;221H3,1  [13;1H[?25h[?25l[63;221H4[14;1H[?25h[?25l[63;221H5[15;1H[?25h[?25l[63;221H6[16;1H[?25h[?25l[63;221H7[17;1H[?25h[?25l[63;221H8[18;1H[?25h[?25l[63;221H9[19;1H[?25h[?25l[63;220H20[20;1H[?25h[?25l
[46m{[51;1H}[m[63;221H1[21;1H[?25h[?25l{[51;1H}[63;221H2,1-8[22;8H[?25h[?25l[63;221H3[23;8H[?25h[?25l[63;221H4[24;8H[?25h[?25l[63;221H5[25;8H[?25h[?25l[63;221H6[26;8H[?25h[?25l[63;221H7[27;8H[?25h[?25l[63;221H6[26;8H[?25h[?25l[63;221H5[25;8H[?25h[?25l[63;221H6[26;8H[?25h[?25l[63;221H7[27;8H[?25h[27m[23m[29m[m[H[2J[?25l[1;1H[36m *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[6;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[7;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[8;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[9;9H[32mint[m     c;[30C[36m/* input char           */[m[10;9H[32mchar[m    *curpath;[11;9Hcurpath = getcurpath();[12;9Hprintf([33m"[m[35m%s[m[33m$[m[35m%s[m[33m"[m, curpath,prompt);[32C[36m/* prompp[13;1Ht user  */[m[14;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[16;17H[36m/* need space? */[m[17;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[18;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[19;33Hbuf = emalloc([33mBUFSIZ[m);[20;25H[33melse[m[28C[36m/* or expand    */[m[21;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[22;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[23;17H}[24;63H27,1-8[8C12%[11;8H[?25h[27m[23m[29m[m[H[2J[?25l[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[27;9Hcurpath = getcurpath();[28;9Hprintf([33m"[m[35m%s[m[33m$[m[35m%s[m[33m"[m, curpath,prompt);[32C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m )[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H27,1-8[8CTop[27;8H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H27,1[10CTop[27;1H[?25h[?25ld[62;103H2[27;2H[?25h[?25ld[62;103H3[27;3H[?25h[?25l [62;103H2[27;2H[?25h[?25l [62;103H1[27;1H[?25h[62;1H[K[27;1H[?25l[62;100H27,1-8[8CTop[27;8H[?25h[?25l[62;101H8,2-9[28;9H[?25h[?25l[62;101H7[27;9H[?25h[?25l[27;61r[27;1H[2M[1;62r[60;1H[36m *          or NULL if line if no tokens on the line
 *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H27,2-9[8CTop[27;9H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H27,2-9[8CTop[27;9H[?25h[?25l[28;61r[28;1H[L[1;62r[27;9H[K[28;1H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[62;100H[K[62;100H28,1[10CTop[28;1H[?25h[?25l        [33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[62;103H2-9[28;9H[?25h[62;1H[K[28;8H[?25l[62;100H28,1-8[8CTop[28;8H[?25h[?25l[62;1H1 line less; before #3  5 seconds ago[62;100H[K[27;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;1H[K[62;100H27,2-9[8CTop1 line less; before #3  5 seconds ago[62;100H[K[62;100H27,2-9[8CTop[27;9H[?25h[?25l[62;1H2 more lines; before #2  8 seconds ago[62;100H[K[27;61r[27;1H[2L[1;62r[27;9Hcurpath = getcurpath();[28;9Hprintf([33m"[m[35m%s[m[33m$[m[35m%s[m[33m"[m, curpath,prompt);[32C[36m/* prompt user  */[m[62;1H[K[62;100H27,2-9[8CTop2 more lines; before #2  8 seconds ago[62;100H[K[62;100H27,2-9[8CTop[27;9H[?25h[?25l[62;101H8[28;9H[?25h[?25l[62;101H7[27;9H[?25h[?25l[27;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;1H[K[62;100H27,2-9[8CTop[27;9H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H27,2-9[8CTop[27;9H[?25h[?25l[28;61r[28;1H[L[1;62r[27;9H[K[28;1Hprintf([33m"[m[35m%s[m[33m$[m[35m%s[m[33m"[m, curpath,prompt);[32C[36m/* prompt user  */[m[62;100H[K[62;100H28,1[10CTop[28;1H[?25h[?25l        printf([33m"[m[35m%s[m[33m$[m[35m%s[m[33m"[m, curpath,prompt);[24C        [36m/* prompt user  */[m[62;103H2-9[28;9H[?25h[?25l[62;103H3-10[28;10H[?25h[?25l[62;103H4-11[28;11H[?25h[?25l[62;103H5-12[28;12H[?25h[?25l[62;103H6-13[28;13H[?25h[?25l[62;103H7-14[28;14H[?25h[?25lf[46m([23C)[m[62;103H8-15[28;15H[?25h[?25l[62;103H9-16[28;16H[?25h[?25l([23C)[62;103H10-17[28;17H[?25h[?25l[62;104H1-18[28;18H[?25h[?25l[62;104H2-19[28;19H[?25h[?25l[62;104H3-20[28;20H[?25h[?25l[62;104H4-21[28;21H[?25h[?25l[62;104H5-22[28;22H[?25h[?25l[62;104H6-23[28;23H[?25h[?25l[62;104H7-24[28;24H[?25h[?25l[62;104H8-25[28;25H[?25h[?25l[62;104H9-26[28;26H[?25h[?25l[62;104H8-25[28;25H[?25h[?25l[62;104H7-24[28;24H[?25h[?25l[62;104H6-23[28;23H[?25h[?25l[62;104H5-22[28;22H[?25h[?25l[62;104H4-21[28;21H[?25h[?25l[62;104H3-20[28;20H[?25h[?25l[62;104H2-19[28;19H[?25h[?25l[62;104H1-18[28;18H[?25h[?25l[62;104H2-19[28;19H[?25h[?25l[35m%s[m[33m"[m, curpath,prompt); [24C[36m/* prompt user  */[m[28;83H[K[28;19H[?25h[?25l[33ms"[m, curpath,prompt); [28;19H[?25h[?25l[33m"[m, curpath,prompt); [28;19H[?25h[?25l[62;104H3-20[28;20H[?25h[?25l[62;104H4-21[28;21H[?25h[?25lcurpath,prompt); [28;21H[?25h[?25lurpath,prompt); [28;21H[?25h[?25lrpath,prompt); [28;21H[?25h[?25lpath,prompt); [28;21H[?25h[?25lath,prompt); [28;21H[?25h[?25lth,prompt); [24C[36m/* prompt user  */[m[28;75H[K[28;21H[?25h[?25lh,prompt); [28;21H[?25h[?25l,prompt); [28;21H[?25h[?25l[62;101H9[29;21H[?25h[?25l[62;100H30,1    [30;1H[?25h[?25l[62;101H1,7-21[31;21H[?25h[?25l[62;101H2[32;21H[?25h[?25l[62;101H3,3-17[33;17H[?25h[?25l[62;101H4[34;17H[?25h[?25l[62;101H5[35;17H[?25h[?25l[62;101H6[36;17H[?25h[?25l[62;101H7[37;17H[?25h[?25l[32;40H[46m{[38;17H}[m[62;101H8,4-18[38;18H[?25h[?25l[32;40H{[38;17H}[62;101H9,1   [39;1H[?25h[?25l[62;100H40,7-21[40;21H[?25h[?25l[41;20H[46m([11C)[m[62;101H1[41;21H[?25h[?25l([11C)[62;101H2,3-17[42;17H[?25h[?25l[62;101H3,1   [43;1H[?25h[?25l[62;101H4,7-21[44;21H[?25h[?25l[45;20H[46m[[mpos++[46m][m[62;101H5[45;21H[?25h[?25l[29;41H[46m{[m[45;20H[pos++][46;9H[46m}[m[62;101H6,3-10[46;10H[?25h[?25l[29;41H{[46;9H}[62;101H7,14-21[47;21H[?25h[?25l[62;101H8,7-21 [48;21H[?25h[?25l[62;101H9,14-21[49;21H[?25h[?25l[62;100H50,13-20[50;20H[?25h[?25l[21;1H[46m{[51;1H}[m[62;101H1,2    [51;2H[?25h[?25l[21;1H{[51;1H}[62;101H2,1[52;1H[?25h[?25l[62;101H3,4[53;4H[?25h[?25l[62;101H4,17-21[54;21H[?25h[?25l[62;101H5,5    [55;5H[?25h[?25l[56;21H[35m[46m([19C)[m[62;101H6,21[56;21H[?25h[?25l[35m([19C)[m[62;101H7,1 [57;1H[?25h[?25l[62;101H8,21[58;21H[?25h[?25l[62;101H9,3 [59;3H[?25h[?25l[62;100H60,21[60;21H[?25h[?25l[62;101H1[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;100H[K[62;100H62,21[10C1%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,21[10C2%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,21[10C3%[61;19H[36m[46m()[?25h[?25l[1;61r[m[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H65,4[11C4%[60;19H[36m()
 */[?25h[?25l[1;61r[m[61;1H
[1;62r[61;1H{[62;100H[K[62;100H66,2[11C5%[61;2H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,11-21[7C6%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **args ;[62;100H[K[62;100H68,11-21[7C8%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,10-21[7C9%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,10-21      10%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,10-21      11%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,11-21      12%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H73,11-21      13%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H74,10-21      14%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H75,1[10C16%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,14-21      17%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,7-21[7C18%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H78,1[10C19%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,14-21      20%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,14-21      21%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H81,14-21      22%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H82,1[10C24%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H83,14-21      25%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H{[62;100H[K[62;100H84,3-10[7C26%[61;10H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H85,7-21[7C27%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H86,3-17[7C28%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H87,7-21[7C29%[61;20H[46m([13C)[61;21H[?25h[?25l[1;61r[m[61;1H
[1;62r[61;25H[33mbreak[m;[62;100H[K[62;100H88,3-17[7C31%[60;20H([13C)[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H89,1[10C32%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H90,7-21[7C33%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H91,7-21[7C34%[61;20H[46m([19C)[61;21H[?25h[?25l[1;61r[m[61;1H
[1;62r[61;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H92,3-17[7C35%[60;20H([19C)[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hbufspace += [33mBUFSIZ[m;[62;100H[K[62;100H93,3-17[7C36%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H94,3-17[7C37%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H95,4-18[7C39%[57;41H[46m{[61;17H}[?25h[?25l[1;61r[m[61;1H
[1;62r[62;100H[K[62;100H96,1[10C40%[56;41H{[60;17H}
[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* mark start, then find end of word */[m[62;100H[K[62;100H97,7-21[7C41%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hstart = cp;[62;100H[K[62;100H98,7-21[7C42%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hlen   = [33m1[m;[62;100H[K[62;100H99,7-21[7C43%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[62;100H[K[62;100H100,7-21      44%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hlen++;[62;100H[K[62;100H101,3-17      45%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H102,7-21      47%[61;21H[46m[[8C][61;21H[?25h[?25l[1;61r[m[61;1H
[1;62r[61;9H}[62;100H[K[62;100H103,3-10      48%[42;9H[46m{[m[60;21H[[8C][61;9H[46m}[?25h[?25l[1;61r[m[61;1H
[1;62r[61;9Hargs[argnum] = [33mNULL[m;[62;100H[K[62;100H104,14-21     49%[41;9H{[60;9H}[61;13H[46m[[margnum[46m][?25h[?25l[1;61r[m[61;1H
[1;62r[61;9H[33mreturn[m args;[62;100H[K[62;100H105,14-21     50%[60;13H[argnum][61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H106,2[9C51%[21;1H[46m{[61;1H}[?25h[?25l[1;61r[m[61;1H
[1;62r[62;100H[K[62;100H107,1[9C52%[20;1H{[60;1H}
[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H108,3[9C54%[61;3H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: constructor for strings[m[62;100H[K[62;100H109,21[8C55%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: a string, never NULL[m[62;100H[K[62;100H110,21[8C56%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H111,4[9C57%[61;4H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[62;100H[K[62;100H112,21[8C58%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H113,2[9C59%[61;2H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m *rv = emalloc(l+[33m1[m);[62;100H[K[62;100H114,14-21     60%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H115,1[9C62%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hrv[l] = [35m'\0'[m;[62;100H[K[62;100H116,14-21     63%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hstrncpy(rv, s, l);[62;100H[K[62;100H117,14-21     64%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H118,12-19     65%[61;19H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H119,2[9C66%[55;1H[46m{[61;1H}[?25h[?25l[1;61r[m[61;1H
[1;62r[62;100H[K[62;100H120,1[9C67%[54;1H{[60;1H}
[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m[62;100H[K[62;100H121,6[9C68%[61;6H[?25h[?25l[1;61r[61;1H
[1;62r[61;1Hfreelist([32mchar[m **list)[62;100H[K[62;100H122,21[8C70%[61;9H[46m([11C)[?25h[?25l[1;61r[m[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H123,3[9C71%[60;9H([11C)[61;3H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: free the list returned by splitline[m[62;100H[K[62;100H124,21[8C72%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: nothing[m[62;100H[K[62;100H125,20[8C73%[61;20H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: free all strings in list and then free the list[m[62;100H[K[62;100H126,21[8C74%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H127,4[9C75%[61;4H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H128,2[9C77%[61;2H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **cp = list;[62;100H[K[62;100H129,11-21     78%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp )[62;100H[K[62;100H130,14-21     79%[61;14H[46m([m *cp [46m)[?25h[?25l[1;61r[m[61;1H
[1;62r[61;17Hfree(*cp++);[62;100H[K[62;100H131,7-21      80%[60;14H( *cp )[61;21H[46m([m*cp++[46m)[61;21H[?25h[?25l[1;61r[m[61;1H
[1;62r[61;9Hfree(list);[62;100H[K[62;100H132,13-20     81%[60;21H(*cp++)[61;20H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H133,2[9C82%[56;1H[46m{[61;1H}[?25h[?25l[1;61r[m[61;1H
[1;62r[62;100H[K[62;100H134,1[9C83%[55;1H{[60;1H}
[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m * emalloc([32msize_t[m n)[62;100H[K[62;100H135,21[8C85%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H136,2[9C86%[61;2H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv ;[62;100H[K[62;100H137,12-19     87%[61;19H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = malloc(n)) == [33mNULL[m )[62;100H[K[62;100H138,14-21     88%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H139,7-21      89%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H140,12-19     90%[61;19H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H141,2[9C91%[56;1H[46m{[61;1H}[?25h[?25l[1;61r[m[61;1H
[1;62r[61;1H[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[62;100H[K[62;100H142,21[8C93%[55;1H{[60;1H}[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H143,2[9C94%[61;2H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv;[62;100H[K[62;100H144,11-18     95%[61;18H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[62;100H[K[62;100H145,14-21     96%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H146,7-21      97%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H147,12-19     98%[61;19H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H148,2[9CBot[56;1H[46m{[61;1H}[?25h[?25l[m`[56;1H{[61;1H}[62;104H3[61;3H[?25h[?25l[61;2H[K[56;1H[46m{[61;1H}[m[62;104H2[61;2H[?25h[62;1H[K[61;1H[?25l[62;100H148,1[9CBot[61;1H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"split.c" 148L, 3336C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c [2Pmsh.cgcc smsh.c -o test.o
In file included from [01m[Ksmsh.c:12[m[K:
[01m[Ksplit.c:[m[K In function â€˜[01m[Knext_cmd[m[Kâ€™:
[01m[Ksplit.c:28:14:[m[K [01;31m[Kerror: [m[Kexpected expression before â€˜[01m[K,[m[Kâ€™ token
  printf("%s",[01;31m[K,[m[Kprompt);    /* prompt user */
              [01;31m[K^[m[K
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kfatal[m[Kâ€™:
[01m[Ksmsh.c:48:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kfprintf[m[Kâ€™
  [01;31m[Kfprintf[m[K(stderr,"Error: %s,%s\n", s1, s2);
  [01;31m[K^~~~~~~[m[K
[01m[Ksmsh.c:49:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kexit[m[Kâ€™
  [01;31m[Kexit[m[K(n);
  [01;31m[K^~~~[m[K
[01m[Ksmsh.c:50:1:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[K}[m[Kâ€™ token
 [01;31m[K}[m[K
 [01;31m[K^[m[K
[01m[Ksmsh.c:52:[m[K [01;31m[Kerror: [m[Kexpected â€˜[01m[K{[m[Kâ€™ at end of input
 
 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsc[Kh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 52L, 920C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"split.c"[m
[35m#include [m[33m"exec.c"[m


[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[24;9Hprompt = DFL_PROMPT;[25;9Hsetup();[27;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[28;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[29;25Hresult = execute(arglist);[30;25Hfreelist(arglist);[31;17H}[32;17Hfree(cmdline);[33;9H}[34;17H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[38;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[42;9H{[43;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[44;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[45;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[48;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[49;9Hexit(n);
}


[34m~                                                                                                                    [54;1H~                                                                                                                    [55;1H~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"split.c" 148L, 3336C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[28;9Hprintf([33m"[m[35m%s[m[33m"[m,,prompt);[27C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m )[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[51;1H}[m[62;101H1[21;1H[?25h[?25l{[51;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H9,0-1[39;1H[?25h[?25l[62;100H40,1-8[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3,0-1[43;1H[?25h[?25l[62;101H4,1-8[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6[46;8H[?25h[?25l[62;101H7[47;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[62;100H50[50;8H[?25h[?25l[21;1H[46m{[51;1H}[m[62;101H1,1  [51;1H[?25h[?25l[21;1H{[51;1H}[62;101H2,0-1[52;1H[?25h[?25l[62;101H3,1  [53;1H[?25h[?25l[62;101H4[54;1H[?25h[?25l[62;101H5[55;1H[?25h[?25l[62;101H6[56;1H[?25h[?25l[62;101H7,0-1[57;1H[?25h[?25l[62;101H8,1  [58;1H[?25h[?25l[62;101H9[59;1H[?25h[?25l[62;100H60[60;1H[?25h[?25l[62;101H1[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;1H[K[62;100H62,1[11C1%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,1[11C2%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,1[11C3%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H65,1[11C4%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H66,1[11C5%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,1-8[9C6%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **args ;[62;100H[K[62;100H68,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,1-8[9C9%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,1-8[8C11%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H73,1-8[8C13%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H74,1-8[8C14%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H75,0-1[8C16%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,1-8[8C17%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,1-8[8C18%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H78,0-1[8C19%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,1-8[8C20%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,1-8[8C21%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H81,1-8[8C22%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H82,0-1[8C24%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H83,1-8[8C25%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H{[62;100H[K[62;100H84,1-8[8C26%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H85,1-8[8C27%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H86,1-8[8C28%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H87,1-8[8C29%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mbreak[m;[62;100H[K[62;100H88,1-8[8C31%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H89,0-1[8C32%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H90,1-8[8C33%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H91,1-8[8C34%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H92,1-8[8C35%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hbufspace += [33mBUFSIZ[m;[62;100H[K[62;100H93,1-8[8C36%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H94,1-8[8C37%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H95,1-8[8C39%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H96,0-1[8C40%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* mark start, then find end of word */[m[62;100H[K[62;100H97,1-8[8C41%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hstart = cp;[62;100H[K[62;100H98,1-8[8C42%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hlen   = [33m1[m;[62;100H[K[62;100H99,1-8[8C43%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[62;100H[K[62;100H100,1-8[7C44%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hlen++;[62;100H[K[62;100H101,1-8[7C45%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H102,1-8[7C47%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H}[62;100H[K[62;100H103,1-8[7C48%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs[argnum] = [33mNULL[m;[62;100H[K[62;100H104,1-8[7C49%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m args;[62;100H[K[62;100H105,1-8[7C50%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[21;1H[46m{[61;1H}[m[62;100H[K[62;100H106,1[9C51%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[20;1H{[60;1H}[62;100H[K[62;100H107,0-1[7C52%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H108,1[9C54%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: constructor for strings[m[62;100H[K[62;100H109,1[9C55%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: a string, never NULL[m[62;100H[K[62;100H110,1[9C56%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H111,1[9C57%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[62;100H[K[62;100H112,1[9C58%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H113,1[9C59%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m *rv = emalloc(l+[33m1[m);[62;100H[K[62;100H114,1-8[7C60%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H115,0-1[7C62%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hrv[l] = [35m'\0'[m;[62;100H[K[62;100H116,1-8[7C63%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hstrncpy(rv, s, l);[62;100H[K[62;100H117,1-8[7C64%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H118,1-8[7C65%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H[46m{[61;1H}[m[62;100H[K[62;100H119,1[9C66%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[54;1H{[60;1H}[62;100H[K[62;100H120,0-1[7C67%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m[62;100H[K[62;100H121,1[9C68%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1Hfreelist([32mchar[m **list)[62;100H[K[62;100H122,1[9C70%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H123,1[9C71%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: free the list returned by splitline[m[62;100H[K[62;100H124,1[9C72%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: nothing[m[62;100H[K[62;100H125,1[9C73%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: free all strings in list and then free the list[m[62;100H[K[62;100H126,1[9C74%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H127,1[9C75%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H128,1[9C77%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **cp = list;[62;100H[K[62;100H129,1-8[7C78%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp )[62;100H[K[62;100H130,1-8[7C79%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfree(*cp++);[62;100H[K[62;100H131,1-8[7C80%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hfree(list);[62;100H[K[62;100H132,1-8[7C81%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H133,1[9C82%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H{[60;1H}[62;100H[K[62;100H134,0-1[7C83%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m * emalloc([32msize_t[m n)[62;100H[K[62;100H135,1[9C85%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H136,1[9C86%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv ;[62;100H[K[62;100H137,1-8[7C87%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = malloc(n)) == [33mNULL[m )[62;100H[K[62;100H138,1-8[7C88%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H139,1-8[7C89%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H140,1-8[7C90%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H141,1[9C91%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H{[60;1H}
[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[62;100H[K[62;100H142,1[9C93%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H143,1[9C94%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv;[62;100H[K[62;100H144,1-8[7C95%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[62;100H[K[62;100H145,1-8[7C96%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H146,1-8[7C97%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H147,1-8[7C98%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H148,1[9CBot[61;1H[?25h[?25l[56;1H{[61;1H}[62;102H7,1-8[60;8H[?25h[?25l[62;102H6[59;8H[?25h[?25l[62;102H5[58;8H[?25h[?25l[62;102H4[57;8H[?25h[?25l[56;1H[46m{[61;1H}[m[62;102H3,1  [56;1H[?25h[?25l{[61;1H}[62;102H2[55;1H[?25h[?25l[49;1H[46m{[54;1H}[m[62;102H1[54;1H[?25h[?25l[49;1H{[54;1H}[62;102H0,1-8[53;8H[?25h[?25l[62;101H39[52;8H[?25h[?25l[62;102H8[51;8H[?25h[?25l[62;102H7[50;8H[?25h[?25l[49;1H[46m{[54;1H}[m[62;102H6,1  [49;1H[?25h[?25l{[54;1H}[62;102H5[48;1H[?25h[?25l[62;102H4,0-1[47;1H[?25h[?25l[41;1H[46m{[46;1H}[m[62;102H3,1  [46;1H[?25h[?25l[41;1H{[46;1H}[62;102H2,1-8[45;8H[?25h[?25l[62;102H1[44;8H[?25h[?25l[62;102H0[43;8H[?25h[?25l[62;101H29[42;8H[?25h[?25l[41;1H[46m{[46;1H}[m[62;102H8,1  [41;1H[?25h[?25l{[46;1H}[62;102H7[40;1H[?25h[?25l[62;102H6[39;1H[?25h[?25l[62;102H5[38;1H[?25h[?25l[62;102H4[37;1H[?25h[?25l[62;102H3[36;1H[?25h[?25l[62;102H2[35;1H[?25h[?25l[62;102H1[34;1H[?25h[?25l[62;102H0,0-1[33;1H[?25h[?25l[26;1H[46m{[32;1H}[m[62;101H19,1  [32;1H[?25h[?25l[26;1H{[32;1H}[62;102H8,1-8[31;8H[?25h[?25l[62;102H7[30;8H[?25h[?25l[62;102H6[29;8H[?25h[?25l[62;102H5,0-1[28;1H[?25h[?25l[62;102H4,1-8[27;8H[?25h[?25l[26;1H[46m{[32;1H}[m[62;102H3,1  [26;1H[?25h[?25l{[32;1H}[62;102H2[25;1H[?25h[?25l[62;102H1[24;1H[?25h[?25l[62;102H0[23;1H[?25h[?25l[62;101H09[22;1H[?25h[?25l[62;102H8[21;1H[?25h[?25l[62;102H7,0-1[20;1H[?25h[?25l[62;102H6,1  [19;1H[?25h[?25l[62;102H5,1-8[18;8H[?25h[?25l[62;102H4[17;8H[?25h[?25l[62;102H3[16;8H[?25h[?25l[62;102H2[15;8H[?25h[?25l[62;102H1[14;8H[?25h[?25l[62;102H0[13;8H[?25h[?25l[62;100H99,1-8 [12;8H[?25h[?25l[62;101H8[11;8H[?25h[?25l[62;101H7[10;8H[?25h[?25l[62;101H6,0-1[9;1H[?25h[?25l[62;101H5,1-8[8;8H[?25h[?25l[62;101H4[7;8H[?25h[?25l[62;101H3[6;8H[?25h[?25l[62;101H2[5;8H[?25h[?25l[62;101H1[4;8H[?25h[?25l[62;101H0[3;8H[?25h[?25l[62;100H89,0-1[2;1H[?25h[?25l[62;101H8,1-8[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H87,1-8[8C98%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25Hcp++;[62;100H[K[62;100H86,1-8[8C97%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H85,1-8[8C96%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H{[62;100H[K[62;100H84,1-8[8C95%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H83,1-8[8C94%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H82,0-1[8C93%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H81,1-8[8C91%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,1-8[8C90%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,1-8[8C89%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H78,0-1[8C88%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,1-8[8C87%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,1-8[8C86%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H75,0-1[8C85%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     len;[62;100H[K[62;100H74,1-8[8C83%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *start;[62;100H[K[62;100H73,1-8[8C82%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,1-8[8C81%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,1-8[8C80%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,1-8[8C79%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,1-8[8C78%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    **args ;[62;100H[K[62;100H68,1-8[8C77%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,1-8[8C75%[1;8H[?25h[?25l[41;61r[41;1H[L[1;62r[1;1H[46m{[m[1;9H[K[2;18Hnewstr();[3;9H[32mchar[m    **args ;[3;25H[K[4;17Hspots = [33m0[m;   [22C[36mspot[m[5;17Hbufspace = [33m0[m;[22C[36mbytes in table[m[6;9H[32mint[m     argnum = [33m0[m[25C[36mslots used   [m[7;18Hcp = line;[21C[36m/* pos in string        */[m[8;9H[32mchar[m    *start;[9;9H[32mint[m     len;[10;9H[K[11;9H[33mif[m ( line == [33mNULL[m ) [20C[36m/* handle special case  */[m[12;17H[33mreturn[m [33mNULL[m;[13;9H[K[14;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[15;9Hbufspace[9C;[15;27H[K[16;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;9H[K[18;9H[33mwhile[m( *cp != [35m'\0'[m )[19;9H{[19;17H[K[20;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[21;17H        cp++;[21;30H[K[22;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[23;25H[33mbreak[m;[24;17H[K[25;17H[36m/* make sure the array has room (+1 for NULL) */[m[26;17H[33mif[m ( argnum+[33m1[m >= spots ){[26;42H[K[27;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;25Hbufspace += [33mBUFSIZ[m;[28;44H[K[29;17H [7Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;17H}[31;17H[K[32;17H[36m/* mark start, then find end of word */[m[33;17Hstart = cp;[34;17Hlen   = [33m1[m;[34;27H[K[35;17H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;17H        len++;[36;32H[K[37;9H [7Cargs[argnum++] = newstr(start, len);[38;9H}[38;10H[K[39;9Hargs[argnum] = [33mNULL[m;
 [7C[33mreturn[m args;
[46m}[m[62;100H[K[62;100H66,1[10C74%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m */[m
{[42;1H}[62;100H[K[62;100H65,1[10C73%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,1[10C72%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,1[10C71%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *          or NULL if line if no tokens on the line[m[62;100H[K[62;100H62,1[10C70%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H[K[62;100H61,1[10C68%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * purpose: split a line into array of white-space separated tokens[m[62;100H[K[62;100H60,1[10C67%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/*[m[62;100H[K[62;100H59,1[10C66%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[32mchar[m ** splitline([32mchar[m *line)[62;100H[K[62;100H58,1[10C65%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H57,0-1[8C64%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[62;100H[K[62;100H56,1[10C63%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m **/[m[62;100H[K[62;100H55,1[10C62%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m **     splitline ( parse a line into an array of strings )[m[62;100H[K[62;100H54,1[10C60%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/**[m[62;100H[K[62;100H53,1[10C59%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H52,0-1[8C58%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H}[62;100H[K[62;100H51,1[10C57%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mreturn[m buf;[62;100H[K[62;100H50,1-8[8C56%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hbuf[pos] = [35m'\0'[m;[62;100H[K[62;100H49,1-8[8C55%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[62;100H[K[62;100H48,1-8[8C54%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[62;100H[K[62;100H47,1-8[8C52%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H}[62;100H[K[62;100H46,1-8[8C51%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17Hbuf[pos++] = c;[62;100H[K[62;100H45,1-8[8C50%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[36m/* no, add to buffer */[m[62;100H[K[62;100H44,1-8[8C49%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H43,0-1[8C48%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25H[33mbreak[m;[62;100H[K[62;100H42,1-8[8C47%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mif[m ( c == [35m'\n'[m )[62;100H[K[62;100H41,1-8[8C45%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[36m/* end of command? */[m[62;100H[K[62;100H40,1-8[8C44%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H39,0-1[8C43%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H}[62;100H[K[62;100H38,1-8[8C42%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[62;100H[K[62;100H37,1-8[8C41%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H36,1-8[8C40%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25H[33melse[m[28C[36m/* or expand    */[m[62;100H[K[62;100H35,1-8[8C39%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;33Hbuf = emalloc([33mBUFSIZ[m);[62;100H[K[62;100H34,1-8[8C37%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[62;100H[K[62;100H33,1-8[8C36%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[62;100H[K[62;100H32,1-8[8C35%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[36m/* need space? */[m[62;100H[K[62;100H31,1-8[8C34%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H30,0-1[8C33%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[62;100H[K[62;100H29,1-8[8C32%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hprintf([33m"[m[35m%s[m[33m"[m,,prompt);[27C[36m/* prompt user  */[m[62;100H[K[62;100H28,1-8[8C31%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H27,1-8[8C29%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *curpath;[62;100H[K[62;100H26,1-8[8C28%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     c;[30C[36m/* input char           */[m[62;100H[K[62;100H25,1-8[8C27%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[62;100H[K[62;100H24,1-8[8C26%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[62;100H[K[62;100H23,1-8[8C25%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[62;100H[K[62;100H22,1-8[8C24%[1;8H[?25h[?25l[31;61r[31;1H[L[1;62r[1;1H[46m{[m[1;9H[K[2;9H[32mchar[m    *buf ;       [23C[36mhe buffer[m[3;17Hbufspace = [33m0[m;[22C[36mtotal size      [m[4;17Hpos = [33m0[m;[27C[36mcurrent position[m[5;9H[32mint[m     c;       [23C[36m/* input char           */[m[6;9H[32mchar[m    *curpath;[7;9H[K[8;9Hprintf([33m"[m[35m%s[m[33m"[m,,prompt);            [15C[36m/* prompt user  */[m[9;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[10;17H[K[11;17H[36m/* need space? */[m[11;34H[K[12;17H[33mif[m( pos+[33m1[m >=[10C){    [15C[36m1 for \0   [m[13;25H[33mif[m ( bufspace == [33m0[m )            [36m/* y: 1st time  */[m[14;25H        buf = emalloc([33mBUFSIZ[m);[14;57H[K[15;25H[33melse[m                            [36m/* or expand    */[m[16;25H        buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[16;69H[K[17;17H [7Cbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[18;17H}[19;17H[K[20;17H[36m/* end of command? */[m[21;17H[33mif[m ( c == [35m'\n'[m )[22;25H[33mbreak[m;[23;17H[K[24;17H[36m/* no, add to buffer */[m[25;9H [7Cbuf[pos++] = c;[26;9H}[26;10H[K[27;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[16C[36mEOF and no input[m[28;9H        [33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[29;9Hbuf[pos] = [35m'\0'[m;
 [7C[33mreturn[m buf;
[46m}[m[62;100H[K[62;100H21,1[10C22%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m */[m
{[32;1H}[62;100H[K[62;100H20,1[10C21%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[62;100H[K[62;100H19,1[10C20%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *          calls fatal from emalloc()[m[62;100H[K[62;100H18,1[10C19%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[62;100H[K[62;100H17,1[10C18%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * returns: dynamically allocated string holding command line[m[62;100H[K[62;100H16,1[10C17%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * purpose: read next command line from fp[m[62;100H[K[62;100H15,1[10C16%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/*[m[62;100H[K[62;100H14,1[10C14%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[62;100H[K[62;100H13,1[10C13%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H12,0-1[8C12%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#include        [m[33m"smsh.h"[m[62;100H[K[62;100H11,1[10C11%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#include        [m[33m<string.h>[m[62;100H[K[62;100H10,1[10C10%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#include        [m[33m<stdlib.h>[m[62;100H[K[62;100H9,1[12C9%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#include        [m[33m<stdio.h>[m[62;100H[K[62;100H8,1[12C8%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H7,0-1[10C6%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m */[m[62;100H[K[62;100H6,1[12C5%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H5,0-1[10C4%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[62;100H[K[62;100H4,1[12C3%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[62;100H[K[62;100H3,1[12C2%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *    [m[62;100H[K[62;100H2,1[12C1%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[62;100H[K[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[51;1H}[m[62;101H1[21;1H[?25h[?25l{[51;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H9,0-1[39;1H[?25h[?25l[62;100H40,1-8[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3,0-1[43;1H[?25h[?25l[62;101H4,1-8[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6[46;8H[?25h[?25l[62;101H7[47;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[62;100H50[50;8H[?25h[?25l[21;1H[46m{[51;1H}[m[62;101H1,1  [51;1H[?25h[?25l[21;1H{[51;1H}[62;101H2,0-1[52;1H[?25h[?25l[62;101H3,1  [53;1H[?25h[?25l[62;101H4[54;1H[?25h[?25l[62;101H5[55;1H[?25h[?25l[62;101H6[56;1H[?25h[?25l[62;101H7,0-1[57;1H[?25h[?25l[62;101H8,1  [58;1H[?25h[?25l[62;101H9[59;1H[?25h[?25l[62;100H60[60;1H[?25h[?25l[62;101H1[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;100H[K[62;100H62,1[11C1%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,1[11C2%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,1[11C3%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H65,1[11C4%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H66,1[11C5%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,1-8[9C6%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **args ;[62;100H[K[62;100H68,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,1-8[9C9%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,1-8[8C11%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H73,1-8[8C13%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H74,1-8[8C14%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H75,0-1[8C16%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,1-8[8C17%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,1-8[8C18%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H78,0-1[8C19%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,1-8[8C20%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,1-8[8C21%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H81,1-8[8C22%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H82,0-1[8C24%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H83,1-8[8C25%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H{[62;100H[K[62;100H84,1-8[8C26%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H85,1-8[8C27%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H86,1-8[8C28%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H87,1-8[8C29%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mbreak[m;[62;100H[K[62;100H88,1-8[8C31%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H89,0-1[8C32%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H90,1-8[8C33%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H91,1-8[8C34%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H92,1-8[8C35%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hbufspace += [33mBUFSIZ[m;[62;100H[K[62;100H93,1-8[8C36%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H94,1-8[8C37%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H95,1-8[8C39%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H96,0-1[8C40%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* mark start, then find end of word */[m[62;100H[K[62;100H97,1-8[8C41%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hstart = cp;[62;100H[K[62;100H98,1-8[8C42%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hlen   = [33m1[m;[62;100H[K[62;100H99,1-8[8C43%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[62;100H[K[62;100H100,1-8[7C44%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hlen++;[62;100H[K[62;100H101,1-8[7C45%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H102,1-8[7C47%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H}[62;100H[K[62;100H103,1-8[7C48%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs[argnum] = [33mNULL[m;[62;100H[K[62;100H104,1-8[7C49%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m args;[62;100H[K[62;100H105,1-8[7C50%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[21;1H[46m{[61;1H}[m[62;100H[K[62;100H106,1[9C51%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[20;1H{[60;1H}[62;100H[K[62;100H107,0-1[7C52%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H108,1[9C54%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: constructor for strings[m[62;100H[K[62;100H109,1[9C55%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: a string, never NULL[m[62;100H[K[62;100H110,1[9C56%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H111,1[9C57%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[62;100H[K[62;100H112,1[9C58%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H113,1[9C59%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m *rv = emalloc(l+[33m1[m);[62;100H[K[62;100H114,1-8[7C60%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H115,0-1[7C62%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hrv[l] = [35m'\0'[m;[62;100H[K[62;100H116,1-8[7C63%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hstrncpy(rv, s, l);[62;100H[K[62;100H117,1-8[7C64%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H118,1-8[7C65%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H[46m{[61;1H}[m[62;100H[K[62;100H119,1[9C66%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[54;1H{[60;1H}[62;100H[K[62;100H120,0-1[7C67%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m[62;100H[K[62;100H121,1[9C68%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1Hfreelist([32mchar[m **list)[62;100H[K[62;100H122,1[9C70%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H123,1[9C71%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: free the list returned by splitline[m[62;100H[K[62;100H124,1[9C72%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: nothing[m[62;100H[K[62;100H125,1[9C73%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: free all strings in list and then free the list[m[62;100H[K[62;100H126,1[9C74%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H127,1[9C75%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H128,1[9C77%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **cp = list;[62;100H[K[62;100H129,1-8[7C78%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp )[62;100H[K[62;100H130,1-8[7C79%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfree(*cp++);[62;100H[K[62;100H131,1-8[7C80%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hfree(list);[62;100H[K[62;100H132,1-8[7C81%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H133,1[9C82%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H{[60;1H}[62;100H[K[62;100H134,0-1[7C83%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m * emalloc([32msize_t[m n)[62;100H[K[62;100H135,1[9C85%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H136,1[9C86%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv ;[62;100H[K[62;100H137,1-8[7C87%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = malloc(n)) == [33mNULL[m )[62;100H[K[62;100H138,1-8[7C88%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H139,1-8[7C89%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H140,1-8[7C90%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H141,1[9C91%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H{[60;1H}
[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[62;100H[K[62;100H142,1[9C93%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H143,1[9C94%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv;[62;100H[K[62;100H144,1-8[7C95%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[62;100H[K[62;100H145,1-8[7C96%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H146,1-8[7C97%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H147,1-8[7C98%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H148,1[9CBot[61;1H[?25h[?25l[56;1H{[61;1H}[62;102H7,1-8[60;8H[?25h[?25l[62;102H6[59;8H[?25h[?25l[62;102H5[58;8H[?25h[?25l[62;102H4[57;8H[?25h[?25l[56;1H[46m{[61;1H}[m[62;102H3,1  [56;1H[?25h[?25l{[61;1H}[62;102H2[55;1H[?25h[?25l[49;1H[46m{[54;1H}[m[62;102H1[54;1H[?25h[?25l[49;1H{[54;1H}[62;102H0,1-8[53;8H[?25h[?25l[62;101H39[52;8H[?25h[?25l[62;102H8[51;8H[?25h[?25l[62;102H7[50;8H[?25h[?25l[49;1H[46m{[54;1H}[m[62;102H6,1  [49;1H[?25h[?25l{[54;1H}[62;102H5[48;1H[?25h[?25l[62;102H4,0-1[47;1H[?25h[?25l[41;1H[46m{[46;1H}[m[62;102H3,1  [46;1H[?25h[?25l[41;1H{[46;1H}[62;102H2,1-8[45;8H[?25h[?25l[62;102H1[44;8H[?25h[?25l[62;102H0[43;8H[?25h[?25l[62;101H29[42;8H[?25h[?25l[41;1H[46m{[46;1H}[m[62;102H8,1  [41;1H[?25h[?25l{[46;1H}[62;102H7[40;1H[?25h[?25l[62;102H6[39;1H[?25h[?25l[62;102H5[38;1H[?25h[?25l[62;102H4[37;1H[?25h[?25l[62;102H3[36;1H[?25h[?25l[62;102H2[35;1H[?25h[?25l[62;102H1[34;1H[?25h[?25l[62;102H0,0-1[33;1H[?25h[?25l[26;1H[46m{[32;1H}[m[62;101H19,1  [32;1H[?25h[?25l[26;1H{[32;1H}[62;102H8,1-8[31;8H[?25h[?25l[62;102H7[30;8H[?25h[?25l[62;102H6[29;8H[?25h[?25l[62;102H5,0-1[28;1H[?25h[?25l[62;102H4,1-8[27;8H[?25h[?25l[26;1H[46m{[32;1H}[m[62;102H3,1  [26;1H[?25h[?25l{[32;1H}[62;102H2[25;1H[?25h[?25l[62;102H1[24;1H[?25h[?25l[62;102H0[23;1H[?25h[?25l[62;101H09[22;1H[?25h[?25l[62;102H8[21;1H[?25h[?25l[62;102H7,0-1[20;1H[?25h[?25l[62;102H6,1  [19;1H[?25h[?25l[62;102H5,1-8[18;8H[?25h[?25l[62;102H4[17;8H[?25h[?25l[62;102H3[16;8H[?25h[?25l[62;102H2[15;8H[?25h[?25l[62;102H1[14;8H[?25h[?25l[62;102H0[13;8H[?25h[?25l[62;100H99,1-8 [12;8H[?25h[?25l[62;101H8[11;8H[?25h[?25l[62;101H7[10;8H[?25h[?25l[62;101H6,0-1[9;1H[?25h[?25l[62;101H5,1-8[8;8H[?25h[?25l[62;101H4[7;8H[?25h[?25l[62;101H3[6;8H[?25h[?25l[62;101H2[5;8H[?25h[?25l[62;101H1[4;8H[?25h[?25l[62;101H0[3;8H[?25h[?25l[62;100H89,0-1[2;1H[?25h[?25l[62;101H8,1-8[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H87,1-8[8C98%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25Hcp++;[62;100H[K[62;100H86,1-8[8C97%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H85,1-8[8C96%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H{[62;100H[K[62;100H84,1-8[8C95%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H83,1-8[8C94%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H82,0-1[8C93%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H81,1-8[8C91%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,1-8[8C90%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,1-8[8C89%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H78,0-1[8C88%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,1-8[8C87%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,1-8[8C86%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H75,0-1[8C85%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     len;[62;100H[K[62;100H74,1-8[8C83%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *start;[62;100H[K[62;100H73,1-8[8C82%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,1-8[8C81%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,1-8[8C80%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,1-8[8C79%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,1-8[8C78%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    **args ;[62;100H[K[62;100H68,1-8[8C77%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,1-8[8C75%[1;8H[?25h[?25l[41;61r[41;1H[L[1;62r[1;1H[46m{[m[1;9H[K[2;18Hnewstr();[3;9H[32mchar[m    **args ;[3;25H[K[4;17Hspots = [33m0[m;   [22C[36mspot[m[5;17Hbufspace = [33m0[m;[22C[36mbytes in table[m[6;9H[32mint[m     argnum = [33m0[m[25C[36mslots used   [m[7;18Hcp = line;[21C[36m/* pos in string        */[m[8;9H[32mchar[m    *start;[9;9H[32mint[m     len;[10;9H[K[11;9H[33mif[m ( line == [33mNULL[m ) [20C[36m/* handle special case  */[m[12;17H[33mreturn[m [33mNULL[m;[13;9H[K[14;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[15;9Hbufspace[9C;[15;27H[K[16;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;9H[K[18;9H[33mwhile[m( *cp != [35m'\0'[m )[19;9H{[19;17H[K[20;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[21;17H        cp++;[21;30H[K[22;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[23;25H[33mbreak[m;[24;17H[K[25;17H[36m/* make sure the array has room (+1 for NULL) */[m[26;17H[33mif[m ( argnum+[33m1[m >= spots ){[26;42H[K[27;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;25Hbufspace += [33mBUFSIZ[m;[28;44H[K[29;17H [7Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;17H}[31;17H[K[32;17H[36m/* mark start, then find end of word */[m[33;17Hstart = cp;[34;17Hlen   = [33m1[m;[34;27H[K[35;17H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;17H        len++;[36;32H[K[37;9H [7Cargs[argnum++] = newstr(start, len);[38;9H}[38;10H[K[39;9Hargs[argnum] = [33mNULL[m;
 [7C[33mreturn[m args;
[46m}[m[62;100H[K[62;100H66,1[10C74%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m */[m
{[42;1H}[62;100H[K[62;100H65,1[10C73%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,1[10C72%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,1[10C71%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *          or NULL if line if no tokens on the line[m[62;100H[K[62;100H62,1[10C70%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H[K[62;100H61,1[10C68%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * purpose: split a line into array of white-space separated tokens[m[62;100H[K[62;100H60,1[10C67%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/*[m[62;100H[K[62;100H59,1[10C66%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[32mchar[m ** splitline([32mchar[m *line)[62;100H[K[62;100H58,1[10C65%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H57,0-1[8C64%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[62;100H[K[62;100H56,1[10C63%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m **/[m[62;100H[K[62;100H55,1[10C62%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m **     splitline ( parse a line into an array of strings )[m[62;100H[K[62;100H54,1[10C60%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/**[m[62;100H[K[62;100H53,1[10C59%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H52,0-1[8C58%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H}[62;100H[K[62;100H51,1[10C57%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mreturn[m buf;[62;100H[K[62;100H50,1-8[8C56%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hbuf[pos] = [35m'\0'[m;[62;100H[K[62;100H49,1-8[8C55%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[62;100H[K[62;100H48,1-8[8C54%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[62;100H[K[62;100H47,1-8[8C52%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H}[62;100H[K[62;100H46,1-8[8C51%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17Hbuf[pos++] = c;[62;100H[K[62;100H45,1-8[8C50%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[36m/* no, add to buffer */[m[62;100H[K[62;100H44,1-8[8C49%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H43,0-1[8C48%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25H[33mbreak[m;[62;100H[K[62;100H42,1-8[8C47%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mif[m ( c == [35m'\n'[m )[62;100H[K[62;100H41,1-8[8C45%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[36m/* end of command? */[m[62;100H[K[62;100H40,1-8[8C44%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H39,0-1[8C43%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H}[62;100H[K[62;100H38,1-8[8C42%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[62;100H[K[62;100H37,1-8[8C41%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H36,1-8[8C40%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25H[33melse[m[28C[36m/* or expand    */[m[62;100H[K[62;100H35,1-8[8C39%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;33Hbuf = emalloc([33mBUFSIZ[m);[62;100H[K[62;100H34,1-8[8C37%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[62;100H[K[62;100H33,1-8[8C36%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[62;100H[K[62;100H32,1-8[8C35%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[36m/* need space? */[m[62;100H[K[62;100H31,1-8[8C34%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H30,0-1[8C33%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[62;100H[K[62;100H29,1-8[8C32%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hprintf([33m"[m[35m%s[m[33m"[m,,prompt);[27C[36m/* prompt user  */[m[62;100H[K[62;100H28,1-8[8C31%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H27,1-8[8C29%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *curpath;[62;100H[K[62;100H26,1-8[8C28%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     c;[30C[36m/* input char           */[m[62;100H[K[62;100H25,1-8[8C27%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[62;100H[K[62;100H24,1-8[8C26%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[62;100H[K[62;100H23,1-8[8C25%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[62;100H[K[62;100H22,1-8[8C24%[1;8H[?25h[?25l[31;61r[31;1H[L[1;62r[1;1H[46m{[m[1;9H[K[2;9H[32mchar[m    *buf ;       [23C[36mhe buffer[m[3;17Hbufspace = [33m0[m;[22C[36mtotal size      [m[4;17Hpos = [33m0[m;[27C[36mcurrent position[m[5;9H[32mint[m     c;       [23C[36m/* input char           */[m[6;9H[32mchar[m    *curpath;[7;9H[K[8;9Hprintf([33m"[m[35m%s[m[33m"[m,,prompt);            [15C[36m/* prompt user  */[m[9;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[10;17H[K[11;17H[36m/* need space? */[m[11;34H[K[12;17H[33mif[m( pos+[33m1[m >=[10C){    [15C[36m1 for \0   [m[13;25H[33mif[m ( bufspace == [33m0[m )            [36m/* y: 1st time  */[m[14;25H        buf = emalloc([33mBUFSIZ[m);[14;57H[K[15;25H[33melse[m                            [36m/* or expand    */[m[16;25H        buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[16;69H[K[17;17H [7Cbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[18;17H}[19;17H[K[20;17H[36m/* end of command? */[m[21;17H[33mif[m ( c == [35m'\n'[m )[22;25H[33mbreak[m;[23;17H[K[24;17H[36m/* no, add to buffer */[m[25;9H [7Cbuf[pos++] = c;[26;9H}[26;10H[K[27;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[16C[36mEOF and no input[m[28;9H        [33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[29;9Hbuf[pos] = [35m'\0'[m;
 [7C[33mreturn[m buf;
[46m}[m[62;100H[K[62;100H21,1[10C22%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m */[m
{[32;1H}[62;100H[K[62;100H20,1[10C21%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[62;100H[K[62;100H19,1[10C20%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *          calls fatal from emalloc()[m[62;100H[K[62;100H18,1[10C19%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[62;100H[K[62;100H17,1[10C18%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * returns: dynamically allocated string holding command line[m[62;100H[K[62;100H16,1[10C17%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * purpose: read next command line from fp[m[62;100H[K[62;100H15,1[10C16%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/*[m[62;100H[K[62;100H14,1[10C14%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[62;100H[K[62;100H13,1[10C13%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H12,0-1[8C12%[1;1H[?25h[?25l[62;101H3,1  [2;1H[?25h[?25l[62;101H4[3;1H[?25h[?25l[62;101H5[4;1H[?25h[?25l[62;101H6[5;1H[?25h[?25l[62;101H7[6;1H[?25h[?25l[62;101H8[7;1H[?25h[?25l[62;101H9[8;1H[?25h[?25l[62;100H20[9;1H[?25h[?25l
[46m{[40;1H}[m[62;101H1[10;1H[?25h[?25l{[40;1H}[62;101H2,1-8[11;8H[?25h[?25l[62;101H3[12;8H[?25h[?25l[62;101H4[13;8H[?25h[?25l[62;101H5[14;8H[?25h[?25l[62;101H6[15;8H[?25h[?25l[62;101H7[16;8H[?25h[?25l[62;101H8[17;8H[?25h[?25l[62;101H9[18;8H[?25h[?25l[62;100H30,0-1[19;1H[?25h[?25l[62;101H1,1-8[20;8H[?25h[?25l[62;101H2[21;8H[?25h[?25l[62;101H3[22;8H[?25h[?25l[62;101H4[23;8H[?25h[?25l[62;101H5[24;8H[?25h[?25l[62;101H6[25;8H[?25h[?25l[62;101H7[26;8H[?25h[?25l[62;101H8[27;8H[?25h[?25l[62;101H9,0-1[28;1H[?25h[?25l[62;100H40,1-8[29;8H[?25h[?25l[62;101H1[30;8H[?25h[?25l[62;101H2[31;8H[?25h[?25l[62;101H3,0-1[32;1H[?25h[?25l[62;101H4,1-8[33;8H[?25h[?25l[62;101H5[34;8H[?25h[?25l[62;101H6[35;8H[?25h[?25l[62;101H7[36;8H[?25h[?25l[62;101H8[37;8H[?25h[?25l[62;101H9[38;8H[?25h[?25l[62;100H50[39;8H[?25h[?25l[10;1H[46m{[40;1H}[m[62;101H1,1  [40;1H[?25h[?25l[10;1H{[40;1H}[62;101H2,0-1[41;1H[?25h[?25l[62;101H3,1  [42;1H[?25h[?25l[62;101H4[43;1H[?25h[?25l[62;101H5[44;1H[?25h[?25l[62;101H6[45;1H[?25h[?25l[62;101H7,0-1[46;1H[?25h[?25l[62;101H8,1  [47;1H[?25h[?25l[62;101H9[48;1H[?25h[?25l[62;100H60[49;1H[?25h[?25l[62;101H1[50;1H[?25h[?25l[62;101H2[51;1H[?25h[?25l[62;101H3[52;1H[?25h[?25l[62;101H4[53;1H[?25h[?25l[62;101H5[54;1H[?25h[?25l[62;101H6[55;1H[?25h[?25l[62;101H7,1-8[56;8H[?25h[?25l[62;101H8[57;8H[?25h[?25l[62;101H9[58;8H[?25h[?25l[62;100H70[59;8H[?25h[?25l[62;101H1[60;8H[?25h[?25l[62;101H2[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H73,1-8[8C13%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H74,1-8[8C14%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H75,0-1[8C16%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,1-8[8C17%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,1-8[8C18%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H78,0-1[8C19%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,1-8[8C20%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,1-8[8C21%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H81,1-8[8C22%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H82,0-1[8C24%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H83,1-8[8C25%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H{[62;100H[K[62;100H84,1-8[8C26%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H85,1-8[8C27%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H86,1-8[8C28%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H87,1-8[8C29%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mbreak[m;[62;100H[K[62;100H88,1-8[8C31%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H89,0-1[8C32%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H90,1-8[8C33%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H91,1-8[8C34%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H92,1-8[8C35%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hbufspace += [33mBUFSIZ[m;[62;100H[K[62;100H93,1-8[8C36%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H94,1-8[8C37%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H95,1-8[8C39%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H96,0-1[8C40%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* mark start, then find end of word */[m[62;100H[K[62;100H97,1-8[8C41%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hstart = cp;[62;100H[K[62;100H98,1-8[8C42%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hlen   = [33m1[m;[62;100H[K[62;100H99,1-8[8C43%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[62;100H[K[62;100H100,1-8[7C44%[61;8H[?25h[?25l[62;100H99,1-8 [60;8H[?25h[?25l[62;101H8[59;8H[?25h[?25l[62;101H7[58;8H[?25h[?25l[62;101H6,0-1[57;1H[?25h[?25l[62;101H5,1-8[56;8H[?25h[?25l[62;101H4[55;8H[?25h[?25l[62;101H3[54;8H[?25h[?25l[62;101H2[53;8H[?25h[?25l[62;101H1[52;8H[?25h[?25l[62;101H0[51;8H[?25h[?25l[62;100H89,0-1[50;1H[?25h[?25l[62;101H8,1-8[49;8H[?25h[?25l[62;101H7[48;8H[?25h[?25l[62;101H6[47;8H[?25h[?25l[62;101H5[46;8H[?25h[?25l[62;101H4[45;8H[?25h[?25l[62;101H3[44;8H[?25h[?25l[62;101H2,0-1[43;1H[?25h[?25l[62;101H1,1-8[42;8H[?25h[?25l[62;101H0[41;8H[?25h[?25l[62;100H79[40;8H[?25h[?25l[62;101H8,0-1[39;1H[?25h[?25l[62;101H7,1-8[38;8H[?25h[?25l[62;101H6[37;8H[?25h[?25l[62;101H5,0-1[36;1H[?25h[?25l[62;101H4,1-8[35;8H[?25h[?25l[62;101H3[34;8H[?25h[?25l[62;101H2[33;8H[?25h[?25l[62;101H1[32;8H[?25h[?25l[62;101H0[31;8H[?25h[?25l[62;100H69[30;8H[?25h[?25l[62;101H8[29;8H[?25h[?25l[62;101H7[28;8H[?25h[?25l[62;101H6,1  [27;1H[?25h[?25l[62;101H5[26;1H[?25h[?25l[62;101H4[25;1H[?25h[?25l[62;101H3[24;1H[?25h[?25l[62;101H2[23;1H[?25h[?25l[62;101H1[22;1H[?25h[?25l[62;101H0[21;1H[?25h[?25l[62;100H59[20;1H[?25h[?25l[62;101H8[19;1H[?25h[?25l[62;101H7,0-1[18;1H[?25h[?25l[62;101H6,1  [17;1H[?25h[?25l[62;101H5[16;1H[?25h[?25l[62;101H4[15;1H[?25h[?25l[62;101H3[14;1H[?25h[?25l[62;101H2,0-1[13;1H[?25h[?25l[62;101H1,1  [12;1H[?25h[?25l[62;101H0,1-8[11;8H[?25h[?25l[62;100H49[10;8H[?25h[?25l[62;101H8[9;8H[?25h[?25l[62;101H7[8;8H[?25h[?25l[62;101H6[7;8H[?25h[?25l[62;101H5[6;8H[?25h[?25l[62;101H4[5;8H[?25h[?25l[62;101H3,0-1[4;1H[?25h[?25l[62;101H2,1-8[3;8H[?25h[?25l[62;101H1[2;8H[?25h[?25l[62;101H0[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H39,0-1[8C43%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H}[62;100H[K[62;100H38,1-8[8C42%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[62;100H[K[62;100H37,1-8[8C41%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H36,1-8[8C40%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25H[33melse[m[28C[36m/* or expand    */[m[62;100H[K[62;100H35,1-8[8C39%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;33Hbuf = emalloc([33mBUFSIZ[m);[62;100H[K[62;100H34,1-8[8C37%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[62;100H[K[62;100H33,1-8[8C36%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[62;100H[K[62;100H32,1-8[8C35%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[36m/* need space? */[m[62;100H[K[62;100H31,1-8[8C34%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H30,0-1[8C33%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[62;100H[K[62;100H29,1-8[8C32%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hprintf([33m"[m[35m%s[m[33m"[m,,prompt);[27C[36m/* prompt user  */[m[62;100H[K[62;100H28,1-8[8C31%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H27,1-8[8C29%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *curpath;[62;100H[K[62;100H26,1-8[8C28%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     c;[30C[36m/* input char           */[m[62;100H[K[62;100H25,1-8[8C27%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[62;100H[K[62;100H24,1-8[8C26%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[62;100H[K[62;100H23,1-8[8C25%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[62;100H[K[62;100H22,1-8[8C24%[1;8H[?25h[?25l[31;61r[31;1H[L[1;62r[1;1H[46m{[m[1;9H[K[2;9H[32mchar[m    *buf ;       [23C[36mhe buffer[m[3;17Hbufspace = [33m0[m;[22C[36mtotal size      [m[4;17Hpos = [33m0[m;[27C[36mcurrent position[m[5;9H[32mint[m     c;       [23C[36m/* input char           */[m[6;9H[32mchar[m    *curpath;[7;9H[K[8;9Hprintf([33m"[m[35m%s[m[33m"[m,,prompt);            [15C[36m/* prompt user  */[m[9;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[10;17H[K[11;17H[36m/* need space? */[m[11;34H[K[12;17H[33mif[m( pos+[33m1[m >=[10C){    [15C[36m1 for \0   [m[13;25H[33mif[m ( bufspace == [33m0[m )            [36m/* y: 1st time  */[m[14;25H        buf = emalloc([33mBUFSIZ[m);[14;57H[K[15;25H[33melse[m                            [36m/* or expand    */[m[16;25H        buf = erealloc(buf,bufspace+[33mBUFSIZ[m);[16;69H[K[17;17H [7Cbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[18;17H}[19;17H[K[20;17H[36m/* end of command? */[m[21;17H[33mif[m ( c == [35m'\n'[m )[22;25H[33mbreak[m;[23;17H[K[24;17H[36m/* no, add to buffer */[m[25;9H [7Cbuf[pos++] = c;[26;9H}[26;10H[K[27;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[16C[36mEOF and no input[m[28;9H        [33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[29;9Hbuf[pos] = [35m'\0'[m;
 [7C[33mreturn[m buf;
[46m}[m[62;100H[K[62;100H21,1[10C22%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m */[m
{[32;1H}[62;100H[K[62;100H20,1[10C21%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *   notes: allocates space in BUFSIZ chunks.  [m[62;100H[K[62;100H19,1[10C20%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *          calls fatal from emalloc()[m[62;100H[K[62;100H18,1[10C19%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *  errors: NULL at EOF (not really an error)[m[62;100H[K[62;100H17,1[10C18%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * returns: dynamically allocated string holding command line[m[62;100H[K[62;100H16,1[10C17%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * purpose: read next command line from fp[m[62;100H[K[62;100H15,1[10C16%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/*[m[62;100H[K[62;100H14,1[10C14%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[62;100H[K[62;100H13,1[10C13%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H12,0-1[8C12%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#include        [m[33m"smsh.h"[m[62;100H[K[62;100H11,1[10C11%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#include        [m[33m<string.h>[m[62;100H[K[62;100H10,1[10C10%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#include        [m[33m<stdlib.h>[m[62;100H[K[62;100H9,1[12C9%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#include        [m[33m<stdio.h>[m[62;100H[K[62;100H8,1[12C8%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H7,0-1[10C6%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m */[m[62;100H[K[62;100H6,1[12C5%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H5,0-1[10C4%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *    char **splitline(char *str);           - parse a string[m[62;100H[K[62;100H4,1[12C3%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *    char *next_cmd(char *prompt, FILE *fp) - get next command[m[62;100H[K[62;100H3,1[12C2%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *    [m[62;100H[K[62;100H2,1[12C1%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh[m[62;100H[K[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[51;1H}[m[62;101H1[21;1H[?25h[?25l{[51;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;103H2-9[29;9H[?25h[?25l[62;101H8[28;9H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H28,2-9[8CTop[28;9H[?25h[?25l[62;103H3-10[28;10H[?25h[?25l[62;103H4-11[28;11H[?25h[?25l[62;103H5-12[28;12H[?25h[?25l[62;103H6-13[28;13H[?25h[?25l[62;103H7-14[28;14H[?25h[?25lf[46m([12C)[m[62;103H8-15[28;15H[?25h[?25l[62;103H9-16[28;16H[?25h[?25l([12C)[62;103H10-17[28;17H[?25h[?25l[62;104H1-18[28;18H[?25h[?25l[62;104H2-19[28;19H[?25h[?25l[62;104H3-20[28;20H[?25h[?25l[62;104H4-21[28;21H[?25h[?25lprompt); [62;104H3-20[28;20H[?25h[62;1H[K[28;19H[?25l[62;100H28,12-19      Top[28;19H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"split.c" 148L, 3335C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c [2Pmsh.cgcc smsh.c -o test.o
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kfatal[m[Kâ€™:
[01m[Ksmsh.c:48:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kfprintf[m[Kâ€™
  [01;31m[Kfprintf[m[K(stderr,"Error: %s,%s\n", s1, s2);
  [01;31m[K^~~~~~~[m[K
[01m[Ksmsh.c:49:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kexit[m[Kâ€™
  [01;31m[Kexit[m[K(n);
  [01;31m[K^~~~[m[K
[01m[Ksmsh.c:50:1:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[K}[m[Kâ€™ token
 [01;31m[K}[m[K
 [01;31m[K^[m[K
[01m[Ksmsh.c:52:[m[K [01;31m[Kerror: [m[Kexpected â€˜[01m[K{[m[Kâ€™ at end of input
 
 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 52L, 920C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"split.c"[m
[35m#include [m[33m"exec.c"[m


[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[24;9Hprompt = DFL_PROMPT;[25;9Hsetup();[27;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[28;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[29;25Hresult = execute(arglist);[30;25Hfreelist(arglist);[31;17H}[32;17Hfree(cmdline);[33;9H}[34;17H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[38;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[42;9H{[43;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[44;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[45;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[48;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[49;9Hexit(n);
}


[34m~                                                                                                                    [54;1H~                                                                                                                    [55;1H~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,0-1[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6,1  [16;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l
[46m{[35;1H}[m[62;101H9[19;1H[?25h[?25l{[35;1H}[62;100H20,1-8[20;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H4,1-8[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[19;1H[46m{[35;1H}[m[62;101H5,1  [35;1H[?25h[?25l[19;1H{[35;1H}[62;101H6,0-1[36;1H[?25h[?25l[62;101H7,1  [37;1H[?25h[?25l[62;101H8,1-8[38;8H[?25h[?25l[62;101H9[39;8H[?25h[?25l[62;100H40[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6,0-1[46;1H[?25h[?25l[62;101H7,1  [47;1H[?25h[?25l[62;101H8,1-8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 52L, 920C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.cgcc smsh.c -o test.o[9Pvi split.c gcc smsh.c -o test.o
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kfatal[m[Kâ€™:
[01m[Ksmsh.c:48:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kfprintf[m[Kâ€™
  [01;31m[Kfprintf[m[K(stderr,"Error: %s,%s\n", s1, s2);
  [01;31m[K^~~~~~~[m[K
[01m[Ksmsh.c:49:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kexit[m[Kâ€™
  [01;31m[Kexit[m[K(n);
  [01;31m[K^~~~[m[K
[01m[Ksmsh.c:50:1:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[K}[m[Kâ€™ token
 [01;31m[K}[m[K
 [01;31m[K^[m[K
[01m[Ksmsh.c:52:[m[K [01;31m[Kerror: [m[Kexpected â€˜[01m[K{[m[Kâ€™ at end of input
 
 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc smsh.c [K[K[K[K[K[K[K-o test.o smsh.c split.c exec.c
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kfatal[m[Kâ€™:
[01m[Ksmsh.c:48:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kfprintf[m[Kâ€™
  [01;31m[Kfprintf[m[K(stderr,"Error: %s,%s\n", s1, s2);
  [01;31m[K^~~~~~~[m[K
[01m[Ksmsh.c:49:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kexit[m[Kâ€™
  [01;31m[Kexit[m[K(n);
  [01;31m[K^~~~[m[K
[01m[Ksmsh.c:50:1:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[K}[m[Kâ€™ token
 [01;31m[K}[m[K
 [01;31m[K^[m[K
[01m[Ksmsh.c:52:[m[K [01;31m[Kerror: [m[Kexpected â€˜[01m[K{[m[Kâ€™ at end of input
 
 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ visms[K[K[K smsh[K[K[K[K[K[K[Kvi split.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"split.c" 148L, 3335C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[28;9Hprintf([33m"[m[35m%s[m[33m"[m,prompt);[28C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m )[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ i[Kvi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 52L, 920C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"split.c"[m
[35m#include [m[33m"exec.c"[m


[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[24;9Hprompt = DFL_PROMPT;[25;9Hsetup();[27;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[28;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[29;25Hresult = execute(arglist);[30;25Hfreelist(arglist);[31;17H}[32;17Hfree(cmdline);[33;9H}[34;17H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[38;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[42;9H{[43;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[44;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[45;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[48;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[49;9Hexit(n);
}


[34m~                                                                                                                    [54;1H~                                                                                                                    [55;1H~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,0-1[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6,1  [16;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[18;61r[18;1H[L[1;62r[18;1H[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)[62;1H[K[62;100H18,1[10CAll[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H19,1[10CAll[19;1H[?25h[?25l[20;61r[20;1H[L[1;62r[19;1H[K[20;1H[32mint[m main()[62;100H[K[62;100H20,1[10CAll[20;1H[?25h[?25l[62;100H19[19;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;103H2[18;2H[?25h[?25l[62;103H3[18;3H[?25h[?25l[62;103H4[18;4H[?25h[?25l[62;103H5[18;5H[?25h[?25l[62;103H6[18;6H[?25h[?25l[62;103H7[18;7H[?25h[?25l[62;103H8[18;8H[?25h[?25l[62;103H9[18;9H[?25h[?25l[62;103H10[18;10H[?25h[?25l[62;104H1[18;11H[?25h[?25l[62;104H2[18;12H[?25h[?25l[62;104H3[18;13H[?25h[?25l[62;104H4[18;14H[?25h[?25l[62;104H5[18;15H[?25h[?25ld[46m([22C)[m[62;104H6[18;16H[?25h[?25l[62;104H7[18;17H[?25h[?25l([22C)[62;104H8[18;18H[?25h[?25l[62;104H9[18;19H[?25h[?25l[62;103H20[18;20H[?25h[?25l[62;104H1[18;21H[?25h[?25l[62;104H2[18;22H[?25h[?25l[62;104H3[18;23H[?25h[?25l[62;104H4[18;24H[?25h[?25l[62;104H5[18;25H[?25h[?25l[62;104H6[18;26H[?25h[?25l[62;104H7[18;27H[?25h[?25l[62;104H8[18;28H[?25h[?25l[62;104H9[18;29H[?25h[?25l[62;103H30[18;30H[?25h[?25l[62;104H1[18;31H[?25h[?25l[62;104H2[18;32H[?25h[?25l[62;104H3[18;33H[?25h[?25l[62;104H4[18;34H[?25h[?25l[62;104H5[18;35H[?25h[?25l[62;104H6[18;36H[?25h[?25l[62;104H7[18;37H[?25h[?25l[62;104H8[18;38H[?25h[?25l[18;16H[46m([22C)[m[62;104H9[18;39H[?25h[?25l[62;103H40[18;40H[?25h[?25l;[18;16H([22C)[62;104H1[18;41H[?25h[?25l[19;61r[19;1H[L[1;62r[62;100H[K[62;100H19,1[10CAll[19;1H[?25h[?25l:[62;103H2[19;2H[?25h[62;1H[K[19;1H[?25l[62;100H19,1[10CAll[19;1H[?25h[?25l[19;1H[K[62;103H0-1[19;1H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 55L, 963C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"split.c" 148L, 3335C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[28;9Hprintf([33m"[m[35m%s[m[33m"[m,prompt);[28C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m )[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[51;1H}[m[62;101H1[21;1H[?25h[?25l{[51;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H9,0-1[39;1H[?25h[?25l[62;100H40,1-8[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3,0-1[43;1H[?25h[?25l[62;101H4,1-8[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6[46;8H[?25h[?25l[62;101H7[47;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[62;100H50[50;8H[?25h[?25l[21;1H[46m{[51;1H}[m[62;101H1,1  [51;1H[?25h[?25l[21;1H{[51;1H}[62;101H2,0-1[52;1H[?25h[?25l[62;101H3,1  [53;1H[?25h[?25l[62;101H4[54;1H[?25h[?25l[62;101H5[55;1H[?25h[?25l[62;101H6[56;1H[?25h[?25l[62;101H7,0-1[57;1H[?25h[?25l[62;101H8,1  [58;1H[?25h[?25l[62;101H9[59;1H[?25h[?25l[62;100H60[60;1H[?25h[?25l[62;101H1[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;1H[K[62;100H62,1[11C1%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,1[11C2%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,1[11C3%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H65,1[11C4%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H66,1[11C5%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,1-8[9C6%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **args ;[62;100H[K[62;100H68,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,1-8[9C9%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,1-8[8C11%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H73,1-8[8C13%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H74,1-8[8C14%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H75,0-1[8C16%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,1-8[8C17%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,1-8[8C18%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H78,0-1[8C19%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,1-8[8C20%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,1-8[8C21%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H81,1-8[8C22%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H82,0-1[8C24%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H83,1-8[8C25%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H{[62;100H[K[62;100H84,1-8[8C26%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H85,1-8[8C27%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H86,1-8[8C28%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H87,1-8[8C29%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mbreak[m;[62;100H[K[62;100H88,1-8[8C31%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H89,0-1[8C32%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H90,1-8[8C33%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H91,1-8[8C34%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H92,1-8[8C35%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hbufspace += [33mBUFSIZ[m;[62;100H[K[62;100H93,1-8[8C36%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H94,1-8[8C37%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H95,1-8[8C39%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H96,0-1[8C40%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* mark start, then find end of word */[m[62;100H[K[62;100H97,1-8[8C41%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hstart = cp;[62;100H[K[62;100H98,1-8[8C42%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hlen   = [33m1[m;[62;100H[K[62;100H99,1-8[8C43%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[62;100H[K[62;100H100,1-8[7C44%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hlen++;[62;100H[K[62;100H101,1-8[7C45%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H102,1-8[7C47%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H}[62;100H[K[62;100H103,1-8[7C48%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs[argnum] = [33mNULL[m;[62;100H[K[62;100H104,1-8[7C49%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m args;[62;100H[K[62;100H105,1-8[7C50%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[21;1H[46m{[61;1H}[m[62;100H[K[62;100H106,1[9C51%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[20;1H{[60;1H}[62;100H[K[62;100H107,0-1[7C52%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H108,1[9C54%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: constructor for strings[m[62;100H[K[62;100H109,1[9C55%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: a string, never NULL[m[62;100H[K[62;100H110,1[9C56%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H111,1[9C57%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[62;100H[K[62;100H112,1[9C58%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H113,1[9C59%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m *rv = emalloc(l+[33m1[m);[62;100H[K[62;100H114,1-8[7C60%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H115,0-1[7C62%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hrv[l] = [35m'\0'[m;[62;100H[K[62;100H116,1-8[7C63%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hstrncpy(rv, s, l);[62;100H[K[62;100H117,1-8[7C64%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H118,1-8[7C65%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H[46m{[61;1H}[m[62;100H[K[62;100H119,1[9C66%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[54;1H{[60;1H}[62;100H[K[62;100H120,0-1[7C67%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m[62;100H[K[62;100H121,1[9C68%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1Hfreelist([32mchar[m **list)[62;100H[K[62;100H122,1[9C70%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H123,1[9C71%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: free the list returned by splitline[m[62;100H[K[62;100H124,1[9C72%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: nothing[m[62;100H[K[62;100H125,1[9C73%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: free all strings in list and then free the list[m[62;100H[K[62;100H126,1[9C74%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H127,1[9C75%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H128,1[9C77%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **cp = list;[62;100H[K[62;100H129,1-8[7C78%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp )[62;100H[K[62;100H130,1-8[7C79%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfree(*cp++);[62;100H[K[62;100H131,1-8[7C80%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hfree(list);[62;100H[K[62;100H132,1-8[7C81%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H133,1[9C82%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H{[60;1H}[62;100H[K[62;100H134,0-1[7C83%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m * emalloc([32msize_t[m n)[62;100H[K[62;100H135,1[9C85%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H136,1[9C86%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv ;[62;100H[K[62;100H137,1-8[7C87%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = malloc(n)) == [33mNULL[m )[62;100H[K[62;100H138,1-8[7C88%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H139,1-8[7C89%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H140,1-8[7C90%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H141,1[9C91%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H{[60;1H}
[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[62;100H[K[62;100H142,1[9C93%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H143,1[9C94%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv;[62;100H[K[62;100H144,1-8[7C95%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[62;100H[K[62;100H145,1-8[7C96%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H146,1-8[7C97%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H147,1-8[7C98%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H148,1[9CBot[61;1H[?25h[?25l[56;1H{[61;1H}[62;102H7,1-8[60;8H[?25h[?25l[62;102H6[59;8H[?25h[?25l[62;102H5[58;8H[?25h[?25l[62;102H4[57;8H[?25h[?25l[56;1H[46m{[61;1H}[m[62;102H3,1  [56;1H[?25h[?25l{[61;1H}[62;102H2[55;1H[?25h[?25l[49;1H[46m{[54;1H}[m[62;102H1[54;1H[?25h[?25l[49;1H{[54;1H}[62;102H0,1-8[53;8H[?25h[?25l[62;101H39[52;8H[?25h[?25l[62;102H8[51;8H[?25h[?25l[62;102H7[50;8H[?25h[?25l[49;1H[46m{[54;1H}[m[62;102H6,1  [49;1H[?25h[?25l{[54;1H}[62;102H5[48;1H[?25h[?25l[62;102H4,0-1[47;1H[?25h[?25l[41;1H[46m{[46;1H}[m[62;102H3,1  [46;1H[?25h[?25l[41;1H{[46;1H}[62;102H2,1-8[45;8H[?25h[?25l[62;102H1[44;8H[?25h[?25l[62;102H0[43;8H[?25h[?25l[62;101H29[42;8H[?25h[?25l[41;1H[46m{[46;1H}[m[62;102H8,1  [41;1H[?25h[?25l{[46;1H}[62;102H7[40;1H[?25h[?25l[62;102H6[39;1H[?25h[?25l[62;102H5[38;1H[?25h[?25l[62;102H4[37;1H[?25h[?25l[62;102H3[36;1H[?25h[?25l[62;102H2[35;1H[?25h[?25l[62;102H1[34;1H[?25h[?25l[62;102H0,0-1[33;1H[?25h[?25l[26;1H[46m{[32;1H}[m[62;101H19,1  [32;1H[?25h[?25l[26;1H{[32;1H}[62;102H8,1-8[31;8H[?25h[?25l[62;102H7[30;8H[?25h[?25l[62;102H6[29;8H[?25h[?25l[62;102H5,0-1[28;1H[?25h[?25l[62;102H4,1-8[27;8H[?25h[?25l[26;1H[46m{[32;1H}[m[62;102H3,1  [26;1H[?25h[?25l{[32;1H}[62;102H2[25;1H[?25h[?25l[62;102H1[24;1H[?25h[?25l[62;102H0[23;1H[?25h[?25l[62;101H09[22;1H[?25h[?25l[62;102H8[21;1H[?25h[?25l[62;102H7,0-1[20;1H[?25h[?25l[62;102H6,1  [19;1H[?25h[?25l[62;102H5,1-8[18;8H[?25h[?25l[62;102H4[17;8H[?25h[?25l[62;102H3[16;8H[?25h[?25l[62;102H2[15;8H[?25h[?25l[62;102H1[14;8H[?25h[?25l[62;102H0[13;8H[?25h[?25l[62;100H99,1-8 [12;8H[?25h[?25l[62;101H8[11;8H[?25h[?25l[62;101H7[10;8H[?25h[?25l[62;101H6,0-1[9;1H[?25h[?25l[62;101H5,1-8[8;8H[?25h[?25l[62;101H4[7;8H[?25h[?25l[62;101H3[6;8H[?25h[?25l[62;101H2[5;8H[?25h[?25l[62;101H1[4;8H[?25h[?25l[62;101H0[3;8H[?25h[?25l[62;100H89,0-1[2;1H[?25h[?25l[62;101H8,1-8[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H87,1-8[8C98%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;25Hcp++;[62;100H[K[62;100H86,1-8[8C97%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H85,1-8[8C96%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H{[62;100H[K[62;100H84,1-8[8C95%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H83,1-8[8C94%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H82,0-1[8C93%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H81,1-8[8C91%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,1-8[8C90%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,1-8[8C89%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H78,0-1[8C88%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,1-8[8C87%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,1-8[8C86%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H75,0-1[8C85%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     len;[62;100H[K[62;100H74,1-8[8C83%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *start;[62;100H[K[62;100H73,1-8[8C82%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,1-8[8C81%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,1-8[8C80%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,1-8[8C79%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,1-8[8C78%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    **args ;[62;100H[K[62;100H68,1-8[8C77%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,1-8[8C75%[1;8H[?25h[?25l[41;61r[41;1H[L[1;62r[1;1H[46m{[m[1;9H[K[2;18Hnewstr();[3;9H[32mchar[m    **args ;[3;25H[K[4;17Hspots = [33m0[m;   [22C[36mspot[m[5;17Hbufspace = [33m0[m;[22C[36mbytes in table[m[6;9H[32mint[m     argnum = [33m0[m[25C[36mslots used   [m[7;18Hcp = line;[21C[36m/* pos in string        */[m[8;9H[32mchar[m    *start;[9;9H[32mint[m     len;[10;9H[K[11;9H[33mif[m ( line == [33mNULL[m ) [20C[36m/* handle special case  */[m[12;17H[33mreturn[m [33mNULL[m;[13;9H[K[14;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[15;9Hbufspace[9C;[15;27H[K[16;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[17;9H[K[18;9H[33mwhile[m( *cp != [35m'\0'[m )[19;9H{[19;17H[K[20;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[21;17H        cp++;[21;30H[K[22;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[23;25H[33mbreak[m;[24;17H[K[25;17H[36m/* make sure the array has room (+1 for NULL) */[m[26;17H[33mif[m ( argnum+[33m1[m >= spots ){[26;42H[K[27;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[28;25Hbufspace += [33mBUFSIZ[m;[28;44H[K[29;17H [7Cspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[30;17H}[31;17H[K[32;17H[36m/* mark start, then find end of word */[m[33;17Hstart = cp;[34;17Hlen   = [33m1[m;[34;27H[K[35;17H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[36;17H        len++;[36;32H[K[37;9H [7Cargs[argnum++] = newstr(start, len);[38;9H}[38;10H[K[39;9Hargs[argnum] = [33mNULL[m;
 [7C[33mreturn[m args;
[46m}[m[62;100H[K[62;100H66,1[10C74%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m */[m
{[42;1H}[62;100H[K[62;100H65,1[10C73%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,1[10C72%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,1[10C71%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m *          or NULL if line if no tokens on the line[m[62;100H[K[62;100H62,1[10C70%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H[K[62;100H61,1[10C68%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m * purpose: split a line into array of white-space separated tokens[m[62;100H[K[62;100H60,1[10C67%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/*[m[62;100H[K[62;100H59,1[10C66%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[32mchar[m ** splitline([32mchar[m *line)[62;100H[K[62;100H58,1[10C65%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H57,0-1[8C64%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m[62;100H[K[62;100H56,1[10C63%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m **/[m[62;100H[K[62;100H55,1[10C62%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m **     splitline ( parse a line into an array of strings )[m[62;100H[K[62;100H54,1[10C60%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H[36m/**[m[62;100H[K[62;100H53,1[10C59%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H52,0-1[8C58%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;1H}[62;100H[K[62;100H51,1[10C57%[1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mreturn[m buf;[62;100H[K[62;100H50,1-8[8C56%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hbuf[pos] = [35m'\0'[m;[62;100H[K[62;100H49,1-8[8C55%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[62;100H[K[62;100H48,1-8[8C54%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[62;100H[K[62;100H47,1-8[8C52%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9H}[62;100H[K[62;100H46,1-8[8C51%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17Hbuf[pos++] = c;[62;100H[K[62;100H45,1-8[8C50%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[1;17H[36m/* no, add to buffer */[m[62;100H[K[62;100H44,1-8[8C49%[1;8H[?25h[?25l[1;61r[1;1H[L[1;62r[62;100H[K[62;100H43,0-1[8C48%[1;1H[?25h[?25l[62;101H4,1-8[2;8H[?25h[?25l[62;101H5[3;8H[?25h[?25l[62;101H6[4;8H[?25h[?25l[62;101H7[5;8H[?25h[?25l[62;101H8[6;8H[?25h[?25l[62;101H9[7;8H[?25h[?25l[62;100H50[8;8H[?25h[?25l[62;101H1,1  [9;1H[?25h[?25l[62;101H2,0-1[10;1H[?25h[?25l[62;101H3,1  [11;1H[?25h[?25l[62;101H4[12;1H[?25h[?25l[62;101H5[13;1H[?25h[?25l[62;101H6[14;1H[?25h[?25l[62;101H7,0-1[15;1H[?25h[?25l[62;101H8,1  [16;1H[?25h[?25l[62;1H[33m-- VISUAL --[m[62;100H[K[62;100H58,1[10C48%[16;1H[?25h[?25l[7m[32mc[m[62;103H2[16;2H[?25h[?25l[7m[32mh[m[62;103H3[16;3H[?25h[?25l[7m[32ma[m[62;103H4[16;4H[?25h[?25l[7m[32mr[m[62;103H5[16;5H[?25h[?25l[7m [m[62;103H6[16;6H[?25h[?25l[7m*[m[62;103H7[16;7H[?25h[?25l[7m*[m[62;103H8[16;8H[?25h[?25l[7m [m[62;103H9[16;9H[?25h[?25l[7ms[m[62;103H10[16;10H[?25h[?25l[7mp[m[62;104H1[16;11H[?25h[?25l[7ml[m[62;104H2[16;12H[?25h[?25l[7mi[m[62;104H3[16;13H[?25h[?25l[7mt[m[62;104H4[16;14H[?25h[?25l[7ml[m[62;104H5[16;15H[?25h[?25l[7mi[m[62;104H6[16;16H[?25h[?25l[7mn[m[62;104H7[16;17H[?25h[?25l[7me[m[46m([10C)[m[62;104H8[16;18H[?25h[?25l[7m([m[10C)[62;104H9[16;19H[?25h[?25l[7m[32mc[m[62;103H20[16;20H[?25h[?25l[7m[32mh[m[62;104H1[16;21H[?25h[?25l[7m[32ma[m[62;104H2[16;22H[?25h[?25l[7m[32mr[m[62;104H3[16;23H[?25h[?25l[7m [m[62;104H4[16;24H[?25h[?25l[7m*[m[62;104H5[16;25H[?25h[?25l[7ml[m[62;104H6[16;26H[?25h[?25l[7mi[m[62;104H7[16;27H[?25h[?25l[7mn[m[62;104H8[16;28H[?25h[?25l[7me[m[46m)[m[62;104H9[16;29H[?25h[?25l[7m)[m[62;103H30[16;30H[?25h[?25l[?25h[?25l[32mchar[m ** splitline([32mchar[m *line)[62;1H[K[62;100H58,1[10C48%[16;1H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hq[?25l[?25h[?25l[62;2H[K[62;2H[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 55L, 963C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"split.c"[m
[35m#include [m[33m"exec.c"[m


[35m#define DFL_PROMPT      [m[33m"> "[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp);


[32mint[m main()
{[23;9H[32mchar[m    *cmdline, *prompt, **arglist;[24;9H[32mint[m     result;[25;9H[32mvoid[m    setup();[27;9Hprompt = DFL_PROMPT;[28;9Hsetup();[30;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[31;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[32;25Hresult = execute(arglist);[33;25Hfreelist(arglist);[34;17H}[35;17Hfree(cmdline);[36;9H}[37;17H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[41;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[45;9H{[46;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[47;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[48;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[51;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[52;9Hexit(n);
}


[34m~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,0-1[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6,1  [16;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l[62;101H9,0-1[19;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l[62;101H9,0-1[19;1H[?25h[?25l[20;61r[20;1H[L[1;62r[19;1H[32mchar[m ** splitline([32mchar[m *line)[62;1H[K[62;100H19,1[10CAll[19;1H[?25h[?25l[62;100H20,0-1[20;1H[?25h[?25l[62;100H19,1  [19;1H[?25h[?25l[62;103H2[19;2H[?25h[?25l[62;103H3[19;3H[?25h[?25l[62;103H4[19;4H[?25h[?25l[62;103H5[19;5H[?25h[?25l[62;103H6[19;6H[?25h[?25l[62;103H7[19;7H[?25h[?25l[62;103H8[19;8H[?25h[?25l[62;103H9[19;9H[?25h[?25l[62;103H10[19;10H[?25h[?25l[62;104H1[19;11H[?25h[?25l[62;104H2[19;12H[?25h[?25l[62;104H3[19;13H[?25h[?25l[62;104H4[19;14H[?25h[?25l[62;104H5[19;15H[?25h[?25l[62;104H6[19;16H[?25h[?25l[62;104H7[19;17H[?25h[?25le[46m([10C)[m[62;104H8[19;18H[?25h[?25l([10C)[62;104H9[19;19H[?25h[?25l[62;103H20[19;20H[?25h[?25l[62;104H1[19;21H[?25h[?25l[62;104H2[19;22H[?25h[?25l[62;104H3[19;23H[?25h[?25l[62;104H4[19;24H[?25h[?25l[62;104H5[19;25H[?25h[?25l[62;104H6[19;26H[?25h[?25l[62;104H7[19;27H[?25h[?25l[62;104H8[19;28H[?25h[?25l[19;18H[46m([10C)[m[62;104H9[19;29H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H19,29[9CAll[19;29H[?25h[?25l[62;103H30[19;30H[?25h[?25l;[19;18H([10C)[62;104H1[19;31H[?25h[?25l[20;61r[20;1H[L[1;62r[62;100H[K[62;100H20,1[10CAll[20;1H[?25h[?25l[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[20;13H[46m([14C)[m[62;103H29[20;29H[?25h[?25l;[20;13H([14C)[62;103H30[20;30H[?25h[?25l[21;61r[21;1H[L[1;62r[62;100H[K[62;100H21,1[10CAll[21;1H[?25h[?25l[22;61r[22;1H[L[1;62r[21;1H[32mvoid[m
freelist([32mchar[m **list)[62;100H[K[62;100H22,22[9CAll[22;9H[46m([11C)[?25h[?25l[m[22;9H([11C)[62;101H1,6 [21;6H[?25h[?25l[21;61r[61;1H
[1;62r[21;1H[32mvoid[m freelist([32mchar[m **list)[61;1H[34m~                                                                                                                    [m[62;100H[K[62;100H21,6[10CAll[21;6H[?25h[?25l[62;103H7[21;7H[?25h[?25l[62;103H8[21;8H[?25h[?25l[62;103H9[21;9H[?25h[?25l[62;103H10[21;10H[?25h[?25l[62;104H1[21;11H[?25h[?25l[62;104H2[21;12H[?25h[?25l[62;104H3[21;13H[?25h[?25lt[46m([11C)[m[62;104H4[21;14H[?25h[?25l[62;104H5[21;15H[?25h[?25l([11C)[62;104H6[21;16H[?25h[?25l[62;104H7[21;17H[?25h[?25l[62;104H8[21;18H[?25h[?25l[62;104H9[21;19H[?25h[?25l[62;103H20[21;20H[?25h[?25l[62;104H1[21;21H[?25h[?25l[62;104H2[21;22H[?25h[?25l[62;104H3[21;23H[?25h[?25l[62;104H4[21;24H[?25h[?25l[62;104H5[21;25H[?25h[?25l[21;14H[46m([11C)[m[62;104H6[21;26H[?25h[?25l[62;104H7[21;27H[?25h[?25l;[21;14H([11C)[62;104H8[21;28H[?25h[?25l[22;61r[22;1H[L[1;62r[62;100H[K[62;100H22,1[10CAll[22;1H[?25h[?25l[32mvoid[m * emalloc([32msize_t[m n)[22;15H[46m([8C)[m[62;103H25[22;25H[?25h[?25l;[22;15H([8C)[62;104H6[22;26H[?25h[?25l[23;61r[23;1H[L[1;62r[62;100H[K[62;100H23,1[10CAll[23;1H[?25h[?25l[24;61r[24;1H[L[1;62r[23;1H[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[62;100H[K[62;100H24,1[10CAll[24;1H[?25h[?25l[62;101H3[23;1H[?25h[?25l[62;103H2[23;2H[?25h[?25l[62;103H3[23;3H[?25h[?25l[62;103H4[23;4H[?25h[?25l[62;103H5[23;5H[?25h[?25l[62;103H6[23;6H[?25h[?25l[62;103H7[23;7H[?25h[?25l[62;103H8[23;8H[?25h[?25l[62;103H9[23;9H[?25h[?25l[62;103H10[23;10H[?25h[?25l[62;104H1[23;11H[?25h[?25l[62;104H2[23;12H[?25h[?25l[62;104H3[23;13H[?25h[?25l[62;104H4[23;14H[?25h[?25l[62;104H5[23;15H[?25h[?25lc[46m([17C)[m[62;104H6[23;16H[?25h[?25l[62;104H7[23;17H[?25h[?25l([17C)[62;104H8[23;18H[?25h[?25l[62;104H9[23;19H[?25h[?25l[62;103H20[23;20H[?25h[?25l[62;104H1[23;21H[?25h[?25l[62;104H2[23;22H[?25h[?25l[62;104H3[23;23H[?25h[?25l[62;104H4[23;24H[?25h[?25l[62;104H5[23;25H[?25h[?25l[62;104H6[23;26H[?25h[?25l[62;104H7[23;27H[?25h[?25l[62;104H8[23;28H[?25h[?25l[62;104H9[23;29H[?25h[?25l[62;103H30[23;30H[?25h[?25l[62;104H1[23;31H[?25h[?25l[62;104H2[23;32H[?25h[?25l[62;104H3[23;33H[?25h[?25l[23;16H[46m([17C)[m[62;104H4[23;34H[?25h[?25l[62;104H5[23;35H[?25h[?25li[23;16H([17C)[62;104H6[23;36H[?25h[?25l[23;35H[K[23;16H[46m([17C)[m[62;104H5[23;35H[?25h[?25l;[23;16H([17C)[62;104H6[23;36H[?25h[?25l[24;61r[24;1H[L[1;62r[62;100H[K[62;100H24,1[10CTop[24;1H[?25h[?25ly[62;103H2[24;2H[?25h[?25l[24;1H[K[62;103H1[24;1H[?25h[?25lv[62;103H2[24;2H[?25h[?25l[62;101H5,1[25;1H[?25h[?25l[24;61r[61;1H
[1;62r[24;1Hv[62;100H[K[62;100H24,2[10CAll[24;2H[?25h[?25l[24;1H[K[62;103H1[24;1H[?25h[62;1H[K[24;1H[?25l[62;100H24,0-1[8CAll[24;1H[?25h[?25l[62;101H5[25;1H[?25h[?25l[62;101H6[26;1H[?25h[?25l[62;101H7,1  [27;1H[?25h[?25l
[46m{[44;1H}[m[62;101H8[28;1H[?25h[?25l{[44;1H}[62;101H9,1-8[29;8H[?25h[?25l[62;100H30[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2,0-1[32;1H[?25h[?25l[62;101H3,1-8[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5,0-1[35;1H[?25h[?25l[62;101H6,1-8[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H9[39;8H[?25h[?25l[62;100H40[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[28;1H[46m{[44;1H}[m[62;101H4,1  [44;1H[?25h[?25l[28;1H{[44;1H}[62;101H5,0-1[45;1H[?25h[?25l[62;101H6,1  [46;1H[?25h[?25l[62;1H[33m-- VISUAL --[m[62;100H[K[62;100H46,1[10CAll[46;1H[?25h[?25l[7m[32mv[m[62;103H2[46;2H[?25h[?25l[7m[32mo[m[62;103H3[46;3H[?25h[?25l[7m[32mi[m[62;103H4[46;4H[?25h[?25l[7m[32md[m[62;103H5[46;5H[?25h[?25l[7m [m[62;103H6[46;6H[?25h[?25l[7ms[m[62;103H7[46;7H[?25h[?25l[7me[m[62;103H8[46;8H[?25h[?25l[7mt[m[62;103H9[46;9H[?25h[?25l[32mvoid[m set[62;1H[K[62;100H46,9[10CAll[46;9H[?25h[?25l[62;101H5,0-1[45;1H[?25h[?25l[28;1H[46m{[44;1H}[m[62;101H4,1  [44;1H[?25h[?25l[28;1H{[44;1H}[62;101H3,2-16[43;16H[?25h[?25l[36;62H[46m{[42;9H}[m[62;101H2,2-9 [42;9H[?25h[?25l[36;62H{[42;9H}[62;101H1,2-16[41;16H[?25h[?25l[62;101H0[40;16H[?25h[?25l[62;100H39[39;16H[?25h[?25l[62;101H8[38;16H[?25h[?25l[62;101H7[37;16H[?25h[?25l[62;101H6,2-9 [36;9H[?25h[?25l[62;101H5,0-1[35;1H[?25h[?25l[62;101H4,2-9[34;9H[?25h[?25l[62;101H3[33;9H[?25h[?25l[62;101H2,0-1[32;1H[?25h[?25l[62;101H1,2-9[31;9H[?25h[?25l[62;101H0[30;9H[?25h[?25l[62;100H29[29;9H[?25h[?25l[28;1H[46m{[44;1H}[m[62;101H8,1  [28;1H[?25h[?25l[27;9H[46m()[m
{[44;1H}[62;101H7,9[27;9H[?25h[?25l()[62;101H6,0-1[26;1H[?25h[?25l[62;101H5[25;1H[?25h[?25l[62;101H4[24;1H[?25h[?25l[62;101H3,9  [23;9H[?25h[?25l[62;101H4,0-1[24;1H[?25h[?25l[25;61r[25;1H[L[1;62r[25;1H[32mvoid[m setup()[62;100H[K[62;100H25,1[10CTop[25;1H[?25h[?25l[62;101H4,0-1[24;1H[?25h[?25l[24;61r[61;1H
[1;62r[62;100H[K[62;100H24,1[10CAll[24;1H[?25h[?25l[62;103H2[24;2H[?25h[?25l[62;103H3[24;3H[?25h[?25l[62;103H4[24;4H[?25h[?25l[62;103H5[24;5H[?25h[?25l[62;103H6[24;6H[?25h[?25l[62;103H7[24;7H[?25h[?25l[62;103H8[24;8H[?25h[?25l[62;103H9[24;9H[?25h[?25l[62;103H10[24;10H[?25h[?25lp[46m()[m[62;104H1[24;11H[?25h[?25l[62;104H2[24;12H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H24,12[9CAll[24;12H[?25h[?25l[62;104H3[24;13H[?25h[?25l;()[62;104H4[24;14H[?25h[?25l[62;101H5,1 [25;1H[?25h[?25l[62;101H6[26;1H[?25h[?25l[27;9H[46m()[m[62;101H7,11[27;11H[?25h[?25l()
[46m{[44;1H}[m[62;101H8,2 [28;2H[?25h[?25l{[44;1H}[62;101H9,6-13[29;13H[?25h[?25l[62;100H30,5-12[30;12H[?25h[?25l[62;101H1,6-13[31;13H[?25h[?25l[62;101H2,1   [32;1H[?25h[?25l[62;101H3,7-14[33;14H[?25h[?25l[34;14H[46m()[m[62;101H4[34;14H[?25h[?25l()[62;101H5,1   [35;1H[?25h[?25l[62;101H6,7-14[36;14H[?25h[?25l[62;101H7,2-9 [37;9H[?25h[?25l[62;101H8[38;9H[?25h[?25l[62;101H9[39;9H[?25h[?25l[62;100H40[40;9H[?25h[?25l[62;101H1[41;9H[?25h[?25l[36;62H[46m{[42;9H}[m[62;101H2,3-10[42;10H[?25h[?25l[36;62H{[42;9H}[62;101H3,2-9 [43;9H[?25h[?25l[28;1H[46m{[44;1H}[m[62;101H4,2  [44;2H[?25h[?25l[28;1H{[44;1H}[62;101H5,1[45;1H[?25h[?25l[46;11H[46m()[m[62;101H6,13[46;13H[?25h[?25l()[62;101H7,4-11[47;11H[?25h[?25l[62;101H8,7-14[48;14H[?25h[?25l[62;101H9[49;14H[?25h[?25l[62;100H50,5-12[50;12H[?25h[?25l[51;9H[46m{[54;9H}[m[62;101H1,3-10[51;10H[?25h[?25l{[54;9H}[62;101H2,7-14[52;14H[?25h[?25l[62;101H3[53;14H[?25h[?25l[51;9H[46m{[54;9H}[m[62;101H4,3-10[54;10H[?25h[?25l[51;9H{[54;9H}[62;101H5,1   [55;1H[?25h[?25l[62;101H6,14[56;14H[?25h[?25l[62;101H7,7-14[57;14H[?25h[?25l[58;13H[46m([mn[46m)[m[62;101H8[58;14H[?25h[?25l(n)[62;101H9,2   [59;2H[?25h[?25l[62;100H60,1[60;1H[?25h[?25l[62;101H1[61;1H[?25h[?25l[62;101H0[60;1H[?25h[?25l[62;100H59,2[59;2H[?25h[?25l[58;13H[46m([mn[46m)[m[62;101H8,7-14[58;14H[?25h[?25l(n)[62;101H7[57;14H[?25h[?25l[62;101H6,14  [56;14H[?25h[62;1H[K[56;13H[?25l[62;100H56,13[9CAll[56;13H[?25h[?25l[62;101H5,0-1[55;1H[?25h[?25l[51;9H[46m{[54;9H}[m[62;101H4,2-9[54;9H[?25h[?25l[51;9H{[54;9H}[62;101H3,6-13[53;13H[?25h[?25l[62;101H2[52;13H[?25h[?25l[51;9H[46m{[54;9H}[m[62;101H1,2-9 [51;9H[?25h[?25l{[54;9H}[62;101H0,4-11[50;11H[?25h[?25l[62;100H49,6-13[49;13H[?25h[?25l[62;101H8[48;13H[?25h[?25l[62;101H7,3-10[47;10H[?25h[?25l[46;11H[46m()[m[62;101H6,12  [46;12H[?25h[?25l()[62;101H5,0-1[45;1H[?25h[?25l[28;1H[46m{[44;1H}[m[62;101H4,1  [44;1H[?25h[?25l[28;1H{[44;1H}[62;101H3,2-16[43;16H[?25h[?25l[36;62H[46m{[42;9H}[m[62;101H2,2-9 [42;9H[?25h[?25l[36;62H{[42;9H}[62;101H1,2-16[41;16H[?25h[?25l[62;101H0[40;16H[?25h[?25l[62;100H39[39;16H[?25h[?25l[62;101H8[38;16H[?25h[?25l[62;101H7[37;16H[?25h[?25l[62;101H6,6-13[36;13H[?25h[?25l[62;101H5,0-1 [35;1H[?25h[?25l[62;101H4,6-13[34;13H[?25h[?25l[62;101H3[33;13H[?25h[?25l[62;101H2,0-1 [32;1H[?25h[?25l[62;101H1,6-16[31;16H[?25h[?25l[62;101H0,5[30;16H[?25h[?25l[62;100H29,6[29;16H[?25h[?25l[28;1H[46m{[44;1H}[m[62;101H8,1   [28;1H[?25h[?25l[27;9H[46m()[m
{[44;1H}[62;101H7,10[27;10H[?25h[?25l()[62;101H6,0-1[26;1H[?25h[?25l[62;101H5[25;1H[?25h[?25l[62;101H4,13 [24;13H[?25h[?25l[25;61r[25;1H[L[1;62r[25;1H[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[62;100H[K[62;100H25,1[10CTop[25;1H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7[27;1H[?25h[?25l[62;101H8,1  [28;1H[?25h[?25l
[46m{[45;1H}[m[62;101H9[29;1H[?25h[?25l{[45;1H}[62;100H30,1-8[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3,0-1[33;1H[?25h[?25l[62;101H4,1-8[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6,0-1[36;1H[?25h[?25l[62;101H7,1-8[37;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H9[39;8H[?25h[?25l[62;100H40[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[29;1H[46m{[45;1H}[m[62;101H5,1  [45;1H[?25h[?25l[29;1H{[45;1H}[62;101H6,0-1[46;1H[?25h[?25l[29;1H[46m{[45;1H}[m[62;101H5,1  [45;1H[?25h[?25l[29;1H{[45;1H}[62;101H4,1-8[44;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H0[40;8H[?25h[?25l[62;100H39[39;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H6,0-1[36;1H[?25h[?25l[62;101H5,1-8[35;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H3,0-1[33;1H[?25h[?25l[62;101H2,1-8[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H0[30;8H[?25h[?25l[29;1H[46m{[45;1H}[m[62;100H29,1  [29;1H[?25h[?25l{[45;1H}[62;101H8[28;1H[?25h[?25l[62;101H7,0-1[27;1H[?25h[?25l[62;101H6[26;1H[?25h[?25l[62;101H5,1  [25;1H[?25h[?25l[62;101H4[24;1H[?25h[?25l[62;101H5[25;1H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H25,1[10CTop[25;1H[?25h[?25l[62;103H2[25;2H[?25h[?25l[62;103H3[25;3H[?25h[?25l[62;103H4[25;4H[?25h[?25l[62;103H5[25;5H[?25h[?25l[62;103H6[25;6H[?25h[?25l[62;103H7[25;7H[?25h[?25l[62;103H8[25;8H[?25h[?25l[62;103H9[25;9H[?25h[?25l[62;103H10[25;10H[?25h[?25ll[46m([25C)[m[62;104H1[25;11H[?25h[?25l[62;104H2[25;12H[?25h[?25l([25C)[62;104H3[25;13H[?25h[?25l[62;104H4[25;14H[?25h[?25l[62;104H5[25;15H[?25h[?25l[62;104H6[25;16H[?25h[?25l[62;104H7[25;17H[?25h[?25l[62;104H8[25;18H[?25h[?25l[62;104H9[25;19H[?25h[?25l[62;103H20[25;20H[?25h[?25l[62;104H1[25;21H[?25h[?25l[62;104H2[25;22H[?25h[?25l[62;104H3[25;23H[?25h[?25l[62;104H4[25;24H[?25h[?25l[62;104H5[25;25H[?25h[?25l[62;104H6[25;26H[?25h[?25l[62;104H7[25;27H[?25h[?25l[62;104H8[25;28H[?25h[?25l[62;104H9[25;29H[?25h[?25l[62;103H30[25;30H[?25h[?25l[62;104H1[25;31H[?25h[?25l[62;104H2[25;32H[?25h[?25l[62;104H3[25;33H[?25h[?25l[62;104H4[25;34H[?25h[?25l[62;104H5[25;35H[?25h[?25l[62;104H6[25;36H[?25h[?25l[25;11H[46m([25C)[m[62;104H7[25;37H[?25h[?25l[62;104H8[25;38H[?25h[?25l;[25;11H([25C)[62;104H9[25;39H[?25h[?25l[26;61r[26;1H[L[1;62r[62;100H[K[62;100H26,1[10CTop[26;1H[?25h[?25l[32mint[m execute([32mchar[m *argv[])[26;12H[46m([12C)[m[62;103H26[26;26H[?25h[?25l;[26;12H([12C)[62;104H7[26;27H[?25h[62;1H[K[26;26H[?25l[62;100H26,26[9CTop[26;26H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 63L, 1194C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc -o test.o smshc[K.c ece[K[Kxec.c split.c 
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kfatal[m[Kâ€™:
[01m[Ksmsh.c:59:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kfprintf[m[Kâ€™
  [01;31m[Kfprintf[m[K(stderr,"Error: %s,%s\n", s1, s2);
  [01;31m[K^~~~~~~[m[K
[01m[Ksmsh.c:60:2:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[Kexit[m[Kâ€™
  [01;31m[Kexit[m[K(n);
  [01;31m[K^~~~[m[K
[01m[Ksmsh.c:61:1:[m[K [01;31m[Kerror: [m[Kexpected declaration specifiers before â€˜[01m[K}[m[Kâ€™ token
 [01;31m[K}[m[K
 [01;31m[K^[m[K
[01m[Ksmsh.c:63:[m[K [01;31m[Kerror: [m[Kexpected â€˜[01m[K{[m[Kâ€™ at end of input
 
 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 63L, 1194C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"split.c"[m
[35m#include [m[33m"exec.c"[m


[35m#define DFL_PROMPT      [m[33m"> "[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp);
[32mchar[m ** splitline([32mchar[m *line);
[32mchar[m *newstr([32mchar[m *s, [32mint[m l);
[32mvoid[m freelist([32mchar[m **list);
[32mvoid[m * emalloc([32msize_t[m n);
[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n);
[32mvoid[m setup();
[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n);
[32mint[m execute([32mchar[m *argv[]);


[32mint[m main()
{[31;9H[32mchar[m    *cmdline, *prompt, **arglist;[32;9H[32mint[m     result;[33;9H[32mvoid[m    setup();[35;9Hprompt = DFL_PROMPT;[36;9Hsetup();[38;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[39;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[40;25Hresult = execute(arglist);[41;25Hfreelist(arglist);[42;17H}[43;17Hfree(cmdline);[44;9H}[45;17H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[49;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[53;9H{[54;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[55;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[56;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[59;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[60;9Hexit(n);
}[62;100H1,1[11CTop[1;1H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsch[K[Kh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 63L, 1194C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"split.c"[m
[35m#include [m[33m"exec.c"[m


[35m#define DFL_PROMPT      [m[33m"> "[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp);
[32mchar[m ** splitline([32mchar[m *line);
[32mchar[m *newstr([32mchar[m *s, [32mint[m l);
[32mvoid[m freelist([32mchar[m **list);
[32mvoid[m * emalloc([32msize_t[m n);
[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n);
[32mvoid[m setup();
[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n);
[32mint[m execute([32mchar[m *argv[]);


[32mint[m main()
{[31;9H[32mchar[m    *cmdline, *prompt, **arglist;[32;9H[32mint[m     result;[33;9H[32mvoid[m    setup();[35;9Hprompt = DFL_PROMPT;[36;9Hsetup();[38;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[39;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[40;25Hresult = execute(arglist);[41;25Hfreelist(arglist);[42;17H}[43;17Hfree(cmdline);[44;9H}[45;17H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[49;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[53;9H{[54;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[55;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[56;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)[59;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[60;9Hexit(n);
}[62;100H1,1[11CTop[1;1H[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6[6;1H[?25h[?25l[62;100H7[7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l[62;101H1[21;1H[?25h[?25l[62;101H2[22;1H[?25h[?25l[62;101H3[23;1H[?25h[?25l[62;101H4[24;1H[?25h[?25l[62;101H5[25;1H[?25h[?25l[62;101H6[26;1H[?25h[?25l[62;101H7[27;1H[?25h[?25l[62;101H8[28;1H[?25h[?25l[62;101H9[29;1H[?25h[?25l
[46m{[46;1H}[m[62;100H30[30;1H[?25h[?25l{[46;1H}[62;101H1[31;1H[?25h[?25l[62;101H2[32;1H[?25h[?25l[62;101H3[33;1H[?25h[?25l[62;101H4[34;1H[?25h[?25l[62;101H5[35;1H[?25h[?25l[62;101H6[36;1H[?25h[?25l[62;101H7[37;1H[?25h[?25l[62;101H8[38;1H[?25h[?25l[62;101H9[39;1H[?25h[?25l[62;100H40[40;1H[?25h[?25l[62;101H1[41;1H[?25h[?25l[62;101H2[42;1H[?25h[?25l[62;101H3[43;1H[?25h[?25l[62;101H4[44;1H[?25h[?25l[62;101H5[45;1H[?25h[?25l[30;1H[46m{[46;1H}[m[62;101H6[46;1H[?25h[?25l[30;1H{[46;1H}[62;101H7[47;1H[?25h[?25l[30;1H[46m{[46;1H}[m[62;101H6[46;1H[?25h[?25l[30;1H{[46;1H}[62;101H5[45;1H[?25h[?25l[62;101H4[44;1H[?25h[?25l[38;62H[46m{[44;9H}[m[62;103H2-9[44;9H[?25h[?25l[62;103H3-10[44;10H[?25h[?25l[62;103H2-9 [44;9H[?25h[?25l[38;62H{[44;9H}[62;101H5[45;9H[?25h[?25l[33mreturn[m [33m0[m;[45;18H[K[45;9H[?25h[?25l[38;62H[46m{[44;9H}[m[62;101H4[44;9H[?25h[?25l[38;62H{[44;9H}[62;101H3[43;9H[?25h[?25l[62;101H2[42;9H[?25h[?25l[39;63H[46m{[42;17H}[m[62;103H3-17[42;17H[?25h[?25l[62;103H4-18[42;18H[?25h[?25l[62;103H3-17[42;17H[?25h[?25l[39;63H{[42;17H}[62;101H1[41;17H[?25h[?25l[62;101H0[40;17H[?25h[?25l[62;100H39[39;17H[?25h[?25l[38;17H[46m([33C)[m[62;101H8,10-17[38;17H[?25h[?25l([33C)[62;101H9,3-17 [39;17H[?25h[?25l[62;103H4-18[39;18H[?25h[?25l[62;103H5-19[39;19H[?25h[?25l [46m([41C)[m[62;103H6-20[39;20H[?25h[?25l[62;103H7-21[39;21H[?25h[?25l( [46m([28C)[m[10C)[62;103H8-22[39;22H[?25h[?25l[62;103H9-23[39;23H[?25h[?25l([28C)[62;103H10-24[39;24H[?25h[?25l[62;104H1-25[39;25H[?25h[?25l[62;104H2-26[39;26H[?25h[?25l[62;104H3-27[39;27H[?25h[?25l[62;104H4-28[39;28H[?25h[?25l[62;104H5-29[39;29H[?25h[?25l[62;104H6-30[39;30H[?25h[?25l[62;104H7-31[39;31H[?25h[?25l[62;104H8-32[39;32H[?25h[?25l[62;101H8,25[38;32H[?25h[?25l[62;104H6-33[38;33H[?25h[?25l[62;104H7-34[38;34H[?25h[?25l[62;104H8-35[38;35H[?25h[?25ld[46m([13C)[m[62;104H9-36[38;36H[?25h[?25l[62;103H30-37[38;37H[?25h[?25l([13C)[62;104H1-38[38;38H[?25h[?25l[62;104H2-39[38;39H[?25h[?25l[62;104H3-40[38;40H[?25h[?25l[62;104H4-41[38;41H[?25h[?25l[62;104H5-42[38;42H[?25h[?25l[62;104H6-43[38;43H[?25h[?25l[62;104H7-44[38;44H[?25h[?25l[62;104H8-45[38;45H[?25h[?25l[62;104H9-46[38;46H[?25h[?25l[62;103H40-47[38;47H[?25h[?25l[62;104H1-48[38;48H[?25h[?25l[62;104H2-49[38;49H[?25h[?25l[38;36H[46m([13C)[m[62;104H3-50[38;50H[?25h[?25l[38;17H[46m([m[18C([13C)[46m)[m[62;104H4-51[38;51H[?25h[?25l[62;104H5-52[38;52H[?25h[?25l[38;17H([33C)[62;104H6-53[38;53H[?25h[?25l[62;104H7-54[38;54H[?25h[?25l[62;104H8-55[38;55H[?25h[?25l[62;104H9-56[38;56H[?25h[?25l[62;103H50-57[38;57H[?25h[?25l[62;104H1-58[38;58H[?25h[?25l[62;104H2-59[38;59H[?25h[?25l[62;104H3-60[38;60H[?25h[?25l[38;15H[46m([45C)[m[62;104H4-61[38;61H[?25h[?25l[38;15H([45C)[46m{[44;9H}[m[62;104H5-62[38;62H[?25h[?25l{[39;20H[46m([41C)[m[44;9H}[62;101H9,48[39;62H[?25h[?25l[39;20H([41C)[46m{[42;17H}[m[62;104H9-63[39;63H[?25h[?25l{[42;17H}[62;100H40,30-51[40;51H[?25h[?25l[62;101H1,22-43[41;43H[?25h[?25l[39;63H[46m{[42;17H}[m[62;101H2,4-18 [42;18H[?25h[?25l[39;63H{[42;17H}[62;101H3,17-31[43;31H[?25h[?25l[38;62H[46m{[44;9H}[m[62;101H4,3-10 [44;10H[?25h[?25l[38;62H{[44;9H}[62;101H5,11-18[45;18H[?25h[?25l[30;1H[46m{[46;1H}[m[62;101H6,2    [46;2H[?25h[?25l[30;1H{[46;1H}[62;101H7,1[47;1H[?25h[?25l[48;11H[46m()[m[62;101H8,13[48;13H[?25h[?25l()[62;101H9,4-11[49;11H[?25h[?25l[62;100H50,30-37[50;37H[?25h[?25l[62;101H1,47-54[51;54H[?25h[?25l[62;101H2,5-12 [52;12H[?25h[?25l[53;9H[46m{[56;9H}[m[62;101H3,3-10[53;10H[?25h[?25l{[56;9H}[62;101H4,27-34[54;34H[?25h[?25l[62;101H7,1    [57;1H[?25h[?25l[58;11H[46m([25C)[m[62;101H8,38[58;38H[?25h[?25l[58;11H([25C)[62;101H9,43-50[59;50H[?25h[?25l[62;100H60,10-17[60;17H[?25h[?25l[62;101H1,2    [61;2H[?25h[?25l[1;61r[1;1H[2M[1;62r[62;100H[K[62;100H63,1[10CBot[61;1H[?25h[?25l[62;101H2[60;1H[?25h[?25l[62;101H1,2[59;2H[?25h[?25l[62;101H0,10-17[58;17H[?25h[?25l[62;100H59,43-50[57;50H[?25h[?25l[56;11H[46m([25C)[m[62;101H8,38   [56;38H[?25h[?25l[56;11H([25C)[62;101H7,1 [55;1H[?25h[?25l[51;9H[46m{[54;9H}[m[62;101H6,3-10[54;10H[?25h[?25l[51;9H{[54;9H}[62;101H5,27-34[53;34H[?25h[?25l[62;101H4[52;34H[?25h[?25l[51;9H[46m{[54;9H}[m[62;101H3,3-10 [51;10H[?25h[?25l{[54;9H}[62;101H4,27-34[52;34H[?25h[?25l[62;101H5[53;34H[?25h[?25l[51;9H[46m{[54;9H}[m[62;101H6,3-10 [54;10H[?25h[?25l[51;9H{[54;9H}[62;101H7,1   [55;1H[?25h[?25l[56;11H[46m([25C)[m[62;101H8,38[56;38H[?25h[?25l[56;11H([25C)[62;101H9,43-50[57;50H[?25h[?25l[62;100H60,10-17[58;17H[?25h[?25l[62;101H1,2    [59;2H[?25h[?25l[62;101H2,1[60;1H[?25h[?25l[62;101H1,2[59;2H[?25h[?25l[62;101H0,10-17[58;17H[?25h[?25l[62;100H59,43-50[57;50H[?25h[?25l[56;11H[46m([25C)[m[62;101H8,38   [56;38H[?25h[?25l{[56;11H([25C)[46m{


}[m[62;104H9[56;39H[?25h[62;1H[K[56;38H[?25l[62;100H58,38[9CBot[56;38H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 63L, 1194C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.cgcc -o test.o smsh.c exec.c split.c vi smsh.c[Kgcc -o test.o smsh.c exec.c split.c 
/usr/bin/ld: /tmp/ccXA9gCj.o: in function `execute':
exec.c:(.text+0x0): multiple definition of `execute'; /tmp/ccj76aEq.o:smsh.c:(.text+0x36c): first defined here
/usr/bin/ld: /tmp/cc9onyLc.o: in function `next_cmd':
split.c:(.text+0x0): multiple definition of `next_cmd'; /tmp/ccj76aEq.o:smsh.c:(.text+0x0): first defined here
/usr/bin/ld: /tmp/cc9onyLc.o: in function `emalloc':
split.c:(.text+0x2df): multiple definition of `emalloc'; /tmp/ccj76aEq.o:smsh.c:(.text+0x2df): first defined here
/usr/bin/ld: /tmp/cc9onyLc.o: in function `erealloc':
split.c:(.text+0x320): multiple definition of `erealloc'; /tmp/ccj76aEq.o:smsh.c:(.text+0x320): first defined here
/usr/bin/ld: /tmp/cc9onyLc.o: in function `splitline':
split.c:(.text+0xdd): multiple definition of `splitline'; /tmp/ccj76aEq.o:smsh.c:(.text+0xdd): first defined here
/usr/bin/ld: /tmp/cc9onyLc.o: in function `newstr':
split.c:(.text+0x245): multiple definition of `newstr'; /tmp/ccj76aEq.o:smsh.c:(.text+0x245): first defined here
/usr/bin/ld: /tmp/cc9onyLc.o: in function `freelist':
split.c:(.text+0x297): multiple definition of `freelist'; /tmp/ccj76aEq.o:smsh.c:(.text+0x297): first defined here
collect2: error: ld returned 1 exit status
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ clear
[H[2J[3J]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ cleargcc -o test.o smsh.c exec.c split.c 
/usr/bin/ld: /tmp/ccoobQsg.o: in function `execute':
exec.c:(.text+0x0): multiple definition of `execute'; /tmp/ccWRTQQb.o:smsh.c:(.text+0x36c): first defined here
/usr/bin/ld: /tmp/ccC3OTfl.o: in function `next_cmd':
split.c:(.text+0x0): multiple definition of `next_cmd'; /tmp/ccWRTQQb.o:smsh.c:(.text+0x0): first defined here
/usr/bin/ld: /tmp/ccC3OTfl.o: in function `emalloc':
split.c:(.text+0x2df): multiple definition of `emalloc'; /tmp/ccWRTQQb.o:smsh.c:(.text+0x2df): first defined here
/usr/bin/ld: /tmp/ccC3OTfl.o: in function `erealloc':
split.c:(.text+0x320): multiple definition of `erealloc'; /tmp/ccWRTQQb.o:smsh.c:(.text+0x320): first defined here
/usr/bin/ld: /tmp/ccC3OTfl.o: in function `splitline':
split.c:(.text+0xdd): multiple definition of `splitline'; /tmp/ccWRTQQb.o:smsh.c:(.text+0xdd): first defined here
/usr/bin/ld: /tmp/ccC3OTfl.o: in function `newstr':
split.c:(.text+0x245): multiple definition of `newstr'; /tmp/ccWRTQQb.o:smsh.c:(.text+0x245): first defined here
/usr/bin/ld: /tmp/ccC3OTfl.o: in function `freelist':
split.c:(.text+0x297): multiple definition of `freelist'; /tmp/ccWRTQQb.o:smsh.c:(.text+0x297): first defined here
collect2: error: ld returned 1 exit status
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi m[Ksmsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 63L, 1194C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"split.c"[m
[35m#include [m[33m"exec.c"[m


[35m#define DFL_PROMPT      [m[33m"> "[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp);
[32mchar[m ** splitline([32mchar[m *line);
[32mchar[m *newstr([32mchar[m *s, [32mint[m l);
[32mvoid[m freelist([32mchar[m **list);
[32mvoid[m * emalloc([32msize_t[m n);
[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n);
[32mvoid[m setup();
[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n);
[32mint[m execute([32mchar[m *argv[]);


[32mint[m main()
{[31;9H[32mchar[m    *cmdline, *prompt, **arglist;[32;9H[32mint[m     result;[33;9H[32mvoid[m    setup();[35;9Hprompt = DFL_PROMPT;[36;9Hsetup();[38;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[39;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[40;25Hresult = execute(arglist);[41;25Hfreelist(arglist);[42;17H}[43;17Hfree(cmdline);[44;9H}[45;9H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[49;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[53;9H{[54;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[55;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[56;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n){[59;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[60;9Hexit(n);
}[62;100H1,1[11CTop[1;1H[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6[6;1H[?25h[?25l[62;100H7[7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l[62;101H1[21;1H[?25h[?25l[62;101H2[22;1H[?25h[?25l[62;101H3[23;1H[?25h[?25l[62;101H4[24;1H[?25h[?25l[62;101H5[25;1H[?25h[?25l[62;101H6[26;1H[?25h[?25l[62;101H5[25;1H[?25h[?25l[62;101H4[24;1H[?25h[?25l[62;101H3[23;1H[?25h[?25l[62;101H2[22;1H[?25h[?25l[62;101H1[21;1H[?25h[?25l[62;101H0[20;1H[?25h[?25l[62;100H19[19;1H[?25h[?25l[62;101H8[18;1H[?25h[62;1H[K[18;1H[?25l[62;100H18,1[10CTop[18;1H[?25h[?25l[62;1H9 fewer lines[62;100H[K[18;61r[18;1H[9M[1;62r[55;1H[34m~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;1H[K[62;100H18,0-1[8CAll9 fewer lines[62;100H[K[62;100H18,0-1[8CAll[18;1H[?25h[?25l[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 54L, 922C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.cgcc -o test.o smsh.c exec.c split.c 
/usr/bin/ld: /tmp/ccYGHrzK.o: in function `execute':
exec.c:(.text+0x0): multiple definition of `execute'; /tmp/cc98mmvG.o:smsh.c:(.text+0x36c): first defined here
/usr/bin/ld: /tmp/ccfJEEOO.o: in function `next_cmd':
split.c:(.text+0x0): multiple definition of `next_cmd'; /tmp/cc98mmvG.o:smsh.c:(.text+0x0): first defined here
/usr/bin/ld: /tmp/ccfJEEOO.o: in function `emalloc':
split.c:(.text+0x2df): multiple definition of `emalloc'; /tmp/cc98mmvG.o:smsh.c:(.text+0x2df): first defined here
/usr/bin/ld: /tmp/ccfJEEOO.o: in function `erealloc':
split.c:(.text+0x320): multiple definition of `erealloc'; /tmp/cc98mmvG.o:smsh.c:(.text+0x320): first defined here
/usr/bin/ld: /tmp/ccfJEEOO.o: in function `splitline':
split.c:(.text+0xdd): multiple definition of `splitline'; /tmp/cc98mmvG.o:smsh.c:(.text+0xdd): first defined here
/usr/bin/ld: /tmp/ccfJEEOO.o: in function `newstr':
split.c:(.text+0x245): multiple definition of `newstr'; /tmp/cc98mmvG.o:smsh.c:(.text+0x245): first defined here
/usr/bin/ld: /tmp/ccfJEEOO.o: in function `freelist':
split.c:(.text+0x297): multiple definition of `freelist'; /tmp/cc98mmvG.o:smsh.c:(.text+0x297): first defined here
collect2: error: ld returned 1 exit status
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi pi`[Kd.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"pid.c" 48L, 903C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m

[35m#define DFL_PROMPT      [m[33m"> "[m

[32mint[m main()
{
[32mchar[m    *cmdline, *prompt, **arglist;
[32mint[m     result;
[32mvoid[m setup();

prompt = DFL_PROMPT;
setup();

[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){
    [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[26;9Hresult = execute(arglist);[27;9Hfreelist(arglist);
    }
    free(cmdline);
    }
    [33mreturn[m [33m0[m;
}

[32mvoid[m setup()
[36m/*
 * purpose: initialize shell
 * returns: nothing. calls fatal() if trouble
 */[m
{
    signal([33mSIGINT[m,  [33mSIG_IGN[m);
    signal([33mSIGQUIT[m, [33mSIG_IGN[m);
}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n)
{
    fprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);
    exit(n);
}
[34m~                                                                                                                    [50;1H~                                                                                                                    [51;1H~                                                                                                                    [52;1H~                                                                                                                    [53;1H~                                                                                                                    [54;1H~                                                                                                                    [55;1H~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi pid.c ls[K[K[Kgcc smsh.c split.c ece[K[Kxec.c -o prog[K[K[K[Ktest.o
/usr/bin/ld: /tmp/ccYcvKwg.o: in function `next_cmd':
split.c:(.text+0x0): multiple definition of `next_cmd'; /tmp/ccvrWFfS.o:smsh.c:(.text+0x0): first defined here
/usr/bin/ld: /tmp/ccYcvKwg.o: in function `emalloc':
split.c:(.text+0x2df): multiple definition of `emalloc'; /tmp/ccvrWFfS.o:smsh.c:(.text+0x2df): first defined here
/usr/bin/ld: /tmp/ccYcvKwg.o: in function `erealloc':
split.c:(.text+0x320): multiple definition of `erealloc'; /tmp/ccvrWFfS.o:smsh.c:(.text+0x320): first defined here
/usr/bin/ld: /tmp/ccYcvKwg.o: in function `splitline':
split.c:(.text+0xdd): multiple definition of `splitline'; /tmp/ccvrWFfS.o:smsh.c:(.text+0xdd): first defined here
/usr/bin/ld: /tmp/ccYcvKwg.o: in function `newstr':
split.c:(.text+0x245): multiple definition of `newstr'; /tmp/ccvrWFfS.o:smsh.c:(.text+0x245): first defined here
/usr/bin/ld: /tmp/ccYcvKwg.o: in function `freelist':
split.c:(.text+0x297): multiple definition of `freelist'; /tmp/ccvrWFfS.o:smsh.c:(.text+0x297): first defined here
/usr/bin/ld: /tmp/ccdw9LYE.o: in function `execute':
exec.c:(.text+0x0): multiple definition of `execute'; /tmp/ccvrWFfS.o:smsh.c:(.text+0x36c): first defined here
collect2: error: ld returned 1 exit status
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc -c split.c -o split.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc -c split.c -o split.o[C[1P[1P[1P[1P[1P[1@e[1@e[1P[1@x[1@e[1@v[1P[1@c[C[C[C[C[C[C[C[C[C[C[C[C[1P.o[1P.o[1P.o[1P.o[1P.oe.ox.oe.oc.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc smsh.c split.o exec.o -o test.o
/usr/bin/ld: split.o: in function `next_cmd':
split.c:(.text+0x0): multiple definition of `next_cmd'; /tmp/ccFgQJZH.o:smsh.c:(.text+0x0): first defined here
/usr/bin/ld: split.o: in function `emalloc':
split.c:(.text+0x2df): multiple definition of `emalloc'; /tmp/ccFgQJZH.o:smsh.c:(.text+0x2df): first defined here
/usr/bin/ld: split.o: in function `erealloc':
split.c:(.text+0x320): multiple definition of `erealloc'; /tmp/ccFgQJZH.o:smsh.c:(.text+0x320): first defined here
/usr/bin/ld: split.o: in function `splitline':
split.c:(.text+0xdd): multiple definition of `splitline'; /tmp/ccFgQJZH.o:smsh.c:(.text+0xdd): first defined here
/usr/bin/ld: split.o: in function `newstr':
split.c:(.text+0x245): multiple definition of `newstr'; /tmp/ccFgQJZH.o:smsh.c:(.text+0x245): first defined here
/usr/bin/ld: split.o: in function `freelist':
split.c:(.text+0x297): multiple definition of `freelist'; /tmp/ccFgQJZH.o:smsh.c:(.text+0x297): first defined here
/usr/bin/ld: exec.o: in function `execute':
exec.c:(.text+0x0): multiple definition of `execute'; /tmp/ccFgQJZH.o:smsh.c:(.text+0x36c): first defined here
collect2: error: ld returned 1 exit status
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi exec.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"exec.c" 38L, 816C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* execute.c - code used by small shell to execute commands */[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m<sys/wait.h>[m


[32mint[m execute([32mchar[m *argv[])
[36m/*
 * purpose: run a program passing it arguments
 * returns: status returned via wait, or -1 on error
 *  errors: -1 on fork() or wait() errors
 */[m
{
    [32mint[m pid ;
    [32mint[m child_info = -[33m1[m;[21;5H[33mif[m ( argv[[33m0[m] == [33mNULL[m )[14C[36m/* nothing succeeds     */[m[22;9H[33mreturn[m [33m0[m;[24;5H[33mif[m ( (pid = fork())  == -[33m1[m )[25;9Hperror([33m"fork"[m);[26;6H[33melse[m [33mif[m ( pid == [33m0[m ){[27;9Hsignal([33mSIGINT[m, [33mSIG_DFL[m);[28;9Hsignal([33mSIGQUIT[m, [33mSIG_DFL[m);[29;9Hexecvp(argv[[33m0[m], argv);[30;9Hperror([33m"cannot execute command"[m);[31;9Hexit([33m1[m);
    }
    [33melse[m {[34;9H[33mif[m ( wait(&child_info) == -[33m1[m )[35;13Hperror([33m"wait"[m);
    }
  [33mreturn[m child_info;
}
[34m~                                                                                                                    [40;1H~                                                                                                                    [41;1H~                                                                                                                    [42;1H~                                                                                                                    [43;1H~                                                                                                                    [44;1H~                                                                                                                    [45;1H~                                                                                                                    [46;1H~                                                                                                                    [47;1H~                                                                                                                    [48;1H~                                                                                                                    [49;1H~                                                                                                                    [50;1H~                                                                                                                    [51;1H~                                                                                                                    [52;1H~                                                                                                                    [53;1H~                                                                                                                    [54;1H~                                                                                                                    [55;1H~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[62;3H[K[62;3H[?25h[?25l[62;2H[K[62;2H[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"split.c" 148L, 3335C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[28;9Hprintf([33m"[m[35m%s[m[33m"[m,prompt);[28C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m )[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[51;1H}[m[62;101H1[21;1H[?25h[?25l{[51;1H}[62;101H0[20;1H[?25h[?25l[62;100H19[19;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H1,1  [11;1H[?25h[?25l[62;101H0[10;1H[?25h[?25l[62;100H9,1 [9;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H4,1  [4;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H1[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[51;1H}[m[62;101H1[21;1H[?25h[?25l{[51;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H9,0-1[39;1H[?25h[?25l[62;100H40,1-8[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3,0-1[43;1H[?25h[?25l[62;101H4,1-8[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6[46;8H[?25h[?25l[62;101H7[47;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[62;100H50[50;8H[?25h[?25l[21;1H[46m{[51;1H}[m[62;101H1,1  [51;1H[?25h[?25l[21;1H{[51;1H}[62;101H2,0-1[52;1H[?25h[?25l[62;101H3,1  [53;1H[?25h[?25l[62;101H4[54;1H[?25h[?25l[62;101H5[55;1H[?25h[?25l[62;101H6[56;1H[?25h[?25l[62;101H7,0-1[57;1H[?25h[?25l[62;101H8,1  [58;1H[?25h[?25l[62;101H9[59;1H[?25h[?25l[62;100H60[60;1H[?25h[?25l[62;101H1[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;1H[K[62;100H62,1[11C1%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,1[11C2%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,1[11C3%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H65,1[11C4%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H66,1[11C5%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,1-8[9C6%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **args ;[62;100H[K[62;100H68,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,1-8[9C9%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,1-8[8C11%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H73,1-8[8C13%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H74,1-8[8C14%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H75,0-1[8C16%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,1-8[8C17%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,1-8[8C18%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H78,0-1[8C19%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,1-8[8C20%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,1-8[8C21%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H81,1-8[8C22%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H82,0-1[8C24%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H83,1-8[8C25%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H{[62;100H[K[62;100H84,1-8[8C26%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H85,1-8[8C27%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H86,1-8[8C28%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H87,1-8[8C29%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mbreak[m;[62;100H[K[62;100H88,1-8[8C31%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H89,0-1[8C32%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H90,1-8[8C33%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H91,1-8[8C34%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H92,1-8[8C35%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hbufspace += [33mBUFSIZ[m;[62;100H[K[62;100H93,1-8[8C36%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H94,1-8[8C37%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H95,1-8[8C39%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H96,0-1[8C40%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* mark start, then find end of word */[m[62;100H[K[62;100H97,1-8[8C41%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hstart = cp;[62;100H[K[62;100H98,1-8[8C42%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hlen   = [33m1[m;[62;100H[K[62;100H99,1-8[8C43%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[62;100H[K[62;100H100,1-8[7C44%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hlen++;[62;100H[K[62;100H101,1-8[7C45%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H102,1-8[7C47%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H}[62;100H[K[62;100H103,1-8[7C48%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs[argnum] = [33mNULL[m;[62;100H[K[62;100H104,1-8[7C49%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m args;[62;100H[K[62;100H105,1-8[7C50%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[21;1H[46m{[61;1H}[m[62;100H[K[62;100H106,1[9C51%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[20;1H{[60;1H}[62;100H[K[62;100H107,0-1[7C52%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H108,1[9C54%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: constructor for strings[m[62;100H[K[62;100H109,1[9C55%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: a string, never NULL[m[62;100H[K[62;100H110,1[9C56%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H111,1[9C57%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[62;100H[K[62;100H112,1[9C58%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H113,1[9C59%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m *rv = emalloc(l+[33m1[m);[62;100H[K[62;100H114,1-8[7C60%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H115,0-1[7C62%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hrv[l] = [35m'\0'[m;[62;100H[K[62;100H116,1-8[7C63%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hstrncpy(rv, s, l);[62;100H[K[62;100H117,1-8[7C64%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H118,1-8[7C65%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H[46m{[61;1H}[m[62;100H[K[62;100H119,1[9C66%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[54;1H{[60;1H}[62;100H[K[62;100H120,0-1[7C67%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m[62;100H[K[62;100H121,1[9C68%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1Hfreelist([32mchar[m **list)[62;100H[K[62;100H122,1[9C70%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H123,1[9C71%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: free the list returned by splitline[m[62;100H[K[62;100H124,1[9C72%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: nothing[m[62;100H[K[62;100H125,1[9C73%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: free all strings in list and then free the list[m[62;100H[K[62;100H126,1[9C74%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H127,1[9C75%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H128,1[9C77%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **cp = list;[62;100H[K[62;100H129,1-8[7C78%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp )[62;100H[K[62;100H130,1-8[7C79%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfree(*cp++);[62;100H[K[62;100H131,1-8[7C80%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hfree(list);[62;100H[K[62;100H132,1-8[7C81%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H133,1[9C82%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H{[60;1H}[62;100H[K[62;100H134,0-1[7C83%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m * emalloc([32msize_t[m n)[62;100H[K[62;100H135,1[9C85%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H136,1[9C86%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv ;[62;100H[K[62;100H137,1-8[7C87%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = malloc(n)) == [33mNULL[m )[62;100H[K[62;100H138,1-8[7C88%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H139,1-8[7C89%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H140,1-8[7C90%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H141,1[9C91%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H{[60;1H}
[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[62;100H[K[62;100H142,1[9C93%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H143,1[9C94%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv;[62;100H[K[62;100H144,1-8[7C95%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[62;100H[K[62;100H145,1-8[7C96%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H146,1-8[7C97%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H147,1-8[7C98%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H148,1[9CBot[61;1H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"split.c" 148L, 3335C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 54L, 922C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m
[35m#include [m[33m"split.c"[m
[35m#include [m[33m"exec.c"[m


[35m#define DFL_PROMPT      [m[33m"> "[m[20;1H[32mint[m main()
{[22;9H[32mchar[m    *cmdline, *prompt, **arglist;[23;9H[32mint[m     result;[24;9H[32mvoid[m    setup();[26;9Hprompt = DFL_PROMPT;[27;9Hsetup();[29;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[30;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[31;25Hresult = execute(arglist);[32;25Hfreelist(arglist);[33;17H}[34;17Hfree(cmdline);[35;9H}[36;9H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[40;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[44;9H{[45;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[46;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[47;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n){[50;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[51;9Hexit(n);
}


[34m~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,0-1[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6,1  [16;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H6,1  [16;1H[?25h[?25l[62;101H5,0-1[15;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[12;61r[12;1H[2M[1;62r[60;1H[34m~                                                                                                                    [61;1H~                                                                                                                    [m[62;1H[K[62;100H12,0-1[8CAll[12;1H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 52L, 885C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.cplit.c [1Pexec[C[C[Cgcc smsh.c split.o exec.o -o test.ovi exec.c [K[1@split[C[C[C[2Pmsh.c[Kvi smsh.cplit.c [1Pexec[C[C[Cgcc smsh.c split.o exec.o -o test.o[12P-c exec.c -o exec.osplit.c -o split.o[2Pexec.c -o exec.osmsh.c split.o exec.o -o test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ sh[K[Ktest[K[K[K[K./test.o
> grep    echo HEllo
HEllo
> quit
cannot execute command: No such file or directory
> ^C
> ^Z
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ jobs
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ kill ./test.o
bash: kill: ./test.o: arguments must be process or job IDs
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ pid[K[K[Kkill %![K1

[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ jobs
[1]+  Terminated              ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ps
  PID TTY          TIME CMD
 2479 pts/2    00:00:00 bash
27608 pts/2    00:00:00 ps
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ jobs
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"split.c" 148L, 3335C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[28;9Hprintf([33m"[m[35m%s[m[33m"[m,prompt);[28C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m )[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[51;1H}[m[62;101H1[21;1H[?25h[?25l{[51;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H9,0-1[39;1H[?25h[?25l[62;100H40,1-8[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3,0-1[43;1H[?25h[?25l[62;101H4,1-8[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6[46;8H[?25h[?25l[62;101H7[47;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[62;100H50[50;8H[?25h[?25l[21;1H[46m{[51;1H}[m[62;101H1,1  [51;1H[?25h[?25l[21;1H{[51;1H}[62;101H2,0-1[52;1H[?25h[?25l[62;101H3,1  [53;1H[?25h[?25l[62;101H4[54;1H[?25h[?25l[62;101H5[55;1H[?25h[?25l[62;101H6[56;1H[?25h[?25l[62;101H7,0-1[57;1H[?25h[?25l[62;101H8,1  [58;1H[?25h[?25l[62;101H9[59;1H[?25h[?25l[62;100H60[60;1H[?25h[?25l[62;101H1[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;1H[K[62;100H62,1[11C1%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,1[11C2%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,1[11C3%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H65,1[11C4%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H66,1[11C5%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,1-8[9C6%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **args ;[62;100H[K[62;100H68,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,1-8[9C9%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,1-8[8C11%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H73,1-8[8C13%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H74,1-8[8C14%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H75,0-1[8C16%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,1-8[8C17%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,1-8[8C18%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H78,0-1[8C19%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,1-8[8C20%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,1-8[8C21%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H81,1-8[8C22%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H82,0-1[8C24%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H83,1-8[8C25%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H{[62;100H[K[62;100H84,1-8[8C26%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H85,1-8[8C27%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H86,1-8[8C28%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H87,1-8[8C29%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mbreak[m;[62;100H[K[62;100H88,1-8[8C31%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H89,0-1[8C32%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H90,1-8[8C33%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H91,1-8[8C34%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H92,1-8[8C35%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hbufspace += [33mBUFSIZ[m;[62;100H[K[62;100H93,1-8[8C36%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H94,1-8[8C37%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H95,1-8[8C39%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H96,0-1[8C40%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* mark start, then find end of word */[m[62;100H[K[62;100H97,1-8[8C41%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hstart = cp;[62;100H[K[62;100H98,1-8[8C42%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hlen   = [33m1[m;[62;100H[K[62;100H99,1-8[8C43%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[62;100H[K[62;100H100,1-8[7C44%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hlen++;[62;100H[K[62;100H101,1-8[7C45%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H102,1-8[7C47%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H}[62;100H[K[62;100H103,1-8[7C48%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs[argnum] = [33mNULL[m;[62;100H[K[62;100H104,1-8[7C49%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m args;[62;100H[K[62;100H105,1-8[7C50%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[21;1H[46m{[61;1H}[m[62;100H[K[62;100H106,1[9C51%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[20;1H{[60;1H}[62;100H[K[62;100H107,0-1[7C52%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H108,1[9C54%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: constructor for strings[m[62;100H[K[62;100H109,1[9C55%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: a string, never NULL[m[62;100H[K[62;100H110,1[9C56%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H111,1[9C57%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[62;100H[K[62;100H112,1[9C58%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H113,1[9C59%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m *rv = emalloc(l+[33m1[m);[62;100H[K[62;100H114,1-8[7C60%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H115,0-1[7C62%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hrv[l] = [35m'\0'[m;[62;100H[K[62;100H116,1-8[7C63%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hstrncpy(rv, s, l);[62;100H[K[62;100H117,1-8[7C64%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H118,1-8[7C65%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H[46m{[61;1H}[m[62;100H[K[62;100H119,1[9C66%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[54;1H{[60;1H}[62;100H[K[62;100H120,0-1[7C67%[61;1H[?25h[?25l
[33m-- INSERT --[m[62;100H[K[62;100H120,1[9C67%[61;1H[?25h[?25l[54;1H[46m{[60;1H}[m[62;101H19[60;1H[?25h[?25l[54;1H{[60;1H}[62;102H8[59;1H[?25h[?25l[62;102H7[58;1H[?25h[?25l[62;102H6[57;1H[?25h[?25l[62;102H5[56;1H[?25h[?25l[62;102H4[55;1H[?25h[?25l[54;1H[46m{[60;1H}[m[62;102H3[54;1H[?25h[?25l{[60;1H}[62;102H2[53;1H[?25h[?25l[62;102H1[52;1H[?25h[?25l[62;102H0[51;1H[?25h[?25l[62;101H09[50;1H[?25h[?25l[62;102H8[49;1H[?25h[?25l[62;102H7[48;1H[?25h[?25l[7;1H[46m{[47;1H}[m[62;102H6[47;1H[?25h[?25l[7;1H{[47;1H}[62;102H5[46;1H[?25h[?25l[62;102H4[45;1H[?25h[?25l[62;102H3[44;1H[?25h[?25l[62;102H2[43;1H[?25h[?25l[62;102H1[42;1H[?25h[?25l[62;102H0[41;1H[?25h[?25l[62;100H99,1 [40;1H[?25h[?25l[62;101H8[39;1H[?25h[?25l[62;101H9[40;1H[?25h[?25l[62;100H100,1[41;1H[?25h[?25l[62;104H2-9[41;9H[?25h[?25l[62;104H3-17[41;17H[?25h[?25l[62;104H4-18[41;18H[?25h[?25l[62;104H5-19[41;19H[?25h[?25l[62;104H6-20[41;20H[?25h[?25l[62;104H7-21[41;21H[?25h[?25l[62;104H8-22[41;22H[?25h[?25l [46m([34C)[m[62;104H9-23[41;23H[?25h[?25l[62;104H10-24[41;24H[?25h[?25l([34C)[62;105H1-25[41;25H[?25h[?25l[62;105H2-26[41;26H[?25h[?25l[62;105H3-27[41;27H[?25h[?25l[62;105H4-28[41;28H[?25h[?25l[62;105H5-29[41;29H[?25h[?25l[62;105H6-30[41;30H[?25h[?25l[62;105H7-31[41;31H[?25h[?25l[62;105H8-32[41;32H[?25h[?25l[62;105H9-33[41;33H[?25h[?25l[62;104H20-34[41;34H[?25h[?25l[62;105H1-35[41;35H[?25h[?25l[62;105H2-36[41;36H[?25h[?25l[62;105H3-37[41;37H[?25h[?25l[62;105H4-38[41;38H[?25h[?25l[62;105H5-39[41;39H[?25h[?25l[62;105H6-40[41;40H[?25h[?25l[62;105H7-41[41;41H[?25h[?25l![46m([13C)[m[62;105H8-42[41;42H[?25h[?25l[62;105H9-43[41;43H[?25h[?25l[62;105H8-42[41;42H[?25h[?25l([13C)[62;105H7-41[41;41H[?25h[?25l![46m([13C)[m[62;105H8-42[41;42H[?25h[?25l([13C)[62;105H7-41[41;41H[?25h[?25l(is_delim(*cp)) )[41;58H[K[41;41H[46m([13C)[41;41H[?25h[?25li[ms_delim(*cp))[46m [m[1m[37m[41m)[m[41;57H[K[41;41Hi[13C [41;41H[?25h[?25ls_delim(*cp)) [1m[37m[41m)[m[41;56H[K[41;41H[?25h[?25l_delim(*cp)) [1m[37m[41m)[m[41;55H[K[41;41H[?25h[?25ldelim(*cp)) [1m[37m[41m)[m[41;54H[K[41;41H[?25h[?25lelim(*cp)) [1m[37m[41m)[m[41;53H[K[41;41H[?25h[?25llim(*cp)) [1m[37m[41m)[m[41;52H[K[41;41H[?25h[?25lim(*cp)) [1m[37m[41m)[m[41;51H[K[41;41H[?25h[?25lm(*cp)) [1m[37m[41m)[m[41;50H[K[41;41H[?25h[?25l(*cp)) [1m[37m[41m)[m[41;49H[K[41;41H[46m([m*cp[46m)[?25h[?25l[m[62;105H8-42[41;42H[?25h[?25l(*cp)[62;105H9-43[41;43H[?25h[?25l[62;104H30-44[41;44H[?25h[?25l[46m([m*cp[46m)[m[62;105H1-45[41;45H[?25h[?25l[41;23H[46m([m[17C(*cp)[46m)[m[62;105H2-46[41;46H[?25h[?25l[41;23H([17C[46m([m*cp[46m)[m)[62;105H1-45[41;45H[?25h[?25l(*cp)[62;105H0-44[41;44H[?25h[?25l[46m([m*cp[46m)[m[62;105H1-45[41;45H[?25h[?25l[46m [m)) [1m[37m[41m)[m [46m)[m[62;105H2-46[41;46H[?25h[?25l[46m![m)) [1m[37m[41m)[m![46m)[m[62;105H3-47[41;47H[?25h[?25l[46m=[m)) [1m[37m[41m)[m=[46m)[m[62;105H4-48[41;48H[?25h[?25l[46m [m)) [1m[37m[41m)[m [46m)[m[62;105H5-49[41;49H[?25h[?25l[46m'[m)) [1m[37m[41m)[m'[46m)[m[62;105H6-50[41;50H[?25h[?25l[46m:[m)) [1m[37m[41m)[m:[46m)[m[62;105H7-51[41;51H[?25h[?25l)[1C [1m[37m[41m)[m[41;54H[K[41;50H[46m)[m)[62;105H6-50[41;50H[?25h[?25l[46m;[m)) [1m[37m[41m)[m;[46m)[m[62;105H7-51[41;51H[?25h[?25l[46m:[m)) [1m[37m[41m)[m:[46m)[m[62;105H8-52[41;52H[?25h[?25l)[1C [1m[37m[41m)[m[41;55H[K[41;51H[46m)[m)[62;105H7-51[41;51H[?25h[?25l[33m';[m[33m[46m'[m)) [1m[37m[41m)[m[33m'[m[46m)[m[62;105H8-52[41;52H[?25h[?25l[41;23H[46m([m[17C([10C)[46m)[m[62;105H9-53[41;53H[?25h[?25l[62;104H40-54[41;54H[?25h[?25l[62;104H39-53[41;53H[?25h[?25l[41;23H([17C[46m([10C)[m)[62;105H8-52[41;52H[?25h[?25l[41;23H[46m([m[17C([10C)[46m)[m[62;105H9-53[41;53H[?25h[?25l[46m [m)[41;55H[K[41;23H([17C[46m([10C)[m [?25h[?25l[62;105H8-52[41;52H[?25h[?25l[41;41H([10C)[62;105H7-51[41;51H[?25h[?25l[62;105H6-50[41;50H[?25h[?25l[62;105H5-49[41;49H[?25h[?25l[62;105H4-48[41;48H[?25h[?25l[62;105H3-47[41;47H[?25h[?25l[62;105H2-46[41;46H[?25h[?25l[62;105H1-45[41;45H[?25h[?25l[62;105H0-44[41;44H[?25h[?25l[62;104H29-43[41;43H[?25h[?25l[46m([10C)[m[62;105H8-42[41;42H[?25h[?25l[62;105H7-41[41;41H[?25h[?25l[62;105H8-42[41;42H[?25h[?25l[62;105H7-41[41;41H[?25h[?25l([10C)[62;102H1,10-3[42;31H[?25h[?25l[41;41H[46m([10C)[m[62;102H0,27-4[41;41H[?25h[?25l[62;105H8-42[41;42H[?25h[?25l([10C)[62;105H9-43[41;43H[?25h[?25l[62;104H30-44[41;44H[?25h[?25l[62;105H1-45[41;45H[?25h[?25l[62;105H2-46[41;46H[?25h[?25l[62;105H3-47[41;47H[?25h[?25l[62;105H4-48[41;48H[?25h[?25l[62;105H5-49[41;49H[?25h[?25l[62;105H6-50[41;50H[?25h[?25l[62;105H7-51[41;51H[?25h[?25l[41;41H[46m([10C)[m[62;105H8-52[41;52H[?25h[?25l[41;41H([10C)[62;105H7-51[41;51H[?25h[?25l[62;105H6-50[41;50H[?25h[?25l[62;105H5-49[41;49H[?25h[?25l[62;105H4-48[41;48H[?25h[?25l[62;105H3-47[41;47H[?25h[?25l[62;105H2-46[41;46H[?25h[?25l[62;105H1-45[41;45H[?25h[?25l[62;105H0-44[41;44H[?25h[?25l[62;104H29-43[41;43H[?25h[?25l[46m([10C)[m[62;105H8-42[41;42H[?25h[?25l[62;105H7-41[41;41H[?25h[?25l[46m*[mcp != [33m';'[m)[46m [m[1m[37m[41m)[m[41;54H[K[41;41H*[10C [41;41H[?25h[?25l[62;105H8-42[41;42H[?25h[?25l[62;105H9-43[41;43H[?25h[?25l[62;104H30-44[41;44H[?25h[?25l[62;105H1-45[41;45H[?25h[?25l[62;105H2-46[41;46H[?25h[?25l[62;105H3-47[41;47H[?25h[?25l[62;105H4-48[41;48H[?25h[?25l[62;105H5-49[41;49H[?25h[?25l[62;105H6-50[41;50H[?25h[?25l[41;23H[46m([27C)[m[62;105H7-51[41;51H[?25h[?25l[62;105H8-52[41;52H[?25h[?25l[62;105H7-51[41;51H[?25h[?25l[46m [m)[41;53H[K[41;23H([27C [?25h[?25l[62;102H1,10-3[42;31H[?25h[?25l[62;102H0,37-5[41;51H[?25h[?25l[62;100H99,13-27 [40;27H[?25h[?25l[62;101H8,14-28[39;28H[?25h[?25l[62;101H7,37-51[38;51H[?25h[?25l[62;104H8-52[38;52H[?25h[?25l[62;104H9-53[38;53H[?25h[?25l[62;103H40-54[38;54H[?25h[?25l[62;104H1-55[38;55H[?25h[?25l[62;104H0-54[38;54H[?25h[?25l[62;103H39-53[38;53H[?25h[?25l[62;103H40-54[38;54H[?25h[?25l[36m*/[m[38;55H[K[62;103H39-53[38;53H[?25h[?25l[36m*/[m[38;54H[K[62;104H8-52[38;52H[?25h[?25l[36m*/[m[38;53H[K[62;104H7-51[38;51H[?25h[?25l[36m*/[m[38;52H[K[62;104H6-50[38;50H[?25h[?25l[36m*/[m[38;51H[K[62;104H5-49[38;49H[?25h[?25l[36mp*/[m[62;104H6-50[38;50H[?25h[?25l[36mh*/[m[62;104H7-51[38;51H[?25h[?25l[36mr*/[m[62;104H8-52[38;52H[?25h[?25l[36ma*/[m[62;104H9-53[38;53H[?25h[?25l[36ms*/[m[62;103H40-54[38;54H[?25h[?25l[36me*/[m[62;104H1-55[38;55H[?25h[?25l[36m */[m[62;104H2-56[38;56H[?25h[?25l[36mm*/[m[62;104H3-57[38;57H[?25h[?25l[36ma*/[m[62;104H4-58[38;58H[?25h[?25l[36mr*/[m[62;104H5-59[38;59H[?25h[?25l[36mk*/[m[62;104H6-60[38;60H[?25h[?25l[36me*/[m[62;104H7-61[38;61H[?25h[?25l[36md*/[m[62;104H8-62[38;62H[?25h[?25l[36m */[m[62;104H9-63[38;63H[?25h[?25l[36mb*/[m[62;103H50-64[38;64H[?25h[?25l[36my*/[m[62;104H1-65[38;65H[?25h[?25l[36m */[m[62;104H2-66[38;66H[?25h[?25l[36m;*/[m[62;104H3-67[38;67H[?25h[?25l[62;101H8,14-28[39;28H[?25h[?25l[62;101H9,13-27[40;27H[?25h[?25l[41;23H[46m([28C)[m[62;100H100,39-53[41;53H[?25h[?25l[41;23H([28C)[62;102H1,10-31[42;31H[?25h[?25l[62;102H2,39-53[43;53H[?25h[?25l[25;9H[46m{[44;9H}[m[62;102H3,3-10 [44;10H[?25h[?25l[25;9H{[44;9H}[62;102H2,39-53[43;53H[?25h[?25l[62;102H1,10-31[42;31H[?25h[?25l[62;102H2,39-53[43;53H[?25h[?25l[62;102H1,10-31[42;31H[?25h[?25l[41;23H[46m([28C)[m[62;102H0,39-53[41;53H[?25h[?25l[41;23H([28C)[62;100H99,13-27 [40;27H[?25h[?25l[41;23H[46m([28C)[m[62;100H100,39-53[41;53H[?25h[?25l[41;23H([28C)[62;102H1,10-31[42;31H[?25h[?25l[62;102H2,39-53[43;53H[?25h[?25l[43;40H[46m([10C)[m[62;105H8-52[43;52H[?25h[?25l[62;105H7-51[43;51H[?25h[?25l[43;40H([10C)[62;105H6-50[43;50H[?25h[?25l[62;105H5-49[43;49H[?25h[?25l[62;105H4-48[43;48H[?25h[?25l[62;105H3-47[43;47H[?25h[?25l[62;105H2-46[43;46H[?25h[?25l[62;105H1-45[43;45H[?25h[?25l[62;105H0-44[43;44H[?25h[?25l[62;104H29-43[43;43H[?25h[?25l[62;105H8-42[43;42H[?25h[?25l[46m([10C)[m[62;105H7-41[43;41H[?25h[?25l[62;105H6-40[43;40H[?25h[?25l([10C)[62;105H5-39[43;39H[?25h[?25l[62;105H4-38[43;38H[?25h[?25l[62;105H3-37[43;37H[?25h[?25l[62;105H2-36[43;36H[?25h[?25l[62;105H1-35[43;35H[?25h[?25l[62;105H0-34[43;34H[?25h[?25l[62;104H19-33[43;33H[?25h[?25l[62;105H8-32[43;32H[?25h[?25l[43;21H[46m[[8C][m[62;105H7-31[43;31H[?25h[?25l[62;105H6-30[43;30H[?25h[?25l[43;21H[[8C][62;105H5-29[43;29H[?25h[?25l[62;105H4-28[43;28H[?25h[?25l[62;105H3-27[43;27H[?25h[?25l[62;105H2-26[43;26H[?25h[?25l[62;105H1-25[43;25H[?25h[?25l[62;105H0-24[43;24H[?25h[?25l[62;104H9-23 [43;23H[?25h[?25l[46m[[8C][m[62;104H8-22[43;22H[?25h[?25l[62;104H7-21[43;21H[?25h[?25l[[8C][62;104H6-20[43;20H[?25h[?25l[62;104H5-19[43;19H[?25h[?25l[62;104H4-18[43;18H[?25h[?25l[62;104H3-17[43;17H[?25h[?25l[44;61r[44;1H[L[1;62r[43;17H[K[44;1Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H103,1[9C67%[44;1H[?25h[?25l        args[argnum++] = newstr(start, len);[62;104H2-9[44;9H[?25h[?25l        args[argnum++] = newstr(start, len);[62;104H3-17[44;17H[?25h[?25l[62;102H2[43;17H[?25h[?25l[62;102H3[44;17H[?25h[?25l[62;104H4-18[44;18H[?25h[?25l[62;104H5-19[44;19H[?25h[?25l[62;104H6-20[44;20H[?25h[?25ls[46m[[8C][m[62;104H7-21[44;21H[?25h[?25l[62;104H8-22[44;22H[?25h[?25l[[8C][62;104H9-23[44;23H[?25h[?25l[62;104H10-24[44;24H[?25h[?25l[62;105H1-25[44;25H[?25h[?25l[62;105H2-26[44;26H[?25h[?25l[62;105H3-27[44;27H[?25h[?25l[62;105H4-28[44;28H[?25h[?25l[62;105H5-29[44;29H[?25h[?25l[44;21H[46m[[8C][m[62;105H6-30[44;30H[?25h[?25l[62;105H7-31[44;31H[?25h[?25l[44;21H[[8C][62;105H8-32[44;32H[?25h[?25l[62;105H9-33[44;33H[?25h[?25l[62;104H20-34[44;34H[?25h[?25l[62;105H1-35[44;35H[?25h[?25l[62;105H2-36[44;36H[?25h[?25l[62;105H3-37[44;37H[?25h[?25l[62;105H4-38[44;38H[?25h[?25l[62;105H5-39[44;39H[?25h[?25lr[46m([10C)[m[62;105H6-40[44;40H[?25h[?25l[62;105H7-41[44;41H[?25h[?25l([10C)[62;105H8-42[44;42H[?25h[?25l[62;105H9-43[44;43H[?25h[?25l[62;104H30-44[44;44H[?25h[?25l[62;105H1-45[44;45H[?25h[?25l[62;105H2-46[44;46H[?25h[?25l[62;105H3-47[44;47H[?25h[?25l[62;105H4-48[44;48H[?25h[?25l[62;105H5-49[44;49H[?25h[?25l[62;105H6-50[44;50H[?25h[?25l[44;40H[46m([10C)[m[62;105H7-51[44;51H[?25h[?25l[62;105H8-52[44;52H[?25h[?25l[44;40H([10C)[62;105H9-53[44;53H[?25h[?25l[45;61r[45;1H[L[1;62r[62;100H[K[62;100H104,1[9C66%[45;1H[?25h[?25l[62;104H2-9[45;9H[?25h[?25l[62;104H3-17[45;17H[?25h[?25li[62;104H4-18[45;18H[?25h[?25l[33mif[m[62;104H5-19[45;19H[?25h[?25l([62;104H6-20[45;20H[?25h[?25l*[62;104H7-21[45;21H[?25h[?25lc[62;104H8-22[45;22H[?25h[?25lp[62;104H9-23[45;23H[?25h[?25l[62;104H10-24[45;24H[?25h[?25l=[62;105H1-25[45;25H[?25h[?25l[62;105H2-26[45;26H[?25h[?25l[62;105H1-25[45;25H[?25h[?25l=[62;105H2-26[45;26H[?25h[?25l'[62;105H3-27[45;27H[?25h[?25l:[62;105H4-28[45;28H[?25h[?25l;[62;105H5-29[45;29H[?25h[?25l)[45;19H[46m([9C)[m[62;105H6-30[45;30H[?25h[?25l[45;29H[K[45;19H([62;105H5-29[45;29H[?25h[?25l[45;28H[K[62;105H4-28[45;28H[?25h[?25l[45;27H[K[62;105H3-27[45;27H[?25h[?25l;[62;105H4-28[45;28H[?25h[?25l[33m';'[m[62;105H5-29[45;29H[?25h[?25l)[45;19H[46m([9C)[m[62;105H6-30[45;30H[?25h[?25l{[45;19H([9C)[46m{[46;9H}[m[62;105H7-31[45;31H[?25h[?25l[46;61r[46;1H[L[1;62r[47;9H}[62;100H[K[62;100H105,1[9C65%[45;30H{
[?25h[?25l}[45;30H[46m{
}[m[62;104H2[46;2H[?25h[?25l[62;104H1[46;1H[?25h[?25l[47;61r[47;1H[L[1;62r[46;1H[K[47;1H}[62;100H[K[62;100H106,1[9C64%[47;1H[46m}[?25h[?25l        [m}        [46m}[m[62;104H2-9[47;9H[?25h[?25l[46m        [m}[47;9H        [46m}[m[62;104H3-17[47;17H[?25h[?25l[46m        [m}[47;17H        [46m}[m[62;104H4-25[47;25H[?25h[?25l[47;17H}[47;25H[K[47;17H[46m}[m[62;104H3-17[47;17H[?25h[?25l[45;30H{[47;17H}[62;102H5,1   [46;1H[?25h[?25l[62;104H2-9[46;9H[?25h[?25l[62;104H3-17[46;17H[?25h[?25l[62;104H4-25[46;25H[?25h[?25l*[62;104H5-26[46;26H[?25h[?25lc[62;104H6-27[46;27H[?25h[?25lp[62;104H7-28[46;28H[?25h[?25l[62;104H8-29[46;29H[?25h[?25l=[62;104H9-30[46;30H[?25h[?25l[62;104H10-31[46;31H[?25h[?25l'[62;105H1-32[46;32H[?25h[?25l\[62;105H2-33[46;33H[?25h[?25l[33m0[m[62;105H3-34[46;34H[?25h[?25l[35m'\0'[m[62;105H4-35[46;35H[?25h[?25l;[62;105H5-36[46;36H[?25h[?25l[47;61r[47;1H[L[1;62r[62;100H[K[62;100H106,1[9C64%[47;1H[?25h[?25l[62;104H2-9[47;9H[?25h[?25l[62;104H3-17[47;17H[?25h[?25l[62;104H4-25[47;25H[?25h[?25lc[62;104H5-26[47;26H[?25h[?25lp[62;104H6-27[47;27H[?25h[?25l+[62;104H7-28[47;28H[?25h[?25l+[62;104H8-29[47;29H[?25h[?25l;[62;104H9-30[47;30H[?25h[?25l[62;102H5[46;30H[?25h[?25l[45;30H[46m{[48;17H}[m[62;102H4,16-30[45;30H[?25h[?25l[45;19H[46m([9C)[m{[48;17H}[62;105H5-29[45;29H[?25h[?25l[45;19H([9C)[62;105H4-28[45;28H[?25h[?25l[62;105H3-27[45;27H[?25h[?25l[62;105H2-26[45;26H[?25h[?25l[62;105H1-25[45;25H[?25h[?25l[62;105H0-24[45;24H[?25h[?25l[62;104H9-23 [45;23H[?25h[?25l[62;104H8-22[45;22H[?25h[?25l[62;104H7-21[45;21H[?25h[?25l[46m([9C)[m[62;104H6-20[45;20H[?25h[?25l[62;104H5-19[45;19H[?25h[?25l([9C)[62;104H4-18[45;18H[?25h[?25l[62;104H3-17[45;17H[?25h[?25l[46;61r[46;1H[L[1;62r[45;17H[K[46;1H[33mif[m(*cp ==[33m';'[m){[62;100H[K[62;100H105,1[9C63%[46;1H[?25h[?25l        [33mif[m(*cp ==[33m';'[m){[62;104H2-9[46;9H[?25h[?25l        [33mif[m(*cp ==[33m';'[m){[62;104H3-17[46;17H[?25h[?25l[62;102H6[47;17H[?25h[?25l[62;102H7[48;17H[?25h[?25l[46;30H[46m{[49;17H}[m[62;102H8[49;17H[?25h[?25l[25;9H[46m{[m[46;30H{[49;17H}[50;9H[46m}[m[62;102H9,3-10[50;10H[?25h[?25l[25;9H{[50;9H}[62;101H10,10-17[51;17H[?25h[?25l[62;102H1[52;17H[?25h[?25l[7;1H[46m{[53;1H}[m[62;102H2,2    [53;2H[?25h[?25l[7;1H{[53;1H}[62;102H3,1[54;1H[?25h[?25l[62;102H4,3[55;3H[?25h[?25l[62;102H5,17[56;17H[?25h[?25l[62;102H6[57;17H[?25h[?25l[62;102H7,4 [58;4H[?25h[?25l[62;102H8,17[59;17H[?25h[?25l[62;102H9,2 [60;2H[?25h[?25l[62;101H20,10-17[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H121,1[9C64%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hrv[l] = [35m'\0'[m;[62;100H[K[62;100H122,10-17     65%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hstrncpy(rv, s, l);[62;100H[K[62;100H123,10-17     66%[61;16H[46m([8C)[61;17H[?25h[?25l[1;61r[m[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H124,10-17     67%[60;16H([8C)[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H125,2[9C68%[55;1H[46m{[61;1H}[?25h[?25l[1;61r[m[61;1H
[1;62r[62;100H[K[62;100H126,1[9C69%[54;1H{[60;1H}
[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m[62;100H[K[62;100H127,6[9C70%[61;6H[?25h[?25l[1;61r[61;1H
[1;62r[61;1Hfreelist([32mchar[m **list)[62;100H[K[62;100H128,17[8C72%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H129,3[9C73%[61;3H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: free the list returned by splitline[m[62;100H[K[62;100H130,17[8C74%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: nothing[m[62;100H[K[62;100H131,17[8C75%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: free all strings in list and then free the list[m[62;100H[K[62;100H132,17[8C76%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H133,4[9C77%[61;4H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H134,2[9C78%[61;2H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **cp = list;[62;100H[K[62;100H135,7-17      79%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp )[62;100H[K[62;100H136,10-17     80%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfree(*cp++);[62;100H[K[62;100H137,3-17      81%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hfree(list);[62;100H[K[62;100H138,10-17     82%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H139,2[9C83%[56;1H[46m{[61;1H}[?25h[?25l[1;61r[m[61;1H
[1;62r[62;100H[K[62;100H140,1[9C84%[55;1H{[60;1H}
[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m * emalloc([32msize_t[m n)[62;100H[K[62;100H141,17[8C86%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H142,2[9C87%[61;2H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv ;[62;100H[K[62;100H143,10-17     88%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = malloc(n)) == [33mNULL[m )[62;100H[K[62;100H144,10-17     89%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H145,3-17      90%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H146,10-17     91%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H147,2[9C92%[56;1H[46m{[61;1H}[?25h[?25l[1;61r[m[61;1H
[1;62r[61;1H[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[62;100H[K[62;100H148,17[8C93%[55;1H{[60;1H}[61;16H[46m([17C)[61;17H[?25h[?25l[1;61r[m[61;1H
[1;62r[61;1H{[62;100H[K[62;100H149,2[9C94%[60;16H([17C)
{[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv;[62;100H[K[62;100H150,10-17     95%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[62;100H[K[62;100H151,10-17     96%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H152,3-17      97%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H153,10-17     98%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H154,2[9CBot[56;1H[46m{[61;1H}[?25h[?25l[m[56;1H{[61;1H}[62;102H3,10-17[60;17H[?25h[?25l[62;102H2,3-17 [59;17H[?25h[?25l[62;102H1,10-17[58;17H[?25h[?25l[62;102H0[57;17H[?25h[?25l[56;1H[46m{[61;1H}[m[62;101H49,2    [56;2H[?25h[?25l[55;16H[46m([17C)[m
{[61;1H}[62;102H8,17[55;17H[?25h[?25l[49;1H[46m{[54;1H}[m[55;16H([17C)[62;102H7,2 [54;2H[?25h[?25l[49;1H{[54;1H}[62;102H6,10-17[53;17H[?25h[?25l[62;102H5,3-17 [52;17H[?25h[?25l[62;102H4,10-17[51;17H[?25h[?25l[62;102H3[50;17H[?25h[?25l[49;1H[46m{[54;1H}[m[62;102H2,2    [49;2H[?25h[?25l{[54;1H}[62;102H1,17[48;17H[?25h[?25l[62;102H0,1 [47;1H[?25h[?25l[41;1H[46m{[46;1H}[m[62;101H39,2[46;2H[?25h[?25l[41;1H{[46;1H}[62;102H8,10-17[45;17H[?25h[?25l[62;102H7,3-17 [44;17H[?25h[?25l[62;102H6,10-17[43;17H[?25h[?25l[62;102H5,7-17 [42;17H[?25h[?25l[41;1H[46m{[46;1H}[m[62;102H4,2   [41;2H[?25h[?25l{[46;1H}[62;102H3,4[40;4H[?25h[?25l[62;102H2,17[39;17H[?25h[?25l[62;102H1[38;17H[?25h[?25l[62;102H0[37;17H[?25h[?25l[62;101H29,3 [36;3H[?25h[?25l[62;102H8,17[35;17H[?25h[?25l[62;102H7,6 [34;6H[?25h[?25l[62;102H6,1[33;1H[?25h[?25l[26;1H[46m{[32;1H}[m[62;102H5,2[32;2H[?25h[?25l[26;1H{[32;1H}[62;102H4,10-17[31;17H[?25h[?25l[30;16H[46m([8C)[m[62;102H3[30;17H[?25h[?25l([8C)[62;102H2[29;17H[?25h[62;1H[K[29;16H[?25l[62;100H122,9-16      Bot[29;16H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"split.c" 154L, 3393C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc smsh.c -o [K[K[K[K[K[K[K[K[K[K[K[K[K[K[26P(reverse-i-search)`':[Cg': gcc smsh.c split.o exec.o -o test.o[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@c[C[C[C[1@c[C[C[C]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc smsh.c split.o exec.o -o test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./smsh.o
bash: ./smsh.o: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ test.o[K[K[K[K[K[K./test.o
> echo / Hello; echo Goodbye
Hello; echo Goodbye
> 
> ^[:   ^C^Z
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ jobs
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ pid
bash: pid: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ pi[Ks $jobs
  PID TTY          TIME CMD
 2479 pts/2    00:00:00 bash
29224 pts/2    00:00:00 test.o
29352 pts/2    00:00:00 ps
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ jobs
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ps %1
error: garbage option

Usage:
 ps [options]

 Try 'ps --help <simple|list|output|threads|misc|all>'
  or 'ps --help <s|l|o|t|m|a>'
 for additional help text.

For more details see ps(1).
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ki[K[Kkill [K[K[K[K[Kps jobs
error: unknown user-defined format specifier "bs"

Usage:
 ps [options]

 Try 'ps --help <simple|list|output|threads|misc|all>'
  or 'ps --help <s|l|o|t|m|a>'
 for additional help text.

For more details see ps(1).
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ps job
error: unknown user-defined format specifier "b"

Usage:
 ps [options]

 Try 'ps --help <simple|list|output|threads|misc|all>'
  or 'ps --help <s|l|o|t|m|a>'
 for additional help text.

For more details see ps(1).
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ clear
[H[2J[3J]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ pgrep test.o
29224
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ jobs
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ echo %job
%job
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ jobs
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ho[K[Kjobs -s[Kl
[1]+ 29224 Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ kill 29224
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ jobs
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ jobs
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ps
  PID TTY          TIME CMD
 2479 pts/2    00:00:00 bash
29224 pts/2    00:00:00 test.o
29951 pts/2    00:00:00 ps
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ps
  PID TTY          TIME CMD
 2479 pts/2    00:00:00 bash
29224 pts/2    00:00:00 test.o
29953 pts/2    00:00:00 ps
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ kil [Kl test.o
bash: kill: test.o: arguments must be process or job IDs
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ tse[K[K[Kkill 29224
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ o[Kjobs
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ fg
./test.o
Terminated
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 52L, 885C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m


[35m#define DFL_PROMPT      [m[33m"> "[m[18;1H[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[24;9Hprompt = DFL_PROMPT;[25;9Hsetup();[27;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[28;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[29;25Hresult = execute(arglist);[30;25Hfreelist(arglist);[31;17H}[32;17Hfree(cmdline);[33;9H}[34;9H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[38;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[42;9H{[43;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[44;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[45;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n){[48;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[49;9Hexit(n);
}


[34m~                                                                                                                    [54;1H~                                                                                                                    [55;1H~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"split.c" 154L, 3393C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[28;9Hprintf([33m"[m[35m%s[m[33m"[m,prompt);[28C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m )[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[51;1H}[m[62;101H1[21;1H[?25h[?25l{[51;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H9,0-1[39;1H[?25h[?25l[62;100H40,1-8[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3,0-1[43;1H[?25h[?25l[62;101H4,1-8[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6[46;8H[?25h[?25l[62;101H7[47;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[62;100H50[50;8H[?25h[?25l[21;1H[46m{[51;1H}[m[62;101H1,1  [51;1H[?25h[?25l[21;1H{[51;1H}[62;101H2,0-1[52;1H[?25h[?25l[62;101H3,1  [53;1H[?25h[?25l[62;101H4[54;1H[?25h[?25l[62;101H5[55;1H[?25h[?25l[62;101H6[56;1H[?25h[?25l[62;101H7,0-1[57;1H[?25h[?25l[62;101H8,1  [58;1H[?25h[?25l[62;101H9[59;1H[?25h[?25l[62;100H60[60;1H[?25h[?25l[62;101H1[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;1H[K[62;100H62,1[11C1%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,1[11C2%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,1[11C3%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H65,1[11C4%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H66,1[11C5%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,1-8[9C6%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **args ;[62;100H[K[62;100H68,1-8[9C7%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,1-8[9C9%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,1-8[8C11%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H73,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H74,1-8[8C13%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H75,0-1[8C15%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,1-8[8C16%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,1-8[8C17%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H78,0-1[8C18%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,1-8[8C19%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,1-8[8C20%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H81,1-8[8C21%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H82,0-1[8C22%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H83,1-8[8C23%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H{[62;100H[K[62;100H84,1-8[8C24%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H85,1-8[8C25%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H86,1-8[8C26%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H87,1-8[8C27%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mbreak[m;[62;100H[K[62;100H88,1-8[8C29%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H89,0-1[8C30%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H90,1-8[8C31%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H91,1-8[8C32%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H92,1-8[8C33%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hbufspace += [33mBUFSIZ[m;[62;100H[K[62;100H93,1-8[8C34%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H94,1-8[8C35%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H95,1-8[8C36%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H96,0-1[8C37%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* mark start, then find end of phrase marked by ;*/[m[62;100H[K[62;100H97,1-8[8C38%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hstart = cp;[62;100H[K[62;100H98,1-8[8C39%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hlen   = [33m1[m;[62;100H[K[62;100H99,1-8[8C40%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m (*++cp != [35m'\0'[m && *cp != [33m';'[m )[62;100H[K[62;100H100,1-8[7C41%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hlen++;[62;100H[K[62;100H101,1-8[7C43%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H102,1-8[7C44%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H103,1-8[7C45%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H104,1-8[7C46%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m(*cp ==[33m';'[m){[62;100H[K[62;100H105,1-8[7C47%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H*cp = [35m'\0'[m;[62;100H[K[62;100H106,1-8[7C48%[61;8H[?25h[?25l[62;102H5[60;8H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[62;3H[K[62;3H[?25h[?25l[62;2H[K[62;2H[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc split.c -o split.o
/usr/bin/ld: /usr/lib/gcc/x86_64-linux-gnu/8/../../../x86_64-linux-gnu/Scrt1.o: in function `_start':
(.text+0x20): undefined reference to `main'
/usr/bin/ld: /tmp/ccQtZKVK.o: in function `emalloc':
split.c:(.text+0x322): undefined reference to `fatal'
/usr/bin/ld: /tmp/ccQtZKVK.o: in function `erealloc':
split.c:(.text+0x36e): undefined reference to `fatal'
collect2: error: ld returned 1 exit status
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"split.c" 154L, 3393C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[28;9Hprintf([33m"[m[35m%s[m[33m"[m,prompt);[28C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m )[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[51;1H}[m[62;101H1[21;1H[?25h[?25l{[51;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H9,0-1[39;1H[?25h[?25l[62;100H40,1-8[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3,0-1[43;1H[?25h[?25l[62;101H4,1-8[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6[46;8H[?25h[?25l[62;101H7[47;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[62;100H50[50;8H[?25h[?25l[21;1H[46m{[51;1H}[m[62;101H1,1  [51;1H[?25h[?25l[21;1H{[51;1H}[62;101H2,0-1[52;1H[?25h[?25l[62;101H3,1  [53;1H[?25h[?25l[62;101H4[54;1H[?25h[?25l[62;101H5[55;1H[?25h[?25l[62;101H6[56;1H[?25h[?25l[62;101H7,0-1[57;1H[?25h[?25l[62;101H8,1  [58;1H[?25h[?25l[62;101H9[59;1H[?25h[?25l[62;100H60[60;1H[?25h[?25l[62;101H1[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;1H[K[62;100H62,1[11C1%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,1[11C2%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,1[11C3%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H65,1[11C4%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H66,1[11C5%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,1-8[9C6%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **args ;[62;100H[K[62;100H68,1-8[9C7%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,1-8[9C9%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,1-8[8C11%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H73,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H74,1-8[8C13%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H75,0-1[8C15%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,1-8[8C16%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,1-8[8C17%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H78,0-1[8C18%[61;1H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"split.c" 154L, 3393C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.cgcc split.c -o split.o
/usr/bin/ld: /usr/lib/gcc/x86_64-linux-gnu/8/../../../x86_64-linux-gnu/Scrt1.o: in function `_start':
(.text+0x20): undefined reference to `main'
/usr/bin/ld: /tmp/ccw9SmGe.o: in function `emalloc':
split.c:(.text+0x322): undefined reference to `fatal'
/usr/bin/ld: /tmp/ccw9SmGe.o: in function `erealloc':
split.c:(.text+0x36e): undefined reference to `fatal'
collect2: error: ld returned 1 exit status
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ i[Kvi spol[K[Klit.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"split.c" 154L, 3393C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[28;9Hprintf([33m"[m[35m%s[m[33m"[m,prompt);[28C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m )[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[51;1H}[m[62;101H1[21;1H[?25h[?25l{[51;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H9,0-1[39;1H[?25h[?25l[62;100H40,1-8[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2[42;8H[?25h[?25l[62;101H3,0-1[43;1H[?25h[?25l[62;101H4,1-8[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6[46;8H[?25h[?25l[62;101H7[47;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[62;100H50[50;8H[?25h[?25l[21;1H[46m{[51;1H}[m[62;101H1,1  [51;1H[?25h[?25l[21;1H{[51;1H}[62;101H2,0-1[52;1H[?25h[?25l[62;101H3,1  [53;1H[?25h[?25l[62;101H4[54;1H[?25h[?25l[62;101H5[55;1H[?25h[?25l[62;101H6[56;1H[?25h[?25l[62;101H7,0-1[57;1H[?25h[?25l[62;101H8,1  [58;1H[?25h[?25l[62;101H9[59;1H[?25h[?25l[62;100H60[60;1H[?25h[?25l[62;101H1[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;1H[K[62;100H62,1[11C1%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,1[11C2%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,1[11C3%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H65,1[11C4%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H66,1[11C5%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,1-8[9C6%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **args ;[62;100H[K[62;100H68,1-8[9C7%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,1-8[9C9%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,1-8[8C11%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H73,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H74,1-8[8C13%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H75,0-1[8C15%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,1-8[8C16%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,1-8[8C17%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H78,0-1[8C18%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,1-8[8C19%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,1-8[8C20%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H81,1-8[8C21%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H82,0-1[8C22%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H83,1-8[8C23%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H{[62;100H[K[62;100H84,1-8[8C24%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H85,1-8[8C25%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H86,1-8[8C26%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H87,1-8[8C27%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mbreak[m;[62;100H[K[62;100H88,1-8[8C29%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H89,0-1[8C30%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H90,1-8[8C31%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H91,1-8[8C32%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H92,1-8[8C33%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hbufspace += [33mBUFSIZ[m;[62;100H[K[62;100H93,1-8[8C34%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H94,1-8[8C35%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H95,1-8[8C36%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H96,0-1[8C37%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* mark start, then find end of phrase marked by ;*/[m[62;100H[K[62;100H97,1-8[8C38%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hstart = cp;[62;100H[K[62;100H98,1-8[8C39%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hlen   = [33m1[m;[62;100H[K[62;100H99,1-8[8C40%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m (*++cp != [35m'\0'[m && *cp != [33m';'[m )[62;100H[K[62;100H100,1-8[7C41%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hlen++;[62;100H[K[62;100H101,1-8[7C43%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H102,1-8[7C44%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H103,1-8[7C45%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H104,1-8[7C46%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m(*cp ==[33m';'[m){[62;100H[K[62;100H105,1-8[7C47%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H*cp = [35m'\0'[m;[62;100H[K[62;100H106,1-8[7C48%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H107,1-8[7C49%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H108,1-8[7C50%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H}[62;100H[K[62;100H109,1-8[7C51%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs[argnum] = [33mNULL[m;[62;100H[K[62;100H110,1-8[7C52%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m args;[62;100H[K[62;100H111,1-8[7C53%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[15;1H[46m{[61;1H}[m[62;100H[K[62;100H112,1[9C54%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[14;1H{[60;1H}[62;100H[K[62;100H113,0-1[7C55%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H114,1[9C56%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: constructor for strings[m[62;100H[K[62;100H115,1[9C58%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: a string, never NULL[m[62;100H[K[62;100H116,1[9C59%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H117,1[9C60%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[62;100H[K[62;100H118,1[9C61%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H119,1[9C62%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m *rv = emalloc(l+[33m1[m);[62;100H[K[62;100H120,1-8[7C63%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H121,0-1[7C64%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hrv[l] = [35m'\0'[m;[62;100H[K[62;100H122,1-8[7C65%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hstrncpy(rv, s, l);[62;100H[K[62;100H123,1-8[7C66%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H124,1-8[7C67%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H[46m{[61;1H}[m[62;100H[K[62;100H125,1[9C68%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[54;1H{[60;1H}[62;100H[K[62;100H126,0-1[7C69%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m[62;100H[K[62;100H127,1[9C70%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1Hfreelist([32mchar[m **list)[62;100H[K[62;100H128,1[9C72%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H129,1[9C73%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: free the list returned by splitline[m[62;100H[K[62;100H130,1[9C74%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: nothing[m[62;100H[K[62;100H131,1[9C75%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: free all strings in list and then free the list[m[62;100H[K[62;100H132,1[9C76%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H133,1[9C77%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H134,1[9C78%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **cp = list;[62;100H[K[62;100H135,1-8[7C79%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp )[62;100H[K[62;100H136,1-8[7C80%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfree(*cp++);[62;100H[K[62;100H137,1-8[7C81%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hfree(list);[62;100H[K[62;100H138,1-8[7C82%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H139,1[9C83%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H{[60;1H}[62;100H[K[62;100H140,0-1[7C84%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m * emalloc([32msize_t[m n)[62;100H[K[62;100H141,1[9C86%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H142,1[9C87%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv ;[62;100H[K[62;100H143,1-8[7C88%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = malloc(n)) == [33mNULL[m )[62;100H[K[62;100H144,1-8[7C89%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H145,1-8[7C90%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H146,1-8[7C91%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H147,1[9C92%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H{[60;1H}
[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[62;100H[K[62;100H148,1[9C93%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H149,1[9C94%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv;[62;100H[K[62;100H150,1-8[7C95%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = realloc(p,n)) == [33mNULL[m )[62;100H[K[62;100H151,1-8[7C96%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"realloc() failed"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H152,1-8[7C97%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H153,1-8[7C98%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H154,1[9CBot[61;1H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"split.c" 154L, 3393C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gvv[K[Kcc -c split.c -o split.oi[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc[K[K[Kgcc sh[K[K[K[K[K[Kgcc [K[K[K[K[26P(reverse-i-search)`':[Cg': gcc -c split.c -o split.o[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@c[C[C[C[1@c[C[C[C[C[8@failed reverse-i-search)`gccs[C[C[C[1@m[C[C[C[1P[C[C[C[C[11Preverse-i-search)`gcc': gc[1@ [C[C[C[1@s[C[C[Cm': gcc smsh.c split.o exec.o -o test.o[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@s[C[C[C[1@h[C[C[C]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc smsh.c split.o exec.o -o test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./test.o
> ehco      echo hello; echol  bye;
cannot execute command: No such file or directory
> ^[[A^[[A        ^C^Z
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ps
  PID TTY          TIME CMD
 2479 pts/2    00:00:00 bash
30694 pts/2    00:00:00 test.o
30779 pts/2    00:00:00 ps
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ kill 30694 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ fg
./test.o
Terminated
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /* splitline.c - commmand reading and parsing functions for smsh
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *    
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *    char *next_cmd(char *prompt, FILE *fp) - get next command
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *    char **splitline(char *str);           - parse a string
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  */
	while( ( c = getc(fp)) != EOF ) {

		/* need space? */
		if( pos+1 >= bufspace ){		/* 1 for \0	*/
			if ( bufspace == 0 )		/* y: 1st time	*/
				buf = emalloc(BUFSIZ);
			else				/* or expand	*/
				buf = erealloc(buf,bufspace+BUFSIZ);
			bufspace += BUFSIZ;		/* update size	*/
		}

		/* end of command? */
		if ( c == '\n' )
			break;

		/* no, add to buffer */
		buf[pos++] = c;
	}
	if ( c == EOF && pos == 0 )		/* EOF and no input	*/
		return NULL;			/* say so		*/
	buf[pos] = '\0';
	return buf;
}

/**
 **	splitline ( parse a line into an array of strings )
 **/
#define	is_delim(x) ((x)==' '||(x)=='\t')

char ** splitline(char *line)
/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated bash: */: No such file or directory
array of pointers to copies of the tokens
 *          or NULL if line if no tokens on the line
 *  action: traverse the array, locate strings, make copies
 *    note: strtok() could work, but we may want to add quotes later
 */
{
	char	*newstr();
	char	**args ;
	int	spots = 0;			/* spots in table	*/
	int	bufspace = 0;			/* bytes in table	*/
	int	argnum = 0;			/* slots used		*/
	char	*cp = line;			/* pos in string	*/
	char	*start;
	int	len;

	if ( line == NULL )			/* handle special case	*/
		return NULL;

	args     = emalloc(BUFSIZ);		/* initialize array	*/
	bufspace = BUFSIZ;
	spots    = BUFSIZ/sizeof(char *);

	while( *cp != '\0' )
	{
		while ( is_delim(*cp) )		/* skip leading spaces	*/
			cp++;
		if ( *cp == '\0' )		/* quit at end-o-string	*/
			break;

		/* make sure the array has room (+1 for NULL) */
		if ( argnum+1 >= spots ){
			args = erealloc(args,bufspace+BUFSIZ);
			bufspace += BUFSIZ;
			spots += (BUFSIZ/sizeof(char *));
		}

		/* mark start, then find end of word */
		start = cp;
		len   = 1;
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ #include<stdio.h>
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ #include<stdlib.h> 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ #include<string.h>
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ #include"smsh.h"
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ char * next_cmd(char *prompt, FILE *fp)
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /*
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * purpose: read next command line from fp
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * returns: dynamically allocated string holding command line
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *  errors: NULL at EOF (not really an error)
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *          calls fatal from emalloc()
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *   notes: allocates space in BUFSIZ chunks.  
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  */
bash: */: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ {
> chardet*buf ; 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
--More--[K> chardet*buf ; tbufspace = 0;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
--More--[K> chardet*buf ; tbufspace = 0;tpos = 0;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K> chardet*buf ; tbufspace = 0;tpos = 0;t position*/
> intc;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K> intc;put char*/
> chardet*curpath;
> 
> printf("%s$%s", curpath,prompt);
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
--More--[Kchage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
crontab                             lexgrog                             shasum
--More--[Kcsh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
dh_bugfiles                         llvm-xray-7                         srptool
--More--[Kdh_builddeb                         ln                                  ss
dh_clean                            lnstat                              ssh
dh_compress                         __load_completion                   ssh-add
dh_dwz                              loadkeys                            ssh-agent
dh_fixperms                         loadunimap                          ssh-argv0
dh_gconf                            local                               ssh-copy-id
dh_gencontrol                       locale                              ssh-keygen
dh_icons                            localectl                           ssh-keyscan
dh_install                          localedef                           stat
dh_installcatalogs                  locate                              stdbuf
dh_installchangelogs                lockfile                            strings
dh_installcron                      logger                              strip
dh_installdeb                       login                               stty
dh_installdebconf                   loginctl                            su
dh_installdirs                      logname                             sudo
dh_installdocs                      logout                              sudoedit
dh_installemacsen                   logresolve                          sudoreplay
dh_installexamples                  _longopt                            sum
dh_installgsettings                 look                                suspend
dh_installifupdown                  lorder                              symcryptrun
dh_installinfo                      ls                                  sync
dh_installinit                      lsattr                              systemctl
dh_installinitramfs                 lsblk                               systemd
dh_installlogcheck                  lsb_release                         systemd-analyze
dh_installlogrotate                 lscpu                               systemd-ask-password
dh_installman                       lsinitramfs                         systemd-cat
dh_installmanpages                  lsipc                               systemd-cgls
dh_installmenu                      lslocks                             systemd-cgtop
dh_installmime                      lslogins                            systemd-delta
dh_installmodules                   lsmem                               systemd-detect-virt
dh_installpam                       lsmod                               systemd-escape
dh_installppp                       lsns                                systemd-hwdb
dh_installsystemd                   lsof                                systemd-id128
dh_installsystemduser               lspci                               systemd-inhibit
dh_installtex                       lspgpot                             systemd-machine-id-setup
dh_installudev                      __ltrim_colon_completions           systemd-mount
dh_installwm                        lwp-download                        systemd-notify
dh_installxfonts                    lwp-dump                            systemd-path
dh_link                             lwp-mirror                          systemd-resolve
dh_lintian                          lwp-request                         systemd-run
dh_listpackages                     lzcat                               systemd-socket-activate
dh_makeshlibs                       lzcmp                               systemd-stdio-bridge
dh_md5sums                          lzdiff                              systemd-sysusers
dh_missing                          lzegrep                             systemd-tmpfiles
dh_movefiles                        lzfgrep                             systemd-tty-ask-password-agent
dh_perl                             lzgrep                              systemd-umount
dh_perl_dbi                         lzless                              _sysvdirs
dh_perl_openssl                     lzma                                tabs
dh_prep                             lzmainfo                            tac
dh_pypy                             lzmore                              tail
dh_pysupport                        m4                                  tar
dh_python2                          mac2unix                            tasksel
dh_python3                          _mac_addresses                      taskset
dh_shlibdeps                        mail                                tbl
dh_strip                            Mail                                tcsh
dh_strip_nondeterminism             mail.mailutils                      tee
dh_systemd_enable                   mailq                               telnet
dh_systemd_start                    mailstat                            telnet.netkit
dh_testdir                          mailx                               tempfile
dh_testroot                         make                                _terms
dh_ucf                              make-first-existing-target          test
--More--[Kdh_update_autotools_config          makeinfo                            testparm
dh_usrlocal                         man                                 texi2any
dialog                              mandb                               texi2dvi
diff                                manpath                             texi2pdf
diff3                               mapfile                             texindex
dig                                 mapscrn                             then
dir                                 mariadb                             tic
dircolors                           mariadb-check                       _tilde
dirmngr                             mariadb-service-convert             time
dirmngr-client                      mawk                                timedatectl
dirname                             mcookie                             timeout
dirs                                md5sum                              times
discover-config                     md5sum.textutils                    tini
disown                              mdig                                tini-static
dmesg                               mesg                                tload
dnet                                messages                            tmux
dnsdomainname                       messages.mailutils                  tnameserv
dnstap-read                         migrate-pubring-from-classic-gpg    toe
do                                  mimeview                            top
docker                              _minimal                            touch
docker-containerd                   mkdir                               tput
docker-containerd-ctr               mkfifo                              tr
docker-containerd-shim              mk-job                              traceproto
docker-init                         mk_modmap                           traceproto.db
docker-linux-amd64                  mknod                               traceroute
domainname                          mkpasswd                            traceroute6
done                                mktemp                              traceroute6.db
dos2unix                            mlocate                             traceroute.db
dotlock                             _modules                            traceroute-nanog
dotlockfile                         more                                trap
dotlock.mailutils                   mount                               troff
dpkg                                mountpoint                          true
dpkg-architecture                   movemail                            truncate
dpkg-buildflags                     movemail.mailutils                  tryaffix
dpkg-buildpackage                   msgattrib                           tset
dpkg-checkbuilddeps                 msgcat                              tsort
dpkg-cross                          msgcmp                              tty
dpkg-deb                            msgcomm                             txixml2texi
dpkg-distaddfile                    msgconv                             type
dpkg-divert                         msgen                               typeset
dpkg-genbuildinfo                   msgexec                             tzselect
dpkg-genchanges                     msgfilter                           ucf
dpkg-gencontrol                     msgfmt                              ucfq
dpkg-gensymbols                     msggrep                             ucfr
dpkg-maintscript-helper             msginit                             udevadm
dpkg-mergechangelogs                msgmerge                            _uids
dpkg-name                           msgunfmt                            ul
dpkg-parsechangelog                 msguniq                             ulimit
dpkg-query                          ms_print                            ulockmgr_server
dpkg-scanpackages                   msql2mysql                          umask
dpkg-scansources                    mt                                  umount
dpkg-shlibdeps                      mt-gnu                              unalias
dpkg-source                         mtrace                              uname
dpkg-split                          munchlist                           uncompress
dpkg-statoverride                   mutt                                unexpand
dpkg-trigger                        mutt_dotlock                        unicode_start
dpkg-vendor                         mv                                  unicode_stop
dsymutil-7                          myisamchk                           uniq
du                                  myisam_ftdump                       unix2dos
dumpkeys                            myisamlog                           unix2mac
_dvd_devices                        myisampack                          unlink
--More--[Kdwp                                 my_print_defaults                   unlzma
dwz                                 mysql                               unmkinitramfs
ebrowse                             mysqlaccess                         unpack200
ebrowse.emacs                       mysqladmin                          unpigz
echo                                mysqlanalyze                        unset
edit                                mysqlbinlog                         unshare
editor                              mysqlcheck                          unsq
egrep                               mysql_config                        until
eject                               mysql_convert_table_format          unxz
elfedit                             mysqld_multi                        unzip
elif                                mysqld_safe                         unzipsfx
else                                mysqld_safe_helper                  update-alternatives
emacs                               mysqldump                           updatedb
emacsclient                         mysqldumpslow                       updatedb.mlocate
emacsclient.emacs                   mysql_embedded                      update-gconf-defaults
emacs-nox                           mysql_find_rows                     update-leap
enable                              mysql_fix_extensions                update-mime-database
enc2xs                              mysqlhotcopy                        update-perl-sax-parsers
encguess                            mysqlimport                         uptime
encode_keychange                    mysql_install_db                    _upvar
env                                 mysqloptimize                       _upvars
envsubst                            mysql_plugin                        _usb_ids
eqn                                 mysqlrepair                         _user_at_host
esac                                mysqlreport                         _usergroup
etags                               mysql_secure_installation           _userland
etags.emacs                         mysql_setpermission                 users
eval                                mysqlshow                           utmpdump
ex                                  mysqlslap                           valgrind
exec                                mysql_tzinfo_to_sql                 valgrind.bin
exit                                mysql_upgrade                       valgrind-di-server
_expand                             mysql_waitpid                       valgrind-listener
expand                              mytop                               _variables
__expand_tilde_by_ref               namei                               vdir
expiry                              nano                                verify-uselistorder-7
export                              nasm                                VGAuthService
expr                                native2ascii                        vgdb
extcheck                            nawk                                vi
factor                              nc                                  view
_fail2ban                           ncal                                vim
fail2ban-client                     ncdu                                vim.basic
__fail2ban_jail_action_methods      _ncpus                              vimdiff
__fail2ban_jail_action_properties   nc.traditional                      vim.tiny
__fail2ban_jail_actions             ncurses5-config                     vimtutor
__fail2ban_jails                    ncurses6-config                     virtualenv
fail2ban-python                     ncursesw5-config                    vmhgfs-fuse
fail2ban-regex                      ncursesw6-config                    vmstat
fail2ban-server                     ndisasm                             vmtoolsd
fail2ban-testcases                  neqn                                vmware-checkvm
faillog                             net                                 vmware-guestproxycerttool
faked-sysv                          netcat                              vmware-hgfsclient
faked-tcp                           netkit-ftp                          vmware-namespace-cmd
fakeroot                            netstat                             vmware-rpctool
fakeroot-sysv                       networkctl                          vmware-toolbox-cmd
fakeroot-tcp                        newaliases                          vmware-vgauth-cmd
fallocate                           newgrp                              vmware-vgauth-smoketest
false                               ngettext                            vmware-vmblock-fuse
fc                                  nice                                vmware-xferlogs
fc-cache                            nisdomainname                       volname
fc-cat                              nl                                  w
fc-conflist                         nm                                  w3m
fcgistarter                         nmblookup                           w3mman
--More--[Kfc-list                             nohup                               wait
fc-match                            nproc                               waitmax
fc-pattern                          nroff                               wall
fc-query                            nsenter                             watch
fc-scan                             nslookup                            watchgnupg
fc-validate                         nstat                               wc
fg                                  nsupdate                            wdctl
fgconsole                           ntpdc                               wget
fgrep                               ntpq                                whatis
fi                                  ntpsweep                            whereis
filan                               ntptrace                            which
file                                numfmt                              while
_filedir                            obj2yaml-7                          whiptail
_filedir_xspec                      objcopy                             who
fincore                             objdump                             whoami
find                                ocsptool                            whois
findaffix                           od                                  w.procps
findmnt                             openssl                             write
findsmb                             openvt                              wsgen
fio                                 opt-7                               wsimport
fio2gnuplot                         orbd                                wsrep_sst_common
fio-btrace2fio                      os-prober                           wsrep_sst_mariabackup
fio-dedupe                          p11tool                             wsrep_sst_mysqldump
fio_generate_plots                  pack200                             wsrep_sst_rsync
fio-genzipf                         pager                               wsrep_sst_rsync_wan
fixproc                             parsechangelog                      www-browser
flock                               _parse_help                         x86_64
fmt                                 __parse_options                     x86_64-linux-gnu-addr2line
fold                                _parse_usage                        x86_64-linux-gnu-ar
for                                 partx                               x86_64-linux-gnu-as
formail                             passwd                              x86_64-linux-gnu-c++filt
free                                paste                               x86_64-linux-gnu-cpp
frm                                 patch                               x86_64-linux-gnu-cpp-4.9
frm.mailutils                       pathchk                             x86_64-linux-gnu-cpp-6
from                                _pci_ids                            x86_64-linux-gnu-cpp-8
from.mailutils                      pcimodules                          x86_64-linux-gnu-dwp
_fstypes                            pdb                                 x86_64-linux-gnu-elfedit
ftp                                 pdb2                                x86_64-linux-gnu-g++
function                            pdb2.7                              x86_64-linux-gnu-g++-8
funzip                              pdb3                                x86_64-linux-gnu-gcc
fuser                               pdb3.7                              x86_64-linux-gnu-gcc-4.9
fusermount                          pdftexi2dvi                         x86_64-linux-gnu-gcc-6
g++                                 peekfd                              x86_64-linux-gnu-gcc-8
g++-8                               perf                                x86_64-linux-gnu-gcc-ar
galera_new_cluster                  perl                                x86_64-linux-gnu-gcc-ar-4.9
galera_recovery                     perl5.28.1                          x86_64-linux-gnu-gcc-ar-6
gawk                                perl5.28-x86_64-linux-gnu           x86_64-linux-gnu-gcc-ar-8
_gcc                                perlbug                             x86_64-linux-gnu-gcc-nm
gcc                                 perldoc                             x86_64-linux-gnu-gcc-nm-4.9
gcc-4.9                             perlivp                             x86_64-linux-gnu-gcc-nm-6
gcc-6                               perlthanks                          x86_64-linux-gnu-gcc-nm-8
gcc-8                               perror                              x86_64-linux-gnu-gcc-ranlib
gcc-ar                              pftp                                x86_64-linux-gnu-gcc-ranlib-4.9
gcc-ar-4.9                          _pgids                              x86_64-linux-gnu-gcc-ranlib-6
gcc-ar-6                            pgrep                               x86_64-linux-gnu-gcc-ranlib-8
gcc-ar-8                            phar                                x86_64-linux-gnu-gcov
gcc-nm                              phar7.3                             x86_64-linux-gnu-gcov-4.9
gcc-nm-4.9                          phar.phar                           x86_64-linux-gnu-gcov-6
gcc-nm-6                            phar.phar7.3                        x86_64-linux-gnu-gcov-8
gcc-nm-8                            php                                 x86_64-linux-gnu-gcov-dump
gcc-ranlib                          php7.3                              x86_64-linux-gnu-gcov-dump-6
--More--[Kgcc-ranlib-4.9                      pic                                 x86_64-linux-gnu-gcov-dump-8
gcc-ranlib-6                        pico                                x86_64-linux-gnu-gcov-tool
gcc-ranlib-8                        piconv                              x86_64-linux-gnu-gcov-tool-6
gconf-merge-tree                    pidof                               x86_64-linux-gnu-gcov-tool-8
gconftool                           _pids                               x86_64-linux-gnu-gold
gconftool-2                         pigz                                x86_64-linux-gnu-gprof
gcore                               pinentry                            x86_64-linux-gnu-ld
gcov                                pinentry-gtk-2                      x86_64-linux-gnu-ld.bfd
gcov-4.9                            pinentry-x11                        x86_64-linux-gnu-ld.gold
gcov-6                              ping                                x86_64-linux-gnu-nm
gcov-8                              ping4                               x86_64-linux-gnu-objcopy
gcov-dump                           ping6                               x86_64-linux-gnu-objdump
gcov-dump-6                         pinky                               x86_64-linux-gnu-python2.7-config
gcov-dump-8                         pip                                 x86_64-linux-gnu-python2-config
gcov-tool                           pip2                                x86_64-linux-gnu-python3.7-config
gcov-tool-6                         pkill                               x86_64-linux-gnu-python3.7m-config
gcov-tool-8                         pl2pm                               x86_64-linux-gnu-python3-config
gdb                                 pldd                                x86_64-linux-gnu-python3m-config
gdb-add-index                       pmap                                x86_64-linux-gnu-python-config
gdbserver                           _pnames                             x86_64-linux-gnu-ranlib
gdbtui                              po2debconf                          x86_64-linux-gnu-readelf
gdk-pixbuf-csource                  pod2html                            x86_64-linux-gnu-size
gdk-pixbuf-pixdata                  pod2man                             x86_64-linux-gnu-strings
gdk-pixbuf-thumbnailer              pod2texi                            x86_64-linux-gnu-strip
gencat                              pod2text                            xargs
gendiff                             pod2usage                           xauth
genfio                              podchecker                          xdg-user-dir
geqn                                podebconf-display-po                xdg-user-dirs-update
GET                                 podebconf-report-po                 _xfunc
_get_comp_words_by_ref              podselect                           xgettext
getconf                             popd                                _xinetd_services
_get_cword                          POST                                xjc
__get_cword_at_cursor_by_ref        pr                                  xsubpp
getent                              preconv                             xxd
getfacl                             print                               xz
_get_first_arg                      printenv                            xzcat
getkeycodes                         printerbanner                       xzcmp
getopt                              printf                              xzdiff
getopts                             prlimit                             xzegrep
_get_pword                          procan                              xzfgrep
gettext                             procmail                            xzgrep
gettextize                          prove                               xzless
gettext.sh                          prtstat                             xzmore
_gids                               ps                                  yaml2obj-7
ginstall-info                       psfaddtable                         yaml-bench-7
git                                 psfgettable                         yes
__git_eread                         psfstriptable                       ypdomainname
__git_ps1                           psfxtable                           zcat
__git_ps1_colorize_gitstring        psktool                             zcmp
__git_ps1_show_upstream             pslog                               zdiff
git-receive-pack                    pstree                              zdump
git-shell                           pstree.x11                          zegrep
git-upload-archive                  pt-align                            zfgrep
git-upload-pack                     ptar                                zforce
gnutls-cli                          pt-archiver                         zgrep
gnutls-cli-debug                    ptardiff                            zip
gnutls-serv                         ptargrep                            zipcloak
gold                                pt-config-diff                      zipdetails
gpasswd                             pt-deadlock-logger                  zipgrep
gpg                                 pt-diskstats                        zipinfo
gpg2                                pt-duplicate-key-checker            zipnote
--More--[Kgpg-agent                           pt-fifo-split                       zipsplit
gpgcompose                          pt-find                             zless
gpgconf                             pt-fingerprint                      zmore
gpg-connect-agent                   pt-fk-error-logger                  znew
> printf("%s$%s", curpath,prompt);{
bash: syntax error near unexpected token `"%s$%s",'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /* need space? */
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ if( pos+1 >= bufspace ){/* 1 for \0*/
bash: syntax error near unexpected token `{/*'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ if ( bufspace == 0 )/* y: 1st time*/
bash: syntax error near unexpected token `/*'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ buf = emalloc(BUFSIZ);
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ else 
Display all 1663 possibilities? (y or n)
!                                   gpgparsemail                        pt-index-usage
./                                  gpgsm                               pt-ioprofile
:                                   gpgsplit                            pt-kill
[                                   gpgtar                              pt-mext
[[                                  gpgv                                pt-mysql-summary
]]                                  gpg-wks-server                      pt-online-schema-change
{                                   gpg-zip                             pt-pmp
}                                   gpic                                pt-query-digest
2to3-2.7                            gprof                               pt-show-grants
aa-enabled                          grep                                pt-sift
aa-exec                             groff                               pt-slave-delay
ab                                  grog                                pt-slave-find
aclocal                             grops                               pt-slave-restart
aclocal-1.16                        grotty                              pt-stalk
acpi                                groups                              pt-summary
acpi_listen                         grub-editenv                        pt-table-checksum
addpart                             grub-file                           pt-table-sync
addr2line                           grub-fstest                         pt-table-usage
alias                               grub-glue-efi                       pt-upgrade
alien                               grub-kbdcomp                        pt-variable-advisor
_allowed_groups                     grub-menulst2cfg                    pt-visual-explain
_allowed_users                      grub-mkfont                         ptx
apropos                             grub-mkimage                        pushd
apt                                 grub-mklayout                       pwd
apt-cache                           grub-mknetdir                       pwdx
apt-cdrom                           grub-mkpasswd-pbkdf2                pwgen
apt-config                          grub-mkrelpath                      py3clean
apt-extracttemplates                grub-mkrescue                       py3compile
apt-ftparchive                      grub-mkstandalone                   py3versions
apt-get                             grub-mount                          pybuild
aptitude                            grub-ntldr-img                      pyclean
aptitude-create-state-bundle        grub-render-label                   pycompile
aptitude-curses                     grub-script-check                   pydoc
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc2
apt-key                             gsettings-data-convert              pydoc2.7
apt-listchanges                     gsettings-schema-convert            pydoc3
apt-mark                            gtbl                                pydoc3.7
apt-sortpkgs                        gtk-update-icon-cache               pygettext
ar                                  gunzip                              pygettext2
arch                                gzexe                               pygettext2.7
aria_chk                            gzip                                pygettext3
aria_dump_log                       h2ph                                pygettext3.7
aria_ftdump                         h2xs                                pygmentize
aria_pack                           hash                                python
aria_read_log                       _have                               python2
as                                  hd                                  python2.7
as31                                head                                python2.7-config
asan_symbolize                      HEAD                                python2-config
asan_symbolize-7                    help                                python3
at                                  helpztags                           python3.7
atq                                 hexdump                             python3.7-config
atrm                                history                             python3.7m
autoconf                            host                                python3.7m-config
autoheader                          hostid                              python3-config
autom4te                            hostname                            python3m
automake                            hostnamectl                         python3m-config
automake-1.16                       hsdb                                python-config
autopoint                           htcacheclean                        pyversions
autoreconf                          htdbm                               querybts
autoscan                            htdigest                            quote
autoupdate                          htpasswd                            quote_readline
--More--[K_available_interfaces               i386                                _quote_readline_by_ref
awk                                 i686-linux-gnu-addr2line            ranlib
b2sum                               i686-linux-gnu-ar                   rbash
base32                              i686-linux-gnu-as                   rcp
base64                              i686-linux-gnu-c++filt              rdf2bin
basename                            i686-linux-gnu-cpp                  rdf2com
bash                                i686-linux-gnu-cpp-8                rdf2ihx
bashbug                             i686-linux-gnu-dwp                  rdf2ith
batch                               i686-linux-gnu-elfedit              rdf2srec
bc                                  i686-linux-gnu-g++                  rdfdump
bg                                  i686-linux-gnu-g++-8                rdflib
bind                                i686-linux-gnu-gcc                  rdma
bootctl                             i686-linux-gnu-gcc-8                rdx
break                               i686-linux-gnu-gcc-ar               read
bsd-from                            i686-linux-gnu-gcc-ar-8             readarray
bsd-mailx                           i686-linux-gnu-gcc-nm               readelf
bsd-write                           i686-linux-gnu-gcc-nm-8             readline-editor
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readlink
buildhash                           i686-linux-gnu-gcc-ranlib-8         readmsg
builtin                             i686-linux-gnu-gcov                 readmsg.mailutils
bunzip2                             i686-linux-gnu-gcov-8               readonly
busctl                              i686-linux-gnu-gcov-dump            _realcommand
busybox                             i686-linux-gnu-gcov-dump-8          realpath
bzcat                               i686-linux-gnu-gcov-tool            __reassemble_comp_words_by_ref
bzcmp                               i686-linux-gnu-gcov-tool-8          recode-sr-latin
bzdiff                              i686-linux-gnu-gprof                rename.ul
bzegrep                             i686-linux-gnu-ld                   renice
bzexe                               i686-linux-gnu-ld.bfd               replace
bzfgrep                             i686-linux-gnu-ld.gold              reportbug
bzgrep                              i686-linux-gnu-nm                   report-hw
bzip2                               i686-linux-gnu-objcopy              reset
bzip2recover                        i686-linux-gnu-objdump              resizecons
bzless                              i686-linux-gnu-ranlib               resizepart
bzmore                              i686-linux-gnu-readelf              resolvectl
c++                                 i686-linux-gnu-size                 resolveip
c89                                 i686-linux-gnu-strings              resolve_stack_dump
c89-gcc                             i686-linux-gnu-strip                return
c99                                 icombine                            rev
c99-gcc                             iconv                               rgrep
cal                                 id                                  _rl_enabled
calc_tickadj                        idlj                                rlogin
calendar                            if                                  rlwrap
caller                              ifnames                             rm
callgrind_annotate                  ijoin                               rmail
callgrind_control                   in                                  rmdir
captoinfo                           _included_ssh_config_files          rmic
case                                info                                rmid
cat                                 infobrowser                         rmiregistry
catchsegv                           infocmp                             rnano
catman                              infotocap                           _root_command
cc                                  _init_completion                    rotatelogs
_cd                                 innochecksum                        routef
cd                                  innotop                             routel
_cd_devices                         _insserv                            rpcclient
certtool                            install                             rpcgen
c++filt                             _installed_modules                  rpcinfo
cg_annotate                         install-info                        rpm
cg_diff                             instmodsh                           rpm2archive
cg_merge                            ionice                              rpm2cpio
cgroupfs-mount                      ip                                  rpmbuild
cgroupfs-umount                     _ip_addresses                       rpmdb
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ else d*/
bash: syntax error near unexpected token `else'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ buf = erealloc(buf,bufspace+BUFSIZ);
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ bufspace += BUFSIZ;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
--More--[Kchage                               ipcrm                               rpmgraph
--More--[Kchardet                             ipcs                                rpmkeys
--More--[Kchardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
crontab                             lexgrog                             shasum
csh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ bufspace += BUFSIZ;d of command? */
bash: bufspace: command not found
bash: d: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ if ( c == '\n' )
> 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K> o, add to buffer */
> 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
--More--[Kchage                               ipcrm                               rpmgraph
--More--[Kchardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
crontab                             lexgrog                             shasum
csh                                 lft                                 sh.distrib
--More--[Kcsplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
dh_bugfiles                         llvm-xray-7                         srptool
dh_builddeb                         ln                                  ss
--More--[Kdh_clean                            lnstat                              ssh
dh_compress                         __load_completion                   ssh-add
dh_dwz                              loadkeys                            ssh-agent
dh_fixperms                         loadunimap                          ssh-argv0
dh_gconf                            local                               ssh-copy-id
dh_gencontrol                       locale                              ssh-keygen
dh_icons                            localectl                           ssh-keyscan
dh_install                          localedef                           stat
dh_installcatalogs                  locate                              stdbuf
dh_installchangelogs                lockfile                            strings
dh_installcron                      logger                              strip
dh_installdeb                       login                               stty
dh_installdebconf                   loginctl                            su
dh_installdirs                      logname                             sudo
dh_installdocs                      logout                              sudoedit
dh_installemacsen                   logresolve                          sudoreplay
dh_installexamples                  _longopt                            sum
dh_installgsettings                 look                                suspend
dh_installifupdown                  lorder                              symcryptrun
dh_installinfo                      ls                                  sync
dh_installinit                      lsattr                              systemctl
dh_installinitramfs                 lsblk                               systemd
dh_installlogcheck                  lsb_release                         systemd-analyze
dh_installlogrotate                 lscpu                               systemd-ask-password
dh_installman                       lsinitramfs                         systemd-cat
dh_installmanpages                  lsipc                               systemd-cgls
dh_installmenu                      lslocks                             systemd-cgtop
dh_installmime                      lslogins                            systemd-delta
dh_installmodules                   lsmem                               systemd-detect-virt
dh_installpam                       lsmod                               systemd-escape
dh_installppp                       lsns                                systemd-hwdb
dh_installsystemd                   lsof                                systemd-id128
dh_installsystemduser               lspci                               systemd-inhibit
dh_installtex                       lspgpot                             systemd-machine-id-setup
dh_installudev                      __ltrim_colon_completions           systemd-mount
dh_installwm                        lwp-download                        systemd-notify
dh_installxfonts                    lwp-dump                            systemd-path
dh_link                             lwp-mirror                          systemd-resolve
dh_lintian                          lwp-request                         systemd-run
dh_listpackages                     lzcat                               systemd-socket-activate
dh_makeshlibs                       lzcmp                               systemd-stdio-bridge
dh_md5sums                          lzdiff                              systemd-sysusers
dh_missing                          lzegrep                             systemd-tmpfiles
dh_movefiles                        lzfgrep                             systemd-tty-ask-password-agent
dh_perl                             lzgrep                              systemd-umount
dh_perl_dbi                         lzless                              _sysvdirs
dh_perl_openssl                     lzma                                tabs
dh_prep                             lzmainfo                            tac
dh_pypy                             lzmore                              tail
dh_pysupport                        m4                                  tar
dh_python2                          mac2unix                            tasksel
dh_python3                          _mac_addresses                      taskset
dh_shlibdeps                        mail                                tbl
dh_strip                            Mail                                tcsh
dh_strip_nondeterminism             mail.mailutils                      tee
dh_systemd_enable                   mailq                               telnet
dh_systemd_start                    mailstat                            telnet.netkit
dh_testdir                          mailx                               tempfile
dh_testroot                         make                                _terms
dh_ucf                              make-first-existing-target          test
dh_update_autotools_config          makeinfo                            testparm
--More--[Kdh_usrlocal                         man                                 texi2any
dialog                              mandb                               texi2dvi
diff                                manpath                             texi2pdf
diff3                               mapfile                             texindex
dig                                 mapscrn                             then
dir                                 mariadb                             tic
dircolors                           mariadb-check                       _tilde
dirmngr                             mariadb-service-convert             time
dirmngr-client                      mawk                                timedatectl
dirname                             mcookie                             timeout
dirs                                md5sum                              times
discover-config                     md5sum.textutils                    tini
disown                              mdig                                tini-static
dmesg                               mesg                                tload
dnet                                messages                            tmux
dnsdomainname                       messages.mailutils                  tnameserv
dnstap-read                         migrate-pubring-from-classic-gpg    toe
do                                  mimeview                            top
docker                              _minimal                            touch
docker-containerd                   mkdir                               tput
docker-containerd-ctr               mkfifo                              tr
docker-containerd-shim              mk-job                              traceproto
docker-init                         mk_modmap                           traceproto.db
docker-linux-amd64                  mknod                               traceroute
domainname                          mkpasswd                            traceroute6
done                                mktemp                              traceroute6.db
dos2unix                            mlocate                             traceroute.db
dotlock                             _modules                            traceroute-nanog
dotlockfile                         more                                trap
dotlock.mailutils                   mount                               troff
dpkg                                mountpoint                          true
dpkg-architecture                   movemail                            truncate
dpkg-buildflags                     movemail.mailutils                  tryaffix
dpkg-buildpackage                   msgattrib                           tset
dpkg-checkbuilddeps                 msgcat                              tsort
dpkg-cross                          msgcmp                              tty
dpkg-deb                            msgcomm                             txixml2texi
dpkg-distaddfile                    msgconv                             type
dpkg-divert                         msgen                               typeset
dpkg-genbuildinfo                   msgexec                             tzselect
dpkg-genchanges                     msgfilter                           ucf
dpkg-gencontrol                     msgfmt                              ucfq
dpkg-gensymbols                     msggrep                             ucfr
dpkg-maintscript-helper             msginit                             udevadm
dpkg-mergechangelogs                msgmerge                            _uids
dpkg-name                           msgunfmt                            ul
dpkg-parsechangelog                 msguniq                             ulimit
dpkg-query                          ms_print                            ulockmgr_server
dpkg-scanpackages                   msql2mysql                          umask
dpkg-scansources                    mt                                  umount
dpkg-shlibdeps                      mt-gnu                              unalias
dpkg-source                         mtrace                              uname
dpkg-split                          munchlist                           uncompress
dpkg-statoverride                   mutt                                unexpand
dpkg-trigger                        mutt_dotlock                        unicode_start
dpkg-vendor                         mv                                  unicode_stop
dsymutil-7                          myisamchk                           uniq
du                                  myisam_ftdump                       unix2dos
dumpkeys                            myisamlog                           unix2mac
_dvd_devices                        myisampack                          unlink
dwp                                 my_print_defaults                   unlzma
--More--[Kdwz                                 mysql                               unmkinitramfs
ebrowse                             mysqlaccess                         unpack200
ebrowse.emacs                       mysqladmin                          unpigz
echo                                mysqlanalyze                        unset
edit                                mysqlbinlog                         unshare
editor                              mysqlcheck                          unsq
egrep                               mysql_config                        until
eject                               mysql_convert_table_format          unxz
elfedit                             mysqld_multi                        unzip
elif                                mysqld_safe                         unzipsfx
else                                mysqld_safe_helper                  update-alternatives
emacs                               mysqldump                           updatedb
emacsclient                         mysqldumpslow                       updatedb.mlocate
emacsclient.emacs                   mysql_embedded                      update-gconf-defaults
emacs-nox                           mysql_find_rows                     update-leap
enable                              mysql_fix_extensions                update-mime-database
enc2xs                              mysqlhotcopy                        update-perl-sax-parsers
encguess                            mysqlimport                         uptime
encode_keychange                    mysql_install_db                    _upvar
env                                 mysqloptimize                       _upvars
envsubst                            mysql_plugin                        _usb_ids
eqn                                 mysqlrepair                         _user_at_host
esac                                mysqlreport                         _usergroup
etags                               mysql_secure_installation           _userland
etags.emacs                         mysql_setpermission                 users
eval                                mysqlshow                           utmpdump
ex                                  mysqlslap                           valgrind
exec                                mysql_tzinfo_to_sql                 valgrind.bin
exit                                mysql_upgrade                       valgrind-di-server
_expand                             mysql_waitpid                       valgrind-listener
expand                              mytop                               _variables
__expand_tilde_by_ref               namei                               vdir
expiry                              nano                                verify-uselistorder-7
export                              nasm                                VGAuthService
expr                                native2ascii                        vgdb
extcheck                            nawk                                vi
factor                              nc                                  view
_fail2ban                           ncal                                vim
fail2ban-client                     ncdu                                vim.basic
__fail2ban_jail_action_methods      _ncpus                              vimdiff
__fail2ban_jail_action_properties   nc.traditional                      vim.tiny
__fail2ban_jail_actions             ncurses5-config                     vimtutor
__fail2ban_jails                    ncurses6-config                     virtualenv
fail2ban-python                     ncursesw5-config                    vmhgfs-fuse
fail2ban-regex                      ncursesw6-config                    vmstat
fail2ban-server                     ndisasm                             vmtoolsd
fail2ban-testcases                  neqn                                vmware-checkvm
faillog                             net                                 vmware-guestproxycerttool
faked-sysv                          netcat                              vmware-hgfsclient
faked-tcp                           netkit-ftp                          vmware-namespace-cmd
fakeroot                            netstat                             vmware-rpctool
fakeroot-sysv                       networkctl                          vmware-toolbox-cmd
fakeroot-tcp                        newaliases                          vmware-vgauth-cmd
fallocate                           newgrp                              vmware-vgauth-smoketest
false                               ngettext                            vmware-vmblock-fuse
fc                                  nice                                vmware-xferlogs
fc-cache                            nisdomainname                       volname
fc-cat                              nl                                  w
fc-conflist                         nm                                  w3m
fcgistarter                         nmblookup                           w3mman
fc-list                             nohup                               wait
--More--[Kfc-match                            nproc                               waitmax
fc-pattern                          nroff                               wall
fc-query                            nsenter                             watch
fc-scan                             nslookup                            watchgnupg
fc-validate                         nstat                               wc
fg                                  nsupdate                            wdctl
fgconsole                           ntpdc                               wget
fgrep                               ntpq                                whatis
fi                                  ntpsweep                            whereis
filan                               ntptrace                            which
file                                numfmt                              while
_filedir                            obj2yaml-7                          whiptail
_filedir_xspec                      objcopy                             who
fincore                             objdump                             whoami
find                                ocsptool                            whois
findaffix                           od                                  w.procps
findmnt                             openssl                             write
findsmb                             openvt                              wsgen
fio                                 opt-7                               wsimport
fio2gnuplot                         orbd                                wsrep_sst_common
fio-btrace2fio                      os-prober                           wsrep_sst_mariabackup
fio-dedupe                          p11tool                             wsrep_sst_mysqldump
fio_generate_plots                  pack200                             wsrep_sst_rsync
fio-genzipf                         pager                               wsrep_sst_rsync_wan
fixproc                             parsechangelog                      www-browser
flock                               _parse_help                         x86_64
fmt                                 __parse_options                     x86_64-linux-gnu-addr2line
fold                                _parse_usage                        x86_64-linux-gnu-ar
for                                 partx                               x86_64-linux-gnu-as
formail                             passwd                              x86_64-linux-gnu-c++filt
free                                paste                               x86_64-linux-gnu-cpp
frm                                 patch                               x86_64-linux-gnu-cpp-4.9
frm.mailutils                       pathchk                             x86_64-linux-gnu-cpp-6
from                                _pci_ids                            x86_64-linux-gnu-cpp-8
from.mailutils                      pcimodules                          x86_64-linux-gnu-dwp
_fstypes                            pdb                                 x86_64-linux-gnu-elfedit
ftp                                 pdb2                                x86_64-linux-gnu-g++
function                            pdb2.7                              x86_64-linux-gnu-g++-8
funzip                              pdb3                                x86_64-linux-gnu-gcc
fuser                               pdb3.7                              x86_64-linux-gnu-gcc-4.9
fusermount                          pdftexi2dvi                         x86_64-linux-gnu-gcc-6
g++                                 peekfd                              x86_64-linux-gnu-gcc-8
g++-8                               perf                                x86_64-linux-gnu-gcc-ar
galera_new_cluster                  perl                                x86_64-linux-gnu-gcc-ar-4.9
galera_recovery                     perl5.28.1                          x86_64-linux-gnu-gcc-ar-6
gawk                                perl5.28-x86_64-linux-gnu           x86_64-linux-gnu-gcc-ar-8
_gcc                                perlbug                             x86_64-linux-gnu-gcc-nm
gcc                                 perldoc                             x86_64-linux-gnu-gcc-nm-4.9
gcc-4.9                             perlivp                             x86_64-linux-gnu-gcc-nm-6
gcc-6                               perlthanks                          x86_64-linux-gnu-gcc-nm-8
gcc-8                               perror                              x86_64-linux-gnu-gcc-ranlib
gcc-ar                              pftp                                x86_64-linux-gnu-gcc-ranlib-4.9
gcc-ar-4.9                          _pgids                              x86_64-linux-gnu-gcc-ranlib-6
gcc-ar-6                            pgrep                               x86_64-linux-gnu-gcc-ranlib-8
gcc-ar-8                            phar                                x86_64-linux-gnu-gcov
gcc-nm                              phar7.3                             x86_64-linux-gnu-gcov-4.9
gcc-nm-4.9                          phar.phar                           x86_64-linux-gnu-gcov-6
gcc-nm-6                            phar.phar7.3                        x86_64-linux-gnu-gcov-8
gcc-nm-8                            php                                 x86_64-linux-gnu-gcov-dump
gcc-ranlib                          php7.3                              x86_64-linux-gnu-gcov-dump-6
gcc-ranlib-4.9                      pic                                 x86_64-linux-gnu-gcov-dump-8
--More--[Kgcc-ranlib-6                        pico                                x86_64-linux-gnu-gcov-tool
gcc-ranlib-8                        piconv                              x86_64-linux-gnu-gcov-tool-6
gconf-merge-tree                    pidof                               x86_64-linux-gnu-gcov-tool-8
gconftool                           _pids                               x86_64-linux-gnu-gold
gconftool-2                         pigz                                x86_64-linux-gnu-gprof
gcore                               pinentry                            x86_64-linux-gnu-ld
gcov                                pinentry-gtk-2                      x86_64-linux-gnu-ld.bfd
gcov-4.9                            pinentry-x11                        x86_64-linux-gnu-ld.gold
gcov-6                              ping                                x86_64-linux-gnu-nm
gcov-8                              ping4                               x86_64-linux-gnu-objcopy
gcov-dump                           ping6                               x86_64-linux-gnu-objdump
gcov-dump-6                         pinky                               x86_64-linux-gnu-python2.7-config
gcov-dump-8                         pip                                 x86_64-linux-gnu-python2-config
gcov-tool                           pip2                                x86_64-linux-gnu-python3.7-config
gcov-tool-6                         pkill                               x86_64-linux-gnu-python3.7m-config
gcov-tool-8                         pl2pm                               x86_64-linux-gnu-python3-config
gdb                                 pldd                                x86_64-linux-gnu-python3m-config
gdb-add-index                       pmap                                x86_64-linux-gnu-python-config
gdbserver                           _pnames                             x86_64-linux-gnu-ranlib
gdbtui                              po2debconf                          x86_64-linux-gnu-readelf
gdk-pixbuf-csource                  pod2html                            x86_64-linux-gnu-size
gdk-pixbuf-pixdata                  pod2man                             x86_64-linux-gnu-strings
gdk-pixbuf-thumbnailer              pod2texi                            x86_64-linux-gnu-strip
gencat                              pod2text                            xargs
gendiff                             pod2usage                           xauth
genfio                              podchecker                          xdg-user-dir
geqn                                podebconf-display-po                xdg-user-dirs-update
GET                                 podebconf-report-po                 _xfunc
_get_comp_words_by_ref              podselect                           xgettext
getconf                             popd                                _xinetd_services
_get_cword                          POST                                xjc
__get_cword_at_cursor_by_ref        pr                                  xsubpp
getent                              preconv                             xxd
getfacl                             print                               xz
_get_first_arg                      printenv                            xzcat
getkeycodes                         printerbanner                       xzcmp
getopt                              printf                              xzdiff
getopts                             prlimit                             xzegrep
_get_pword                          procan                              xzfgrep
gettext                             procmail                            xzgrep
gettextize                          prove                               xzless
gettext.sh                          prtstat                             xzmore
_gids                               ps                                  yaml2obj-7
ginstall-info                       psfaddtable                         yaml-bench-7
git                                 psfgettable                         yes
__git_eread                         psfstriptable                       ypdomainname
__git_ps1                           psfxtable                           zcat
__git_ps1_colorize_gitstring        psktool                             zcmp
__git_ps1_show_upstream             pslog                               zdiff
git-receive-pack                    pstree                              zdump
git-shell                           pstree.x11                          zegrep
git-upload-archive                  pt-align                            zfgrep
git-upload-pack                     ptar                                zforce
gnutls-cli                          pt-archiver                         zgrep
gnutls-cli-debug                    ptardiff                            zip
gnutls-serv                         ptargrep                            zipcloak
gold                                pt-config-diff                      zipdetails
gpasswd                             pt-deadlock-logger                  zipgrep
gpg                                 pt-diskstats                        zipinfo
gpg2                                pt-duplicate-key-checker            zipnote
gpg-agent                           pt-fifo-split                       zipsplit
--More--[Kgpgcompose                          pt-find                             zless
gpgconf                             pt-fingerprint                      zmore
gpg-connect-agent                   pt-fk-error-logger                  znew
> 0 )/* EOF and no input*/
bash: syntax error near unexpected token `)'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ return NULL;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
chage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
--More--[Kcrontab                             lexgrog                             shasum
--More--[Kcsh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
dh_bugfiles                         llvm-xray-7                         srptool
--More--[Kdh_builddeb                         ln                                  ss
dh_clean                            lnstat                              ssh
dh_compress                         __load_completion                   ssh-add
dh_dwz                              loadkeys                            ssh-agent
dh_fixperms                         loadunimap                          ssh-argv0
dh_gconf                            local                               ssh-copy-id
dh_gencontrol                       locale                              ssh-keygen
dh_icons                            localectl                           ssh-keyscan
dh_install                          localedef                           stat
dh_installcatalogs                  locate                              stdbuf
dh_installchangelogs                lockfile                            strings
dh_installcron                      logger                              strip
dh_installdeb                       login                               stty
dh_installdebconf                   loginctl                            su
dh_installdirs                      logname                             sudo
dh_installdocs                      logout                              sudoedit
dh_installemacsen                   logresolve                          sudoreplay
dh_installexamples                  _longopt                            sum
dh_installgsettings                 look                                suspend
dh_installifupdown                  lorder                              symcryptrun
dh_installinfo                      ls                                  sync
dh_installinit                      lsattr                              systemctl
dh_installinitramfs                 lsblk                               systemd
dh_installlogcheck                  lsb_release                         systemd-analyze
dh_installlogrotate                 lscpu                               systemd-ask-password
dh_installman                       lsinitramfs                         systemd-cat
dh_installmanpages                  lsipc                               systemd-cgls
dh_installmenu                      lslocks                             systemd-cgtop
dh_installmime                      lslogins                            systemd-delta
dh_installmodules                   lsmem                               systemd-detect-virt
dh_installpam                       lsmod                               systemd-escape
dh_installppp                       lsns                                systemd-hwdb
dh_installsystemd                   lsof                                systemd-id128
dh_installsystemduser               lspci                               systemd-inhibit
dh_installtex                       lspgpot                             systemd-machine-id-setup
dh_installudev                      __ltrim_colon_completions           systemd-mount
dh_installwm                        lwp-download                        systemd-notify
dh_installxfonts                    lwp-dump                            systemd-path
dh_link                             lwp-mirror                          systemd-resolve
dh_lintian                          lwp-request                         systemd-run
dh_listpackages                     lzcat                               systemd-socket-activate
dh_makeshlibs                       lzcmp                               systemd-stdio-bridge
dh_md5sums                          lzdiff                              systemd-sysusers
dh_missing                          lzegrep                             systemd-tmpfiles
dh_movefiles                        lzfgrep                             systemd-tty-ask-password-agent
dh_perl                             lzgrep                              systemd-umount
dh_perl_dbi                         lzless                              _sysvdirs
dh_perl_openssl                     lzma                                tabs
dh_prep                             lzmainfo                            tac
dh_pypy                             lzmore                              tail
dh_pysupport                        m4                                  tar
dh_python2                          mac2unix                            tasksel
dh_python3                          _mac_addresses                      taskset
dh_shlibdeps                        mail                                tbl
dh_strip                            Mail                                tcsh
dh_strip_nondeterminism             mail.mailutils                      tee
dh_systemd_enable                   mailq                               telnet
dh_systemd_start                    mailstat                            telnet.netkit
dh_testdir                          mailx                               tempfile
dh_testroot                         make                                _terms
dh_ucf                              make-first-existing-target          test
--More--[Kdh_update_autotools_config          makeinfo                            testparm
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ return NULL; buf;
bash: return: NULL: numeric argument required
bash: return: can only `return' from a function or sourced script
bash: buf: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ }
bash: syntax error near unexpected token `}'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /**
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  **splitline ( parse a line into an array of strings )
bash: syntax error near unexpected token `parse'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  **/
bash: **/: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ #defineis_delim(x) ((x)==' '||(x)=='\t')
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ char ** splitline(char *line)
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /*
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * purpose: split a line into array of white-space separated tokens
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * returns: a NULL-terminated array of pointers to copies of the tokens
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *          or NULL if line if no tokens on the line
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *  action: traverse the array, locate strings, make copies
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *    note: strtok() could work, but we may want to add quotes later
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  */
bash: */: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ {
> chardet*newstr();
bash: syntax error near unexpected token `;'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ chardet**args ;
bash: chardet**args: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intspots = 0;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intspots = 0; table*/
bash: intspots: command not found
bash: table*/: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intbufspace = 0;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
chage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intbufspace = 0; table*/
bash: intbufspace: command not found
bash: table*/: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intargnum = 0;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
--More--[Kchage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
crontab                             lexgrog                             shasum
--More--[Kcsh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
dh_bugfiles                         llvm-xray-7                         srptool
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intargnum = 0;e;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intargnum = 0;e; strings */
bash: intargnum: command not found
bash: e: command not found
strings: '*/': No such file
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ chardet*start;
bash: chardet*start: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intlen;
bash: intlen: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ if ( line == NULL )/* handle special case*/
bash: syntax error near unexpected token `/*'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ return NULL;
bash: return: NULL: numeric argument required
bash: return: can only `return' from a function or sourced script
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ args     = emalloc(BUFSIZ);
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ args     = emalloc(BUFSIZ);itialize array*/
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ bufspace = BUFSIZ;
bash: bufspace: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ spots    = BUFSIZ/sizeof(char *);
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ while( *cp != '\0' )
> {
> 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
chage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
--More--[Kcrontab                             lexgrog                             shasum
csh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
--More--[Kdh_bugfiles                         llvm-xray-7                         srptool
dh_builddeb                         ln                                  ss
dh_clean                            lnstat                              ssh
dh_compress                         __load_completion                   ssh-add
dh_dwz                              loadkeys                            ssh-agent
dh_fixperms                         loadunimap                          ssh-argv0
dh_gconf                            local                               ssh-copy-id
dh_gencontrol                       locale                              ssh-keygen
dh_icons                            localectl                           ssh-keyscan
dh_install                          localedef                           stat
dh_installcatalogs                  locate                              stdbuf
dh_installchangelogs                lockfile                            strings
dh_installcron                      logger                              strip
dh_installdeb                       login                               stty
dh_installdebconf                   loginctl                            su
dh_installdirs                      logname                             sudo
dh_installdocs                      logout                              sudoedit
dh_installemacsen                   logresolve                          sudoreplay
dh_installexamples                  _longopt                            sum
dh_installgsettings                 look                                suspend
dh_installifupdown                  lorder                              symcryptrun
dh_installinfo                      ls                                  sync
dh_installinit                      lsattr                              systemctl
dh_installinitramfs                 lsblk                               systemd
dh_installlogcheck                  lsb_release                         systemd-analyze
dh_installlogrotate                 lscpu                               systemd-ask-password
dh_installman                       lsinitramfs                         systemd-cat
dh_installmanpages                  lsipc                               systemd-cgls
dh_installmenu                      lslocks                             systemd-cgtop
dh_installmime                      lslogins                            systemd-delta
dh_installmodules                   lsmem                               systemd-detect-virt
dh_installpam                       lsmod                               systemd-escape
dh_installppp                       lsns                                systemd-hwdb
dh_installsystemd                   lsof                                systemd-id128
dh_installsystemduser               lspci                               systemd-inhibit
dh_installtex                       lspgpot                             systemd-machine-id-setup
dh_installudev                      __ltrim_colon_completions           systemd-mount
dh_installwm                        lwp-download                        systemd-notify
dh_installxfonts                    lwp-dump                            systemd-path
dh_link                             lwp-mirror                          systemd-resolve
dh_lintian                          lwp-request                         systemd-run
dh_listpackages                     lzcat                               systemd-socket-activate
dh_makeshlibs                       lzcmp                               systemd-stdio-bridge
dh_md5sums                          lzdiff                              systemd-sysusers
dh_missing                          lzegrep                             systemd-tmpfiles
dh_movefiles                        lzfgrep                             systemd-tty-ask-password-agent
dh_perl                             lzgrep                              systemd-umount
dh_perl_dbi                         lzless                              _sysvdirs
dh_perl_openssl                     lzma                                tabs
dh_prep                             lzmainfo                            tac
dh_pypy                             lzmore                              tail
dh_pysupport                        m4                                  tar
dh_python2                          mac2unix                            tasksel
dh_python3                          _mac_addresses                      taskset
dh_shlibdeps                        mail                                tbl
dh_strip                            Mail                                tcsh
dh_strip_nondeterminism             mail.mailutils                      tee
dh_systemd_enable                   mailq                               telnet
dh_systemd_start                    mailstat                            telnet.netkit
dh_testdir                          mailx                               tempfile
dh_testroot                         make                                _terms
--More--[K> g spaces*/
> 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
chage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
--More--[Kcrontab                             lexgrog                             shasum
csh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
--More--[Kdh_bugfiles                         llvm-xray-7                         srptool
dh_builddeb                         ln                                  ss
dh_clean                            lnstat                              ssh
dh_compress                         __load_completion                   ssh-add
dh_dwz                              loadkeys                            ssh-agent
dh_fixperms                         loadunimap                          ssh-argv0
dh_gconf                            local                               ssh-copy-id
dh_gencontrol                       locale                              ssh-keygen
dh_icons                            localectl                           ssh-keyscan
dh_install                          localedef                           stat
dh_installcatalogs                  locate                              stdbuf
dh_installchangelogs                lockfile                            strings
dh_installcron                      logger                              strip
dh_installdeb                       login                               stty
dh_installdebconf                   loginctl                            su
dh_installdirs                      logname                             sudo
dh_installdocs                      logout                              sudoedit
dh_installemacsen                   logresolve                          sudoreplay
dh_installexamples                  _longopt                            sum
dh_installgsettings                 look                                suspend
dh_installifupdown                  lorder                              symcryptrun
dh_installinfo                      ls                                  sync
dh_installinit                      lsattr                              systemctl
dh_installinitramfs                 lsblk                               systemd
dh_installlogcheck                  lsb_release                         systemd-analyze
dh_installlogrotate                 lscpu                               systemd-ask-password
dh_installman                       lsinitramfs                         systemd-cat
dh_installmanpages                  lsipc                               systemd-cgls
dh_installmenu                      lslocks                             systemd-cgtop
dh_installmime                      lslogins                            systemd-delta
dh_installmodules                   lsmem                               systemd-detect-virt
dh_installpam                       lsmod                               systemd-escape
dh_installppp                       lsns                                systemd-hwdb
dh_installsystemd                   lsof                                systemd-id128
dh_installsystemduser               lspci                               systemd-inhibit
dh_installtex                       lspgpot                             systemd-machine-id-setup
dh_installudev                      __ltrim_colon_completions           systemd-mount
dh_installwm                        lwp-download                        systemd-notify
dh_installxfonts                    lwp-dump                            systemd-path
dh_link                             lwp-mirror                          systemd-resolve
dh_lintian                          lwp-request                         systemd-run
dh_listpackages                     lzcat                               systemd-socket-activate
dh_makeshlibs                       lzcmp                               systemd-stdio-bridge
dh_md5sums                          lzdiff                              systemd-sysusers
dh_missing                          lzegrep                             systemd-tmpfiles
dh_movefiles                        lzfgrep                             systemd-tty-ask-password-agent
dh_perl                             lzgrep                              systemd-umount
dh_perl_dbi                         lzless                              _sysvdirs
dh_perl_openssl                     lzma                                tabs
dh_prep                             lzmainfo                            tac
dh_pypy                             lzmore                              tail
dh_pysupport                        m4                                  tar
dh_python2                          mac2unix                            tasksel
dh_python3                          _mac_addresses                      taskset
dh_shlibdeps                        mail                                tbl
dh_strip                            Mail                                tcsh
dh_strip_nondeterminism             mail.mailutils                      tee
dh_systemd_enable                   mailq                               telnet
dh_systemd_start                    mailstat                            telnet.netkit
dh_testdir                          mailx                               tempfile
dh_testroot                         make                                _terms
--More--[Kdh_ucf                              make-first-existing-target          test
dh_update_autotools_config          makeinfo                            testparm
dh_usrlocal                         man                                 texi2any
dialog                              mandb                               texi2dvi
diff                                manpath                             texi2pdf
diff3                               mapfile                             texindex
dig                                 mapscrn                             then
dir                                 mariadb                             tic
dircolors                           mariadb-check                       _tilde
dirmngr                             mariadb-service-convert             time
dirmngr-client                      mawk                                timedatectl
dirname                             mcookie                             timeout
dirs                                md5sum                              times
discover-config                     md5sum.textutils                    tini
disown                              mdig                                tini-static
dmesg                               mesg                                tload
dnet                                messages                            tmux
dnsdomainname                       messages.mailutils                  tnameserv
dnstap-read                         migrate-pubring-from-classic-gpg    toe
do                                  mimeview                            top
docker                              _minimal                            touch
docker-containerd                   mkdir                               tput
docker-containerd-ctr               mkfifo                              tr
docker-containerd-shim              mk-job                              traceproto
docker-init                         mk_modmap                           traceproto.db
docker-linux-amd64                  mknod                               traceroute
domainname                          mkpasswd                            traceroute6
done                                mktemp                              traceroute6.db
dos2unix                            mlocate                             traceroute.db
dotlock                             _modules                            traceroute-nanog
dotlockfile                         more                                trap
dotlock.mailutils                   mount                               troff
dpkg                                mountpoint                          true
dpkg-architecture                   movemail                            truncate
dpkg-buildflags                     movemail.mailutils                  tryaffix
dpkg-buildpackage                   msgattrib                           tset
dpkg-checkbuilddeps                 msgcat                              tsort
dpkg-cross                          msgcmp                              tty
dpkg-deb                            msgcomm                             txixml2texi
dpkg-distaddfile                    msgconv                             type
dpkg-divert                         msgen                               typeset
dpkg-genbuildinfo                   msgexec                             tzselect
dpkg-genchanges                     msgfilter                           ucf
dpkg-gencontrol                     msgfmt                              ucfq
dpkg-gensymbols                     msggrep                             ucfr
dpkg-maintscript-helper             msginit                             udevadm
dpkg-mergechangelogs                msgmerge                            _uids
dpkg-name                           msgunfmt                            ul
dpkg-parsechangelog                 msguniq                             ulimit
dpkg-query                          ms_print                            ulockmgr_server
dpkg-scanpackages                   msql2mysql                          umask
dpkg-scansources                    mt                                  umount
dpkg-shlibdeps                      mt-gnu                              unalias
dpkg-source                         mtrace                              uname
dpkg-split                          munchlist                           uncompress
dpkg-statoverride                   mutt                                unexpand
dpkg-trigger                        mutt_dotlock                        unicode_start
dpkg-vendor                         mv                                  unicode_stop
dsymutil-7                          myisamchk                           uniq
du                                  myisam_ftdump                       unix2dos
dumpkeys                            myisamlog                           unix2mac
--More--[K> uit at end-o-string*/
> 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
chage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
--More--[Kcrontab                             lexgrog                             shasum
csh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
--More--[Kdh_bugfiles                         llvm-xray-7                         srptool
dh_builddeb                         ln                                  ss
dh_clean                            lnstat                              ssh
dh_compress                         __load_completion                   ssh-add
dh_dwz                              loadkeys                            ssh-agent
dh_fixperms                         loadunimap                          ssh-argv0
dh_gconf                            local                               ssh-copy-id
dh_gencontrol                       locale                              ssh-keygen
dh_icons                            localectl                           ssh-keyscan
dh_install                          localedef                           stat
dh_installcatalogs                  locate                              stdbuf
dh_installchangelogs                lockfile                            strings
dh_installcron                      logger                              strip
dh_installdeb                       login                               stty
dh_installdebconf                   loginctl                            su
dh_installdirs                      logname                             sudo
dh_installdocs                      logout                              sudoedit
dh_installemacsen                   logresolve                          sudoreplay
dh_installexamples                  _longopt                            sum
dh_installgsettings                 look                                suspend
dh_installifupdown                  lorder                              symcryptrun
dh_installinfo                      ls                                  sync
dh_installinit                      lsattr                              systemctl
dh_installinitramfs                 lsblk                               systemd
dh_installlogcheck                  lsb_release                         systemd-analyze
dh_installlogrotate                 lscpu                               systemd-ask-password
dh_installman                       lsinitramfs                         systemd-cat
dh_installmanpages                  lsipc                               systemd-cgls
dh_installmenu                      lslocks                             systemd-cgtop
dh_installmime                      lslogins                            systemd-delta
dh_installmodules                   lsmem                               systemd-detect-virt
dh_installpam                       lsmod                               systemd-escape
dh_installppp                       lsns                                systemd-hwdb
dh_installsystemd                   lsof                                systemd-id128
dh_installsystemduser               lspci                               systemd-inhibit
dh_installtex                       lspgpot                             systemd-machine-id-setup
dh_installudev                      __ltrim_colon_completions           systemd-mount
dh_installwm                        lwp-download                        systemd-notify
dh_installxfonts                    lwp-dump                            systemd-path
dh_link                             lwp-mirror                          systemd-resolve
dh_lintian                          lwp-request                         systemd-run
dh_listpackages                     lzcat                               systemd-socket-activate
dh_makeshlibs                       lzcmp                               systemd-stdio-bridge
dh_md5sums                          lzdiff                              systemd-sysusers
dh_missing                          lzegrep                             systemd-tmpfiles
dh_movefiles                        lzfgrep                             systemd-tty-ask-password-agent
dh_perl                             lzgrep                              systemd-umount
dh_perl_dbi                         lzless                              _sysvdirs
dh_perl_openssl                     lzma                                tabs
dh_prep                             lzmainfo                            tac
dh_pypy                             lzmore                              tail
dh_pysupport                        m4                                  tar
dh_python2                          mac2unix                            tasksel
dh_python3                          _mac_addresses                      taskset
dh_shlibdeps                        mail                                tbl
dh_strip                            Mail                                tcsh
dh_strip_nondeterminism             mail.mailutils                      tee
dh_systemd_enable                   mailq                               telnet
dh_systemd_start                    mailstat                            telnet.netkit
dh_testdir                          mailx                               tempfile
dh_testroot                         make                                _terms
--More--[Kdh_ucf                              make-first-existing-target          test
dh_update_autotools_config          makeinfo                            testparm
dh_usrlocal                         man                                 texi2any
dialog                              mandb                               texi2dvi
diff                                manpath                             texi2pdf
diff3                               mapfile                             texindex
dig                                 mapscrn                             then
dir                                 mariadb                             tic
dircolors                           mariadb-check                       _tilde
dirmngr                             mariadb-service-convert             time
dirmngr-client                      mawk                                timedatectl
dirname                             mcookie                             timeout
dirs                                md5sum                              times
discover-config                     md5sum.textutils                    tini
disown                              mdig                                tini-static
dmesg                               mesg                                tload
dnet                                messages                            tmux
dnsdomainname                       messages.mailutils                  tnameserv
dnstap-read                         migrate-pubring-from-classic-gpg    toe
do                                  mimeview                            top
docker                              _minimal                            touch
docker-containerd                   mkdir                               tput
docker-containerd-ctr               mkfifo                              tr
docker-containerd-shim              mk-job                              traceproto
docker-init                         mk_modmap                           traceproto.db
docker-linux-amd64                  mknod                               traceroute
domainname                          mkpasswd                            traceroute6
done                                mktemp                              traceroute6.db
dos2unix                            mlocate                             traceroute.db
dotlock                             _modules                            traceroute-nanog
dotlockfile                         more                                trap
dotlock.mailutils                   mount                               troff
dpkg                                mountpoint                          true
dpkg-architecture                   movemail                            truncate
dpkg-buildflags                     movemail.mailutils                  tryaffix
dpkg-buildpackage                   msgattrib                           tset
dpkg-checkbuilddeps                 msgcat                              tsort
dpkg-cross                          msgcmp                              tty
dpkg-deb                            msgcomm                             txixml2texi
dpkg-distaddfile                    msgconv                             type
dpkg-divert                         msgen                               typeset
dpkg-genbuildinfo                   msgexec                             tzselect
dpkg-genchanges                     msgfilter                           ucf
dpkg-gencontrol                     msgfmt                              ucfq
dpkg-gensymbols                     msggrep                             ucfr
dpkg-maintscript-helper             msginit                             udevadm
dpkg-mergechangelogs                msgmerge                            _uids
dpkg-name                           msgunfmt                            ul
dpkg-parsechangelog                 msguniq                             ulimit
dpkg-query                          ms_print                            ulockmgr_server
dpkg-scanpackages                   msql2mysql                          umask
dpkg-scansources                    mt                                  umount
dpkg-shlibdeps                      mt-gnu                              unalias
dpkg-source                         mtrace                              uname
dpkg-split                          munchlist                           uncompress
dpkg-statoverride                   mutt                                unexpand
dpkg-trigger                        mutt_dotlock                        unicode_start
dpkg-vendor                         mv                                  unicode_stop
dsymutil-7                          myisamchk                           uniq
du                                  myisam_ftdump                       unix2dos
dumpkeys                            myisamlog                           unix2mac
--More--[K_dvd_devices                        myisampack                          unlink
dwp                                 my_print_defaults                   unlzma
dwz                                 mysql                               unmkinitramfs
ebrowse                             mysqlaccess                         unpack200
ebrowse.emacs                       mysqladmin                          unpigz
echo                                mysqlanalyze                        unset
edit                                mysqlbinlog                         unshare
editor                              mysqlcheck                          unsq
egrep                               mysql_config                        until
eject                               mysql_convert_table_format          unxz
elfedit                             mysqld_multi                        unzip
elif                                mysqld_safe                         unzipsfx
else                                mysqld_safe_helper                  update-alternatives
emacs                               mysqldump                           updatedb
emacsclient                         mysqldumpslow                       updatedb.mlocate
emacsclient.emacs                   mysql_embedded                      update-gconf-defaults
emacs-nox                           mysql_find_rows                     update-leap
enable                              mysql_fix_extensions                update-mime-database
enc2xs                              mysqlhotcopy                        update-perl-sax-parsers
encguess                            mysqlimport                         uptime
encode_keychange                    mysql_install_db                    _upvar
env                                 mysqloptimize                       _upvars
envsubst                            mysql_plugin                        _usb_ids
eqn                                 mysqlrepair                         _user_at_host
esac                                mysqlreport                         _usergroup
etags                               mysql_secure_installation           _userland
etags.emacs                         mysql_setpermission                 users
eval                                mysqlshow                           utmpdump
ex                                  mysqlslap                           valgrind
exec                                mysql_tzinfo_to_sql                 valgrind.bin
exit                                mysql_upgrade                       valgrind-di-server
_expand                             mysql_waitpid                       valgrind-listener
expand                              mytop                               _variables
__expand_tilde_by_ref               namei                               vdir
expiry                              nano                                verify-uselistorder-7
export                              nasm                                VGAuthService
expr                                native2ascii                        vgdb
extcheck                            nawk                                vi
factor                              nc                                  view
_fail2ban                           ncal                                vim
fail2ban-client                     ncdu                                vim.basic
__fail2ban_jail_action_methods      _ncpus                              vimdiff
__fail2ban_jail_action_properties   nc.traditional                      vim.tiny
__fail2ban_jail_actions             ncurses5-config                     vimtutor
__fail2ban_jails                    ncurses6-config                     virtualenv
fail2ban-python                     ncursesw5-config                    vmhgfs-fuse
fail2ban-regex                      ncursesw6-config                    vmstat
fail2ban-server                     ndisasm                             vmtoolsd
fail2ban-testcases                  neqn                                vmware-checkvm
faillog                             net                                 vmware-guestproxycerttool
faked-sysv                          netcat                              vmware-hgfsclient
faked-tcp                           netkit-ftp                          vmware-namespace-cmd
fakeroot                            netstat                             vmware-rpctool
fakeroot-sysv                       networkctl                          vmware-toolbox-cmd
fakeroot-tcp                        newaliases                          vmware-vgauth-cmd
fallocate                           newgrp                              vmware-vgauth-smoketest
false                               ngettext                            vmware-vmblock-fuse
fc                                  nice                                vmware-xferlogs
fc-cache                            nisdomainname                       volname
fc-cat                              nl                                  w
fc-conflist                         nm                                  w3m
--More--[Kfcgistarter                         nmblookup                           w3mman
fc-list                             nohup                               wait
fc-match                            nproc                               waitmax
fc-pattern                          nroff                               wall
fc-query                            nsenter                             watch
fc-scan                             nslookup                            watchgnupg
fc-validate                         nstat                               wc
fg                                  nsupdate                            wdctl
fgconsole                           ntpdc                               wget
fgrep                               ntpq                                whatis
fi                                  ntpsweep                            whereis
filan                               ntptrace                            which
file                                numfmt                              while
_filedir                            obj2yaml-7                          whiptail
_filedir_xspec                      objcopy                             who
fincore                             objdump                             whoami
find                                ocsptool                            whois
findaffix                           od                                  w.procps
findmnt                             openssl                             write
findsmb                             openvt                              wsgen
fio                                 opt-7                               wsimport
fio2gnuplot                         orbd                                wsrep_sst_common
fio-btrace2fio                      os-prober                           wsrep_sst_mariabackup
fio-dedupe                          p11tool                             wsrep_sst_mysqldump
fio_generate_plots                  pack200                             wsrep_sst_rsync
fio-genzipf                         pager                               wsrep_sst_rsync_wan
fixproc                             parsechangelog                      www-browser
flock                               _parse_help                         x86_64
fmt                                 __parse_options                     x86_64-linux-gnu-addr2line
fold                                _parse_usage                        x86_64-linux-gnu-ar
for                                 partx                               x86_64-linux-gnu-as
formail                             passwd                              x86_64-linux-gnu-c++filt
free                                paste                               x86_64-linux-gnu-cpp
frm                                 patch                               x86_64-linux-gnu-cpp-4.9
frm.mailutils                       pathchk                             x86_64-linux-gnu-cpp-6
from                                _pci_ids                            x86_64-linux-gnu-cpp-8
from.mailutils                      pcimodules                          x86_64-linux-gnu-dwp
_fstypes                            pdb                                 x86_64-linux-gnu-elfedit
ftp                                 pdb2                                x86_64-linux-gnu-g++
function                            pdb2.7                              x86_64-linux-gnu-g++-8
funzip                              pdb3                                x86_64-linux-gnu-gcc
fuser                               pdb3.7                              x86_64-linux-gnu-gcc-4.9
fusermount                          pdftexi2dvi                         x86_64-linux-gnu-gcc-6
g++                                 peekfd                              x86_64-linux-gnu-gcc-8
g++-8                               perf                                x86_64-linux-gnu-gcc-ar
galera_new_cluster                  perl                                x86_64-linux-gnu-gcc-ar-4.9
galera_recovery                     perl5.28.1                          x86_64-linux-gnu-gcc-ar-6
gawk                                perl5.28-x86_64-linux-gnu           x86_64-linux-gnu-gcc-ar-8
_gcc                                perlbug                             x86_64-linux-gnu-gcc-nm
gcc                                 perldoc                             x86_64-linux-gnu-gcc-nm-4.9
gcc-4.9                             perlivp                             x86_64-linux-gnu-gcc-nm-6
gcc-6                               perlthanks                          x86_64-linux-gnu-gcc-nm-8
gcc-8                               perror                              x86_64-linux-gnu-gcc-ranlib
gcc-ar                              pftp                                x86_64-linux-gnu-gcc-ranlib-4.9
gcc-ar-4.9                          _pgids                              x86_64-linux-gnu-gcc-ranlib-6
gcc-ar-6                            pgrep                               x86_64-linux-gnu-gcc-ranlib-8
gcc-ar-8                            phar                                x86_64-linux-gnu-gcov
gcc-nm                              phar7.3                             x86_64-linux-gnu-gcov-4.9
gcc-nm-4.9                          phar.phar                           x86_64-linux-gnu-gcov-6
gcc-nm-6                            phar.phar7.3                        x86_64-linux-gnu-gcov-8
gcc-nm-8                            php                                 x86_64-linux-gnu-gcov-dump
--More--[Kgcc-ranlib                          php7.3                              x86_64-linux-gnu-gcov-dump-6
gcc-ranlib-4.9                      pic                                 x86_64-linux-gnu-gcov-dump-8
gcc-ranlib-6                        pico                                x86_64-linux-gnu-gcov-tool
gcc-ranlib-8                        piconv                              x86_64-linux-gnu-gcov-tool-6
gconf-merge-tree                    pidof                               x86_64-linux-gnu-gcov-tool-8
gconftool                           _pids                               x86_64-linux-gnu-gold
gconftool-2                         pigz                                x86_64-linux-gnu-gprof
gcore                               pinentry                            x86_64-linux-gnu-ld
gcov                                pinentry-gtk-2                      x86_64-linux-gnu-ld.bfd
gcov-4.9                            pinentry-x11                        x86_64-linux-gnu-ld.gold
gcov-6                              ping                                x86_64-linux-gnu-nm
gcov-8                              ping4                               x86_64-linux-gnu-objcopy
gcov-dump                           ping6                               x86_64-linux-gnu-objdump
gcov-dump-6                         pinky                               x86_64-linux-gnu-python2.7-config
gcov-dump-8                         pip                                 x86_64-linux-gnu-python2-config
gcov-tool                           pip2                                x86_64-linux-gnu-python3.7-config
gcov-tool-6                         pkill                               x86_64-linux-gnu-python3.7m-config
gcov-tool-8                         pl2pm                               x86_64-linux-gnu-python3-config
gdb                                 pldd                                x86_64-linux-gnu-python3m-config
gdb-add-index                       pmap                                x86_64-linux-gnu-python-config
gdbserver                           _pnames                             x86_64-linux-gnu-ranlib
gdbtui                              po2debconf                          x86_64-linux-gnu-readelf
gdk-pixbuf-csource                  pod2html                            x86_64-linux-gnu-size
gdk-pixbuf-pixdata                  pod2man                             x86_64-linux-gnu-strings
gdk-pixbuf-thumbnailer              pod2texi                            x86_64-linux-gnu-strip
gencat                              pod2text                            xargs
gendiff                             pod2usage                           xauth
genfio                              podchecker                          xdg-user-dir
geqn                                podebconf-display-po                xdg-user-dirs-update
GET                                 podebconf-report-po                 _xfunc
_get_comp_words_by_ref              podselect                           xgettext
getconf                             popd                                _xinetd_services
_get_cword                          POST                                xjc
__get_cword_at_cursor_by_ref        pr                                  xsubpp
getent                              preconv                             xxd
getfacl                             print                               xz
_get_first_arg                      printenv                            xzcat
getkeycodes                         printerbanner                       xzcmp
getopt                              printf                              xzdiff
getopts                             prlimit                             xzegrep
_get_pword                          procan                              xzfgrep
gettext                             procmail                            xzgrep
gettextize                          prove                               xzless
gettext.sh                          prtstat                             xzmore
_gids                               ps                                  yaml2obj-7
ginstall-info                       psfaddtable                         yaml-bench-7
git                                 psfgettable                         yes
__git_eread                         psfstriptable                       ypdomainname
__git_ps1                           psfxtable                           zcat
__git_ps1_colorize_gitstring        psktool                             zcmp
__git_ps1_show_upstream             pslog                               zdiff
git-receive-pack                    pstree                              zdump
git-shell                           pstree.x11                          zegrep
git-upload-archive                  pt-align                            zfgrep
git-upload-pack                     ptar                                zforce
gnutls-cli                          pt-archiver                         zgrep
gnutls-cli-debug                    ptardiff                            zip
gnutls-serv                         ptargrep                            zipcloak
gold                                pt-config-diff                      zipdetails
gpasswd                             pt-deadlock-logger                  zipgrep
gpg                                 pt-diskstats                        zipinfo
--More--[Kgpg2                                pt-duplicate-key-checker            zipnote
gpg-agent                           pt-fifo-split                       zipsplit
gpgcompose                          pt-find                             zless
gpgconf                             pt-fingerprint                      zmore
gpg-connect-agent                   pt-fk-error-logger                  znew
> NULL) */
bash: syntax error near unexpected token `)'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ if ( argnum+1 >= spots ){
bash: syntax error near unexpected token `{'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ args = erealloc(args,bufspace+BUFSIZ);
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ bufspace += BUFSIZ;
bash: bufspace: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ spots += (BUFSIZ/sizeof(char *));
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ }
bash: syntax error near unexpected token `}'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /* mark start, then find end of word */
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ start = cp;
bash: start: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ len   = 1;
bash: len: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ while (*++cp != '\0' && !(is_delim(*cp)) )
> 
Display all 1662 possibilities? (y or n)
> ++;
> 
Display all 1662 possibilities? (y or n)
> um++] = newstr(start, len);
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ }
bash: syntax error near unexpected token `}'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ args[argnum] = NULL;
bash: args[argnum]: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ return args;
bash: return: args: numeric argument required
bash: return: can only `return' from a function or sourced script
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ }
bash: syntax error near unexpected token `}'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /*
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * purpose: constructor for strings
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * returns: a string, never NULL
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  */
bash: */: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ char *newstr(char *s, int l)
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ {
> char *rv = emalloc(l+1);
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ rv[l] = '\0';
bash: rv[l]: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ strncpy(rv, s, l);
bash: syntax error near unexpected token `rv,'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ return rv;
bash: return: rv: numeric argument required
bash: return: can only `return' from a function or sourced script
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ }
bash: syntax error near unexpected token `}'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ void 
bash: void: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ freelist(char **list)
bash: syntax error near unexpected token `char'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /*
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * purpose: free the list returned by splitline
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * returns: nothing
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *  action: free all strings in list and then free the list
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  */
bash: */: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ {
> chardet**cp = list;
> while( *cp )
> 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
chage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
--More--[K> )
bash: syntax error near unexpected token `)'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ {
> void *rv ;
> if ( (rv = malloc(n)) == NULL )
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ fatal("out of memory","",1);
bash: syntax error near unexpected token `"out of memory","",1'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ return rv;
bash: return: rv: numeric argument required
bash: return: can only `return' from a function or sourced script
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ }
bash: syntax error near unexpected token `}'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ void * erealloc(void *p, size_t n)
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ {
> void *rv;
> if ( (rv = realloc(p,n)) == NULL )
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ fatal("realloc() failed","",1);
bash: syntax error near unexpected token `"realloc() failed","",1'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ return rv;
bash: return: rv: numeric argument required
bash: return: can only `return' from a function or sourced script
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ }
bash: syntax error near unexpected token `}'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ * splitline.c - commmand reading and parsing functions for smsh
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *    
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *    char *next_cmd(char *prompt, FILE *fp) - get next command
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *    char **splitline(char *str);           - parse a string
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  */
#include	<stdio.h>
#include	<stdlib.h> 
#include	<string.h>
#include	"smsh.h"

char * next_cmd(char *prompt, FILE *fp)
/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */
{
	char	*buf ; 				/* the buffer		*/
	int	bufspace = 0;			/* total size		*/
	int	pos = 0;			/* current position	*/
	int	c;				/* input char		*/
	char	*curpath;	

	printf("%s$%s", curpath,prompt);				/* prompt user	*/
	while( ( c = getc(fp)) != EOF ) {

		/* need space? */
		if( pos+1 >= bufspace ){		/* 1 for \0	*/
			if ( bufspace == 0 )		/* y: 1st time	*/
				buf = emalloc(BUFSIZ);
			else				/* or expand	*/
				buf = erealloc(buf,bufspace+BUFSIZ);
			bufspace += BUFSIZ;		/* update size	*/
		}

		/* end of command? */
		if ( c == '\n' )
			break;

		/* no, add to buffer */
		buf[pos++] = c;
	}
	if ( c == EOF && pos == 0 )		/* EOF and no input	*/
		return NULL;			/* say so		*/
	buf[pos] = '\0';
	return buf;
}

/**
 **	splitline ( parse a line into an array of strings )
 **/
#define	is_delim(x) ((x)==' '||(x)=='\t')

char ** splitline(char *line)
/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens
 *          or NULL if line if no tokens on the line
 *  action: traverse the array, locate strings, make copies
 *    note: strtok() could work, but we may want to add quotes later
 */
{
	char	*newstr();
	char	**args ;
	int	spots = 0;			/* spots in table	*/
bash: */: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ #include<stdio.h>
	char *rv = emalloc(l+1);

	rv[l] = '\0';
	strncpy(rv, s, l);
	return rv;
}

void 
freelist(char **list)
/*
 * purpose: free the list returned by splitline
 * returns: nothing
 *  action: free all strings in list and then free the list
 */
{
	char	**cp = list;
	while( *cp )
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ #include<stdlib.h> 
	void *rv;
	if ( (rv = realloc(p,n)) == NULL )
		fatal("realloc() failed","",1);
	return rv;
}
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ #include<string.h>
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ #include"smsh.h"
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ char * next_cmd(char *prompt, FILE *fp)
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /*
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * purpose: read next command line from fp
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * returns: dynamically allocated string holding command line
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *  errors: NULL at EOF (not really an error)
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *          calls fatal from emalloc()
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *   notes: allocates space in BUFSIZ chunks.  
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  */
bash: */: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ {
> chardet*buf ; 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
--More--[K> chardet*buf ; tbufspace = 0;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
--More--[K> chardet*buf ; tbufspace = 0;tpos = 0;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K> chardet*buf ; tbufspace = 0;tpos = 0;t position*/
> intc;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K> intc;put char*/
> chardet*curpath;
> 
> printf("%s$%s", curpath,prompt);
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
--More--[Kchage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
crontab                             lexgrog                             shasum
--More--[Kcsh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
dh_bugfiles                         llvm-xray-7                         srptool
--More--[Kdh_builddeb                         ln                                  ss
dh_clean                            lnstat                              ssh
dh_compress                         __load_completion                   ssh-add
dh_dwz                              loadkeys                            ssh-agent
dh_fixperms                         loadunimap                          ssh-argv0
dh_gconf                            local                               ssh-copy-id
dh_gencontrol                       locale                              ssh-keygen
dh_icons                            localectl                           ssh-keyscan
dh_install                          localedef                           stat
dh_installcatalogs                  locate                              stdbuf
dh_installchangelogs                lockfile                            strings
dh_installcron                      logger                              strip
dh_installdeb                       login                               stty
dh_installdebconf                   loginctl                            su
dh_installdirs                      logname                             sudo
dh_installdocs                      logout                              sudoedit
dh_installemacsen                   logresolve                          sudoreplay
dh_installexamples                  _longopt                            sum
dh_installgsettings                 look                                suspend
dh_installifupdown                  lorder                              symcryptrun
dh_installinfo                      ls                                  sync
dh_installinit                      lsattr                              systemctl
dh_installinitramfs                 lsblk                               systemd
dh_installlogcheck                  lsb_release                         systemd-analyze
dh_installlogrotate                 lscpu                               systemd-ask-password
dh_installman                       lsinitramfs                         systemd-cat
dh_installmanpages                  lsipc                               systemd-cgls
dh_installmenu                      lslocks                             systemd-cgtop
dh_installmime                      lslogins                            systemd-delta
dh_installmodules                   lsmem                               systemd-detect-virt
dh_installpam                       lsmod                               systemd-escape
dh_installppp                       lsns                                systemd-hwdb
dh_installsystemd                   lsof                                systemd-id128
dh_installsystemduser               lspci                               systemd-inhibit
dh_installtex                       lspgpot                             systemd-machine-id-setup
dh_installudev                      __ltrim_colon_completions           systemd-mount
dh_installwm                        lwp-download                        systemd-notify
dh_installxfonts                    lwp-dump                            systemd-path
dh_link                             lwp-mirror                          systemd-resolve
dh_lintian                          lwp-request                         systemd-run
dh_listpackages                     lzcat                               systemd-socket-activate
dh_makeshlibs                       lzcmp                               systemd-stdio-bridge
dh_md5sums                          lzdiff                              systemd-sysusers
dh_missing                          lzegrep                             systemd-tmpfiles
dh_movefiles                        lzfgrep                             systemd-tty-ask-password-agent
dh_perl                             lzgrep                              systemd-umount
dh_perl_dbi                         lzless                              _sysvdirs
dh_perl_openssl                     lzma                                tabs
dh_prep                             lzmainfo                            tac
dh_pypy                             lzmore                              tail
dh_pysupport                        m4                                  tar
dh_python2                          mac2unix                            tasksel
dh_python3                          _mac_addresses                      taskset
dh_shlibdeps                        mail                                tbl
dh_strip                            Mail                                tcsh
dh_strip_nondeterminism             mail.mailutils                      tee
dh_systemd_enable                   mailq                               telnet
dh_systemd_start                    mailstat                            telnet.netkit
dh_testdir                          mailx                               tempfile
dh_testroot                         make                                _terms
dh_ucf                              make-first-existing-target          test
--More--[Kdh_update_autotools_config          makeinfo                            testparm
dh_usrlocal                         man                                 texi2any
dialog                              mandb                               texi2dvi
diff                                manpath                             texi2pdf
diff3                               mapfile                             texindex
dig                                 mapscrn                             then
dir                                 mariadb                             tic
dircolors                           mariadb-check                       _tilde
dirmngr                             mariadb-service-convert             time
dirmngr-client                      mawk                                timedatectl
dirname                             mcookie                             timeout
dirs                                md5sum                              times
discover-config                     md5sum.textutils                    tini
disown                              mdig                                tini-static
dmesg                               mesg                                tload
dnet                                messages                            tmux
dnsdomainname                       messages.mailutils                  tnameserv
dnstap-read                         migrate-pubring-from-classic-gpg    toe
do                                  mimeview                            top
docker                              _minimal                            touch
docker-containerd                   mkdir                               tput
docker-containerd-ctr               mkfifo                              tr
docker-containerd-shim              mk-job                              traceproto
docker-init                         mk_modmap                           traceproto.db
docker-linux-amd64                  mknod                               traceroute
domainname                          mkpasswd                            traceroute6
done                                mktemp                              traceroute6.db
dos2unix                            mlocate                             traceroute.db
dotlock                             _modules                            traceroute-nanog
dotlockfile                         more                                trap
dotlock.mailutils                   mount                               troff
dpkg                                mountpoint                          true
dpkg-architecture                   movemail                            truncate
dpkg-buildflags                     movemail.mailutils                  tryaffix
dpkg-buildpackage                   msgattrib                           tset
dpkg-checkbuilddeps                 msgcat                              tsort
dpkg-cross                          msgcmp                              tty
dpkg-deb                            msgcomm                             txixml2texi
dpkg-distaddfile                    msgconv                             type
dpkg-divert                         msgen                               typeset
dpkg-genbuildinfo                   msgexec                             tzselect
dpkg-genchanges                     msgfilter                           ucf
dpkg-gencontrol                     msgfmt                              ucfq
dpkg-gensymbols                     msggrep                             ucfr
dpkg-maintscript-helper             msginit                             udevadm
dpkg-mergechangelogs                msgmerge                            _uids
dpkg-name                           msgunfmt                            ul
dpkg-parsechangelog                 msguniq                             ulimit
dpkg-query                          ms_print                            ulockmgr_server
dpkg-scanpackages                   msql2mysql                          umask
dpkg-scansources                    mt                                  umount
dpkg-shlibdeps                      mt-gnu                              unalias
dpkg-source                         mtrace                              uname
dpkg-split                          munchlist                           uncompress
dpkg-statoverride                   mutt                                unexpand
dpkg-trigger                        mutt_dotlock                        unicode_start
dpkg-vendor                         mv                                  unicode_stop
dsymutil-7                          myisamchk                           uniq
du                                  myisam_ftdump                       unix2dos
dumpkeys                            myisamlog                           unix2mac
_dvd_devices                        myisampack                          unlink
--More--[Kdwp                                 my_print_defaults                   unlzma
dwz                                 mysql                               unmkinitramfs
ebrowse                             mysqlaccess                         unpack200
ebrowse.emacs                       mysqladmin                          unpigz
echo                                mysqlanalyze                        unset
edit                                mysqlbinlog                         unshare
editor                              mysqlcheck                          unsq
egrep                               mysql_config                        until
eject                               mysql_convert_table_format          unxz
elfedit                             mysqld_multi                        unzip
elif                                mysqld_safe                         unzipsfx
else                                mysqld_safe_helper                  update-alternatives
emacs                               mysqldump                           updatedb
emacsclient                         mysqldumpslow                       updatedb.mlocate
emacsclient.emacs                   mysql_embedded                      update-gconf-defaults
emacs-nox                           mysql_find_rows                     update-leap
enable                              mysql_fix_extensions                update-mime-database
enc2xs                              mysqlhotcopy                        update-perl-sax-parsers
encguess                            mysqlimport                         uptime
encode_keychange                    mysql_install_db                    _upvar
env                                 mysqloptimize                       _upvars
envsubst                            mysql_plugin                        _usb_ids
eqn                                 mysqlrepair                         _user_at_host
esac                                mysqlreport                         _usergroup
etags                               mysql_secure_installation           _userland
etags.emacs                         mysql_setpermission                 users
eval                                mysqlshow                           utmpdump
ex                                  mysqlslap                           valgrind
exec                                mysql_tzinfo_to_sql                 valgrind.bin
exit                                mysql_upgrade                       valgrind-di-server
_expand                             mysql_waitpid                       valgrind-listener
expand                              mytop                               _variables
__expand_tilde_by_ref               namei                               vdir
expiry                              nano                                verify-uselistorder-7
export                              nasm                                VGAuthService
expr                                native2ascii                        vgdb
extcheck                            nawk                                vi
factor                              nc                                  view
_fail2ban                           ncal                                vim
fail2ban-client                     ncdu                                vim.basic
__fail2ban_jail_action_methods      _ncpus                              vimdiff
__fail2ban_jail_action_properties   nc.traditional                      vim.tiny
__fail2ban_jail_actions             ncurses5-config                     vimtutor
__fail2ban_jails                    ncurses6-config                     virtualenv
fail2ban-python                     ncursesw5-config                    vmhgfs-fuse
fail2ban-regex                      ncursesw6-config                    vmstat
fail2ban-server                     ndisasm                             vmtoolsd
fail2ban-testcases                  neqn                                vmware-checkvm
faillog                             net                                 vmware-guestproxycerttool
faked-sysv                          netcat                              vmware-hgfsclient
faked-tcp                           netkit-ftp                          vmware-namespace-cmd
fakeroot                            netstat                             vmware-rpctool
fakeroot-sysv                       networkctl                          vmware-toolbox-cmd
fakeroot-tcp                        newaliases                          vmware-vgauth-cmd
fallocate                           newgrp                              vmware-vgauth-smoketest
false                               ngettext                            vmware-vmblock-fuse
fc                                  nice                                vmware-xferlogs
fc-cache                            nisdomainname                       volname
fc-cat                              nl                                  w
fc-conflist                         nm                                  w3m
fcgistarter                         nmblookup                           w3mman
--More--[Kfc-list                             nohup                               wait
fc-match                            nproc                               waitmax
fc-pattern                          nroff                               wall
fc-query                            nsenter                             watch
fc-scan                             nslookup                            watchgnupg
fc-validate                         nstat                               wc
fg                                  nsupdate                            wdctl
fgconsole                           ntpdc                               wget
fgrep                               ntpq                                whatis
fi                                  ntpsweep                            whereis
filan                               ntptrace                            which
file                                numfmt                              while
_filedir                            obj2yaml-7                          whiptail
_filedir_xspec                      objcopy                             who
fincore                             objdump                             whoami
find                                ocsptool                            whois
findaffix                           od                                  w.procps
findmnt                             openssl                             write
findsmb                             openvt                              wsgen
fio                                 opt-7                               wsimport
fio2gnuplot                         orbd                                wsrep_sst_common
fio-btrace2fio                      os-prober                           wsrep_sst_mariabackup
fio-dedupe                          p11tool                             wsrep_sst_mysqldump
fio_generate_plots                  pack200                             wsrep_sst_rsync
fio-genzipf                         pager                               wsrep_sst_rsync_wan
fixproc                             parsechangelog                      www-browser
flock                               _parse_help                         x86_64
fmt                                 __parse_options                     x86_64-linux-gnu-addr2line
fold                                _parse_usage                        x86_64-linux-gnu-ar
for                                 partx                               x86_64-linux-gnu-as
formail                             passwd                              x86_64-linux-gnu-c++filt
free                                paste                               x86_64-linux-gnu-cpp
frm                                 patch                               x86_64-linux-gnu-cpp-4.9
frm.mailutils                       pathchk                             x86_64-linux-gnu-cpp-6
from                                _pci_ids                            x86_64-linux-gnu-cpp-8
from.mailutils                      pcimodules                          x86_64-linux-gnu-dwp
_fstypes                            pdb                                 x86_64-linux-gnu-elfedit
ftp                                 pdb2                                x86_64-linux-gnu-g++
function                            pdb2.7                              x86_64-linux-gnu-g++-8
funzip                              pdb3                                x86_64-linux-gnu-gcc
fuser                               pdb3.7                              x86_64-linux-gnu-gcc-4.9
fusermount                          pdftexi2dvi                         x86_64-linux-gnu-gcc-6
g++                                 peekfd                              x86_64-linux-gnu-gcc-8
g++-8                               perf                                x86_64-linux-gnu-gcc-ar
galera_new_cluster                  perl                                x86_64-linux-gnu-gcc-ar-4.9
galera_recovery                     perl5.28.1                          x86_64-linux-gnu-gcc-ar-6
gawk                                perl5.28-x86_64-linux-gnu           x86_64-linux-gnu-gcc-ar-8
_gcc                                perlbug                             x86_64-linux-gnu-gcc-nm
gcc                                 perldoc                             x86_64-linux-gnu-gcc-nm-4.9
gcc-4.9                             perlivp                             x86_64-linux-gnu-gcc-nm-6
gcc-6                               perlthanks                          x86_64-linux-gnu-gcc-nm-8
gcc-8                               perror                              x86_64-linux-gnu-gcc-ranlib
gcc-ar                              pftp                                x86_64-linux-gnu-gcc-ranlib-4.9
gcc-ar-4.9                          _pgids                              x86_64-linux-gnu-gcc-ranlib-6
gcc-ar-6                            pgrep                               x86_64-linux-gnu-gcc-ranlib-8
gcc-ar-8                            phar                                x86_64-linux-gnu-gcov
gcc-nm                              phar7.3                             x86_64-linux-gnu-gcov-4.9
gcc-nm-4.9                          phar.phar                           x86_64-linux-gnu-gcov-6
gcc-nm-6                            phar.phar7.3                        x86_64-linux-gnu-gcov-8
gcc-nm-8                            php                                 x86_64-linux-gnu-gcov-dump
gcc-ranlib                          php7.3                              x86_64-linux-gnu-gcov-dump-6
--More--[Kgcc-ranlib-4.9                      pic                                 x86_64-linux-gnu-gcov-dump-8
gcc-ranlib-6                        pico                                x86_64-linux-gnu-gcov-tool
gcc-ranlib-8                        piconv                              x86_64-linux-gnu-gcov-tool-6
gconf-merge-tree                    pidof                               x86_64-linux-gnu-gcov-tool-8
gconftool                           _pids                               x86_64-linux-gnu-gold
gconftool-2                         pigz                                x86_64-linux-gnu-gprof
gcore                               pinentry                            x86_64-linux-gnu-ld
gcov                                pinentry-gtk-2                      x86_64-linux-gnu-ld.bfd
gcov-4.9                            pinentry-x11                        x86_64-linux-gnu-ld.gold
gcov-6                              ping                                x86_64-linux-gnu-nm
gcov-8                              ping4                               x86_64-linux-gnu-objcopy
gcov-dump                           ping6                               x86_64-linux-gnu-objdump
gcov-dump-6                         pinky                               x86_64-linux-gnu-python2.7-config
gcov-dump-8                         pip                                 x86_64-linux-gnu-python2-config
gcov-tool                           pip2                                x86_64-linux-gnu-python3.7-config
gcov-tool-6                         pkill                               x86_64-linux-gnu-python3.7m-config
gcov-tool-8                         pl2pm                               x86_64-linux-gnu-python3-config
gdb                                 pldd                                x86_64-linux-gnu-python3m-config
gdb-add-index                       pmap                                x86_64-linux-gnu-python-config
gdbserver                           _pnames                             x86_64-linux-gnu-ranlib
gdbtui                              po2debconf                          x86_64-linux-gnu-readelf
gdk-pixbuf-csource                  pod2html                            x86_64-linux-gnu-size
gdk-pixbuf-pixdata                  pod2man                             x86_64-linux-gnu-strings
gdk-pixbuf-thumbnailer              pod2texi                            x86_64-linux-gnu-strip
gencat                              pod2text                            xargs
gendiff                             pod2usage                           xauth
genfio                              podchecker                          xdg-user-dir
geqn                                podebconf-display-po                xdg-user-dirs-update
GET                                 podebconf-report-po                 _xfunc
_get_comp_words_by_ref              podselect                           xgettext
getconf                             popd                                _xinetd_services
_get_cword                          POST                                xjc
__get_cword_at_cursor_by_ref        pr                                  xsubpp
getent                              preconv                             xxd
getfacl                             print                               xz
_get_first_arg                      printenv                            xzcat
getkeycodes                         printerbanner                       xzcmp
getopt                              printf                              xzdiff
getopts                             prlimit                             xzegrep
_get_pword                          procan                              xzfgrep
gettext                             procmail                            xzgrep
gettextize                          prove                               xzless
gettext.sh                          prtstat                             xzmore
_gids                               ps                                  yaml2obj-7
ginstall-info                       psfaddtable                         yaml-bench-7
git                                 psfgettable                         yes
__git_eread                         psfstriptable                       ypdomainname
__git_ps1                           psfxtable                           zcat
__git_ps1_colorize_gitstring        psktool                             zcmp
__git_ps1_show_upstream             pslog                               zdiff
git-receive-pack                    pstree                              zdump
git-shell                           pstree.x11                          zegrep
git-upload-archive                  pt-align                            zfgrep
git-upload-pack                     ptar                                zforce
gnutls-cli                          pt-archiver                         zgrep
gnutls-cli-debug                    ptardiff                            zip
gnutls-serv                         ptargrep                            zipcloak
gold                                pt-config-diff                      zipdetails
gpasswd                             pt-deadlock-logger                  zipgrep
gpg                                 pt-diskstats                        zipinfo
gpg2                                pt-duplicate-key-checker            zipnote
--More--[Kgpg-agent                           pt-fifo-split                       zipsplit
gpgcompose                          pt-find                             zless
gpgconf                             pt-fingerprint                      zmore
gpg-connect-agent                   pt-fk-error-logger                  znew
> printf("%s$%s", curpath,prompt);{
bash: syntax error near unexpected token `"%s$%s",'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /* need space? */
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ if( pos+1 >= bufspace ){/* 1 for \0*/
bash: syntax error near unexpected token `{/*'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ if ( bufspace == 0 )/* y: 1st time*/
bash: syntax error near unexpected token `/*'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ buf = emalloc(BUFSIZ);
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ else 
Display all 1663 possibilities? (y or n)
!                                   gpgparsemail                        pt-index-usage
./                                  gpgsm                               pt-ioprofile
:                                   gpgsplit                            pt-kill
[                                   gpgtar                              pt-mext
[[                                  gpgv                                pt-mysql-summary
]]                                  gpg-wks-server                      pt-online-schema-change
{                                   gpg-zip                             pt-pmp
}                                   gpic                                pt-query-digest
2to3-2.7                            gprof                               pt-show-grants
aa-enabled                          grep                                pt-sift
aa-exec                             groff                               pt-slave-delay
ab                                  grog                                pt-slave-find
aclocal                             grops                               pt-slave-restart
aclocal-1.16                        grotty                              pt-stalk
acpi                                groups                              pt-summary
acpi_listen                         grub-editenv                        pt-table-checksum
addpart                             grub-file                           pt-table-sync
addr2line                           grub-fstest                         pt-table-usage
alias                               grub-glue-efi                       pt-upgrade
alien                               grub-kbdcomp                        pt-variable-advisor
_allowed_groups                     grub-menulst2cfg                    pt-visual-explain
_allowed_users                      grub-mkfont                         ptx
apropos                             grub-mkimage                        pushd
apt                                 grub-mklayout                       pwd
apt-cache                           grub-mknetdir                       pwdx
apt-cdrom                           grub-mkpasswd-pbkdf2                pwgen
apt-config                          grub-mkrelpath                      py3clean
apt-extracttemplates                grub-mkrescue                       py3compile
apt-ftparchive                      grub-mkstandalone                   py3versions
apt-get                             grub-mount                          pybuild
aptitude                            grub-ntldr-img                      pyclean
aptitude-create-state-bundle        grub-render-label                   pycompile
aptitude-curses                     grub-script-check                   pydoc
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc2
apt-key                             gsettings-data-convert              pydoc2.7
apt-listchanges                     gsettings-schema-convert            pydoc3
apt-mark                            gtbl                                pydoc3.7
apt-sortpkgs                        gtk-update-icon-cache               pygettext
ar                                  gunzip                              pygettext2
arch                                gzexe                               pygettext2.7
aria_chk                            gzip                                pygettext3
aria_dump_log                       h2ph                                pygettext3.7
aria_ftdump                         h2xs                                pygmentize
aria_pack                           hash                                python
aria_read_log                       _have                               python2
as                                  hd                                  python2.7
as31                                head                                python2.7-config
asan_symbolize                      HEAD                                python2-config
asan_symbolize-7                    help                                python3
at                                  helpztags                           python3.7
atq                                 hexdump                             python3.7-config
atrm                                history                             python3.7m
autoconf                            host                                python3.7m-config
autoheader                          hostid                              python3-config
autom4te                            hostname                            python3m
automake                            hostnamectl                         python3m-config
automake-1.16                       hsdb                                python-config
autopoint                           htcacheclean                        pyversions
autoreconf                          htdbm                               querybts
autoscan                            htdigest                            quote
autoupdate                          htpasswd                            quote_readline
--More--[K_available_interfaces               i386                                _quote_readline_by_ref
awk                                 i686-linux-gnu-addr2line            ranlib
b2sum                               i686-linux-gnu-ar                   rbash
base32                              i686-linux-gnu-as                   rcp
base64                              i686-linux-gnu-c++filt              rdf2bin
basename                            i686-linux-gnu-cpp                  rdf2com
bash                                i686-linux-gnu-cpp-8                rdf2ihx
bashbug                             i686-linux-gnu-dwp                  rdf2ith
batch                               i686-linux-gnu-elfedit              rdf2srec
bc                                  i686-linux-gnu-g++                  rdfdump
bg                                  i686-linux-gnu-g++-8                rdflib
bind                                i686-linux-gnu-gcc                  rdma
bootctl                             i686-linux-gnu-gcc-8                rdx
break                               i686-linux-gnu-gcc-ar               read
bsd-from                            i686-linux-gnu-gcc-ar-8             readarray
bsd-mailx                           i686-linux-gnu-gcc-nm               readelf
bsd-write                           i686-linux-gnu-gcc-nm-8             readline-editor
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readlink
buildhash                           i686-linux-gnu-gcc-ranlib-8         readmsg
builtin                             i686-linux-gnu-gcov                 readmsg.mailutils
bunzip2                             i686-linux-gnu-gcov-8               readonly
busctl                              i686-linux-gnu-gcov-dump            _realcommand
busybox                             i686-linux-gnu-gcov-dump-8          realpath
bzcat                               i686-linux-gnu-gcov-tool            __reassemble_comp_words_by_ref
bzcmp                               i686-linux-gnu-gcov-tool-8          recode-sr-latin
bzdiff                              i686-linux-gnu-gprof                rename.ul
bzegrep                             i686-linux-gnu-ld                   renice
bzexe                               i686-linux-gnu-ld.bfd               replace
bzfgrep                             i686-linux-gnu-ld.gold              reportbug
bzgrep                              i686-linux-gnu-nm                   report-hw
bzip2                               i686-linux-gnu-objcopy              reset
bzip2recover                        i686-linux-gnu-objdump              resizecons
bzless                              i686-linux-gnu-ranlib               resizepart
bzmore                              i686-linux-gnu-readelf              resolvectl
c++                                 i686-linux-gnu-size                 resolveip
c89                                 i686-linux-gnu-strings              resolve_stack_dump
c89-gcc                             i686-linux-gnu-strip                return
c99                                 icombine                            rev
c99-gcc                             iconv                               rgrep
cal                                 id                                  _rl_enabled
calc_tickadj                        idlj                                rlogin
calendar                            if                                  rlwrap
caller                              ifnames                             rm
callgrind_annotate                  ijoin                               rmail
callgrind_control                   in                                  rmdir
captoinfo                           _included_ssh_config_files          rmic
case                                info                                rmid
cat                                 infobrowser                         rmiregistry
catchsegv                           infocmp                             rnano
catman                              infotocap                           _root_command
cc                                  _init_completion                    rotatelogs
_cd                                 innochecksum                        routef
cd                                  innotop                             routel
_cd_devices                         _insserv                            rpcclient
certtool                            install                             rpcgen
c++filt                             _installed_modules                  rpcinfo
cg_annotate                         install-info                        rpm
cg_diff                             instmodsh                           rpm2archive
cg_merge                            ionice                              rpm2cpio
cgroupfs-mount                      ip                                  rpmbuild
cgroupfs-umount                     _ip_addresses                       rpmdb
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ else d*/
bash: syntax error near unexpected token `else'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ buf = erealloc(buf,bufspace+BUFSIZ);
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ bufspace += BUFSIZ;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
--More--[Kchage                               ipcrm                               rpmgraph
--More--[Kchardet                             ipcs                                rpmkeys
--More--[Kchardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
crontab                             lexgrog                             shasum
csh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ bufspace += BUFSIZ;d of command? */
bash: bufspace: command not found
bash: d: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ if ( c == '\n' )
> 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K> o, add to buffer */
> 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
--More--[Kchage                               ipcrm                               rpmgraph
--More--[Kchardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
crontab                             lexgrog                             shasum
csh                                 lft                                 sh.distrib
--More--[Kcsplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
dh_bugfiles                         llvm-xray-7                         srptool
dh_builddeb                         ln                                  ss
--More--[Kdh_clean                            lnstat                              ssh
dh_compress                         __load_completion                   ssh-add
dh_dwz                              loadkeys                            ssh-agent
dh_fixperms                         loadunimap                          ssh-argv0
dh_gconf                            local                               ssh-copy-id
dh_gencontrol                       locale                              ssh-keygen
dh_icons                            localectl                           ssh-keyscan
dh_install                          localedef                           stat
dh_installcatalogs                  locate                              stdbuf
dh_installchangelogs                lockfile                            strings
dh_installcron                      logger                              strip
dh_installdeb                       login                               stty
dh_installdebconf                   loginctl                            su
dh_installdirs                      logname                             sudo
dh_installdocs                      logout                              sudoedit
dh_installemacsen                   logresolve                          sudoreplay
dh_installexamples                  _longopt                            sum
dh_installgsettings                 look                                suspend
dh_installifupdown                  lorder                              symcryptrun
dh_installinfo                      ls                                  sync
dh_installinit                      lsattr                              systemctl
dh_installinitramfs                 lsblk                               systemd
dh_installlogcheck                  lsb_release                         systemd-analyze
dh_installlogrotate                 lscpu                               systemd-ask-password
dh_installman                       lsinitramfs                         systemd-cat
dh_installmanpages                  lsipc                               systemd-cgls
dh_installmenu                      lslocks                             systemd-cgtop
dh_installmime                      lslogins                            systemd-delta
dh_installmodules                   lsmem                               systemd-detect-virt
dh_installpam                       lsmod                               systemd-escape
dh_installppp                       lsns                                systemd-hwdb
dh_installsystemd                   lsof                                systemd-id128
dh_installsystemduser               lspci                               systemd-inhibit
dh_installtex                       lspgpot                             systemd-machine-id-setup
dh_installudev                      __ltrim_colon_completions           systemd-mount
dh_installwm                        lwp-download                        systemd-notify
dh_installxfonts                    lwp-dump                            systemd-path
dh_link                             lwp-mirror                          systemd-resolve
dh_lintian                          lwp-request                         systemd-run
dh_listpackages                     lzcat                               systemd-socket-activate
dh_makeshlibs                       lzcmp                               systemd-stdio-bridge
dh_md5sums                          lzdiff                              systemd-sysusers
dh_missing                          lzegrep                             systemd-tmpfiles
dh_movefiles                        lzfgrep                             systemd-tty-ask-password-agent
dh_perl                             lzgrep                              systemd-umount
dh_perl_dbi                         lzless                              _sysvdirs
dh_perl_openssl                     lzma                                tabs
dh_prep                             lzmainfo                            tac
dh_pypy                             lzmore                              tail
dh_pysupport                        m4                                  tar
dh_python2                          mac2unix                            tasksel
dh_python3                          _mac_addresses                      taskset
dh_shlibdeps                        mail                                tbl
dh_strip                            Mail                                tcsh
dh_strip_nondeterminism             mail.mailutils                      tee
dh_systemd_enable                   mailq                               telnet
dh_systemd_start                    mailstat                            telnet.netkit
dh_testdir                          mailx                               tempfile
dh_testroot                         make                                _terms
dh_ucf                              make-first-existing-target          test
dh_update_autotools_config          makeinfo                            testparm
--More--[Kdh_usrlocal                         man                                 texi2any
dialog                              mandb                               texi2dvi
diff                                manpath                             texi2pdf
diff3                               mapfile                             texindex
dig                                 mapscrn                             then
dir                                 mariadb                             tic
dircolors                           mariadb-check                       _tilde
dirmngr                             mariadb-service-convert             time
dirmngr-client                      mawk                                timedatectl
dirname                             mcookie                             timeout
dirs                                md5sum                              times
discover-config                     md5sum.textutils                    tini
disown                              mdig                                tini-static
dmesg                               mesg                                tload
dnet                                messages                            tmux
dnsdomainname                       messages.mailutils                  tnameserv
dnstap-read                         migrate-pubring-from-classic-gpg    toe
do                                  mimeview                            top
docker                              _minimal                            touch
docker-containerd                   mkdir                               tput
docker-containerd-ctr               mkfifo                              tr
docker-containerd-shim              mk-job                              traceproto
docker-init                         mk_modmap                           traceproto.db
docker-linux-amd64                  mknod                               traceroute
domainname                          mkpasswd                            traceroute6
done                                mktemp                              traceroute6.db
dos2unix                            mlocate                             traceroute.db
dotlock                             _modules                            traceroute-nanog
dotlockfile                         more                                trap
dotlock.mailutils                   mount                               troff
dpkg                                mountpoint                          true
dpkg-architecture                   movemail                            truncate
dpkg-buildflags                     movemail.mailutils                  tryaffix
dpkg-buildpackage                   msgattrib                           tset
dpkg-checkbuilddeps                 msgcat                              tsort
dpkg-cross                          msgcmp                              tty
dpkg-deb                            msgcomm                             txixml2texi
dpkg-distaddfile                    msgconv                             type
dpkg-divert                         msgen                               typeset
dpkg-genbuildinfo                   msgexec                             tzselect
dpkg-genchanges                     msgfilter                           ucf
dpkg-gencontrol                     msgfmt                              ucfq
dpkg-gensymbols                     msggrep                             ucfr
dpkg-maintscript-helper             msginit                             udevadm
dpkg-mergechangelogs                msgmerge                            _uids
dpkg-name                           msgunfmt                            ul
dpkg-parsechangelog                 msguniq                             ulimit
dpkg-query                          ms_print                            ulockmgr_server
dpkg-scanpackages                   msql2mysql                          umask
dpkg-scansources                    mt                                  umount
dpkg-shlibdeps                      mt-gnu                              unalias
dpkg-source                         mtrace                              uname
dpkg-split                          munchlist                           uncompress
dpkg-statoverride                   mutt                                unexpand
dpkg-trigger                        mutt_dotlock                        unicode_start
dpkg-vendor                         mv                                  unicode_stop
dsymutil-7                          myisamchk                           uniq
du                                  myisam_ftdump                       unix2dos
dumpkeys                            myisamlog                           unix2mac
_dvd_devices                        myisampack                          unlink
dwp                                 my_print_defaults                   unlzma
--More--[Kdwz                                 mysql                               unmkinitramfs
ebrowse                             mysqlaccess                         unpack200
ebrowse.emacs                       mysqladmin                          unpigz
echo                                mysqlanalyze                        unset
edit                                mysqlbinlog                         unshare
editor                              mysqlcheck                          unsq
egrep                               mysql_config                        until
eject                               mysql_convert_table_format          unxz
elfedit                             mysqld_multi                        unzip
elif                                mysqld_safe                         unzipsfx
else                                mysqld_safe_helper                  update-alternatives
emacs                               mysqldump                           updatedb
emacsclient                         mysqldumpslow                       updatedb.mlocate
emacsclient.emacs                   mysql_embedded                      update-gconf-defaults
emacs-nox                           mysql_find_rows                     update-leap
enable                              mysql_fix_extensions                update-mime-database
enc2xs                              mysqlhotcopy                        update-perl-sax-parsers
encguess                            mysqlimport                         uptime
encode_keychange                    mysql_install_db                    _upvar
env                                 mysqloptimize                       _upvars
envsubst                            mysql_plugin                        _usb_ids
eqn                                 mysqlrepair                         _user_at_host
esac                                mysqlreport                         _usergroup
etags                               mysql_secure_installation           _userland
etags.emacs                         mysql_setpermission                 users
eval                                mysqlshow                           utmpdump
ex                                  mysqlslap                           valgrind
exec                                mysql_tzinfo_to_sql                 valgrind.bin
exit                                mysql_upgrade                       valgrind-di-server
_expand                             mysql_waitpid                       valgrind-listener
expand                              mytop                               _variables
__expand_tilde_by_ref               namei                               vdir
expiry                              nano                                verify-uselistorder-7
export                              nasm                                VGAuthService
expr                                native2ascii                        vgdb
extcheck                            nawk                                vi
factor                              nc                                  view
_fail2ban                           ncal                                vim
fail2ban-client                     ncdu                                vim.basic
__fail2ban_jail_action_methods      _ncpus                              vimdiff
__fail2ban_jail_action_properties   nc.traditional                      vim.tiny
__fail2ban_jail_actions             ncurses5-config                     vimtutor
__fail2ban_jails                    ncurses6-config                     virtualenv
fail2ban-python                     ncursesw5-config                    vmhgfs-fuse
fail2ban-regex                      ncursesw6-config                    vmstat
fail2ban-server                     ndisasm                             vmtoolsd
fail2ban-testcases                  neqn                                vmware-checkvm
faillog                             net                                 vmware-guestproxycerttool
faked-sysv                          netcat                              vmware-hgfsclient
faked-tcp                           netkit-ftp                          vmware-namespace-cmd
fakeroot                            netstat                             vmware-rpctool
fakeroot-sysv                       networkctl                          vmware-toolbox-cmd
fakeroot-tcp                        newaliases                          vmware-vgauth-cmd
fallocate                           newgrp                              vmware-vgauth-smoketest
false                               ngettext                            vmware-vmblock-fuse
fc                                  nice                                vmware-xferlogs
fc-cache                            nisdomainname                       volname
fc-cat                              nl                                  w
fc-conflist                         nm                                  w3m
fcgistarter                         nmblookup                           w3mman
fc-list                             nohup                               wait
--More--[Kfc-match                            nproc                               waitmax
fc-pattern                          nroff                               wall
fc-query                            nsenter                             watch
fc-scan                             nslookup                            watchgnupg
fc-validate                         nstat                               wc
fg                                  nsupdate                            wdctl
fgconsole                           ntpdc                               wget
fgrep                               ntpq                                whatis
fi                                  ntpsweep                            whereis
filan                               ntptrace                            which
file                                numfmt                              while
_filedir                            obj2yaml-7                          whiptail
_filedir_xspec                      objcopy                             who
fincore                             objdump                             whoami
find                                ocsptool                            whois
findaffix                           od                                  w.procps
findmnt                             openssl                             write
findsmb                             openvt                              wsgen
fio                                 opt-7                               wsimport
fio2gnuplot                         orbd                                wsrep_sst_common
fio-btrace2fio                      os-prober                           wsrep_sst_mariabackup
fio-dedupe                          p11tool                             wsrep_sst_mysqldump
fio_generate_plots                  pack200                             wsrep_sst_rsync
fio-genzipf                         pager                               wsrep_sst_rsync_wan
fixproc                             parsechangelog                      www-browser
flock                               _parse_help                         x86_64
fmt                                 __parse_options                     x86_64-linux-gnu-addr2line
fold                                _parse_usage                        x86_64-linux-gnu-ar
for                                 partx                               x86_64-linux-gnu-as
formail                             passwd                              x86_64-linux-gnu-c++filt
free                                paste                               x86_64-linux-gnu-cpp
frm                                 patch                               x86_64-linux-gnu-cpp-4.9
frm.mailutils                       pathchk                             x86_64-linux-gnu-cpp-6
from                                _pci_ids                            x86_64-linux-gnu-cpp-8
from.mailutils                      pcimodules                          x86_64-linux-gnu-dwp
_fstypes                            pdb                                 x86_64-linux-gnu-elfedit
ftp                                 pdb2                                x86_64-linux-gnu-g++
function                            pdb2.7                              x86_64-linux-gnu-g++-8
funzip                              pdb3                                x86_64-linux-gnu-gcc
fuser                               pdb3.7                              x86_64-linux-gnu-gcc-4.9
fusermount                          pdftexi2dvi                         x86_64-linux-gnu-gcc-6
g++                                 peekfd                              x86_64-linux-gnu-gcc-8
g++-8                               perf                                x86_64-linux-gnu-gcc-ar
galera_new_cluster                  perl                                x86_64-linux-gnu-gcc-ar-4.9
galera_recovery                     perl5.28.1                          x86_64-linux-gnu-gcc-ar-6
gawk                                perl5.28-x86_64-linux-gnu           x86_64-linux-gnu-gcc-ar-8
_gcc                                perlbug                             x86_64-linux-gnu-gcc-nm
gcc                                 perldoc                             x86_64-linux-gnu-gcc-nm-4.9
gcc-4.9                             perlivp                             x86_64-linux-gnu-gcc-nm-6
gcc-6                               perlthanks                          x86_64-linux-gnu-gcc-nm-8
gcc-8                               perror                              x86_64-linux-gnu-gcc-ranlib
gcc-ar                              pftp                                x86_64-linux-gnu-gcc-ranlib-4.9
gcc-ar-4.9                          _pgids                              x86_64-linux-gnu-gcc-ranlib-6
gcc-ar-6                            pgrep                               x86_64-linux-gnu-gcc-ranlib-8
gcc-ar-8                            phar                                x86_64-linux-gnu-gcov
gcc-nm                              phar7.3                             x86_64-linux-gnu-gcov-4.9
gcc-nm-4.9                          phar.phar                           x86_64-linux-gnu-gcov-6
gcc-nm-6                            phar.phar7.3                        x86_64-linux-gnu-gcov-8
gcc-nm-8                            php                                 x86_64-linux-gnu-gcov-dump
gcc-ranlib                          php7.3                              x86_64-linux-gnu-gcov-dump-6
gcc-ranlib-4.9                      pic                                 x86_64-linux-gnu-gcov-dump-8
--More--[Kgcc-ranlib-6                        pico                                x86_64-linux-gnu-gcov-tool
gcc-ranlib-8                        piconv                              x86_64-linux-gnu-gcov-tool-6
gconf-merge-tree                    pidof                               x86_64-linux-gnu-gcov-tool-8
gconftool                           _pids                               x86_64-linux-gnu-gold
gconftool-2                         pigz                                x86_64-linux-gnu-gprof
gcore                               pinentry                            x86_64-linux-gnu-ld
gcov                                pinentry-gtk-2                      x86_64-linux-gnu-ld.bfd
gcov-4.9                            pinentry-x11                        x86_64-linux-gnu-ld.gold
gcov-6                              ping                                x86_64-linux-gnu-nm
gcov-8                              ping4                               x86_64-linux-gnu-objcopy
gcov-dump                           ping6                               x86_64-linux-gnu-objdump
gcov-dump-6                         pinky                               x86_64-linux-gnu-python2.7-config
gcov-dump-8                         pip                                 x86_64-linux-gnu-python2-config
gcov-tool                           pip2                                x86_64-linux-gnu-python3.7-config
gcov-tool-6                         pkill                               x86_64-linux-gnu-python3.7m-config
gcov-tool-8                         pl2pm                               x86_64-linux-gnu-python3-config
gdb                                 pldd                                x86_64-linux-gnu-python3m-config
gdb-add-index                       pmap                                x86_64-linux-gnu-python-config
gdbserver                           _pnames                             x86_64-linux-gnu-ranlib
gdbtui                              po2debconf                          x86_64-linux-gnu-readelf
gdk-pixbuf-csource                  pod2html                            x86_64-linux-gnu-size
gdk-pixbuf-pixdata                  pod2man                             x86_64-linux-gnu-strings
gdk-pixbuf-thumbnailer              pod2texi                            x86_64-linux-gnu-strip
gencat                              pod2text                            xargs
gendiff                             pod2usage                           xauth
genfio                              podchecker                          xdg-user-dir
geqn                                podebconf-display-po                xdg-user-dirs-update
GET                                 podebconf-report-po                 _xfunc
_get_comp_words_by_ref              podselect                           xgettext
getconf                             popd                                _xinetd_services
_get_cword                          POST                                xjc
__get_cword_at_cursor_by_ref        pr                                  xsubpp
getent                              preconv                             xxd
getfacl                             print                               xz
_get_first_arg                      printenv                            xzcat
getkeycodes                         printerbanner                       xzcmp
getopt                              printf                              xzdiff
getopts                             prlimit                             xzegrep
_get_pword                          procan                              xzfgrep
gettext                             procmail                            xzgrep
gettextize                          prove                               xzless
gettext.sh                          prtstat                             xzmore
_gids                               ps                                  yaml2obj-7
ginstall-info                       psfaddtable                         yaml-bench-7
git                                 psfgettable                         yes
__git_eread                         psfstriptable                       ypdomainname
__git_ps1                           psfxtable                           zcat
__git_ps1_colorize_gitstring        psktool                             zcmp
__git_ps1_show_upstream             pslog                               zdiff
git-receive-pack                    pstree                              zdump
git-shell                           pstree.x11                          zegrep
git-upload-archive                  pt-align                            zfgrep
git-upload-pack                     ptar                                zforce
gnutls-cli                          pt-archiver                         zgrep
gnutls-cli-debug                    ptardiff                            zip
gnutls-serv                         ptargrep                            zipcloak
gold                                pt-config-diff                      zipdetails
gpasswd                             pt-deadlock-logger                  zipgrep
gpg                                 pt-diskstats                        zipinfo
gpg2                                pt-duplicate-key-checker            zipnote
gpg-agent                           pt-fifo-split                       zipsplit
--More--[Kgpgcompose                          pt-find                             zless
gpgconf                             pt-fingerprint                      zmore
gpg-connect-agent                   pt-fk-error-logger                  znew
> 0 )/* EOF and no input*/
bash: syntax error near unexpected token `)'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ return NULL;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
chage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
--More--[Kcrontab                             lexgrog                             shasum
--More--[Kcsh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
dh_bugfiles                         llvm-xray-7                         srptool
--More--[Kdh_builddeb                         ln                                  ss
dh_clean                            lnstat                              ssh
dh_compress                         __load_completion                   ssh-add
dh_dwz                              loadkeys                            ssh-agent
dh_fixperms                         loadunimap                          ssh-argv0
dh_gconf                            local                               ssh-copy-id
dh_gencontrol                       locale                              ssh-keygen
dh_icons                            localectl                           ssh-keyscan
dh_install                          localedef                           stat
dh_installcatalogs                  locate                              stdbuf
dh_installchangelogs                lockfile                            strings
dh_installcron                      logger                              strip
dh_installdeb                       login                               stty
dh_installdebconf                   loginctl                            su
dh_installdirs                      logname                             sudo
dh_installdocs                      logout                              sudoedit
dh_installemacsen                   logresolve                          sudoreplay
dh_installexamples                  _longopt                            sum
dh_installgsettings                 look                                suspend
dh_installifupdown                  lorder                              symcryptrun
dh_installinfo                      ls                                  sync
dh_installinit                      lsattr                              systemctl
dh_installinitramfs                 lsblk                               systemd
dh_installlogcheck                  lsb_release                         systemd-analyze
dh_installlogrotate                 lscpu                               systemd-ask-password
dh_installman                       lsinitramfs                         systemd-cat
dh_installmanpages                  lsipc                               systemd-cgls
dh_installmenu                      lslocks                             systemd-cgtop
dh_installmime                      lslogins                            systemd-delta
dh_installmodules                   lsmem                               systemd-detect-virt
dh_installpam                       lsmod                               systemd-escape
dh_installppp                       lsns                                systemd-hwdb
dh_installsystemd                   lsof                                systemd-id128
dh_installsystemduser               lspci                               systemd-inhibit
dh_installtex                       lspgpot                             systemd-machine-id-setup
dh_installudev                      __ltrim_colon_completions           systemd-mount
dh_installwm                        lwp-download                        systemd-notify
dh_installxfonts                    lwp-dump                            systemd-path
dh_link                             lwp-mirror                          systemd-resolve
dh_lintian                          lwp-request                         systemd-run
dh_listpackages                     lzcat                               systemd-socket-activate
dh_makeshlibs                       lzcmp                               systemd-stdio-bridge
dh_md5sums                          lzdiff                              systemd-sysusers
dh_missing                          lzegrep                             systemd-tmpfiles
dh_movefiles                        lzfgrep                             systemd-tty-ask-password-agent
dh_perl                             lzgrep                              systemd-umount
dh_perl_dbi                         lzless                              _sysvdirs
dh_perl_openssl                     lzma                                tabs
dh_prep                             lzmainfo                            tac
dh_pypy                             lzmore                              tail
dh_pysupport                        m4                                  tar
dh_python2                          mac2unix                            tasksel
dh_python3                          _mac_addresses                      taskset
dh_shlibdeps                        mail                                tbl
dh_strip                            Mail                                tcsh
dh_strip_nondeterminism             mail.mailutils                      tee
dh_systemd_enable                   mailq                               telnet
dh_systemd_start                    mailstat                            telnet.netkit
dh_testdir                          mailx                               tempfile
dh_testroot                         make                                _terms
dh_ucf                              make-first-existing-target          test
--More--[Kdh_update_autotools_config          makeinfo                            testparm
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ return NULL; buf;
bash: return: NULL: numeric argument required
bash: return: can only `return' from a function or sourced script
bash: buf: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ }
bash: syntax error near unexpected token `}'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /**
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  **splitline ( parse a line into an array of strings )
bash: syntax error near unexpected token `parse'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  **/
bash: **/: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ #defineis_delim(x) ((x)==' '||(x)=='\t')
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ char ** splitline(char *line)
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /*
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * purpose: split a line into array of white-space separated tokens
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * returns: a NULL-terminated array of pointers to copies of the tokens
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *          or NULL if line if no tokens on the line
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *  action: traverse the array, locate strings, make copies
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *    note: strtok() could work, but we may want to add quotes later
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  */
bash: */: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ {
> chardet*newstr();
bash: syntax error near unexpected token `;'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ chardet**args ;
bash: chardet**args: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intspots = 0;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intspots = 0; table*/
bash: intspots: command not found
bash: table*/: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intbufspace = 0;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
chage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intbufspace = 0; table*/
bash: intbufspace: command not found
bash: table*/: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intargnum = 0;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
--More--[Kchage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
crontab                             lexgrog                             shasum
--More--[Kcsh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
dh_bugfiles                         llvm-xray-7                         srptool
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intargnum = 0;e;
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intargnum = 0;e; strings */
bash: intargnum: command not found
bash: e: command not found
strings: '*/': No such file
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ chardet*start;
bash: chardet*start: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ intlen;
^[bash: intlen: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ if ( line == NULL )/* handle special case*/
bash: syntax error near unexpected token `/*'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ return NULL;
bash: return: NULL: numeric argument required
bash: return: can only `return' from a function or sourced script
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ args     = emalloc(BUFSIZ);
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ args     = emalloc(BUFSIZ);itialize array*/
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ bufspace = BUFSIZ;
bash: bufspace: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ spots    = BUFSIZ/sizeof(char *);
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ while( *cp != '\0' )
> {
> 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
chage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
--More--[Kcrontab                             lexgrog                             shasum
csh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
--More--[Kdh_bugfiles                         llvm-xray-7                         srptool
dh_builddeb                         ln                                  ss
dh_clean                            lnstat                              ssh
dh_compress                         __load_completion                   ssh-add
dh_dwz                              loadkeys                            ssh-agent
dh_fixperms                         loadunimap                          ssh-argv0
dh_gconf                            local                               ssh-copy-id
dh_gencontrol                       locale                              ssh-keygen
dh_icons                            localectl                           ssh-keyscan
dh_install                          localedef                           stat
dh_installcatalogs                  locate                              stdbuf
dh_installchangelogs                lockfile                            strings
dh_installcron                      logger                              strip
dh_installdeb                       login                               stty
dh_installdebconf                   loginctl                            su
dh_installdirs                      logname                             sudo
dh_installdocs                      logout                              sudoedit
dh_installemacsen                   logresolve                          sudoreplay
dh_installexamples                  _longopt                            sum
dh_installgsettings                 look                                suspend
dh_installifupdown                  lorder                              symcryptrun
dh_installinfo                      ls                                  sync
dh_installinit                      lsattr                              systemctl
dh_installinitramfs                 lsblk                               systemd
dh_installlogcheck                  lsb_release                         systemd-analyze
dh_installlogrotate                 lscpu                               systemd-ask-password
dh_installman                       lsinitramfs                         systemd-cat
dh_installmanpages                  lsipc                               systemd-cgls
dh_installmenu                      lslocks                             systemd-cgtop
dh_installmime                      lslogins                            systemd-delta
dh_installmodules                   lsmem                               systemd-detect-virt
dh_installpam                       lsmod                               systemd-escape
dh_installppp                       lsns                                systemd-hwdb
dh_installsystemd                   lsof                                systemd-id128
dh_installsystemduser               lspci                               systemd-inhibit
dh_installtex                       lspgpot                             systemd-machine-id-setup
dh_installudev                      __ltrim_colon_completions           systemd-mount
dh_installwm                        lwp-download                        systemd-notify
dh_installxfonts                    lwp-dump                            systemd-path
dh_link                             lwp-mirror                          systemd-resolve
dh_lintian                          lwp-request                         systemd-run
dh_listpackages                     lzcat                               systemd-socket-activate
dh_makeshlibs                       lzcmp                               systemd-stdio-bridge
dh_md5sums                          lzdiff                              systemd-sysusers
dh_missing                          lzegrep                             systemd-tmpfiles
dh_movefiles                        lzfgrep                             systemd-tty-ask-password-agent
dh_perl                             lzgrep                              systemd-umount
dh_perl_dbi                         lzless                              _sysvdirs
dh_perl_openssl                     lzma                                tabs
dh_prep                             lzmainfo                            tac
dh_pypy                             lzmore                              tail
dh_pysupport                        m4                                  tar
dh_python2                          mac2unix                            tasksel
dh_python3                          _mac_addresses                      taskset
dh_shlibdeps                        mail                                tbl
dh_strip                            Mail                                tcsh
dh_strip_nondeterminism             mail.mailutils                      tee
dh_systemd_enable                   mailq                               telnet
dh_systemd_start                    mailstat                            telnet.netkit
dh_testdir                          mailx                               tempfile
dh_testroot                         make                                _terms
--More--[K> g spaces*/
> 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
chage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
--More--[Kcrontab                             lexgrog                             shasum
csh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
--More--[Kdh_bugfiles                         llvm-xray-7                         srptool
dh_builddeb                         ln                                  ss
dh_clean                            lnstat                              ssh
dh_compress                         __load_completion                   ssh-add
dh_dwz                              loadkeys                            ssh-agent
dh_fixperms                         loadunimap                          ssh-argv0
dh_gconf                            local                               ssh-copy-id
dh_gencontrol                       locale                              ssh-keygen
dh_icons                            localectl                           ssh-keyscan
dh_install                          localedef                           stat
dh_installcatalogs                  locate                              stdbuf
dh_installchangelogs                lockfile                            strings
dh_installcron                      logger                              strip
dh_installdeb                       login                               stty
dh_installdebconf                   loginctl                            su
dh_installdirs                      logname                             sudo
dh_installdocs                      logout                              sudoedit
dh_installemacsen                   logresolve                          sudoreplay
dh_installexamples                  _longopt                            sum
dh_installgsettings                 look                                suspend
dh_installifupdown                  lorder                              symcryptrun
dh_installinfo                      ls                                  sync
dh_installinit                      lsattr                              systemctl
dh_installinitramfs                 lsblk                               systemd
dh_installlogcheck                  lsb_release                         systemd-analyze
dh_installlogrotate                 lscpu                               systemd-ask-password
dh_installman                       lsinitramfs                         systemd-cat
dh_installmanpages                  lsipc                               systemd-cgls
dh_installmenu                      lslocks                             systemd-cgtop
dh_installmime                      lslogins                            systemd-delta
dh_installmodules                   lsmem                               systemd-detect-virt
dh_installpam                       lsmod                               systemd-escape
dh_installppp                       lsns                                systemd-hwdb
dh_installsystemd                   lsof                                systemd-id128
dh_installsystemduser               lspci                               systemd-inhibit
dh_installtex                       lspgpot                             systemd-machine-id-setup
dh_installudev                      __ltrim_colon_completions           systemd-mount
dh_installwm                        lwp-download                        systemd-notify
dh_installxfonts                    lwp-dump                            systemd-path
dh_link                             lwp-mirror                          systemd-resolve
dh_lintian                          lwp-request                         systemd-run
dh_listpackages                     lzcat                               systemd-socket-activate
dh_makeshlibs                       lzcmp                               systemd-stdio-bridge
dh_md5sums                          lzdiff                              systemd-sysusers
dh_missing                          lzegrep                             systemd-tmpfiles
dh_movefiles                        lzfgrep                             systemd-tty-ask-password-agent
dh_perl                             lzgrep                              systemd-umount
dh_perl_dbi                         lzless                              _sysvdirs
dh_perl_openssl                     lzma                                tabs
dh_prep                             lzmainfo                            tac
dh_pypy                             lzmore                              tail
dh_pysupport                        m4                                  tar
dh_python2                          mac2unix                            tasksel
dh_python3                          _mac_addresses                      taskset
dh_shlibdeps                        mail                                tbl
dh_strip                            Mail                                tcsh
dh_strip_nondeterminism             mail.mailutils                      tee
dh_systemd_enable                   mailq                               telnet
dh_systemd_start                    mailstat                            telnet.netkit
dh_testdir                          mailx                               tempfile
dh_testroot                         make                                _terms
--More--[Kdh_ucf                              make-first-existing-target          test
dh_update_autotools_config          makeinfo                            testparm
dh_usrlocal                         man                                 texi2any
dialog                              mandb                               texi2dvi
diff                                manpath                             texi2pdf
diff3                               mapfile                             texindex
dig                                 mapscrn                             then
dir                                 mariadb                             tic
dircolors                           mariadb-check                       _tilde
dirmngr                             mariadb-service-convert             time
dirmngr-client                      mawk                                timedatectl
dirname                             mcookie                             timeout
dirs                                md5sum                              times
discover-config                     md5sum.textutils                    tini
disown                              mdig                                tini-static
dmesg                               mesg                                tload
dnet                                messages                            tmux
dnsdomainname                       messages.mailutils                  tnameserv
dnstap-read                         migrate-pubring-from-classic-gpg    toe
do                                  mimeview                            top
docker                              _minimal                            touch
docker-containerd                   mkdir                               tput
docker-containerd-ctr               mkfifo                              tr
docker-containerd-shim              mk-job                              traceproto
docker-init                         mk_modmap                           traceproto.db
docker-linux-amd64                  mknod                               traceroute
domainname                          mkpasswd                            traceroute6
done                                mktemp                              traceroute6.db
dos2unix                            mlocate                             traceroute.db
dotlock                             _modules                            traceroute-nanog
dotlockfile                         more                                trap
dotlock.mailutils                   mount                               troff
dpkg                                mountpoint                          true
dpkg-architecture                   movemail                            truncate
dpkg-buildflags                     movemail.mailutils                  tryaffix
dpkg-buildpackage                   msgattrib                           tset
dpkg-checkbuilddeps                 msgcat                              tsort
dpkg-cross                          msgcmp                              tty
dpkg-deb                            msgcomm                             txixml2texi
dpkg-distaddfile                    msgconv                             type
dpkg-divert                         msgen                               typeset
dpkg-genbuildinfo                   msgexec                             tzselect
dpkg-genchanges                     msgfilter                           ucf
dpkg-gencontrol                     msgfmt                              ucfq
dpkg-gensymbols                     msggrep                             ucfr
dpkg-maintscript-helper             msginit                             udevadm
dpkg-mergechangelogs                msgmerge                            _uids
dpkg-name                           msgunfmt                            ul
dpkg-parsechangelog                 msguniq                             ulimit
dpkg-query                          ms_print                            ulockmgr_server
dpkg-scanpackages                   msql2mysql                          umask
dpkg-scansources                    mt                                  umount
dpkg-shlibdeps                      mt-gnu                              unalias
dpkg-source                         mtrace                              uname
dpkg-split                          munchlist                           uncompress
dpkg-statoverride                   mutt                                unexpand
dpkg-trigger                        mutt_dotlock                        unicode_start
dpkg-vendor                         mv                                  unicode_stop
dsymutil-7                          myisamchk                           uniq
du                                  myisam_ftdump                       unix2dos
dumpkeys                            myisamlog                           unix2mac
--More--[K> uit at end-o-string*/
> 
Display all 1662 possibilities? (y or n)
!                                   gpgparsemail                        pt-heartbeat
./                                  gpgsm                               pt-index-usage
:                                   gpgsplit                            pt-ioprofile
[                                   gpgtar                              pt-kill
[[                                  gpgv                                pt-mext
]]                                  gpg-wks-server                      pt-mysql-summary
{                                   gpg-zip                             pt-online-schema-change
}                                   gpic                                pt-pmp
2to3-2.7                            gprof                               pt-query-digest
aa-enabled                          grep                                pt-show-grants
aa-exec                             groff                               pt-sift
ab                                  grog                                pt-slave-delay
aclocal                             grops                               pt-slave-find
aclocal-1.16                        grotty                              pt-slave-restart
acpi                                groups                              pt-stalk
acpi_listen                         grub-editenv                        pt-summary
addpart                             grub-file                           pt-table-checksum
addr2line                           grub-fstest                         pt-table-sync
alias                               grub-glue-efi                       pt-table-usage
alien                               grub-kbdcomp                        pt-upgrade
_allowed_groups                     grub-menulst2cfg                    pt-variable-advisor
_allowed_users                      grub-mkfont                         pt-visual-explain
apropos                             grub-mkimage                        ptx
apt                                 grub-mklayout                       pushd
apt-cache                           grub-mknetdir                       pwd
apt-cdrom                           grub-mkpasswd-pbkdf2                pwdx
apt-config                          grub-mkrelpath                      pwgen
apt-extracttemplates                grub-mkrescue                       py3clean
apt-ftparchive                      grub-mkstandalone                   py3compile
apt-get                             grub-mount                          py3versions
aptitude                            grub-ntldr-img                      pybuild
aptitude-create-state-bundle        grub-render-label                   pyclean
aptitude-curses                     grub-script-check                   pycompile
aptitude-run-state-bundle           grub-syslinux2cfg                   pydoc
apt-key                             gsettings-data-convert              pydoc2
apt-listchanges                     gsettings-schema-convert            pydoc2.7
apt-mark                            gtbl                                pydoc3
apt-sortpkgs                        gtk-update-icon-cache               pydoc3.7
ar                                  gunzip                              pygettext
arch                                gzexe                               pygettext2
aria_chk                            gzip                                pygettext2.7
aria_dump_log                       h2ph                                pygettext3
aria_ftdump                         h2xs                                pygettext3.7
aria_pack                           hash                                pygmentize
aria_read_log                       _have                               python
as                                  hd                                  python2
as31                                head                                python2.7
asan_symbolize                      HEAD                                python2.7-config
asan_symbolize-7                    help                                python2-config
at                                  helpztags                           python3
atq                                 hexdump                             python3.7
atrm                                history                             python3.7-config
autoconf                            host                                python3.7m
autoheader                          hostid                              python3.7m-config
autom4te                            hostname                            python3-config
automake                            hostnamectl                         python3m
automake-1.16                       hsdb                                python3m-config
autopoint                           htcacheclean                        python-config
autoreconf                          htdbm                               pyversions
autoscan                            htdigest                            querybts
autoupdate                          htpasswd                            quote
--More--[K_available_interfaces               i386                                quote_readline
awk                                 i686-linux-gnu-addr2line            _quote_readline_by_ref
b2sum                               i686-linux-gnu-ar                   ranlib
base32                              i686-linux-gnu-as                   rbash
base64                              i686-linux-gnu-c++filt              rcp
basename                            i686-linux-gnu-cpp                  rdf2bin
bash                                i686-linux-gnu-cpp-8                rdf2com
bashbug                             i686-linux-gnu-dwp                  rdf2ihx
batch                               i686-linux-gnu-elfedit              rdf2ith
bc                                  i686-linux-gnu-g++                  rdf2srec
bg                                  i686-linux-gnu-g++-8                rdfdump
bind                                i686-linux-gnu-gcc                  rdflib
bootctl                             i686-linux-gnu-gcc-8                rdma
break                               i686-linux-gnu-gcc-ar               rdx
bsd-from                            i686-linux-gnu-gcc-ar-8             read
bsd-mailx                           i686-linux-gnu-gcc-nm               readarray
bsd-write                           i686-linux-gnu-gcc-nm-8             readelf
bugpoint-7                          i686-linux-gnu-gcc-ranlib           readline-editor
buildhash                           i686-linux-gnu-gcc-ranlib-8         readlink
builtin                             i686-linux-gnu-gcov                 readmsg
bunzip2                             i686-linux-gnu-gcov-8               readmsg.mailutils
busctl                              i686-linux-gnu-gcov-dump            readonly
busybox                             i686-linux-gnu-gcov-dump-8          _realcommand
bzcat                               i686-linux-gnu-gcov-tool            realpath
bzcmp                               i686-linux-gnu-gcov-tool-8          __reassemble_comp_words_by_ref
bzdiff                              i686-linux-gnu-gprof                recode-sr-latin
bzegrep                             i686-linux-gnu-ld                   rename.ul
bzexe                               i686-linux-gnu-ld.bfd               renice
bzfgrep                             i686-linux-gnu-ld.gold              replace
bzgrep                              i686-linux-gnu-nm                   reportbug
bzip2                               i686-linux-gnu-objcopy              report-hw
bzip2recover                        i686-linux-gnu-objdump              reset
bzless                              i686-linux-gnu-ranlib               resizecons
bzmore                              i686-linux-gnu-readelf              resizepart
c++                                 i686-linux-gnu-size                 resolvectl
c89                                 i686-linux-gnu-strings              resolveip
c89-gcc                             i686-linux-gnu-strip                resolve_stack_dump
c99                                 icombine                            return
c99-gcc                             iconv                               rev
cal                                 id                                  rgrep
calc_tickadj                        idlj                                _rl_enabled
calendar                            if                                  rlogin
caller                              ifnames                             rlwrap
callgrind_annotate                  ijoin                               rm
callgrind_control                   in                                  rmail
captoinfo                           _included_ssh_config_files          rmdir
case                                info                                rmic
cat                                 infobrowser                         rmid
catchsegv                           infocmp                             rmiregistry
catman                              infotocap                           rnano
cc                                  _init_completion                    _root_command
_cd                                 innochecksum                        rotatelogs
cd                                  innotop                             routef
_cd_devices                         _insserv                            routel
certtool                            install                             rpcclient
c++filt                             _installed_modules                  rpcgen
cg_annotate                         install-info                        rpcinfo
cg_diff                             instmodsh                           rpm
cg_merge                            ionice                              rpm2archive
cgroupfs-mount                      ip                                  rpm2cpio
cgroupfs-umount                     _ip_addresses                       rpmbuild
--More--[Kchacl                               ipcmk                               rpmdb
chage                               ipcrm                               rpmgraph
chardet                             ipcs                                rpmkeys
chardet3                            iptables-xml                        rpmquery
chardetect                          ipython                             rpmsign
chardetect3                         ischroot                            rpmspec
chattr                              ispell                              rpmverify
chcon                               ispell-wrapper                      rsh
checkgid                            jar                                 rsync
check_mk_agent                      jarsigner                           rtstat
chfn                                java                                runcon
chgrp                               javac                               run-mailcap
chmod                               javadoc                             run-parts
choom                               javah                               rview
chown                               javap                               rvim
chrt                                jcmd                                samba-regedit
chsh                                jdb                                 samba-tool
chvt                                jdeps                               sanstats-7
cifsdd                              jexec                               savelog
ckbcomp                             jhat                                scandeps
cksum                               jinfo                               schemagen
clang                               jjs                                 scp
clang++                             jmap                                screendump
clang++-7                           jobs                                script
clang-7                             join                                scriptreplay
clang-cpp-7                         journalctl                          sdiff
clear                               jps                                 sed
clear_console                       jrunscript                          see
clhsdb                              jsadebugd                           select
cmp                                 json_pp                             select-default-iwrap
codepage                            jstack                              select-editor
col                                 jstat                               sensible-browser
colcrt                              jstatd                              sensible-editor
colrm                               kbdinfo                             sensible-pager
column                              kbd_mode                            seq
comm                                kbxutil                             serialver
_command                            kernel-install                      servertool
command                             _kernel_versions                    _service
_command_offset                     keyctl                              _services
compgen                             keytool                             set
complete                            kill                                setarch
_complete_as_root                   killall                             setfacl
_completion_loader                  kmod                                setfont
compopt                             _known_hosts                        setkeycodes
compose                             _known_hosts_real                   setleds
_configured_interfaces              laptop-detect                       setlogcons
continue                            last                                setmetamode
coproc                              lastb                               setpci
corelist                            lastlog                             setpriv
_count_args                         lcf                                 setsid
cp                                  ld                                  setterm
cpan                                ld.bfd                              setupcon
cpan5.28-x86_64-linux-gnu           ldd                                 setvtrgb
cpio                                ld.gold                             sftp
cpio-filter                         ldrdf                               sg
cpp                                 less                                sh
cpp-4.9                             lessecho                            sha1sum
cpp-6                               lessfile                            sha224sum
cpp-8                               lesskey                             sha256sum
crc32                               lesspipe                            sha384sum
c_rehash                            let                                 sha512sum
--More--[Kcrontab                             lexgrog                             shasum
csh                                 lft                                 sh.distrib
csplit                              lft.db                              _shells
ctags                               libnetcfg                           shift
ctags.emacs                         libtoolize                          shopt
ctstat                              link                                showconsolefont
curl                                linux32                             showkey
cut                                 linux64                             shred
cvtsudoers                          linux-boot-prober                   shuf
danetool                            linux-check-removal                 sieve
dash                                linux-update-symlinks               _signals
date                                linux-version                       size
dbilogstrip                         llc-7                               skill
dbiprof                             lli-7                               sl
dbiproxy                            lli-child-target-7                  slabtop
dbus-cleanup-sockets                llvm-ar-7                           sleep
dbus-daemon                         llvm-as-7                           slogin
dbus-launch                         llvm-bcanalyzer-7                   smbcacls
dbus-monitor                        llvm-cat-7                          smbclient
dbus-run-session                    llvm-cfi-verify-7                   smbcquotas
dbus-send                           llvm-config-7                       smbget
dbus-update-activation-environment  llvm-cov-7                          smbpasswd
dbus-uuidgen                        llvm-c-test-7                       smbspool
dbwrap_tool                         llvm-cvtres-7                       smbtar
dc                                  llvm-cxxdump-7                      smbtree
dd                                  llvm-cxxfilt-7                      smime_keys
ddate                               llvm-diff-7                         snice
deallocvt                           llvm-dis-7                          snmp-bridge-mib
debconf                             llvm-dlltool-7                      snmpbulkget
debconf-apt-progress                llvm-dwarfdump-7                    snmpbulkwalk
debconf-communicate                 llvm-dwp-7                          snmpcheck
debconf-copydb                      llvm-exegesis-7                     snmpconf
debconf-escape                      llvm-extract-7                      snmpdelta
debconf-gettextize                  llvm-lib-7                          snmpdf
debconf-set-selections              llvm-link-7                         snmpget
debconf-show                        llvm-lto2-7                         snmpgetnext
debconf-updatepo                    llvm-lto-7                          snmpinform
debianbts                           llvm-mc-7                           snmpkey
_deborphan                          llvm-mca-7                          snmpnetstat
deborphan                           llvm-modextract-7                   snmpset
deb-systemd-helper                  llvm-mt-7                           snmpstatus
deb-systemd-invoke                  llvm-nm-7                           snmptable
debugedit                           llvm-objcopy-7                      snmptest
declare                             llvm-objdump-7                      snmptranslate
defmt-c                             llvm-opt-report-7                   snmptrap
defmt-sh                            llvm-pdbutil-7                      snmpusm
delpart                             llvm-PerfectShuffle-7               snmpvacm
delv                                llvm-profdata-7                     snmpwalk
dequote                             llvm-ranlib-7                       sntp
df                                  llvm-rc-7                           socat
dh                                  llvm-readelf-7                      soelim
dh_auto_build                       llvm-readobj-7                      sort
dh_auto_clean                       llvm-rtdyld-7                       sotruss
dh_auto_configure                   llvm-size-7                         source
dh_auto_install                     llvm-split-7                        splain
dh_autoreconf                       llvm-stress-7                       split
dh_autoreconf_clean                 llvm-strings-7                      splitfont
dh_auto_test                        llvm-strip-7                        _split_longopt
dh_autotools-dev_restoreconfig      llvm-symbolizer-7                   sprof
dh_autotools-dev_updateconfig       llvm-tblgen-7                       sq
dh_bash-completion                  llvm-undname-7                      sqlplus64
--More--[Kdh_bugfiles                         llvm-xray-7                         srptool
dh_builddeb                         ln                                  ss
dh_clean                            lnstat                              ssh
dh_compress                         __load_completion                   ssh-add
dh_dwz                              loadkeys                            ssh-agent
dh_fixperms                         loadunimap                          ssh-argv0
dh_gconf                            local                               ssh-copy-id
dh_gencontrol                       locale                              ssh-keygen
dh_icons                            localectl                           ssh-keyscan
dh_install                          localedef                           stat
dh_installcatalogs                  locate                              stdbuf
dh_installchangelogs                lockfile                            strings
dh_installcron                      logger                              strip
dh_installdeb                       login                               stty
dh_installdebconf                   loginctl                            su
dh_installdirs                      logname                             sudo
dh_installdocs                      logout                              sudoedit
dh_installemacsen                   logresolve                          sudoreplay
dh_installexamples                  _longopt                            sum
dh_installgsettings                 look                                suspend
dh_installifupdown                  lorder                              symcryptrun
dh_installinfo                      ls                                  sync
dh_installinit                      lsattr                              systemctl
dh_installinitramfs                 lsblk                               systemd
dh_installlogcheck                  lsb_release                         systemd-analyze
dh_installlogrotate                 lscpu                               systemd-ask-password
dh_installman                       lsinitramfs                         systemd-cat
dh_installmanpages                  lsipc                               systemd-cgls
dh_installmenu                      lslocks                             systemd-cgtop
dh_installmime                      lslogins                            systemd-delta
dh_installmodules                   lsmem                               systemd-detect-virt
dh_installpam                       lsmod                               systemd-escape
dh_installppp                       lsns                                systemd-hwdb
dh_installsystemd                   lsof                                systemd-id128
dh_installsystemduser               lspci                               systemd-inhibit
dh_installtex                       lspgpot                             systemd-machine-id-setup
dh_installudev                      __ltrim_colon_completions           systemd-mount
dh_installwm                        lwp-download                        systemd-notify
dh_installxfonts                    lwp-dump                            systemd-path
dh_link                             lwp-mirror                          systemd-resolve
dh_lintian                          lwp-request                         systemd-run
dh_listpackages                     lzcat                               systemd-socket-activate
dh_makeshlibs                       lzcmp                               systemd-stdio-bridge
dh_md5sums                          lzdiff                              systemd-sysusers
dh_missing                          lzegrep                             systemd-tmpfiles
dh_movefiles                        lzfgrep                             systemd-tty-ask-password-agent
dh_perl                             lzgrep                              systemd-umount
dh_perl_dbi                         lzless                              _sysvdirs
dh_perl_openssl                     lzma                                tabs
dh_prep                             lzmainfo                            tac
dh_pypy                             lzmore                              tail
dh_pysupport                        m4                                  tar
dh_python2                          mac2unix                            tasksel
dh_python3                          _mac_addresses                      taskset
dh_shlibdeps                        mail                                tbl
dh_strip                            Mail                                tcsh
dh_strip_nondeterminism             mail.mailutils                      tee
dh_systemd_enable                   mailq                               telnet
dh_systemd_start                    mailstat                            telnet.netkit
dh_testdir                          mailx                               tempfile
dh_testroot                         make                                _terms
--More--[Kdh_ucf                              make-first-existing-target          test
dh_update_autotools_config          makeinfo                            testparm
dh_usrlocal                         man                                 texi2any
dialog                              mandb                               texi2dvi
diff                                manpath                             texi2pdf
diff3                               mapfile                             texindex
dig                                 mapscrn                             then
dir                                 mariadb                             tic
dircolors                           mariadb-check                       _tilde
dirmngr                             mariadb-service-convert             time
dirmngr-client                      mawk                                timedatectl
dirname                             mcookie                             timeout
dirs                                md5sum                              times
discover-config                     md5sum.textutils                    tini
disown                              mdig                                tini-static
dmesg                               mesg                                tload
dnet                                messages                            tmux
dnsdomainname                       messages.mailutils                  tnameserv
dnstap-read                         migrate-pubring-from-classic-gpg    toe
do                                  mimeview                            top
docker                              _minimal                            touch
docker-containerd                   mkdir                               tput
docker-containerd-ctr               mkfifo                              tr
docker-containerd-shim              mk-job                              traceproto
docker-init                         mk_modmap                           traceproto.db
docker-linux-amd64                  mknod                               traceroute
domainname                          mkpasswd                            traceroute6
done                                mktemp                              traceroute6.db
dos2unix                            mlocate                             traceroute.db
dotlock                             _modules                            traceroute-nanog
dotlockfile                         more                                trap
dotlock.mailutils                   mount                               troff
dpkg                                mountpoint                          true
dpkg-architecture                   movemail                            truncate
dpkg-buildflags                     movemail.mailutils                  tryaffix
dpkg-buildpackage                   msgattrib                           tset
dpkg-checkbuilddeps                 msgcat                              tsort
dpkg-cross                          msgcmp                              tty
dpkg-deb                            msgcomm                             txixml2texi
dpkg-distaddfile                    msgconv                             type
dpkg-divert                         msgen                               typeset
dpkg-genbuildinfo                   msgexec                             tzselect
dpkg-genchanges                     msgfilter                           ucf
dpkg-gencontrol                     msgfmt                              ucfq
dpkg-gensymbols                     msggrep                             ucfr
dpkg-maintscript-helper             msginit                             udevadm
dpkg-mergechangelogs                msgmerge                            _uids
dpkg-name                           msgunfmt                            ul
dpkg-parsechangelog                 msguniq                             ulimit
dpkg-query                          ms_print                            ulockmgr_server
dpkg-scanpackages                   msql2mysql                          umask
dpkg-scansources                    mt                                  umount
dpkg-shlibdeps                      mt-gnu                              unalias
dpkg-source                         mtrace                              uname
dpkg-split                          munchlist                           uncompress
dpkg-statoverride                   mutt                                unexpand
dpkg-trigger                        mutt_dotlock                        unicode_start
dpkg-vendor                         mv                                  unicode_stop
dsymutil-7                          myisamchk                           uniq
du                                  myisam_ftdump                       unix2dos
dumpkeys                            myisamlog                           unix2mac
--More--[K_dvd_devices                        myisampack                          unlink
dwp                                 my_print_defaults                   unlzma
dwz                                 mysql                               unmkinitramfs
ebrowse                             mysqlaccess                         unpack200
ebrowse.emacs                       mysqladmin                          unpigz
echo                                mysqlanalyze                        unset
edit                                mysqlbinlog                         unshare
editor                              mysqlcheck                          unsq
egrep                               mysql_config                        until
eject                               mysql_convert_table_format          unxz
elfedit                             mysqld_multi                        unzip
elif                                mysqld_safe                         unzipsfx
else                                mysqld_safe_helper                  update-alternatives
emacs                               mysqldump                           updatedb
emacsclient                         mysqldumpslow                       updatedb.mlocate
emacsclient.emacs                   mysql_embedded                      update-gconf-defaults
emacs-nox                           mysql_find_rows                     update-leap
enable                              mysql_fix_extensions                update-mime-database
enc2xs                              mysqlhotcopy                        update-perl-sax-parsers
encguess                            mysqlimport                         uptime
encode_keychange                    mysql_install_db                    _upvar
env                                 mysqloptimize                       _upvars
envsubst                            mysql_plugin                        _usb_ids
eqn                                 mysqlrepair                         _user_at_host
esac                                mysqlreport                         _usergroup
etags                               mysql_secure_installation           _userland
etags.emacs                         mysql_setpermission                 users
eval                                mysqlshow                           utmpdump
ex                                  mysqlslap                           valgrind
exec                                mysql_tzinfo_to_sql                 valgrind.bin
exit                                mysql_upgrade                       valgrind-di-server
_expand                             mysql_waitpid                       valgrind-listener
expand                              mytop                               _variables
__expand_tilde_by_ref               namei                               vdir
expiry                              nano                                verify-uselistorder-7
export                              nasm                                VGAuthService
expr                                native2ascii                        vgdb
extcheck                            nawk                                vi
factor                              nc                                  view
_fail2ban                           ncal                                vim
fail2ban-client                     ncdu                                vim.basic
__fail2ban_jail_action_methods      _ncpus                              vimdiff
__fail2ban_jail_action_properties   nc.traditional                      vim.tiny
__fail2ban_jail_actions             ncurses5-config                     vimtutor
__fail2ban_jails                    ncurses6-config                     virtualenv
fail2ban-python                     ncursesw5-config                    vmhgfs-fuse
fail2ban-regex                      ncursesw6-config                    vmstat
fail2ban-server                     ndisasm                             vmtoolsd
fail2ban-testcases                  neqn                                vmware-checkvm
faillog                             net                                 vmware-guestproxycerttool
faked-sysv                          netcat                              vmware-hgfsclient
faked-tcp                           netkit-ftp                          vmware-namespace-cmd
fakeroot                            netstat                             vmware-rpctool
fakeroot-sysv                       networkctl                          vmware-toolbox-cmd
fakeroot-tcp                        newaliases                          vmware-vgauth-cmd
fallocate                           newgrp                              vmware-vgauth-smoketest
false                               ngettext                            vmware-vmblock-fuse
fc                                  nice                                vmware-xferlogs
fc-cache                            nisdomainname                       volname
fc-cat                              nl                                  w
fc-conflist                         nm                                  w3m
--More--[Kfcgistarter                         nmblookup                           w3mman
fc-list                             nohup                               wait
fc-match                            nproc                               waitmax
fc-pattern                          nroff                               wall
fc-query                            nsenter                             watch
fc-scan                             nslookup                            watchgnupg
fc-validate                         nstat                               wc
fg                                  nsupdate                            wdctl
fgconsole                           ntpdc                               wget
fgrep                               ntpq                                whatis
fi                                  ntpsweep                            whereis
filan                               ntptrace                            which
file                                numfmt                              while
_filedir                            obj2yaml-7                          whiptail
_filedir_xspec                      objcopy                             who
fincore                             objdump                             whoami
find                                ocsptool                            whois
findaffix                           od                                  w.procps
findmnt                             openssl                             write
findsmb                             openvt                              wsgen
fio                                 opt-7                               wsimport
fio2gnuplot                         orbd                                wsrep_sst_common
fio-btrace2fio                      os-prober                           wsrep_sst_mariabackup
fio-dedupe                          p11tool                             wsrep_sst_mysqldump
fio_generate_plots                  pack200                             wsrep_sst_rsync
fio-genzipf                         pager                               wsrep_sst_rsync_wan
fixproc                             parsechangelog                      www-browser
flock                               _parse_help                         x86_64
fmt                                 __parse_options                     x86_64-linux-gnu-addr2line
fold                                _parse_usage                        x86_64-linux-gnu-ar
for                                 partx                               x86_64-linux-gnu-as
formail                             passwd                              x86_64-linux-gnu-c++filt
free                                paste                               x86_64-linux-gnu-cpp
frm                                 patch                               x86_64-linux-gnu-cpp-4.9
frm.mailutils                       pathchk                             x86_64-linux-gnu-cpp-6
from                                _pci_ids                            x86_64-linux-gnu-cpp-8
from.mailutils                      pcimodules                          x86_64-linux-gnu-dwp
_fstypes                            pdb                                 x86_64-linux-gnu-elfedit
ftp                                 pdb2                                x86_64-linux-gnu-g++
function                            pdb2.7                              x86_64-linux-gnu-g++-8
funzip                              pdb3                                x86_64-linux-gnu-gcc
fuser                               pdb3.7                              x86_64-linux-gnu-gcc-4.9
fusermount                          pdftexi2dvi                         x86_64-linux-gnu-gcc-6
g++                                 peekfd                              x86_64-linux-gnu-gcc-8
g++-8                               perf                                x86_64-linux-gnu-gcc-ar
galera_new_cluster                  perl                                x86_64-linux-gnu-gcc-ar-4.9
galera_recovery                     perl5.28.1                          x86_64-linux-gnu-gcc-ar-6
gawk                                perl5.28-x86_64-linux-gnu           x86_64-linux-gnu-gcc-ar-8
_gcc                                perlbug                             x86_64-linux-gnu-gcc-nm
gcc                                 perldoc                             x86_64-linux-gnu-gcc-nm-4.9
gcc-4.9                             perlivp                             x86_64-linux-gnu-gcc-nm-6
gcc-6                               perlthanks                          x86_64-linux-gnu-gcc-nm-8
gcc-8                               perror                              x86_64-linux-gnu-gcc-ranlib
gcc-ar                              pftp                                x86_64-linux-gnu-gcc-ranlib-4.9
gcc-ar-4.9                          _pgids                              x86_64-linux-gnu-gcc-ranlib-6
gcc-ar-6                            pgrep                               x86_64-linux-gnu-gcc-ranlib-8
gcc-ar-8                            phar                                x86_64-linux-gnu-gcov
gcc-nm                              phar7.3                             x86_64-linux-gnu-gcov-4.9
gcc-nm-4.9                          phar.phar                           x86_64-linux-gnu-gcov-6
gcc-nm-6                            phar.phar7.3                        x86_64-linux-gnu-gcov-8
gcc-nm-8                            php                                 x86_64-linux-gnu-gcov-dump
--More--[Kgcc-ranlib                          php7.3                              x86_64-linux-gnu-gcov-dump-6
gcc-ranlib-4.9                      pic                                 x86_64-linux-gnu-gcov-dump-8
gcc-ranlib-6                        pico                                x86_64-linux-gnu-gcov-tool
gcc-ranlib-8                        piconv                              x86_64-linux-gnu-gcov-tool-6
gconf-merge-tree                    pidof                               x86_64-linux-gnu-gcov-tool-8
gconftool                           _pids                               x86_64-linux-gnu-gold
gconftool-2                         pigz                                x86_64-linux-gnu-gprof
gcore                               pinentry                            x86_64-linux-gnu-ld
gcov                                pinentry-gtk-2                      x86_64-linux-gnu-ld.bfd
gcov-4.9                            pinentry-x11                        x86_64-linux-gnu-ld.gold
gcov-6                              ping                                x86_64-linux-gnu-nm
gcov-8                              ping4                               x86_64-linux-gnu-objcopy
gcov-dump                           ping6                               x86_64-linux-gnu-objdump
gcov-dump-6                         pinky                               x86_64-linux-gnu-python2.7-config
gcov-dump-8                         pip                                 x86_64-linux-gnu-python2-config
gcov-tool                           pip2                                x86_64-linux-gnu-python3.7-config
gcov-tool-6                         pkill                               x86_64-linux-gnu-python3.7m-config
gcov-tool-8                         pl2pm                               x86_64-linux-gnu-python3-config
gdb                                 pldd                                x86_64-linux-gnu-python3m-config
gdb-add-index                       pmap                                x86_64-linux-gnu-python-config
gdbserver                           _pnames                             x86_64-linux-gnu-ranlib
gdbtui                              po2debconf                          x86_64-linux-gnu-readelf
gdk-pixbuf-csource                  pod2html                            x86_64-linux-gnu-size
gdk-pixbuf-pixdata                  pod2man                             x86_64-linux-gnu-strings
gdk-pixbuf-thumbnailer              pod2texi                            x86_64-linux-gnu-strip
gencat                              pod2text                            xargs
gendiff                             pod2usage                           xauth
genfio                              podchecker                          xdg-user-dir
geqn                                podebconf-display-po                xdg-user-dirs-update
GET                                 podebconf-report-po                 _xfunc
_get_comp_words_by_ref              podselect                           xgettext
getconf                             popd                                _xinetd_services
_get_cword                          POST                                xjc
__get_cword_at_cursor_by_ref        pr                                  xsubpp
getent                              preconv                             xxd
getfacl                             print                               xz
_get_first_arg                      printenv                            xzcat
getkeycodes                         printerbanner                       xzcmp
getopt                              printf                              xzdiff
getopts                             prlimit                             xzegrep
_get_pword                          procan                              xzfgrep
gettext                             procmail                            xzgrep
gettextize                          prove                               xzless
gettext.sh                          prtstat                             xzmore
_gids                               ps                                  yaml2obj-7
ginstall-info                       psfaddtable                         yaml-bench-7
git                                 psfgettable                         yes
__git_eread                         psfstriptable                       ypdomainname
__git_ps1                           psfxtable                           zcat
__git_ps1_colorize_gitstring        psktool                             zcmp
__git_ps1_show_upstream             pslog                               zdiff
git-receive-pack                    pstree                              zdump
git-shell                           pstree.x11                          zegrep
git-upload-archive                  pt-align                            zfgrep
git-upload-pack                     ptar                                zforce
gnutls-cli                          pt-archiver                         zgrep
gnutls-cli-debug                    ptardiff                            zip
gnutls-serv                         ptargrep                            zipcloak
gold                                pt-config-diff                      zipdetails
gpasswd                             pt-deadlock-logger                  zipgrep
gpg                                 pt-diskstats                        zipinfo
--More--[Kgpg2                                pt-duplicate-key-checker            zipnote
gpg-agent                           pt-fifo-split                       zipsplit
gpgcompose                          pt-find                             zless
gpgconf                             pt-fingerprint                      zmore
gpg-connect-agent                   pt-fk-error-logger                  znew
> NULL) */
bash: syntax error near unexpected token `)'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ if ( argnum+1 >= spots ){
bash: syntax error near unexpected token `{'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ args = erealloc(args,bufspace+BUFSIZ);
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ bufspace += BUFSIZ;
bash: bufspace: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ spots += (BUFSIZ/sizeof(char *));
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ }
bash: syntax error near unexpected token `}'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /* mark start, then find end of word */
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ start = cp;
bash: start: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ len   = 1;
bash: len: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ while (*++cp != '\0' && !(is_delim(*cp)) )
> 
Display all 1662 possibilities? (y or n)
> ++;
> 
Display all 1662 possibilities? (y or n)
> um++] = newstr(start, len);
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ }
bash: syntax error near unexpected token `}'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ args[argnum] = NULL;
bash: args[argnum]: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ return args;
bash: return: args: numeric argument required
bash: return: can only `return' from a function or sourced script
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ }
bash: syntax error near unexpected token `}'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /*
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * purpose: constructor for strings
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * returns: a string, never NULL
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  */
bash: */: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ char *newstr(char *s, int l)
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ {
> char *rv = emalloc(l+1);
bash: syntax error near unexpected token `('
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ rv[l] = '\0';
bash: rv[l]: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ strncpy(rv, s, l);
bash: syntax error near unexpected token `rv,'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ return rv;
bash: return: rv: numeric argument required
bash: return: can only `return' from a function or sourced script
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ }
bash: syntax error near unexpected token `}'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ void 
bash: void: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ freelist(char **list)
bash: syntax error near unexpected token `char'
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /*
bash: /bin: Is a directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * purpose: free the list returned by splitline
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  * returns: nothing
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  *  action: free all strings in list and then free the list
bash: exec.c: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  */
bash: */: No such file or directory
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ {
> chardet**cp = list;
> ^C
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ 
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ps
  PID TTY          TIME CMD
 2479 pts/2    00:00:05 bash
31235 pts/2    00:00:00 ps
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ clear
[H[2J[3J]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 52L, 885C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m


[35m#define DFL_PROMPT      [m[33m"> "[m[18;1H[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[24;9Hprompt = DFL_PROMPT;[25;9Hsetup();[27;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[28;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[29;25Hresult = execute(arglist);[30;25Hfreelist(arglist);[31;17H}[32;17Hfree(cmdline);[33;9H}[34;9H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[38;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[42;9H{[43;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[44;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[45;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n){[48;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[49;9Hexit(n);
}


[34m~                                                                                                                    [54;1H~                                                                                                                    [55;1H~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"split.c" 154L, 3393C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[28;9Hprintf([33m"[m[35m%s[m[33m"[m,prompt);[28C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m )[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[51;1H}[m[62;101H1[21;1H[?25h[?25l{[51;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;103H2-9[28;9H[?25h[?25l[62;103H3-10[28;10H[?25h[?25l[62;103H4-11[28;11H[?25h[?25l[62;103H5-12[28;12H[?25h[?25l[62;103H6-13[28;13H[?25h[?25l[62;103H7-14[28;14H[?25h[?25lf[46m([11C)[m[62;103H8-15[28;15H[?25h[?25l([11C)[62;103H9-16[28;16H[?25h[?25l[62;103H10-17[28;17H[?25h[?25l[62;104H1-18[28;18H[?25h[?25l[62;104H2-19[28;19H[?25h[?25l[62;104H3-20[28;20H[?25h[?25l[62;104H4-21[28;21H[?25h[?25l[62;104H3-20[28;20H[?25h[?25l[62;104H2-19[28;19H[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H28,12-19      Top[28;19H[?25h[?25l[33m$"[m,prompt);[62;104H3-20[28;20H[?25h[?25l[33ms"[m,prompt);[62;104H4-21[28;21H[?25h[?25l[33m"[m,prompt); [62;104H3-20[28;20H[?25h[?25l[33m"[m,prompt); [62;104H2-19[28;19H[?25h[?25l[33m%"[m,prompt);[62;104H3-20[28;20H[?25h[?25l[35m%s[m[33m"[m,prompt);[62;104H4-21[28;21H[?25h[?25l[33m%"[m,prompt); [62;104H3-20[28;20H[?25h[?25l[33m"[m,prompt); [62;104H2-19[28;19H[?25h[?25l[33m$"[m,prompt);[62;104H3-20[28;20H[?25h[?25l[33m%"[m,prompt);[62;104H4-21[28;21H[?25h[?25l[35m%s[m[33m"[m,prompt);[62;104H5-22[28;22H[?25h[?25l[62;104H6-23[28;23H[?25h[?25l[62;104H7-24[28;24H[?25h[?25lcprompt);[24C        [36m/* prompt user  */[m[62;104H8-25[28;25H[?25h[?25luprompt);[62;104H9-26[28;26H[?25h[?25lrprompt);[62;103H20-27[28;27H[?25h[?25lpprompt);[62;104H1-28[28;28H[?25h[?25laprompt);[62;104H2-29[28;29H[?25h[?25ltprompt);[62;104H3-30[28;30H[?25h[?25lhprompt);[62;104H4-31[28;31H[?25h[?25l,prompt);[62;104H5-32[28;32H[?25h[?25l[62;101H9[29;32H[?25h[?25l[62;100H30,1    [30;1H[?25h[?25l[62;100H29,25-32[29;32H[?25h[?25l[62;100H30,1    [30;1H[?25h[?25l[62;101H1,18-32[31;32H[?25h[?25l[62;101H2[32;32H[?25h[?25l[62;101H3,11[33;32H[?25h[?25l[62;101H4,4-25 [34;25H[?25h[?25l[62;101H5,8-29[35;29H[?25h[?25l[62;101H6,4-25[36;25H[?25h[?25l[62;101H7,11-32[37;32H[?25h[?25l[32;40H[46m{[38;17H}[m[62;101H8,4-18 [38;18H[?25h[?25l[32;40H{[38;17H}[62;101H9,1   [39;1H[?25h[?25l[62;100H40,18-32[40;32H[?25h[?25l[41;20H[46m([11C)[m[62;101H1[41;32H[?25h[?25l[41;20H([11C)[62;101H2,10-31[42;31H[?25h[?25l[62;101H3,1    [43;1H[?25h[?25l[62;101H4,18-32[44;32H[?25h[?25l[62;101H5[45;32H[?25h[?25l[29;41H[46m{[46;9H}[m[62;101H6,3-10 [46;10H[?25h[?25l[29;41H{[46;9H}[62;101H5,18-32[45;32H[?25h[?25l[62;101H4[44;32H[?25h[?25l[62;101H3,1    [43;1H[?25h[?25l[62;101H2,10-31[42;31H[?25h[?25l[41;20H[46m([11C)[m[62;101H1,18-32[41;32H[?25h[?25l[41;20H([11C)[62;101H2,10-31[42;31H[?25h[?25l[41;20H[46m([11C)[m[62;101H1,18-32[41;32H[?25h[?25l[41;20H([11C)[62;101H2,10-31[42;31H[?25h[?25l[43;61r[43;1H[L[1;62r[62;100H[K[62;100H43,1[10CTop[43;1H[?25h[?25l[62;103H2-9[43;9H[?25h[?25l[62;103H3-17[43;17H[?25h[?25l[62;103H2-9 [43;9H[?25h[?25l[62;103H1  [43;1H[?25h[?25l[42;61r[61;1H
[1;62r[42;25H[33mbreak[m;[61;1H[36m * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H[K[62;100H42,10-31      Top[42;31H[?25h[?25l[62;101H1,17[41;31H[?25h[?25l  )[62;104H8-32[41;32H[?25h[?25l| )[62;104H9-33[41;33H[?25h[?25l| )[62;103H20-34[41;34H[?25h[?25l  )[62;104H1-35[41;35H[?25h[?25lc )[62;104H2-36[41;36H[?25h[?25l  )[62;104H3-37[41;37H[?25h[?25l= )[62;104H4-38[41;38H[?25h[?25l= )[62;104H5-39[41;39H[?25h[?25l  )[62;104H6-40[41;40H[?25h[?25l' )[62;104H7-41[41;41H[?25h[?25l: )[62;104H8-42[41;42H[?25h[?25l )[41;43H[K[62;104H7-41[41;41H[?25h[?25l; )[62;104H8-42[41;42H[?25h[?25l[33m';'[m )[62;104H9-43[41;43H[?25h[?25l)[41;44H[K[41;20H[46m([22C)[?25h[?25l[m[41;20H([22C)[62;101H2,10-31[42;31H[?25h[?25l[62;101H3,1    [43;1H[?25h[?25l[62;101H4,26-40[44;40H[?25h[?25l[62;101H5,18-32[45;32H[?25h[?25l[29;41H[46m{[46;9H}[m[62;101H6,3-10 [46;10H[?25h[?25l[29;41H{[46;9H}[62;101H7,30-41[47;41H[?25h[?25l[62;101H8,17[48;41H[?25h[?25l[62;101H9,18-25[49;25H[?25h[?25l[62;100H50,13-20[50;20H[?25h[?25l[21;1H[46m{[51;1H}[m[62;101H1,2    [51;2H[?25h[?25l[21;1H{[51;1H}[62;101H2,1[52;1H[?25h[?25l[62;101H3,4[53;4H[?25h[?25l[62;101H4,39-43[54;43H[?25h[?25l[62;101H5,5    [55;5H[?25h[?25l[56;21H[35m[46m([19C)[m[62;101H6,42[56;42H[?25h[?25l[56;21H[35m([19C)[m[62;101H7,1 [57;1H[?25h[?25l[58;18H[46m([10C)[m[62;101H8,30[58;30H[?25h[?25l[58;18H([10C)[62;101H9,3 [59;3H[?25h[?25l[62;100H60,43[60;43H[?25h[?25l[62;101H1[61;43H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;100H[K[62;100H62,43[10C1%[61;43H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;100H[K[62;100H63,43[10C2%[61;43H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H64,43[10C3%[61;43H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H65,4[11C4%[61;4H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H66,2[11C5%[61;2H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *newstr();[62;100H[K[62;100H67,17-27[7C6%[61;27H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **args ;[62;100H[K[62;100H68,15-25[7C7%[61;25H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H69,18-41[7C8%[61;41H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H70,21-41[7C9%[61;41H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H71,19-41      10%[61;41H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H72,20-41      11%[61;41H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H73,14-24      12%[61;24H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H74,10-21      13%[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H75,1[10C15%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H76,23-41      16%[61;41H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H77,15-29      17%[61;29H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H78,1[10C18%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H79,30-41      19%[61;41H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H80,20-27      20%[61;27H[?25h[62;1H[K[61;26H[?25l[62;100H80,19-26      20%[61;26H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"split.c" 154L, 3415C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc -c split.c -o split.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./test.o
> echo hello; echo jklolbye
cannot execute command: No such file or directory
> ^[[A    echo hello
cannot execute command: No such file or directory
> ^Z
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ fg
./test.o

> ^Z
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ kill %1[K[K[K[K[K[K[Kps 
  PID TTY          TIME CMD
 2479 pts/2    00:00:05 bash
31821 pts/2    00:00:00 test.o
32456 pts/2    00:00:00 ps
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ kill 31821
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ fg
./test.o
Terminated
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ps
  PID TTY          TIME CMD
 2479 pts/2    00:00:05 bash
32492 pts/2    00:00:00 ps
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi exec.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"exec.c" 38L, 816C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* execute.c - code used by small shell to execute commands */[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m<sys/wait.h>[m


[32mint[m execute([32mchar[m *argv[])
[36m/*
 * purpose: run a program passing it arguments
 * returns: status returned via wait, or -1 on error
 *  errors: -1 on fork() or wait() errors
 */[m
{
    [32mint[m pid ;
    [32mint[m child_info = -[33m1[m;[21;5H[33mif[m ( argv[[33m0[m] == [33mNULL[m )[14C[36m/* nothing succeeds     */[m[22;9H[33mreturn[m [33m0[m;[24;5H[33mif[m ( (pid = fork())  == -[33m1[m )[25;9Hperror([33m"fork"[m);[26;6H[33melse[m [33mif[m ( pid == [33m0[m ){[27;9Hsignal([33mSIGINT[m, [33mSIG_DFL[m);[28;9Hsignal([33mSIGQUIT[m, [33mSIG_DFL[m);[29;9Hexecvp(argv[[33m0[m], argv);[30;9Hperror([33m"cannot execute command"[m);[31;9Hexit([33m1[m);
    }
    [33melse[m {[34;9H[33mif[m ( wait(&child_info) == -[33m1[m )[35;13Hperror([33m"wait"[m);
    }
  [33mreturn[m child_info;
}
[34m~                                                                                                                    [40;1H~                                                                                                                    [41;1H~                                                                                                                    [42;1H~                                                                                                                    [43;1H~                                                                                                                    [44;1H~                                                                                                                    [45;1H~                                                                                                                    [46;1H~                                                                                                                    [47;1H~                                                                                                                    [48;1H~                                                                                                                    [49;1H~                                                                                                                    [50;1H~                                                                                                                    [51;1H~                                                                                                                    [52;1H~                                                                                                                    [53;1H~                                                                                                                    [54;1H~                                                                                                                    [55;1H~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;100H2,0-1[2;1H[?25h[?25l[62;100H3,1  [3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6[6;1H[?25h[?25l[62;100H7[7;1H[?25h[?25l[62;100H8,0-1[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1 [10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l
[46m{[38;1H}[m[62;101H6[16;1H[?25h[?25l{[38;1H}[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l[62;101H1[21;1H[?25h[?25l[62;101H2[22;1H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H4,1  [24;1H[?25h[?25l[62;103H2[24;2H[?25h[?25l[62;103H3[24;3H[?25h[?25l[62;103H4[24;4H[?25h[?25l[62;103H5[24;5H[?25h[?25l[62;103H6[24;6H[?25h[?25l[62;103H7[24;7H[?25h[?25l [46m([23C)[m[62;103H8[24;8H[?25h[?25l([23C)[62;103H9[24;9H[?25h[?25l [46m([12C)[m[62;103H10[24;10H[?25h[?25l([12C)[62;104H1[24;11H[?25h[?25l[62;104H2[24;12H[?25h[?25l[62;104H3[24;13H[?25h[?25l[62;104H4[24;14H[?25h[?25l[62;104H5[24;15H[?25h[?25l[62;104H6[24;16H[?25h[?25l[62;104H7[24;17H[?25h[?25l[62;104H8[24;18H[?25h[?25l[62;104H9[24;19H[?25h[?25l[62;103H20[24;20H[?25h[?25lk[46m()[m[62;104H1[24;21H[?25h[?25l[62;104H2[24;22H[?25h[?25l[24;10H[46m([m[10C()[46m)[m[62;104H3[24;23H[?25h[?25l[24;10H([12C)[62;101H5[25;23H[?25h[?25l[24;10H[46m([12C)[m[62;101H4[24;23H[?25h[?25l[24;10H([12C)[62;101H5[25;23H[?25h[?25l[62;101H6[26;23H[?25h[?25l[62;101H7[27;23H[?25h[?25l[62;101H8[28;23H[?25h[?25l[62;101H9[29;23H[?25h[?25l[62;100H30[30;23H[?25h[?25l[62;101H1,16[31;16H[?25h[?25l[62;101H0,23[30;23H[?25h[?25l[62;100H29[29;23H[?25h[?25l[46m[[1C][m[62;104H2[29;22H[?25h[?25l[[1C][62;104H1[29;21H[?25h[?25l[46m[[1C][m[62;104H0[29;20H[?25h[?25l[[1C][62;103H19[29;19H[?25h[?25l[62;104H8[29;18H[?25h[?25l[62;104H7[29;17H[?25h[?25l[62;104H6[29;16H[?25h[?25l[46m([13C)[m[62;104H5[29;15H[?25h[?25l([13C)[62;104H4[29;14H[?25h[?25l[62;104H3[29;13H[?25h[?25l[62;104H2[29;12H[?25h[?25l[62;104H1[29;11H[?25h[?25l[62;104H0[29;10H[?25h[?25l[62;103H9 [29;9H[?25h[?25l[62;1H[K[62;1H:[?2004h[?25hq[?25l[?25h[?25l[?2004l[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t[62;1H[K[62;1H[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi shsm[K[K[Kh[Kmsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 52L, 885C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m


[35m#define DFL_PROMPT      [m[33m"> "[m[18;1H[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[24;9Hprompt = DFL_PROMPT;[25;9Hsetup();[27;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[28;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[29;25Hresult = execute(arglist);[30;25Hfreelist(arglist);[31;17H}[32;17Hfree(cmdline);[33;9H}[34;9H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[38;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[42;9H{[43;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[44;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[45;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n){[48;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[49;9Hexit(n);
}


[34m~                                                                                                                    [54;1H~                                                                                                                    [55;1H~                                                                                                                    [56;1H~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,1  [14;1H[?25h[?25l[62;101H5,0-1[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H4,1  [14;1H[?25h[?25l[62;101H3,0-1[13;1H[?25h[?25l[62;101H2[12;1H[?25h[?25l[62;101H1,1  [11;1H[?25h[?25l[62;101H0[10;1H[?25h[?25l[62;100H9,1 [9;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H7[7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,1  [14;1H[?25h[?25l[62;101H5,0-1[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l
[46m{[35;1H}[m[62;101H9[19;1H[?25h[?25l{[35;1H}[62;100H20,1-8[20;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3,0-1[23;1H[?25h[?25l[62;101H4,1-8[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9,4-25[29;25H[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H29,4-25[7CAll[29;25H[?25h[?25l[62;101H8,11-25[28;25H[?25h[?25l[62;101H7,18[27;25H[?25h[?25l[62;104H7-24[27;24H[?25h[?25l[62;101H8,10[28;24H[?25h[?25l[46m([28C)[m[62;103H9-23 [28;23H[?25h[?25l[62;103H8-22[28;22H[?25h[?25l[46m([m ([28C)[10C[46m)[m[62;103H7-21[28;21H[?25h[?25l[62;103H6-20[28;20H[?25h[?25l([41C)[62;103H5-19[28;19H[?25h[?25l[62;103H4-18[28;18H[?25h[?25l[62;103H3-17[28;17H[?25h[?25l[62;103H2-9 [28;9H[?25h[?25l[62;103H3-17[28;17H[?25h[?25l[62;103H4-18[28;18H[?25h[?25l[62;103H5-19[28;19H[?25h[?25l [46m([41C)[m[62;103H6-20[28;20H[?25h[?25l[62;103H7-21[28;21H[?25h[?25l( [46m([28C)[m[10C)[62;103H8-22[28;22H[?25h[?25l[62;103H9-23[28;23H[?25h[?25l([28C)[62;103H10-24[28;24H[?25h[?25l[46m([28C)[m[62;103H9-23 [28;23H[?25h[?25l[62;103H8-22[28;22H[?25h[?25l[46m([m ([28C)[10C[46m)[m[62;103H7-21[28;21H[?25h[?25l[62;103H6-20[28;20H[?25h[?25l([41C)[62;103H5-19[28;19H[?25h[?25l[62;103H4-18[28;18H[?25h[?25l[62;103H3-17[28;17H[?25h[?25l[29;61r[29;1H[L[1;62r[28;17H[K[29;1H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[62;100H[K[62;100H29,1[10CAll[29;1H[?25h[?25l[30;61r[30;1H[L[1;62r[29;1H[K[30;1H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[62;100H[K[62;100H30,1[10CAll[30;1H[?25h[?25l        [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[62;103H2-9[30;9H[?25h[?25l        [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  ){[62;103H3-17[30;17H[?25h[?25l[62;100H29,1   [29;1H[?25h[?25l[62;101H8,3-17[28;17H[?25h[?25la[62;103H4-18[28;18H[?25h[?25lr[62;103H5-19[28;19H[?25h[?25lg[62;103H6-20[28;20H[?25h[?25ll[62;103H7-21[28;21H[?25h[?25li[62;103H8-22[28;22H[?25h[?25ls[62;103H9-23[28;23H[?25h[?25lt[62;103H10-24[28;24H[?25h[?25l[28;23H[K[62;103H9-23 [28;23H[?25h[?25l[28;22H[K[62;103H8-22[28;22H[?25h[?25l[28;21H[K[62;103H7-21[28;21H[?25h[?25l[28;20H[K[62;103H6-20[28;20H[?25h[?25l[28;19H[K[62;103H5-19[28;19H[?25h[?25l[28;18H[K[62;103H4-18[28;18H[?25h[?25l[28;17H[K[62;103H3-17[28;17H[?25h[?25l[62;101H9,1   [29;1H[?25h[?25l[62;100H30,3-17[30;17H[?25h[?25l[62;101H1[31;17H[?25h[?25l[62;101H0[30;17H[?25h[?25l[62;103H4-18[30;18H[?25h[?25l[62;103H5-19[30;19H[?25h[?25l [46m([41C)[m[62;103H6-20[30;20H[?25h[?25l[62;103H7-21[30;21H[?25h[?25l( [46m([28C)[m[10C)[62;103H8-22[30;22H[?25h[?25l[62;103H9-23[30;23H[?25h[?25l[62;103H8-22[30;22H[?25h[?25l[62;103H9-23[30;23H[?25h[?25lvarglist = splitline(cmdline[1C) != [33mNULL[m  ){[30;22H([28C)[62;103H10-24[30;24H[?25h[?25l[62;104H1-25[30;25H[?25h[?25l[62;104H0-24[30;24H[?25h[?25larglist = splitline(cmdline)) != [33mNUL[m[1C  ){[30;64H[K[30;22H[46m([28C)[m[62;103H9-23 [30;23H[?25h[62;1H[K[30;22H[?25l[62;100H30,8-22[7CAll[30;22H[?25h[?25l[62;1H[33m-- VISUAL --[m[62;100H[K[62;100H30,8-22[7CAll[30;22H[?25h[?25l[7m([m[28C)[62;103H9-23[30;23H[?25h[?25l[7ma[m[62;103H10-24[30;24H[?25h[?25l[7mr[m[62;104H1-25[30;25H[?25h[?25l[7mg[m[62;104H2-26[30;26H[?25h[?25l[7ml[m[62;104H3-27[30;27H[?25h[?25l[7mi[m[62;104H4-28[30;28H[?25h[?25l[7ms[m[62;104H5-29[30;29H[?25h[?25l[7mt[m[62;104H6-30[30;30H[?25h[?25l[7m [m[62;104H7-31[30;31H[?25h[?25l[7m=[m[62;104H8-32[30;32H[?25h[?25l[7m [m[62;104H9-33[30;33H[?25h[?25l[7ms[m[62;103H20-34[30;34H[?25h[?25l[7mp[m[62;104H1-35[30;35H[?25h[?25l[7ml[m[62;104H2-36[30;36H[?25h[?25l[7mi[m[62;104H3-37[30;37H[?25h[?25l[7mt[m[62;104H4-38[30;38H[?25h[?25l[7ml[m[62;104H5-39[30;39H[?25h[?25l[7mi[m[62;104H6-40[30;40H[?25h[?25l[7mn[m[62;104H7-41[30;41H[?25h[?25l[7me[m[46m([7C)[m[62;104H8-42[30;42H[?25h[?25l[7m([m[7C)[62;104H9-43[30;43H[?25h[?25l[7mc[m[62;103H30-44[30;44H[?25h[?25l[7mm[m[62;104H1-45[30;45H[?25h[?25l[7md[m[62;104H2-46[30;46H[?25h[?25l[7ml[m[62;104H3-47[30;47H[?25h[?25l[7mi[m[62;104H4-48[30;48H[?25h[?25l[7mn[m[62;104H5-49[30;49H[?25h[?25l[30;22H[46m([marglist = splitline(cmdline)[46m)[m[62;1H[K[62;100H30,8-22[7CAll[30;22H[?25h[?25l([28C)[62;100H29,0-1 [29;1H[?25h[?25l[62;101H8,2-16[28;16H[?25h[?25l (arglist = splitline(cmdline[30;63H[1m[37m[41m{[33;17H}[m[62;103H30-44[28;44H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H28,30-44      All[28;44H[?25h[?25l[62;104H1-45[28;45H[?25h[?25l)[28;37H[46m([7C)[m[62;104H2-46[28;46H[?25h[?25l;[28;37H([7C)[62;104H3-47[28;47H[?25h[?25l[62;101H9,1    [29;1H[?25h[?25l[62;100H30,33-47[30;47H[?25h[?25l[62;104H2-46[30;46H[?25h[?25l[62;104H1-45[30;45H[?25h[?25l[62;104H0-44[30;44H[?25h[?25l[46m([7C)[m[62;103H29-43[30;43H[?25h[?25l[62;104H8-42[30;42H[?25h[?25l([7C)[62;104H7-41[30;41H[?25h[?25l[62;104H6-40[30;40H[?25h[?25l[62;104H5-39[30;39H[?25h[?25l[62;104H4-38[30;38H[?25h[?25l[62;104H3-37[30;37H[?25h[?25l[62;104H2-36[30;36H[?25h[?25l[62;104H1-35[30;35H[?25h[?25l[62;104H0-34[30;34H[?25h[?25l[62;103H19-33[30;33H[?25h[?25l[62;104H8-32[30;32H[?25h[?25l[62;104H7-31[30;31H[?25h[?25l[62;104H6-30[30;30H[?25h[?25l[62;104H5-29[30;29H[?25h[?25l[62;104H4-28[30;28H[?25h[?25l[62;104H3-27[30;27H[?25h[?25l[62;104H2-26[30;26H[?25h[?25l[62;104H1-25[30;25H[?25h[?25l[62;104H0-24[30;24H[?25h[?25l[46m([28C)[m[62;103H9-23 [30;23H[?25h[?25l[62;103H8-22[30;22H[?25h[?25l[46m([m ([28C)[10C[46m)[m[62;103H7-21[30;21H[?25h[?25l([41C)[62;100H29,1   [29;1H[?25h[?25l[62;101H8,7-21[28;21H[?25h[?25l[62;101H7,14-21[27;21H[?25h[?25l[62;101H6,1    [26;1H[?25h[?25l[62;101H5,10-17[25;17H[?25h[?25l[62;101H4,14-21[24;21H[?25h[?25l[62;101H3,1    [23;1H[?25h[?25l[62;103H2-9[23;9H[?25h[?25li[62;103H3-10[23;10H[?25h[?25ln[62;103H4-11[23;11H[?25h[?25l[32mint[m[62;103H5-12[23;12H[?25h[?25l[62;103H6-13[23;13H[?25h[?25li[62;103H7-14[23;14H[?25h[?25l;[62;103H8-15[23;15H[?25h[?25l[62;103H7-14[23;14H[?25h[?25l[62;103H6-13[23;13H[?25h[?25l    i;[62;103H7-17[23;17H[?25h[?25l[62;101H4,10-17[24;17H[?25h[?25l[62;101H5[25;17H[?25h[?25l[62;101H6,1    [26;1H[?25h[?25l[27;17H[46m([33C)[m[62;101H7,10-17[27;17H[?25h[?25l([33C)[62;101H8,3-17 [28;17H[?25h[?25l[62;101H9,1   [29;1H[?25h[?25l[62;100H30,3-17[30;17H[?25h[?25l[62;100H29,1   [29;1H[?25h[?25l[62;101H8,3-17[28;17H[?25h[?25l[27;17H[46m([33C)[m[62;101H7,10-17[27;17H[?25h[?25l([33C)[62;101H6,1    [26;1H[?25h[?25l[62;101H5,10-17[25;17H[?25h[?25l[62;101H4[24;17H[?25h[?25l[62;101H3,7-17 [23;17H[?25h[?25li;[23;17H[K[62;103H6-13[23;13H[?25h[?25linti;[23;14H[K[62;103H5-12[23;12H[?25h[?25li;[23;13H[K[62;103H4-11[23;11H[?25h[?25li;[23;12H[K[62;103H3-10[23;10H[?25h[?25l;[23;11H[K[62;103H2-9 [23;9H[?25h[?25lci;[62;103H3-10[23;10H[?25h[?25lhi;[62;103H4-11[23;11H[?25h[?25lai;[62;103H5-12[23;12H[?25h[?25lri;[62;103H6-13[23;13H[?25h[?25l[32mchar[m i;[62;103H7-14[23;14H[?25h[?25l i;[62;103H8-15[23;15H[?25h[?25l i;[62;103H9-16[23;16H[?25h[?25l i;[62;103H10-17[23;17H[?25h[?25lci;[62;104H1-18[23;18H[?25h[?25lui;[62;104H2-19[23;19H[?25h[?25lri;[62;104H3-20[23;20H[?25h[?25lri;[62;104H4-21[23;21H[?25h[?25lei;[62;104H5-22[23;22H[?25h[?25lni;[62;104H6-23[23;23H[?25h[?25ldi;[62;104H7-24[23;24H[?25h[?25li;[23;25H[K[62;104H6-23[23;23H[?25h[?25lti;[62;104H7-24[23;24H[?25h[?25l_i;[62;104H8-25[23;25H[?25h[?25lCi;[62;104H9-26[23;26H[?25h[?25loi;[62;103H20-27[23;27H[?25h[?25li;[23;28H[K[62;103H19-26[23;26H[?25h[?25li;[23;27H[K[62;104H8-25[23;25H[?25h[?25lci;[62;104H9-26[23;26H[?25h[?25loi;[62;103H20-27[23;27H[?25h[?25lmi;[62;104H1-28[23;28H[?25h[?25lmi;[62;104H2-29[23;29H[?25h[?25lai;[62;104H3-30[23;30H[?25h[?25lni;[62;104H4-31[23;31H[?25h[?25ldi;[62;104H5-32[23;32H[?25h[?25l;[23;33H[K[23;32H[?25h[?25l[62;101H4,22-29[24;29H[?25h[?25l[62;101H5,10-17[25;17H[?25h[?25l[62;101H6,1    [26;1H[?25h[?25l[62;101H7,25-32[27;32H[?25h[?25l[62;101H8,18[28;32H[?25h[?25l[62;101H9,1    [29;1H[?25h[?25l[62;100H30,18-32[30;32H[?25h[?25l[62;101H1,11[31;32H[?25h[?25l[62;101H0,18[30;32H[?25h[?25l[62;100H29,1    [29;1H[?25h[?25l[30;61r[30;1H[L[1;62r[62;100H[K[62;100H30,1[10CAll[30;1H[?25h[?25l[31;61r[31;1H[L[1;62r[62;100H[K[62;100H31,1[10CAll[31;1H[?25h[?25l[32;61r[32;1H[L[1;62r[62;100H[K[62;100H32,1[10CAll[32;1H[?25h[?25l[62;101H1[31;1H[?25h[?25l[62;101H2[32;1H[?25h[?25l[62;101H3[33;1H[?25h[?25l[62;101H4[34;1H[?25h[?25l[62;101H5[35;1H[?25h[?25l[62;101H6[36;1H[?25h[?25l[62;103H2-9[36;9H[?25h[?25l[62;101H7[37;9H[?25h[?25l[27;62H[46m{[38;9H}[m[62;101H8[38;9H[?25h[?25l[27;62H{[38;9H}[62;101H7[37;9H[?25h[?25l[62;101H6[36;9H[?25h[?25l[62;101H7[37;9H[?25h[?25l[62;101H6[36;9H[?25h[?25l[62;101H5[35;9H[?25h[?25l[62;101H4[34;9H[?25h[?25l[62;101H3[33;9H[?25h[?25l[62;101H2,1  [32;1H[?25h[?25l[62;101H1[31;1H[?25h[?25l[62;101H0[30;1H[?25h[?25l[62;100H29[29;1H[?25h[?25l[62;100H30[30;1H[?25h[?25l[62;103H2-9[30;9H[?25h[?25l[62;103H3-17[30;17H[?25h[?25li[62;103H4-18[30;18H[?25h[?25l[33mif[m[62;103H5-19[30;19H[?25h[?25l([62;103H6-20[30;20H[?25h[?25lc[62;103H7-21[30;21H[?25h[?25lo[62;103H8-22[30;22H[?25h[?25lm[62;103H9-23[30;23H[?25h[?25lm[62;103H10-24[30;24H[?25h[?25la[62;104H1-25[30;25H[?25h[?25ln[62;104H2-26[30;26H[?25h[?25ld[62;104H3-27[30;27H[?25h[?25ls[62;104H4-28[30;28H[?25h[?25l![62;104H5-29[30;29H[?25h[?25l[30;28H[K[62;104H4-28[30;28H[?25h[?25l[62;104H5-29[30;29H[?25h[?25l![62;104H6-30[30;30H[?25h[?25l=[62;104H7-31[30;31H[?25h[?25l[62;104H8-32[30;32H[?25h[?25lN[62;104H9-33[30;33H[?25h[?25lU[62;103H20-34[30;34H[?25h[?25lL[62;104H1-35[30;35H[?25h[?25l[33mNULL[m[62;104H2-36[30;36H[?25h[?25l)[30;19H[46m([16C)[m[62;104H3-37[30;37H[?25h[?25l[30;19H([16C)[62;101H1,1    [31;1H[?25h[?25l[62;101H2[32;1H[?25h[?25l[62;101H1[31;1H[?25h[?25l[30;19H[46m([16C)[m[62;101H0,23-37[30;37H[?25h[?25l[1m[37m[41m{[m[30;19H([16C)[1m[37m[46m{[m[38;9H[46m}[m[62;104H4-38[30;38H[?25h[?25l[31;61r[31;1H[L[1;62r[38;9H[46m        [m[39;9H}[62;100H[K[62;100H31,1[10CAll[30;37H[1m[37m[41m{[m[38;9H        [31;1H[?25h[?25l[32;61r[32;1H[L[1;62r[62;100H[K[62;100H32,1[10CAll[32;1H[?25h[?25l[1m[37m[41m}[m[30;37H[1m[37m[46m{

}[m[62;103H2[32;2H[?25h[?25l[62;103H1[32;1H[?25h[?25l[46m        [m[1m[37m[41m}[m        [1m[37m[46m}[m[62;103H2-9[32;9H[?25h[?25l[46m        [m[1m[37m[41m}[m[32;9H        [1m[37m[46m}[m[62;103H3-17[32;17H[?25h[?25l[30;37H[1m[37m[41m{[32;17H}[m[62;101H1,1   [31;1H[?25h[?25l[62;103H2-9[31;9H[?25h[?25l[62;103H3-17[31;17H[?25h[?25l[62;103H4-25[31;25H[?25h[?25lc[62;103H5-26[31;26H[?25h[?25lu[62;103H6-27[31;27H[?25h[?25lr[62;103H7-28[31;28H[?25h[?25lr[62;103H8-29[31;29H[?25h[?25le[62;103H9-30[31;30H[?25h[?25ln[62;103H10-31[31;31H[?25h[?25lt[62;104H1-32[31;32H[?25h[?25l_[62;104H2-33[31;33H[?25h[?25lc[62;104H3-34[31;34H[?25h[?25lo[62;104H4-35[31;35H[?25h[?25lm[62;104H5-36[31;36H[?25h[?25lm[62;104H6-37[31;37H[?25h[?25la[62;104H7-38[31;38H[?25h[?25ln[62;104H8-39[31;39H[?25h[?25ld[62;104H9-40[31;40H[?25h[?25l[62;103H20-41[31;41H[?25h[?25l=[62;104H1-42[31;42H[?25h[?25l[62;104H2-43[31;43H[?25h[?25lc[62;104H3-44[31;44H[?25h[?25lo[62;104H4-45[31;45H[?25h[?25lm[62;104H5-46[31;46H[?25h[?25lm[62;104H6-47[31;47H[?25h[?25la[62;104H7-48[31;48H[?25h[?25ln[62;104H8-49[31;49H[?25h[?25ld[62;104H9-50[31;50H[?25h[?25ls[62;103H30-51[31;51H[?25h[?25l[30;37H[1m[37m[46m{[32;17H}[m[62;101H0,24-38[30;38H[?25h[?25l[1m[37m[41m{[32;17H}[m[62;100H29,1    [29;1H[?25h[?25l[62;101H8,33-47[28;47H[?25h[?25l[27;17H[46m([33C)[m[62;101H7,44-51[27;51H[?25h[?25l[27;17H([33C)[62;101H6,1    [26;1H[?25h[?25l[62;101H5,10-17[25;17H[?25h[?25l[62;101H4,22-29[24;29H[?25h[?25l[62;101H3,26-33[23;33H[?25h[?25l[62;104H5-32[23;32H[?25h[?25l[62;104H4-31[23;31H[?25h[?25l[62;104H3-30[23;30H[?25h[?25l[62;104H2-29[23;29H[?25h[?25l[62;104H1-28[23;28H[?25h[?25l[62;104H0-27[23;27H[?25h[?25l[62;103H19-26[23;26H[?25h[?25l[62;104H8-25[23;25H[?25h[?25l[62;104H7-24[23;24H[?25h[?25l[62;104H6-23[23;23H[?25h[?25l[62;104H5-22[23;22H[?25h[?25l[62;104H4-21[23;21H[?25h[?25l[62;104H3-20[23;20H[?25h[?25l[62;104H2-19[23;19H[?25h[?25l[62;104H1-18[23;18H[?25h[?25l[62;104H0-17[23;17H[?25h[?25l[62;103H9-16 [23;16H[?25h[?25l[62;103H8-15[23;15H[?25h[?25l[62;103H7-14[23;14H[?25h[?25l[62;103H6-13[23;13H[?25h[?25l*    current_command;[62;103H7-14[23;14H[?25h[?25l*    current_command;[62;103H8-15[23;15H[?25h[?25l[62;101H4[24;15H[?25h[?25l[25;14H[46m()[m[62;101H5[25;15H[?25h[?25l()[62;101H6,1   [26;1H[?25h[?25l[27;15H[46m([45C)[m[62;101H7,8-15[27;15H[?25h[?25l([45C)[62;101H8,2-9 [28;9H[?25h[?25l[62;101H9,1  [29;1H[?25h[?25l[62;100H30,2-9[30;9H[?25h[?25l[62;101H1[31;9H[?25h[?25l[62;101H2[32;9H[?25h[?25l[62;101H3,1  [33;1H[?25h[?25l[62;101H4[34;1H[?25h[?25l[62;101H3[33;1H[?25h[?25l[62;101H2,2-9[32;9H[?25h[?25l[62;101H1[31;9H[?25h[?25l[62;103H3-17[31;17H[?25h[?25l[62;103H4-25[31;25H[?25h[?25l[62;103H5-26[31;26H[?25h[?25l[62;103H6-27[31;27H[?25h[?25l[62;103H7-28[31;28H[?25h[?25l[62;103H8-29[31;29H[?25h[?25l[62;103H9-30[31;30H[?25h[?25l[62;103H10-31[31;31H[?25h[?25l[62;104H1-32[31;32H[?25h[?25l[62;104H2-33[31;33H[?25h[?25l[62;104H3-34[31;34H[?25h[?25l[62;104H4-35[31;35H[?25h[?25l[62;104H5-36[31;36H[?25h[?25l[62;104H6-37[31;37H[?25h[?25l[62;104H7-38[31;38H[?25h[?25l[62;104H8-39[31;39H[?25h[?25l[62;104H9-40[31;40H[?25h[?25l[62;103H20-41[31;41H[?25h[?25l[62;104H1-42[31;42H[?25h[?25l[62;104H2-43[31;43H[?25h[?25l[62;104H3-44[31;44H[?25h[?25l[62;104H4-45[31;45H[?25h[?25l[62;104H5-46[31;46H[?25h[?25l[62;104H6-47[31;47H[?25h[?25l[62;104H7-48[31;48H[?25h[?25l[62;104H8-49[31;49H[?25h[?25l[62;104H9-50[31;50H[?25h[?25l[62;103H30-51[31;51H[?25h[?25l;[62;104H1-52[31;52H[?25h[?25l[30;37H[1m[37m[46m{[32;17H}[m[62;101H2,4-18 [32;18H[?25h[?25l[30;37H[1m[37m[41m{[32;17H}[m[62;101H3,1   [33;1H[?25h[?25l[62;103H2-9[33;9H[?25h[?25l[62;103H3-17[33;17H[?25h[?25l[33;61r[61;1H
[1;62r[61;1H[34m~                                                                                                                    [m[62;100H[K[62;100H33,3-17[7CAll[33;17H[?25h[?25l[33;61r[61;1H
[1;62r[33;17H                [33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  )[1m[37m[41m{[m[61;1H[34m~                                                                                                                    [m[62;100H[K[62;100H33,3-17[7CAll[33;17H[?25h[?25l[8C[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  )[1m[37m[41m{[m[33;72H[K[33;17H[?25h[?25l[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  )[1m[37m[41m{[m[33;64H[K[33;17H[?25h[?25lf ( (arglist = splitline(cmdline)) != [33mNUL[m[1C  )[1m[37m[41m{[m[33;63H[K[33;17H[?25h[?25l ( (arglist = splitline(cmdline)) != [33mNUL[m[1C  )[1m[37m[41m{[m[33;62H[K[33;17H[?25h[?25l( (arglist = splitline(cmdline)) != [33mNUL[m[1C  )[1m[37m[41m{[m[33;61H[K[33;17H[46m([41C)[33;17H[?25h[?25lu[m( (arglist = splitline(cmdline)) != [33mNULL[m [46m [m)[1m[37m[41m{[m[33;17Hu[46m([m[40C [46m)[m[62;103H4-18[33;18H[?25h[62;1H[K[33;17H[?25lu([41C)[62;100H33,3-17[7CAll[33;17H[?25h[?25l[62;1H2 more lines; before #17  7 seconds ago[62;100H[K[34;61r[34;1H[2L[1;62r[33;17H[K[35;17H[33mif[m ( (arglist = splitline(cmdline)) != [33mNULL[m  )[1m[37m[41m{[m[62;1H[K[62;100H33,0-1[8CAll2 more lines; before #17  7 seconds ago[62;100H[K[62;100H33,0-1[8CAll[33;1H[?25h[?25l[62;1H1 change; before #16  20 seconds ago[62;37H[K[31;51H[K[62;100H31,29-50      All[62;100H[K[62;100H31,29-50      All[31;50H[?25h[?25l[30;37H[1m[37m[46m{[32;17H}[m[62;101H2,3-17 [32;17H[?25h[?25l[30;37H[1m[37m[41m{[32;17H}[m[62;101H3,0-1 [33;1H[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H33,1[10CAll[33;1H[?25h[?25l[62;103H2-9[33;9H[?25h[?25l[62;103H3-17[33;17H[?25h[?25l[62;103H4-25[33;25H[?25h[?25l[62;103H1   [33;1H[?25h[?25l[62;103H2-9[33;9H[?25h[?25l[62;103H3-17[33;17H[?25h[?25lw[62;103H4-18[33;18H[?25h[?25lh[62;103H5-19[33;19H[?25h[?25li[62;103H6-20[33;20H[?25h[?25ll[62;103H7-21[33;21H[?25h[?25l[33mwhile[m[62;103H8-22[33;22H[?25h[?25l([62;103H9-23[33;23H[?25h[?25l*[62;103H10-24[33;24H[?25h[?25lc[62;104H1-25[33;25H[?25h[?25lu[62;104H2-26[33;26H[?25h[?25lr[62;104H3-27[33;27H[?25h[?25lr[62;104H4-28[33;28H[?25h[?25le[62;104H5-29[33;29H[?25h[?25ln[62;104H6-30[33;30H[?25h[?25lt[62;104H7-31[33;31H[?25h[?25l_[62;104H8-32[33;32H[?25h[?25lc[62;104H9-33[33;33H[?25h[?25lo[62;103H20-34[33;34H[?25h[?25lm[62;104H1-35[33;35H[?25h[?25lm[62;104H2-36[33;36H[?25h[?25la[62;104H3-37[33;37H[?25h[?25ln[62;104H4-38[33;38H[?25h[?25ld[62;104H5-39[33;39H[?25h[?25l[62;104H6-40[33;40H[?25h[?25l![62;104H7-41[33;41H[?25h[?25l=[62;104H8-42[33;42H[?25h[?25l[62;104H9-43[33;43H[?25h[?25lN[62;103H30-44[33;44H[?25h[?25lU[62;104H1-45[33;45H[?25h[?25lL[62;104H2-46[33;46H[?25h[?25l[33mNULL[m[62;104H3-47[33;47H[?25h[?25l)[33;22H[46m([24C)[m[62;104H4-48[33;48H[?25h[?25l[1m[37m[41m{[m[33;22H([24C)[1m[37m[46m{[m [40;9H[46m}[m[62;104H5-49[33;49H[?25h[?25l}[46m}[m[40;9H}[62;104H6-50[33;50H[?25h[?25l[34;61r[34;1H[L[1;62r[62;100H[K[62;100H34,1[10CAll[33;48H[1m[37m[41m{[m}
[?25h[?25l[62;101H3[33;1H[?25h[?25l[62;101H4[34;1H[?25h[?25l[62;101H3[33;1H[?25h[?25l[62;101H4[34;1H[?25h[?25li[62;103H2[34;2H[?25h[?25l[62;103H1[34;1H[?25h[?25l[62;103H2[34;2H[?25h[?25l [62;103H1[34;1H[?25h[?25l[33;61r[61;1H
[1;62r[33;17H[33mwhile[m(*current_command != [33mNULL[m)[1m[37m[41m{[m}[61;1H[34m~                                                                                                                    [m[62;100H[K[62;100H33,36-50      All[33;48H[1m[37m[46m{[m[46m}[?25h[?25l        [m[33;49H        [40;9H[46m}[m[62;104H5-49[33;49H[?25h[?25l[34;61r[34;1H[L[1;62r[40;9H[46m        [m[41;9H}[62;100H[K[62;100H34,1[10CAll[33;48H[1m[37m[41m{[m[40;9H        [34;1H[?25h[?25l[35;61r[35;1H[L[1;62r[62;100H[K[62;100H35,1[10CAll[35;1H[?25h[?25l[62;103H2-9[35;9H[?25h[?25l[62;103H3-17[35;17H[?25h[?25l[62;101H4,1   [34;1H[?25h[?25l[62;103H2-9[34;9H[?25h[?25l[62;103H3-17[34;17H[?25h[?25l[62;101H5[35;17H[?25h[?25l[1m[37m[41m}[m[33;48H[1m[37m[46m{[35;17H}[m [62;103H4-18[35;18H[?25h[?25l[33;48H[1m[37m[41m{[35;17H}[m [62;101H4,3-17[34;17H[?25h[?25l[62;103H4-25[34;25H[?25h[?25la[62;103H5-26[34;26H[?25h[?25lr[62;103H6-27[34;27H[?25h[?25lg[62;103H7-28[34;28H[?25h[?25ls[62;103H8-29[34;29H[?25h[?25l[34;28H[K[62;103H7-28[34;28H[?25h[?25l[34;27H[K[62;103H6-27[34;27H[?25h[?25l[34;26H[K[62;103H5-26[34;26H[?25h[?25l[34;25H[K[62;103H4-25[34;25H[?25h[?25l[62;101H3,11-25[33;25H[?25h[?25l[30;37H[1m[37m[46m{[32;17H}[m[62;101H2,4-18 [32;18H[?25h[?25l[30;37H[1m[37m[41m{[32;17H}[m[62;101H1,4-25[31;25H[?25h[?25l[62;101H0,11-25[30;25H[?25h[?25l[62;104H2-26[30;26H[?25h[?25l[62;104H3-27[30;27H[?25h[?25l != [33mNUL[m[1C)[1m[37m[41m{[m[30;37H[K[30;27H[?25h[?25l != [33mNUL[m[1C)[1m[37m[41m{[m[30;36H[K[62;104H2-26[30;26H[?25h[?25l != [33mNUL[m[1C)[1m[37m[41m{[m[30;35H[K[62;104H1-25[30;25H[?25h[?25l != [33mNUL[m[1C)[1m[37m[41m{[m[30;34H[K[62;104H0-24[30;24H[?25h[?25l != [33mNUL[m[1C)[1m[37m[41m{[m[30;33H[K[62;103H9-23 [30;23H[?25h[?25l != [33mNUL[m[1C)[1m[37m[41m{[m[30;32H[K[62;103H8-22[30;22H[?25h[?25l != [33mNUL[m[1C)[1m[37m[41m{[m[30;31H[K[62;103H7-21[30;21H[?25h[?25l != [33mNUL[m[1C)[1m[37m[41m{[m[30;30H[K[30;19H[46m([8C)[m[62;103H6-20[30;20H[?25h[?25la != [33mNU[m[1C[33m[46mL[m)[1m[37m[41m{[m[30;19H([8C[33mL[m[62;103H7-21[30;21H[?25h[?25lr != [33mNULL[m)[1m[37m[41m{[m[62;103H8-22[30;22H[?25h[?25lg != [33mNULL[m)[1m[37m[41m{[m[62;103H9-23[30;23H[?25h[?25ls != [33mNULL[m)[1m[37m[41m{[m[62;103H10-24[30;24H[?25h[?25ll != [33mNULL[m)[1m[37m[41m{[m[62;104H1-25[30;25H[?25h[?25li != [33mNULL[m)[1m[37m[41m{[m[62;104H2-26[30;26H[?25h[?25ls != [33mNULL[m)[1m[37m[41m{[m[62;104H3-27[30;27H[?25h[?25lt != [33mNULL[m)[1m[37m[41m{[m[62;104H4-28[30;28H[?25h[?25l[62;101H1,7-28 [31;28H[?25h[?25l[62;103H8-29[31;29H[?25h[?25l[62;103H9-30[31;30H[?25h[?25l[62;101H0,16-30[30;30H[?25h[?25l[62;100H29,1    [29;1H[?25h[?25l[62;101H8,16-30[28;30H[?25h[?25l[62;101H7,23[27;30H[?25h[?25l[62;101H8,16[28;30H[?25h[?25l[62;101H9,1    [29;1H[?25h[?25l[62;100H30,16-30[30;30H[?25h[?25l[62;101H1,9-30 [31;30H[?25h[?25l[62;103H10-31[31;31H[?25h[?25l[62;104H1-32[31;32H[?25h[?25l[62;104H2-33[31;33H[?25h[?25l[62;104H3-34[31;34H[?25h[?25l[62;104H4-35[31;35H[?25h[?25l[62;104H5-36[31;36H[?25h[?25l[62;104H6-37[31;37H[?25h[?25l[62;104H7-38[31;38H[?25h[?25l[62;104H8-39[31;39H[?25h[?25l[30;37H[1m[37m[46m{[32;17H}[m[62;101H0,24-38[30;38H[?25h[?25l[1m[37m[41m{[32;17H}[m[62;101H1,18-39[31;39H[?25h[?25l[62;104H9-40[31;40H[?25h[?25l[62;103H20-41[31;41H[?25h[?25l[62;104H1-42[31;42H[?25h[?25l[62;104H2-43[31;43H[?25h[?25lommands[31;50H[K[31;43H[?25h[?25lmmands[31;49H[K[31;43H[?25h[?25lmands[31;48H[K[31;43H[?25h[?25lands[31;47H[K[31;43H[?25h[?25lnds[31;46H[K[31;43H[?25h[?25lds[31;45H[K[31;43H[?25h[?25ls[31;44H[K[31;43H[?25h[?25l[31;43H[K[31;43H[?25h[?25la[62;104H3-44[31;44H[?25h[?25lr[62;104H4-45[31;45H[?25h[?25lg[62;104H5-46[31;46H[?25h[?25ll[62;104H6-47[31;47H[?25h[?25li[62;104H7-48[31;48H[?25h[?25ls[62;104H8-49[31;49H[?25h[?25lt[62;104H9-50[31;50H[?25h[?25l;[62;103H30-51[31;51H[?25h[?25l[30;37H[1m[37m[46m{[32;17H}[m[62;101H2,4-18 [32;18H[?25h[?25l[30;37H[1m[37m[41m{[32;17H}[m[33;48H[1m[37m[46m{[35;17H}[m [62;101H3,35-49[33;49H[?25h[?25l[1m[37m[41m{[35;17H}[m [62;101H4,4-25 [34;25H[?25h[?25l[33;48H[1m[37m[46m{[35;17H}[m [62;101H3,35-49[33;49H[?25h[?25l[30;37H[1m[37m[46m{[32;17H}[m[33;48H[1m[37m[41m{[35;17H}[m [62;101H2,4-18 [32;18H[?25h[?25l[30;37H[1m[37m[41m{[32;17H}[m[62;101H1,30-51[31;51H[?25h[?25l[30;37H[1m[37m[46m{[32;17H}[m[62;101H0,24-38[30;38H[?25h[?25l[1m[37m[41m{[32;17H}[m[62;100H29,1    [29;1H[?25h[?25l[62;101H8,33-47[28;47H[?25h[?25l[27;17H[46m([33C)[m[62;101H7,44-51[27;51H[?25h[?25l[27;17H([33C)[62;101H6,1    [26;1H[?25h[?25l[62;101H5,10-17[25;17H[?25h[?25l[62;101H4,22-29[24;29H[?25h[?25l[62;101H3,28-35[23;35H[?25h[?25li[62;104H9-36[23;36H[?25h[?25l[23;35H[K[62;104H8-35[23;35H[?25h[?25l[24;61r[24;1H[L[1;62r[62;100H[K[62;100H24,1[10CTop[24;1H[?25h[?25l[62;103H2-9[24;9H[?25h[?25lc[62;103H3-10[24;10H[?25h[?25lh[62;103H4-11[24;11H[?25h[?25la[62;103H5-12[24;12H[?25h[?25l[32mchar[m[62;103H6-13[24;13H[?25h[?25l*[62;103H7-14[24;14H[?25h[?25l*[62;103H8-15[24;15H[?25h[?25l[62;103H9-16[24;16H[?25h[?25la[62;103H10-17[24;17H[?25h[?25lr[62;104H1-18[24;18H[?25h[?25lt[62;104H2-19[24;19H[?25h[?25ls[62;104H3-20[24;20H[?25h[?25l[24;19H[K[62;104H2-19[24;19H[?25h[?25l[24;18H[K[62;104H1-18[24;18H[?25h[?25l[24;17H[K[62;104H0-17[24;17H[?25h[?25l[24;16H[K[62;103H9-16 [24;16H[?25h[?25l[62;103H10-17[24;17H[?25h[?25la[62;104H1-18[24;18H[?25h[?25lr[62;104H2-19[24;19H[?25h[?25lg[62;104H3-20[24;20H[?25h[?25ls[62;104H4-21[24;21H[?25h[?25l;[62;104H5-22[24;22H[?25h[?25l[62;101H3[23;22H[?25h[?25l[62;104H4-21[23;21H[?25h[?25l[62;104H3-20[23;20H[?25h[?25l[62;104H2-19[23;19H[?25h[?25lcurrent_command;[23;34H[K[62;104H1-18[23;18H[?25h[?25l\current_command;[62;104H2-19[23;19H[?25h[?25lcurrent_command;[23;34H[K[62;104H1-18[23;18H[?25h[?25lcurrent_command;[23;33H[K[62;104H0-17[23;17H[?25h[?25l[62;101H4[24;17H[?25h[?25l[62;101H5[25;17H[?25h[?25l[62;101H6[26;17H[?25h[?25l[62;101H7,1    [27;1H[?25h[?25l[28;17H[46m([33C)[m[62;101H8,10-17[28;17H[?25h[?25l([33C)[62;101H9,3-17 [29;17H[?25h[?25l[62;100H30,1   [30;1H[?25h[?25l[62;101H1,3-17[31;17H[?25h[?25l[62;101H2[32;17H[?25h[?25l[31;37H[1m[37m[46m{[33;17H}[m[62;101H3[33;17H[?25h[?25l[31;37H[1m[37m[41m{[33;17H}[m[62;101H4[34;17H[?25h[?25l[62;101H5[35;17H[?25h[?25l[34;48H[1m[37m[46m{[36;17H}[m [62;101H6[36;17H[?25h[?25l[34;48H[1m[37m[41m{[36;17H}[m [62;101H7,1   [37;1H[?25h[?25l[62;101H8,3-17[38;17H[?25h[?25l[62;101H9[39;17H[?25h[?25l[62;100H40[40;17H[?25h[?25l[38;63H[1m[37m[46m{[41;17H}[m[62;101H1[41;17H[?25h[?25l[38;63H[1m[37m[41m{[41;17H}[m[62;101H2[42;17H[?25h[?25l[28;62H[46m{[43;9H}[m[62;101H3,3-10[43;10H[?25h[?25l[28;62H{[43;9H}[62;101H4,10-17[44;17H[?25h[?25l[19;1H[46m{[45;1H}[m[62;101H5,2    [45;2H[?25h[?25l[19;1H{[45;1H}[62;101H6,1[46;1H[?25h[?25l[47;11H[46m()[m[62;101H7,13[47;13H[?25h[?25l()[62;101H6,1 [46;1H[?25h[?25l[19;1H[46m{[45;1H}[m[62;101H5,2[45;2H[?25h[?25l[19;1H{[45;1H}[62;101H4,10-17[44;17H[?25h[?25l[28;62H[46m{[43;9H}[m[62;101H3,3-10 [43;10H[?25h[?25l[28;62H{[43;9H}[62;101H2,3-17[42;17H[?25h[?25l[38;63H[1m[37m[46m{[41;17H}[m[62;101H1[41;17H[?25h[?25l[38;63H[1m[37m[41m{[41;17H}[m[62;101H0[40;17H[?25h[?25l[62;100H39[39;17H[?25h[?25l[62;101H8[38;17H[?25h[?25l[62;101H7,1   [37;1H[?25h[?25l[34;48H[1m[37m[46m{[36;17H}[m [62;101H6,3-17[36;17H[?25h[?25l[34;48H[1m[37m[41m{[36;17H}[m [62;101H5[35;17H[?25h[?25l[34;48H[1m[37m[46m{[36;17H}[m [62;101H6[36;17H[?25h[?25l[34;48H[1m[37m[41m{[36;17H}[m [62;101H7,1   [37;1H[?25h[?25l[62;101H8,3-17[38;17H[?25h[?25l[62;101H9[39;17H[?25h[?25l[62;100H40[40;17H[?25h[?25l[38;63H[1m[37m[46m{[41;17H}[m[62;101H1[41;17H[?25h[?25l[38;63H[1m[37m[41m{[41;17H}[m[62;101H0[40;17H[?25h[?25l[38;63H[1m[37m[46m{[41;17H}[m[62;101H1[41;17H[?25h[?25l[41;17H[K[43;9H[1m[37m[41m}[38;63H{[41;17H[?25h[?25l[41;61r[m[61;1H
[1;62r[41;17H                free(cmdline);[62;100H[K[62;100H41,3-17[7CAll[41;17H[?25h[?25l[8Cfree(cmdline);[41;39H[K[41;17H[?25h[?25lfree(cmdline);[41;31H[K[41;17H[?25h[?25l[62;101H0[40;17H[?25h[?25lfreelist(arglist);[40;35H[K[40;17H[?25h[?25l[62;100H39[39;17H[?25h[?25lresult = execute(arglist);[39;43H[K[39;17H[?25h[?25lesult = execute(arglist);[39;42H[K[39;17H[?25h[?25lsult = execute(arglist);[39;41H[K[39;17H[?25h[?25lult = execute(arglist);[39;40H[K[39;17H[?25h[?25llt = execute(arglist);[39;39H[K[39;17H[?25h[?25lt = execute(arglist);[39;38H[K[39;17H[?25h[?25l = execute(arglist);[39;37H[K[39;17H[?25h[?25l= execute(arglist);[39;36H[K[39;17H[?25h[?25l execute(arglist);[39;35H[K[39;17H[?25h[?25lexecute(arglist);[39;34H[K[39;17H[?25h[?25lxecute(arglist);[39;33H[K[39;17H[?25h[?25lecute(arglist);[39;32H[K[39;17H[?25h[?25lcute(arglist);[39;31H[K[39;17H[?25h[?25lute(arglist);[39;30H[K[39;17H[?25h[?25lte(arglist);[39;29H[K[39;17H[?25h[?25le(arglist);[39;28H[K[39;17H[?25h[?25l(arglist);[39;27H[K[39;17H[46m([7C)[39;17H[?25h[?25la[mrglist)[46m;[m[39;26H[K[39;17Ha[7C;[39;17H[?25h[?25lrglist);[39;25H[K[39;17H[?25h[?25lglist);[39;24H[K[39;17H[?25h[?25llist);[39;23H[K[39;17H[?25h[?25list);[39;22H[K[39;17H[?25h[?25lst);[39;21H[K[39;17H[?25h[?25lt);[39;20H[K[39;17H[?25h[?25l);[39;19H[K[29;17H[46m([39;17H)[?25h[?25l;[m[39;18H[K[29;17H([39;17H;[?25h[?25l[39;17H[K[39;17H[?25h[?25l[62;101H8[38;17H[?25h[?25lf ( (arglist = splitline(cmdline)) != [33mNUL[m[1C  )[1m[37m[41m{[m[38;63H[K[38;17H[?25h[?25l ( (arglist = splitline(cmdline)) != [33mNUL[m[1C  )[1m[37m[41m{[m[38;62H[K[38;17H[?25h[?25l( (arglist = splitline(cmdline)) != [33mNUL[m[1C  )[1m[37m[41m{[m[38;61H[K[38;17H[46m([41C)[38;17H[?25h[?25l [m(arglist = splitline(cmdline)) != [33mNUL[m[1C  )[46m{[m[38;60H[K[42;9H}[38;17H [41C{[38;17H[?25h[?25l(arglist = splitline(cmdline)) != [33mNUL[m[1C  ){[38;59H[K[38;17H[46m([28C)[38;17H[?25h[?25la[mrglist = splitline(cmdline))[46m [m!= [33mNUL[m[1C  [1m[37m[41m)[m{[38;58H[K[38;17Ha[28C [38;17H[?25h[?25lrglist = splitline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;57H[K[38;17H[?25h[?25lglist = splitline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;56H[K[38;17H[?25h[?25llist = splitline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;55H[K[38;17H[?25h[?25list = splitline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;54H[K[38;17H[?25h[?25lst = splitline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;53H[K[38;17H[?25h[?25lt = splitline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;52H[K[38;17H[?25h[?25l = splitline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;51H[K[38;17H[?25h[?25l= splitline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;50H[K[38;17H[?25h[?25l splitline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;49H[K[38;17H[?25h[?25lsplitline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;48H[K[38;17H[?25h[?25lplitline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;47H[K[38;17H[?25h[?25llitline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;46H[K[38;17H[?25h[?25litline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;45H[K[38;17H[?25h[?25ltline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;44H[K[38;17H[?25h[?25lline(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;43H[K[38;17H[?25h[?25line(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;42H[K[38;17H[?25h[?25lne(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;41H[K[38;17H[?25h[?25le(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;40H[K[38;17H[?25h[?25l(cmdline)) != [33mNUL[m[1C  [1m[37m[41m)[m{[38;39H[K[38;17H[46m([7C)[38;17H[?25h[?25lc[mmdline)[1m[37m[46m)[m != [33mNUL[m[1C  [1m[37m[41m)[m{[38;38H[K[38;17Hc[7C[1m[37m[41m)[m [38;17H[?25h[?25lmdline)[1m[37m[41m)[m != [33mNUL[m[1C  [1m[37m[41m)[m{[38;37H[K[38;17H[?25h[?25ldline)[1m[37m[41m)[m != [33mNUL[m[1C  [1m[37m[41m)[m{[38;36H[K[38;17H[?25h[?25lline)[1m[37m[41m)[m != [33mNUL[m[1C  [1m[37m[41m)[m{[38;35H[K[38;17H[?25h[?25line)[1m[37m[41m)[m != [33mNUL[m[1C  [1m[37m[41m)[m{[38;34H[K[38;17H[?25h[?25lne)[1m[37m[41m)[m != [33mNUL[m[1C  [1m[37m[41m)[m{[38;33H[K[38;17H[?25h[?25le)[1m[37m[41m)[m != [33mNUL[m[1C  [1m[37m[41m)[m{[38;32H[K[38;17H[?25h[?25l)[1m[37m[41m)[m != [33mNUL[m[1C  [1m[37m[41m)[m{[38;31H[K[29;17H[46m([38;17H)[?25h[?25l[m[1C != [33mNUL[m[1C  [1m[37m[41m)[m{[38;30H[K[38;17H[?25h[?25l[46m [m!= [33mNUL[m[1C  ){[38;29H[K[29;17H([38;17H [?25h[?25l!= [33mNUL[m[1C  ){[38;28H[K[38;17H[?25h[?25l= [33mNUL[m[1C  ){[38;27H[K[38;17H[?25h[?25l [33mNUL[m[1C  ){[38;26H[K[38;17H[?25h[?25l[33mNUL[m[1C  ){[38;25H[K[38;17H[?25h[?25lULL  ){[38;24H[K[38;17H[?25h[?25lLL  ){[38;23H[K[38;17H[?25h[?25lL  ){[38;22H[K[38;17H[?25h[?25l  ){[38;21H[K[38;17H[?25h[?25l ){[38;20H[K[38;17H[?25h[?25l){[38;19H[K[29;17H[46m([38;17H)[?25h[?25l[m[1m[37m[46m{[m[38;18H[K[42;9H[1m[37m[41m}[m[29;17H([42;9H[1m[37m[46m}[38;17H[?25h[?25l[m[38;17H[K[42;9H[46m}[m}[38;17H[?25h[?25l[62;101H7,1   [37;1H[?25h[?25l[34;48H[1m[37m[46m{[36;17H}[m [62;101H6,3-17[36;17H[?25h[?25l[34;48H[1m[37m[41m{[36;17H}[m [62;101H5[35;17H[?25h[?25l[62;103H4-25[35;25H[?25h[?25la[62;103H5-26[35;26H[?25h[?25lr[62;103H6-27[35;27H[?25h[?25lg[62;103H7-28[35;28H[?25h[?25ls[62;103H8-29[35;29H[?25h[?25l[62;103H9-30[35;30H[?25h[?25l=[62;103H10-31[35;31H[?25h[?25l[62;104H1-32[35;32H[?25h[?25ls[62;104H2-33[35;33H[?25h[?25lp[62;104H3-34[35;34H[?25h[?25ll[62;104H4-35[35;35H[?25h[?25li[62;104H5-36[35;36H[?25h[?25lt[62;104H6-37[35;37H[?25h[?25ll[62;104H7-38[35;38H[?25h[?25li[62;104H8-39[35;39H[?25h[?25ln[62;104H9-40[35;40H[?25h[?25le[62;103H20-41[35;41H[?25h[?25l([62;104H1-42[35;42H[?25h[?25lc[62;104H2-43[35;43H[?25h[?25lu[62;104H3-44[35;44H[?25h[?25lr[62;104H4-45[35;45H[?25h[?25lr[62;104H5-46[35;46H[?25h[?25le[62;104H6-47[35;47H[?25h[?25ln[62;104H7-48[35;48H[?25h[?25lt[62;104H8-49[35;49H[?25h[?25l_[62;104H9-50[35;50H[?25h[?25lc[62;103H30-51[35;51H[?25h[?25lo[62;104H1-52[35;52H[?25h[?25lm[62;104H2-53[35;53H[?25h[?25lm[62;104H3-54[35;54H[?25h[?25la[62;104H4-55[35;55H[?25h[?25ln[62;104H5-56[35;56H[?25h[?25ld[62;104H6-57[35;57H[?25h[?25l[62;104H5-56[35;56H[?25h[?25l[62;104H4-55[35;55H[?25h[?25l[62;104H3-54[35;54H[?25h[?25l[62;104H2-53[35;53H[?25h[?25l[62;104H1-52[35;52H[?25h[?25l[62;104H0-51[35;51H[?25h[?25l[62;103H29-50[35;50H[?25h[?25l[62;104H8-49[35;49H[?25h[?25l[62;104H7-48[35;48H[?25h[?25l[62;104H6-47[35;47H[?25h[?25l[62;104H5-46[35;46H[?25h[?25l[62;104H4-45[35;45H[?25h[?25l[62;104H3-44[35;44H[?25h[?25l[62;104H2-43[35;43H[?25h[?25l[62;104H1-42[35;42H[?25h[?25l*current_command[62;104H2-43[35;43H[?25h[?25l[62;104H3-44[35;44H[?25h[?25l[62;104H4-45[35;45H[?25h[?25l[62;104H5-46[35;46H[?25h[?25l[62;104H6-47[35;47H[?25h[?25l[62;104H7-48[35;48H[?25h[?25l[62;104H8-49[35;49H[?25h[?25l[62;104H9-50[35;50H[?25h[?25l[62;103H30-51[35;51H[?25h[?25l[62;104H1-52[35;52H[?25h[?25l[62;104H2-53[35;53H[?25h[?25l[62;104H3-54[35;54H[?25h[?25l[62;104H4-55[35;55H[?25h[?25l[62;104H5-56[35;56H[?25h[?25l[62;104H6-57[35;57H[?25h[?25l[62;104H7-58[35;58H[?25h[?25l[62;104H8-65[35;65H[?25h[?25l[62;104H7-58[35;58H[?25h[?25l)[35;41H[46m([16C)[m[62;104H8-59[35;59H[?25h[?25l;[35;41H([16C)[62;104H9-60[35;60H[?25h[?25l[36;61r[36;1H[L[1;62r[62;100H[K[62;100H36,1[10CTop[36;1H[?25h[?25l[62;103H2-9[36;9H[?25h[?25l[62;103H3-17[36;17H[?25h[?25l[62;103H4-25[36;25H[?25h[?25lr[62;103H5-26[36;26H[?25h[?25le[62;103H6-27[36;27H[?25h[?25ls[62;103H7-28[36;28H[?25h[?25lt[62;103H8-29[36;29H[?25h[?25l [62;103H7-28[36;28H[?25h[?25lu[62;103H8-29[36;29H[?25h[?25ll[62;103H9-30[36;30H[?25h[?25lt[62;103H10-31[36;31H[?25h[?25l[62;104H1-32[36;32H[?25h[?25l=[62;104H2-33[36;33H[?25h[?25l[62;104H3-34[36;34H[?25h[?25le[62;104H4-35[36;35H[?25h[?25lx[62;104H5-36[36;36H[?25h[?25le[62;104H6-37[36;37H[?25h[?25lc[62;104H7-38[36;38H[?25h[?25lt[62;104H8-39[36;39H[?25h[?25l [62;104H7-38[36;38H[?25h[?25lu[62;104H8-39[36;39H[?25h[?25lt[62;104H9-40[36;40H[?25h[?25le[62;103H20-41[36;41H[?25h[?25l([62;104H1-42[36;42H[?25h[?25la[62;104H2-43[36;43H[?25h[?25lr[62;104H3-44[36;44H[?25h[?25lg[62;104H4-45[36;45H[?25h[?25ls[62;104H5-46[36;46H[?25h[?25l)[46m([margs[46m)[m[62;104H6-47[36;47H[?25h[?25l;[36;41H(args)[62;104H7-48[36;48H[?25h[?25l[37;61r[37;1H[L[1;62r[62;100H[K[62;100H37,1[10CTop[37;1H[?25h[?25l[62;103H2-9[37;9H[?25h[?25l[62;103H3-17[37;17H[?25h[?25l[62;103H4-25[37;25H[?25h[?25lf[62;103H5-26[37;26H[?25h[?25lr[62;103H6-27[37;27H[?25h[?25l [62;103H5-26[37;26H[?25h[?25l [62;103H4-25[37;25H[?25h[?25lf[62;103H5-26[37;26H[?25h[?25lr[62;103H6-27[37;27H[?25h[?25le[62;103H7-28[37;28H[?25h[?25le[62;103H8-29[37;29H[?25h[?25ll[62;103H9-30[37;30H[?25h[?25li[62;103H10-31[37;31H[?25h[?25ls[62;104H1-32[37;32H[?25h[?25lt[62;104H2-33[37;33H[?25h[?25l([62;104H3-34[37;34H[?25h[?25la[62;104H4-35[37;35H[?25h[?25lr[62;104H5-36[37;36H[?25h[?25lg[62;104H6-37[37;37H[?25h[?25ls[62;104H7-38[37;38H[?25h[?25l0[62;104H8-39[37;39H[?25h[?25l;[62;104H9-40[37;40H[?25h[?25l[38;61r[38;1H[L[1;62r[62;100H[K[62;100H38,1[10CTop[38;1H[?25h[?25l[62;101H7[37;1H[?25h[?25l[62;101H8[38;1H[?25h[?25l[37;61r[61;1H
[1;62r[37;25Hfreelist(args0;[61;1H}[62;100H[K[62;100H37,19-40      Top[37;40H[?25h[?25l [62;104H8-39[37;39H[?25h[?25l [62;104H7-38[37;38H[?25h[?25l)[46m([margs[46m)[m[62;104H8-39[37;39H[?25h[?25l;[37;33H(args)[62;104H9-40[37;40H[?25h[?25l[38;61r[38;1H[L[1;62r[62;100H[K[62;100H38,1[10CTop[38;1H[?25h[?25l[62;103H2-9[38;9H[?25h[?25l[62;103H3-17[38;17H[?25h[?25l[62;103H4-25[38;25H[?25h[?25l[62;103H5-33[38;33H[?25h[?25l[62;103H4-25[38;25H[?25h[?25lc[62;103H5-26[38;26H[?25h[?25lu[62;103H6-27[38;27H[?25h[?25lr[62;103H7-28[38;28H[?25h[?25lr[62;103H8-29[38;29H[?25h[?25le[62;103H9-30[38;30H[?25h[?25ln[62;103H10-31[38;31H[?25h[?25lt[62;104H1-32[38;32H[?25h[?25l_[62;104H2-33[38;33H[?25h[?25l [62;104H1-32[38;32H[?25h[?25l_[62;104H2-33[38;33H[?25h[?25lc[62;104H3-34[38;34H[?25h[?25lo[62;104H4-35[38;35H[?25h[?25lm[62;104H5-36[38;36H[?25h[?25lm[62;104H6-37[38;37H[?25h[?25la[62;104H7-38[38;38H[?25h[?25ln[62;104H8-39[38;39H[?25h[?25ld[62;104H9-40[38;40H[?25h[?25l+[62;103H20-41[38;41H[?25h[?25l+[62;104H1-42[38;42H[?25h[?25l;[62;104H2-43[38;43H[?25h[?25l[62;101H7,19-40[37;40H[?25h[?25l[62;101H6,22-43[36;43H[?25h[?25l[62;101H5[35;43H[?25h[?25l[62;101H4,29[34;43H[?25h[?25l[31;37H[1m[37m[46m{[33;17H}[m[62;101H3,4-18 [33;18H[?25h[?25l[31;37H[1m[37m[41m{[33;17H}[m[62;101H4,29-43[34;43H[?25h[?25l[31;37H[1m[37m[46m{[33;17H}[m[62;101H3,4-18 [33;18H[?25h[?25l[34;61r[34;1H[L[1;62r[62;100H[K[62;100H34,1[10CTop[31;37H[1m[37m[41m{[33;17H}
[?25h[?25l[m[62;103H2-9[34;9H[?25h[?25l[62;103H3-17[34;17H[?25h[?25l/[62;103H4-18[34;18H[?25h[?25l[36m//[m[62;103H5-19[34;19H[?25h[?25l[36mi[m[62;103H6-20[34;20H[?25h[?25l[36mt[m[62;103H7-21[34;21H[?25h[?25l[36me[m[62;103H8-22[34;22H[?25h[?25l[36mr[m[62;103H9-23[34;23H[?25h[?25l[36ma[m[62;103H10-24[34;24H[?25h[?25l[36mt[m[62;104H1-25[34;25H[?25h[?25l[36me[m[62;104H2-26[34;26H[?25h[?25l[36m [m[62;104H3-27[34;27H[?25h[?25l[36mo[m[62;104H4-28[34;28H[?25h[?25l[36mv[m[62;104H5-29[34;29H[?25h[?25l[36me[m[62;104H6-30[34;30H[?25h[?25l[36mr[m[62;104H7-31[34;31H[?25h[?25l[36m [m[62;104H8-32[34;32H[?25h[?25l[36mc[m[62;104H9-33[34;33H[?25h[?25l[36mu[m[62;103H20-34[34;34H[?25h[?25l[36mr[m[62;104H1-35[34;35H[?25h[?25l[36mr[m[62;104H2-36[34;36H[?25h[?25l[36me[m[62;104H3-37[34;37H[?25h[?25l[36mn[m[62;104H4-38[34;38H[?25h[?25l[36mt[m[62;104H5-39[34;39H[?25h[?25l[36m [m[62;104H6-40[34;40H[?25h[?25l[36mc[m[62;104H7-41[34;41H[?25h[?25l[36mo[m[62;104H8-42[34;42H[?25h[?25l[36mm[m[62;104H9-43[34;43H[?25h[?25l[36mm[m[62;103H30-44[34;44H[?25h[?25l[36ma[m[62;104H1-45[34;45H[?25h[?25l[36mn[m[62;104H2-46[34;46H[?25h[?25l[36md[m[62;104H3-47[34;47H[?25h[?25l[36m [m[62;104H4-48[34;48H[?25h[?25l[36mt[m[62;104H5-49[34;49H[?25h[?25l[36mo[m[62;104H6-50[34;50H[?25h[?25l[36m [m[62;104H7-51[34;51H[?25h[?25l[36me[m[62;104H8-52[34;52H[?25h[?25l[36mx[m[62;104H9-53[34;53H[?25h[?25l[36me[m[62;103H40-54[34;54H[?25h[?25l[36mc[m[62;104H1-55[34;55H[?25h[?25l[36mu[m[62;104H2-56[34;56H[?25h[?25l[36mt[m[62;104H3-57[34;57H[?25h[?25l[36me[m[62;104H4-58[34;58H[?25h[?25l[36m,[m[62;104H5-59[34;59H[?25h[?25l[36m [m[62;104H6-60[34;60H[?25h[?25l[36mp[m[62;104H7-61[34;61H[?25h[?25l[36mo[m[62;104H8-62[34;62H[?25h[?25l[36mi[m[62;104H9-63[34;63H[?25h[?25l[36mn[m[62;103H50-64[34;64H[?25h[?25l[36mt[m[62;104H1-65[34;65H[?25h[?25l[36mr[m[62;104H2-66[34;66H[?25h[?25l[36me[m[62;104H3-67[34;67H[?25h[?25l[34;66H[K[62;104H2-66[34;66H[?25h[?25l[34;65H[K[62;104H1-65[34;65H[?25h[?25l[36me[m[62;104H2-66[34;66H[?25h[?25l[36mr[m[62;104H3-67[34;67H[?25h[?25l[36m [m[62;104H4-68[34;68H[?25h[?25l[36ma[m[62;104H5-69[34;69H[?25h[?25l[36md[m[62;104H6-70[34;70H[?25h[?25l[36md[m[62;104H7-71[34;71H[?25h[?25l[36mi[m[62;104H8-72[34;72H[?25h[?25l[36mt[m[62;104H9-73[34;73H[?25h[?25l[36mi[m[62;103H60-74[34;74H[?25h[?25l[36mo[m[62;104H1-75[34;75H[?25h[?25l[36mn[m[62;104H2-76[34;76H[?25h[?25l[36m [m[62;104H3-77[34;77H[?25h[?25l[36mt[m[62;104H4-78[34;78H[?25h[?25l[36mo[m[62;104H5-79[34;79H[?25h[?25l[36m [m[62;104H6-80[34;80H[?25h[?25l[36mi[m[62;104H7-81[34;81H[?25h[?25l[36mt[m[62;104H8-82[34;82H[?25h[?25l[36me[m[62;104H9-83[34;83H[?25h[?25l[36mr[m[62;103H70-84[34;84H[?25h[?25l[36mt[m[62;104H1-85[34;85H[?25h[?25l[36mi[m[62;104H2-86[34;86H[?25h[?25l[36me[m[62;104H3-87[34;87H[?25h[?25l[34;86H[K[62;104H2-86[34;86H[?25h[?25l[36ma[m[62;104H3-87[34;87H[?25h[?25l[34;86H[K[62;104H2-86[34;86H[?25h[?25l[34;85H[K[62;104H1-85[34;85H[?25h[?25l[34;84H[K[62;104H0-84[34;84H[?25h[?25l[36ma[m[62;104H1-85[34;85H[?25h[?25l[36mt[m[62;104H2-86[34;86H[?25h[?25l[36me[m[62;104H3-87[34;87H[?25h[?25l[35;48H[1m[37m[46m{[40;17H}[m [62;101H5,35-49[35;49H[?25h[?25l[1m[37m[41m{[40;17H}[m [62;101H6,39-60[36;60H[?25h[?25l[62;101H7,27-48[37;48H[?25h[?25l[62;101H8,19-40[38;40H[?25h[?25l[62;101H9,23-49[39;49H[?25h[?25l[62;101H8,19-40[38;40H[?25h[?25l[62;101H7,27-48[37;48H[?25h[?25l[62;101H6,39-60[36;60H[?25h[?25l[35;48H[1m[37m[46m{[40;17H}[m [62;101H5,35-49[35;49H[?25h[?25l[1m[37m[41m{[40;17H}[m [62;101H4,73-87[34;87H[?25h[?25l[31;37H[1m[37m[46m{[33;17H}[m[62;101H3,4-18 [33;18H[?25h[?25l[31;37H[1m[37m[41m{[33;17H}[m[62;101H4,73-87[34;87H[?25h[?25l[35;48H[1m[37m[46m{[40;17H}[m [62;101H5,35-49[35;49H[?25h[?25l[1m[37m[41m{[40;17H}[m [62;101H6,39-60[36;60H[?25h[?25l[62;101H7,27-48[37;48H[?25h[?25l[62;101H8,19-40[38;40H[?25h[?25l[62;101H9,23-49[39;49H[?25h[?25l[62;100H40,7-41 [40;41H[?25h[?25l[62;101H1,1   [41;1H[?25h[?25l[62;101H2,3-17[42;17H[?25h[?25l[62;101H3[43;17H[?25h[?25l[62;101H4,21-35[44;35H[?25h[?25l[62;101H5,17-31[45;31H[?25h[?25l[28;62H[46m{[46;9H}[m[62;101H6,3-10 [46;10H[?25h[?25l[28;62H{[46;9H}[62;101H5,17-31[45;31H[?25h[?25l[62;101H4,21-35[44;35H[?25h[?25l[62;101H3,3-17 [43;17H[?25h[?25l[62;101H2[42;17H[?25h[?25l[62;101H1,1   [41;1H[?25h[?25l[62;101H0,7-41[40;41H[?25h[?25l[62;100H39,23-49[39;49H[?25h[?25l[62;104H2-43[39;43H[?25h[?25l[62;100H40,7-41 [40;41H[?25h[?25l[62;103H6-33[40;33H[?25h[?25l[62;103H5-25[40;25H[?25h[?25l[35;48H[1m[37m[46m{[40;17H}[m [62;103H4-18[40;18H[?25h[?25l[62;103H3-17[40;17H[?25h[?25l[62;103H4-18[40;18H[?25h[?25l[62;103H3-17[40;17H[?25h[?25l[35;48H[1m[37m[41m{[40;17H}[m [62;101H1,1   [41;1H[?25h[?25l[62;101H2,3-17[42;17H[?25h[?25l[62;101H3[43;17H[?25h[?25l[62;101H4[44;17H[?25h[?25l[62;101H5[45;17H[?25h[?25l[28;62H[46m{[46;9H}[m[62;101H6,3-10[46;10H[?25h[?25l[62;103H2-9 [46;9H[?25h[?25l[62;103H3-10[46;10H[?25h[?25l[62;103H2-9 [46;9H[?25h[?25l[28;62H{[46;9H}[62;101H7[47;9H[?25h[?25l[19;1H[46m{[48;1H}[m[62;101H8,2  [48;2H[?25h[?25l[19;1H{[48;1H}[62;101H7,2-9[47;9H[?25h[?25l[28;62H[46m{[46;9H}[m[62;101H6[46;9H[?25h[?25l[28;62H{[46;9H}[62;101H5[45;9H[?25h[?25l[62;101H4[44;9H[?25h[?25l[62;101H3[43;9H[?25h[?25l[62;101H2[42;9H[?25h[?25l[62;101H1,1  [41;1H[?25h[?25l[62;101H0,2-9[40;9H[?25h[?25l[35;48H[1m[37m[46m{[40;17H}[m [62;103H3-17[40;17H[?25h[?25l[35;48H[1m[37m[41m{[40;17H}[m [62;100H39[39;17H[?25h[?25l[62;101H8[38;17H[?25h[?25l[62;101H7[37;17H[?25h[?25l[62;101H6[36;17H[?25h[?25l[62;101H5[35;17H[?25h[?25l[62;101H4[34;17H[?25h[?25l[31;37H[1m[37m[46m{[33;17H}[m[62;101H3[33;17H[?25h[?25l[31;37H[1m[37m[41m{[33;17H}[m[62;101H4[34;17H[?25h[?25l[62;101H5[35;17H[?25h[?25l[62;101H6[36;17H[?25h[?25l[62;101H7[37;17H[?25h[?25l[62;101H8[38;17H[?25h[?25l[62;101H9[39;17H[?25h[?25l[35;48H[1m[37m[46m{[40;17H}[m [62;100H40[40;17H[?25h[?25l[35;48H[1m[37m[41m{[40;17H}[m [62;101H1,1   [41;1H[?25h[?25l[62;101H2,3-17[42;17H[?25h[?25l[62;101H3[43;17H[?25h[?25l[62;101H4[44;17H[?25h[?25l[62;101H5[45;17H[?25h[?25l[28;62H[46m{[46;9H}[m[62;101H6,3-10[46;10H[?25h[?25l[28;62H{[46;9H}[62;101H7,10-17[47;17H[?25h[?25l[19;1H[46m{[48;1H}[m[62;101H8,2    [48;2H[?25h[?25l[19;1H{[48;1H}[62;101H9,1[49;1H[?25h[?25l[50;11H[46m()[m[62;100H50,13[50;13H[?25h[?25l()[62;100H49,1 [49;1H[?25h[?25l[19;1H[46m{[48;1H}[m[62;101H8,2[48;2H[?25h[?25l[19;1H{[48;1H}[62;101H7,10-17[47;17H[?25h[?25l[28;62H[46m{[46;9H}[m[62;101H6,3-10 [46;10H[?25h[?25l[28;62H{[46;9H}[62;101H5,3-17[45;17H[?25h[?25l[62;101H4[44;17H[?25h[?25l[62;101H3[43;17H[?25h[?25l[62;101H2[42;17H[?25h[?25l[62;101H1,1   [41;1H[?25h[?25l[35;48H[1m[37m[46m{[40;17H}[m [62;101H0,3-17[40;17H[?25h[?25l[35;48H[1m[37m[41m{[40;17H}[m [62;100H39[39;17H[?25h[?25l[62;101H8[38;17H[?25h[?25l[62;101H7[37;17H[?25h[?25l[62;101H6[36;17H[?25h[?25l[62;101H5[35;17H[?25h[?25l[62;101H4[34;17H[?25h[?25l[31;37H[1m[37m[46m{[33;17H}[m[62;101H3[33;17H[?25h[?25l[31;37H[1m[37m[41m{[33;17H}[m[62;101H2[32;17H[?25h[?25l[62;101H1[31;17H[?25h[?25l[62;101H0,1   [30;1H[?25h[?25l[62;100H29,3-17[29;17H[?25h[?25l[28;17H[46m([33C)[m[62;101H8,10-17[28;17H[?25h[?25l([33C)[62;101H7,1    [27;1H[?25h[?25l[62;101H6,10-17[26;17H[?25h[?25l[62;101H5[25;17H[?25h[?25l[62;101H4[24;17H[?25h[?25l[62;101H3[23;17H[?25h[?25l[62;101H2,7-17 [22;17H[?25h[?25l[62;101H1,6[21;17H[?25h[?25l[62;101H2,7[22;17H[?25h[?25l[62;101H3,10-17[23;17H[?25h[?25l[62;101H4[24;17H[?25h[?25l[62;101H5[25;17H[?25h[?25l[62;101H6[26;17H[?25h[?25l[62;101H7,1    [27;1H[?25h[?25l[28;17H[46m([33C)[m[62;101H8,10-17[28;17H[?25h[?25l[62;104H1-18[28;18H[?25h[?25l([33C)[62;104H2-19[28;19H[?25h[?25l[62;104H3-20[28;20H[?25h[?25l[62;104H4-21[28;21H[?25h[?25l[62;104H5-22[28;22H[?25h[?25l[62;104H6-23[28;23H[?25h[?25l[62;104H7-24[28;24H[?25h[?25l[62;104H8-25[28;25H[?25h[?25l[62;104H9-26[28;26H[?25h[?25l[62;103H20-27[28;27H[?25h[?25l[62;104H1-28[28;28H[?25h[?25l[62;104H2-29[28;29H[?25h[?25l[62;104H3-30[28;30H[?25h[?25l[62;104H4-31[28;31H[?25h[?25l[62;104H5-32[28;32H[?25h[?25l[62;104H6-33[28;33H[?25h[?25l[62;104H7-34[28;34H[?25h[?25l[62;104H8-35[28;35H[?25h[?25ld[46m([13C)[m[62;104H9-36[28;36H[?25h[?25l[62;103H30-37[28;37H[?25h[?25l([13C)[62;104H1-38[28;38H[?25h[?25l[62;104H2-39[28;39H[?25h[?25l[62;104H3-40[28;40H[?25h[?25l[62;104H4-41[28;41H[?25h[?25l[62;104H5-42[28;42H[?25h[?25l[62;104H6-43[28;43H[?25h[?25l[62;104H7-44[28;44H[?25h[?25l[62;104H8-45[28;45H[?25h[?25l[62;104H9-46[28;46H[?25h[?25l[62;103H40-47[28;47H[?25h[?25l[62;104H1-48[28;48H[?25h[?25l[62;104H2-49[28;49H[?25h[?25l[28;36H[46m([13C)[m[62;104H3-50[28;50H[?25h[?25l[28;17H[46m([m[18C([13C)[46m)[m[62;104H4-51[28;51H[?25h[?25l[62;104H5-52[28;52H[?25h[?25l[28;17H([33C)[62;104H6-53[28;53H[?25h[?25l[62;104H7-54[28;54H[?25h[?25l[62;104H8-55[28;55H[?25h[?25l[62;104H9-56[28;56H[?25h[?25l[62;101H9,33-47[29;47H[?25h[?25l[29;37H[46m([7C)[m[62;104H2-46[29;46H[?25h[?25l[62;104H1-45[29;45H[?25h[?25l[29;37H([7C)[62;104H0-44[29;44H[?25h[?25l[62;103H29-43[29;43H[?25h[?25l[62;104H8-42[29;42H[?25h[?25l[62;104H7-41[29;41H[?25h[?25l[62;104H6-40[29;40H[?25h[?25l[62;104H5-39[29;39H[?25h[?25l[46m([7C)[m[62;104H4-38[29;38H[?25h[?25l[62;104H3-37[29;37H[?25h[?25l([7C)[62;104H2-36[29;36H[?25h[?25l[62;104H1-35[29;35H[?25h[?25l[62;104H0-34[29;34H[?25h[?25l[62;103H19-33[29;33H[?25h[?25l[62;104H8-32[29;32H[?25h[?25l[62;104H7-31[29;31H[?25h[?25l[62;104H6-30[29;30H[?25h[?25l[62;104H5-29[29;29H[?25h[?25l[62;104H4-28[29;28H[?25h[?25l[62;104H3-27[29;27H[?25h[?25l[62;104H2-26[29;26H[?25h[?25l[62;104H1-25[29;25H[?25h[?25l[62;104H0-24[29;24H[?25h[?25l[62;103H9-23 [29;23H[?25h[?25l[62;103H8-22[29;22H[?25h[?25l[62;103H7-21[29;21H[?25h[?25l[62;103H6-20[29;20H[?25h[?25l[62;103H5-19[29;19H[?25h[?25l[62;103H4-18[29;18H[?25h[?25l[62;103H3-17[29;17H[?25h[?25larglist = splitline(cmdline);[29;46H[K[31;37H{[33;17H}[35;48H{[40;17H} [29;17H[?25h[62;1H[K[29;16H[?25l[62;100H29,2-16[7CTop[29;16H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 65L, 1161C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc -c split.c -o split.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc -c exeute.c [K[K[K[K[K[Kcute.c -o exev[K[K[K[K[K[K[K[K[K[K[K[K[K[Kc.c -o exec.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc smsh[K[K[Kmsh.c split.i[Ko exec.o -o test.o
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kmain[m[Kâ€™:
[01m[Ksmsh.c:31:6:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kargslist[m[Kâ€™ undeclared (first use in this function); did you mean â€˜[01m[Karglist[m[Kâ€™?
   if([01;31m[Kargslist[m[K != NULL){
      [01;31m[K^~~~~~~~[m[K
      [32m[Karglist[m[K
[01m[Ksmsh.c:31:6:[m[K [01;36m[Knote: [m[Keach undeclared identifier is reported only once for each function it appears in
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 65L, 1161C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m


[35m#define DFL_PROMPT      [m[33m"> "[m[18;1H[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[23;9H[32mchar[m**  current_command;[24;9H[32mchar[m**  args;[25;9Hprompt = DFL_PROMPT;[26;9Hsetup();[28;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[29;17Harglist = splitline(cmdline);[31;17H[33mif[m(argslist != [33mNULL[m){[32;25Hcurrent_command = arglist;[33;17H}[34;17H[36m//iterate over current command to execute, pointer addition to iterate[m[35;17H[33mwhile[m(*current_command != [33mNULL[m){[36;25Hargs = splitline(*current_command);[37;25Hresult = execute(args);[38;25Hfreelist(args);[39;25Hcurrent_command++;[40;17H}[44;17Hfreelist(arglist);[45;17Hfree(cmdline);[46;9H}[47;9H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[51;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[55;9H{[56;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[57;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[58;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n){[61;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,1  [14;1H[?25h[?25l[62;101H5,0-1[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l
[46m{[48;1H}[m[62;101H9[19;1H[?25h[?25l{[48;1H}[62;100H20,1-8[20;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7,0-1[27;1H[?25h[?25l[62;101H8,1-8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H9[39;8H[?25h[?25l[62;100H40[40;8H[?25h[?25l[62;101H1,0-1[41;1H[?25h[?25l[62;101H2,1-8[42;8H[?25h[?25l[62;101H3[43;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6[46;8H[?25h[?25l[62;101H7[47;8H[?25h[?25l[19;1H[46m{[48;1H}[m[62;101H8,1  [48;1H[?25h[?25l[19;1H{[48;1H}[62;101H9,0-1[49;1H[?25h[?25l[62;100H50,1  [50;1H[?25h[?25l[62;101H1,1-8[51;8H[?25h[?25l[62;101H2[52;8H[?25h[?25l[62;101H3[53;8H[?25h[?25l[62;101H4[54;8H[?25h[?25l[62;101H5[55;8H[?25h[?25l[62;101H6[56;8H[?25h[?25l[62;101H7[57;8H[?25h[?25l[62;101H8[58;8H[?25h[?25l[62;101H9,0-1[59;1H[?25h[?25l[62;100H60,1  [60;1H[?25h[?25l[62;101H1,1-8[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hexit(n);[62;1H[K[62;100H62,1-8[8C25%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[58;38H[46m{


}[m[62;100H[K[62;100H63,1[10C50%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[57;38H{


}[62;100H[K[62;100H64,0-1[8C75%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H65,0-1[8CBot[61;1H[?25h[?25l[62;101H4[60;1H[?25h[?25l[56;38H[46m{


}[m[62;101H3,1  [59;1H[?25h[?25l[56;38H{


}[62;101H2,1-8[58;8H[?25h[?25l[62;101H1[57;8H[?25h[?25l[62;101H0,1  [56;1H[?25h[?25l[62;100H59,0-1[55;1H[?25h[?25l[62;101H8,1-8[54;8H[?25h[?25l[62;101H7[53;8H[?25h[?25l[62;101H6[52;8H[?25h[?25l[62;101H5[51;8H[?25h[?25l[62;101H4[50;8H[?25h[?25l[62;101H3[49;8H[?25h[?25l[62;101H2[48;8H[?25h[?25l[62;101H1[47;8H[?25h[?25l[62;101H0,1  [46;1H[?25h[?25l[62;100H49,0-1[45;1H[?25h[?25l[15;1H[46m{[44;1H}[m[62;101H8,1  [44;1H[?25h[?25l[15;1H{[44;1H}[62;101H7,1-8[43;8H[?25h[?25l[62;101H6[42;8H[?25h[?25l[62;101H5[41;8H[?25h[?25l[62;101H4[40;8H[?25h[?25l[62;101H3[39;8H[?25h[?25l[62;101H2[38;8H[?25h[?25l[62;101H1,0-1[37;1H[?25h[?25l[62;101H0,1-8[36;8H[?25h[?25l[62;100H39[35;8H[?25h[?25l[62;101H8[34;8H[?25h[?25l[62;101H7[33;8H[?25h[?25l[62;101H6[32;8H[?25h[?25l[62;101H5[31;8H[?25h[?25l[62;101H4[30;8H[?25h[?25l[62;101H3[29;8H[?25h[?25l[62;101H2[28;8H[?25h[?25l[62;101H1[27;8H[?25h[?25l[62;101H0,0-1[26;1H[?25h[?25l[62;100H29,1-8[25;8H[?25h[?25l[62;101H8[24;8H[?25h[?25l[62;101H7,0-1[23;1H[?25h[?25l[62;101H6,1-8[22;8H[?25h[?25l[62;101H5[21;8H[?25h[?25l[62;101H4[20;8H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hs[?25l[?25he[?25l[?25ht[?25l[?25h[?25l [?25hn[?25l[?25h...[?25lrformats[?25h[?25l[62;14H[K[62;14H[?25h[?25l[62;13H[K[62;13H[?25ht[?25l[?25hs[?25l[?25h[?25l[62;1H[K[62;1H  nrformats=bin,octal,hex[74C24,1-8[8CBot[20;8H[?25h[?25l[62;3H[K[62;1H:[?2004h[?25hs[?25l[?25he[?25l[?25ht[?25l[?25h[?25l [?25hu[?25l[?25h[?25l[62;6H[K[62;6H[?25hb[?25l[?25hu[?25l[?25hm[?25l[?25h[?25l[62;8H[K[62;8H[?25h[?25l[62;7H[K[62;7H[?25h[?25l[62;6H[K[62;6H[?25hn[?25l[?25hu[?25l[?25hm[?25l[?25hb[?25l[?25he[?25l[?25hr[?25l[?25h[?25l[1;1H[33m  5 [m[36m **/[m
[33m  6 
  7 [m[35m#include [m[33m<stdio.h>[m
[33m  8 [m[35m#include [m[33m<stdlib.h>[m
[33m  9 [m[35m#include [m[33m<unistd.h>[m
[33m 10 [m[35m#include [m[33m<signal.h>[m
[33m 11 [m[35m#include [m[33m"smsh.h"[m
[33m 12 
 13 
 14 [m[35m#define DFL_PROMPT      [m[33m"> "[m
[33m 15 
 16 
 17 
 18 [m[32mint[m main()
[33m 19 [m{
[33m 20 [m        [32mchar[m    *cmdline, *prompt, **arglist;
[33m 21 [m        [32mint[m     result;
[33m 22 [m        [32mvoid[m    setup();
[33m 23 [m        [32mchar[m**  current_command;
[33m 24 [m        [32mchar[m**  args;
[33m 25 [m        prompt = DFL_PROMPT;
[33m 26 [m        setup();
[33m 27 
 28 [m        [33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){
[33m 29 [m[12C    arglist = splitline(cmdline);
[33m 30 
 31 [m[12C    [33mif[m(argslist != [33mNULL[m){
[33m 32 [m[20C    current_command = arglist;
[33m 33 [m[12C    }
[33m 34 [m[12C    [36m//iterate over current command to execute, pointer addition to iterate[m
[33m 35 [m[12C    [33mwhile[m(*current_command != [33mNULL[m){
[33m 36 [m[20C    args = splitline(*current_command);
[33m 37 [m[20C    result = execute(args);
[33m 38 [m[20C    freelist(args);
[33m 39 [m[20C    current_command++;
[33m 40 [m[12C    }
[33m 41 
 42 
 43 
 44 [m[12C    freelist(arglist);
[33m 45 [m[12C    free(cmdline);
[33m 46 [m        }
[33m 47 [m        [1C[33meturn[m [33m0[m;
[33m 48 [m}
[33m 49 
 50 [m[32mvoid[m setup()
[33m 51 [m        [36m/*[m
[33m 52 [m[5C[36m    * purpose: initialize shell[m
[33m 53 [m[5C[36m    * returns: nothing. calls fatal() if trouble[m
[33m 54 [m[5C[36m    */[m
[33m 55 [m        {
[33m 56 [m        signal([33mSIGINT[m,  [33mSIG_IGN[m);
[33m 57 [m        signal([33mSIGQUIT[m, [33mSIG_IGN[m);
[33m 58 [m        }
[33m 59 
 60 [m[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n){
[33m 61 [m        fprintf([33mstder[m[1C,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);
[33m 62 [m        exit(n);
[33m 63 [m}
[33m 64 
 65 [m[62;100H24,1-8[8CBot[20;12H[?25h[?25l[62;101H5[21;12H[?25h[?25l[62;101H6[22;12H[?25h[?25l[62;101H7,0-1[23;5H[?25h[?25l[62;101H8,1-8[24;12H[?25h[?25l[62;101H9[25;12H[?25h[?25l[62;100H30,0-1[26;5H[?25h[?25l[62;101H1,1-8[27;12H[?25h[?25l[62;103H2-16[27;20H[?25h[?25l[62;103H3-17[27;21H[?25h[?25l[62;103H4-18[27;22H[?25h[?25l[1C[46m([16C)[m[62;103H5-19[27;23H[?25h[?25l([16C)[62;103H6-20[27;24H[?25h[?25l[62;103H7-21[27;25H[?25h[?25l[62;103H8-22[27;26H[?25h[?25l[62;103H9-23[27;27H[?25h[?25l[62;103H10-24[27;28H[?25h[?25l[62;104H1-25[27;29H[?25h[?25l[62;104H0-24[27;28H[?25h[?25l[62;103H9-23 [27;27H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H31,9-23[7CBot[27;27H[?25h[?25llist != [33mNUL[m[1C){[27;41H[K[27;27H[?25h[62;1H[K[27;26H[?25l[62;100H31,8-22[7CBot[27;26H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 65L, 1160C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.cgcc smsh.c split.o exec.o -o test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./test.o
Segmentation fault
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ e[Kvi sh[Kmsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 65L, 1160C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m


[35m#define DFL_PROMPT      [m[33m"> "[m[18;1H[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[23;9H[32mchar[m**  current_command;[24;9H[32mchar[m**  args;[25;9Hprompt = DFL_PROMPT;[26;9Hsetup();[28;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[29;17Harglist = splitline(cmdline);[31;17H[33mif[m(arglist != [33mNULL[m){[32;25Hcurrent_command = arglist;[33;17H}[34;17H[36m//iterate over current command to execute, pointer addition to iterate[m[35;17H[33mwhile[m(*current_command != [33mNULL[m){[36;25Hargs = splitline(*current_command);[37;25Hresult = execute(args);[38;25Hfreelist(args);[39;25Hcurrent_command++;[40;17H}[44;17Hfreelist(arglist);[45;17Hfree(cmdline);[46;9H}[47;9H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[51;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[55;9H{[56;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[57;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[58;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n){[61;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,1  [14;1H[?25h[?25l[62;101H5,0-1[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l
[46m{[48;1H}[m[62;101H9[19;1H[?25h[?25l{[48;1H}[62;100H20,1-8[20;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7,0-1[27;1H[?25h[?25l[62;101H8,1-8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[36;61r[61;1H
[1;62r[61;9Hexit(n);[62;1H[K[62;100H36,4-25[7CTop[36;25H[?25h[?25l[62;101H7[37;25H[?25h[?25l[62;101H8[38;25H[?25h[?25l[35;61r[61;1H
[1;62r[35;17H[33mwhile[m(*current_command != [33mNULL[m)[46m{[m[36;25Hresult = execute(args);[37;25Hfreelist(args);[37;40H[K[38;17H[46m}[m[61;1H}[62;100H[K[62;100H38,3-17[7CTop[38;17H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 63L, 1098C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c[1P./test.ogcc smsh.c split.o exec.o -o test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./e[Ktest.o
Segmentation fault
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./test.o
Segmentation fault
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./test.ogcc smsh.c split.o exec.o -o test.o -Wall
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kmain[m[Kâ€™:
[01m[Ksmsh.c:21:6:[m[K [01;35m[Kwarning: [m[Kvariable â€˜[01m[Kresult[m[Kâ€™ set but not used [[01;35m[K-Wunused-but-set-variable[m[K]
  int [01;35m[Kresult[m[K;
      [01;35m[K^~~~~~[m[K
[01m[Ksmsh.c:36:13:[m[K [01;35m[Kwarning: [m[Kâ€˜[01m[Kargs[m[Kâ€™ may be used uninitialized in this function [[01;35m[K-Wmaybe-uninitialized[m[K]
    result = [01;35m[Kexecute(args)[m[K;
             [01;35m[K^~~~~~~~~~~~~[m[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 63L, 1098C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m


[35m#define DFL_PROMPT      [m[33m"> "[m[18;1H[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[23;9H[32mchar[m**  current_command;[24;9H[32mchar[m**  args;[25;9Hprompt = DFL_PROMPT;[26;9Hsetup();[28;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[29;17Harglist = splitline(cmdline);[31;17H[33mif[m(arglist != [33mNULL[m){[32;25Hcurrent_command = arglist;[33;17H}[34;17H[36m//iterate over current command to execute, pointer addition to iterate[m[35;17H[33mwhile[m(*current_command != [33mNULL[m){[36;25Hresult = execute(args);[37;25Hfreelist(args);[38;17H}[42;17Hfreelist(arglist);[43;17Hfree(cmdline);[44;9H}[45;9H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[49;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[53;9H{[54;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[55;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[56;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n){[59;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[60;9Hexit(n);
}[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,1  [14;1H[?25h[?25l[62;101H5,0-1[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l
[46m{[46;1H}[m[62;101H9[19;1H[?25h[?25l{[46;1H}[62;100H20,1-8[20;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7,0-1[27;1H[?25h[?25l[62;101H8,1-8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H0,0-1[30;1H[?25h[?25l[62;100H29,1-8[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H0,0-1[30;1H[?25h[?25l[62;100H29,1-8[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;101H1,1-8[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8[38;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;103H2-16[37;16H[?25h[?25l[62;101H6[36;16H[?25h[?25l[62;103H3-24[36;24H[?25h[?25l[62;103H4-25[36;25H[?25h[?25l[62;103H5-26[36;26H[?25h[?25l[62;103H6-27[36;27H[?25h[?25l[62;103H7-28[36;28H[?25h[?25l[62;103H8-29[36;29H[?25h[?25l[62;103H9-30[36;30H[?25h[?25l[62;103H10-31[36;31H[?25h[?25l[62;104H1-32[36;32H[?25h[?25l[62;104H2-33[36;33H[?25h[?25l[62;104H3-34[36;34H[?25h[?25l[62;104H4-35[36;35H[?25h[?25l[62;104H5-36[36;36H[?25h[?25l[62;104H6-37[36;37H[?25h[?25l[62;104H7-38[36;38H[?25h[?25l[62;104H8-39[36;39H[?25h[?25l[62;104H9-40[36;40H[?25h[?25le[46m([margs[46m)[m[62;103H20-41[36;41H[?25h[?25l(args)[62;104H1-42[36;42H[?25h[?25lrgs);[36;47H[K[36;42H[?25h[?25lgs);[36;46H[K[36;42H[?25h[?25ls);[36;45H[K[36;42H[?25h[?25l[46m()[m;[36;44H[K[36;42H[?25h[?25l(r[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H36,21-42      Top[36;42H[?25h[62;1H[K[36;41H[?25l[62;100H36,20-41      Top[36;41H[?25h[?25l[62;1H1 change; before #5  6 seconds ago[62;100H[K[36;41H[46m()[m[62;100H36,21-42      Top[62;100H[K[62;100H36,21-42      Top[36;42H[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H36,21-42      Top[36;42H[?25h[?25l[62;104H2-43[36;43H[?25h[?25l[62;104H1-42[36;42H[?25h[?25l[62;104H2-43[36;43H[?25h[?25l[62;104H1-42[36;42H[?25h[?25l[46mc[m);c[46m)[m[62;104H2-43[36;43H[?25h[?25l[46mu[m);u[46m)[m[62;104H3-44[36;44H[?25h[?25l[46mr[m);r[46m)[m[62;104H4-45[36;45H[?25h[?25l[46mr[m);r[46m)[m[62;104H5-46[36;46H[?25h[?25l[46me[m);e[46m)[m[62;104H6-47[36;47H[?25h[?25l[46mn[m);n[46m)[m[62;104H7-48[36;48H[?25h[?25l[46mt[m);t[46m)[m[62;104H8-49[36;49H[?25h[?25l[46m_[m);_[46m)[m[62;104H9-50[36;50H[?25h[?25l[46mc[m);c[46m)[m[62;103H30-51[36;51H[?25h[?25l[46mo[m);o[46m)[m[62;104H1-52[36;52H[?25h[?25l[46mm[m);m[46m)[m[62;104H2-53[36;53H[?25h[?25l[46mm[m);m[46m)[m[62;104H3-54[36;54H[?25h[?25l[46ma[m);a[46m)[m[62;104H4-55[36;55H[?25h[?25l[46mn[m);n[46m)[m[62;104H5-56[36;56H[?25h[?25l[46md[m);d[46m)[m[62;104H6-57[36;57H[?25h[?25l[36;41H([15C)[62;101H7,19-40[37;40H[?25h[?25l[37;33H[46m([margs[46m)[m[62;104H8-39[37;39H[?25h[?25l[62;104H7-38[37;38H[?25h[?25l(args)[62;104H6-37[37;37H[?25h[?25ls);[37;39H[K[62;104H5-36[37;36H[?25h[?25ls);[37;38H[K[62;104H4-35[37;35H[?25h[?25ls);[37;37H[K[37;33H[46m([ms[46m)[m[62;104H3-34[37;34H[?25h[?25l)[46m;[m[37;36H[K[37;34H[46m)[m;[?25h[?25l[46mc[m);c[46m)[m[62;104H4-35[37;35H[?25h[?25l[46mu[m);u[46m)[m[62;104H5-36[37;36H[?25h[?25l[46mr[m);r[46m)[m[62;104H6-37[37;37H[?25h[?25l[46mr[m);r[46m)[m[62;104H7-38[37;38H[?25h[?25l[46me[m);e[46m)[m[62;104H8-39[37;39H[?25h[?25l[46mn[m);n[46m)[m[62;104H9-40[37;40H[?25h[?25l[46mt[m);t[46m)[m[62;103H20-41[37;41H[?25h[?25l[46m_[m);_[46m)[m[62;104H1-42[37;42H[?25h[?25l[46mc[m);c[46m)[m[62;104H2-43[37;43H[?25h[?25l[46mo[m);o[46m)[m[62;104H3-44[37;44H[?25h[?25l[46mm[m);m[46m)[m[62;104H4-45[37;45H[?25h[?25l[46mm[m);m[46m)[m[62;104H5-46[37;46H[?25h[?25l[46ma[m);a[46m)[m[62;104H6-47[37;47H[?25h[?25l[46mn[m);n[46m)[m[62;104H7-48[37;48H[?25h[?25l[46md[m);d[46m)[m[62;104H8-49[37;49H[?25h[62;1H[K[37;48H[?25l[37;33H([15C)[62;100H37,27-48      Top[37;48H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[62;3H[K[62;3H[?25h[?25l[62;2H[K[62;2H[?25hq[?25l[?25h[?25l[62;2H[K[62;2H[?25hw[?25l[?25h[?25l"smsh.c" 63L, 1120C written[72C37,27-48      Top[62;100H[K[62;100H37,27-48      Top[37;48H[?25h[?25l[62;101H6[36;48H[?25h[?25l[35;48H[46m{[38;17H}[m[62;101H5,34[35;48H[?25h[?25l{[38;17H}[62;101H4[34;48H[?25h[?25l[31;36H[46m{[33;17H}[m[62;101H3,3-17 [33;17H[?25h[?25l[31;36H{[33;17H}[62;101H2,27-48[32;48H[?25h[?25l[31;36H[46m{[33;17H}[m[62;101H1,22-36[31;36H[?25h[?25l{[33;17H}[62;101H0,0-1  [30;1H[?25h[?25l[62;100H29,31-45[29;45H[?25h[?25l[62;101H8,41-48[28;48H[?25h[?25l[62;101H7,0-1  [27;1H[?25h[?25l[62;101H6,9-16[26;16H[?25h[?25l[62;101H5,21-28[25;28H[?25h[?25l[62;101H4,14-21[24;21H[?25h[?25l[62;101H5,21-28[25;28H[?25h[?25l[62;101H4,14-21[24;21H[?25h[?25l[62;101H3,25-32[23;32H[?25h[?25l[62;101H4,14-21[24;21H[?25h[?25l[24;61r[61;1H
[1;62r[62;1H[K[62;100H24,2-9[8CTop[24;9H[?25h[?25l[62;101H5[25;9H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,2-9[27;9H[?25h[?25l[62;101H8,2-16[28;16H[?25h[?25l[62;101H9,0-1 [29;1H[?25h[?25l[62;100H30,2-16[30;16H[?25h[?25l[62;101H1[31;16H[?25h[?25l[62;101H2[32;16H[?25h[?25l[62;101H3[33;16H[?25h[?25l[62;101H4[34;16H[?25h[?25l[62;101H5[35;16H[?25h[?25l[62;101H6[36;16H[?25h[?25l[62;101H7[37;16H[?25h[?25l[62;101H8,0-1 [38;1H[?25h[?25l[62;101H9,2-16[39;16H[?25h[?25l[62;100H40[40;16H[?25h[?25l[62;101H1[41;16H[?25h[?25l[62;101H2[42;16H[?25h[?25l[27;62H[46m{[43;9H}[m[62;101H3,2-9 [43;9H[?25h[?25l[27;62H{[43;9H}[62;101H4[44;9H[?25h[?25l[19;1H[46m{[45;1H}[m[62;101H5,1  [45;1H[?25h[?25l[19;1H{[45;1H}[62;101H6,0-1[46;1H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 62L, 1105C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.cgcc smsh.c split.o exec.o -o test.o -Wall
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kmain[m[Kâ€™:
[01m[Ksmsh.c:21:6:[m[K [01;35m[Kwarning: [m[Kvariable â€˜[01m[Kresult[m[Kâ€™ set but not used [[01;35m[K-Wunused-but-set-variable[m[K]
  int [01;35m[Kresult[m[K;
      [01;35m[K^~~~~~[m[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./test.o
Segmentation fault
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi shs[K[Kmsjh[K[Kh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 62L, 1105C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m


[35m#define DFL_PROMPT      [m[33m"> "[m[18;1H[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[23;9H[32mchar[m**  current_command;[24;9Hprompt = DFL_PROMPT;[25;9Hsetup();[27;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[28;17Harglist = splitline(cmdline);[30;17H[33mif[m(arglist != [33mNULL[m){[31;25Hcurrent_command = arglist;[32;17H}[33;17H[36m//iterate over current command to execute, pointer addition to iterate[m[34;17H[33mwhile[m(*current_command != [33mNULL[m){[35;25Hresult = execute(current_command);[36;25Hfreelist(current_command);[37;17H}[41;17Hfreelist(arglist);[42;17Hfree(cmdline);[43;9H}[44;9H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[48;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[52;9H{[53;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[54;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[55;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n){[58;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[59;9Hexit(n);
}[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,1  [14;1H[?25h[?25l[62;101H5,0-1[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l
[46m{[45;1H}[m[62;101H9[19;1H[?25h[?25l{[45;1H}[62;100H20,1-8[20;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9,0-1[29;1H[?25h[?25l[62;100H30,1-8[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H0[30;8H[?25h[?25l[62;100H29,0-1[29;1H[?25h[?25l[62;101H8,1-8[28;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H5,1-8[25;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H0[20;8H[?25h[?25l[19;1H[46m{[45;1H}[m[62;100H19,1  [19;1H[?25h[?25l{[45;1H}[62;101H8[18;1H[?25h[?25l[62;101H7,0-1[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l
[46m{[45;1H}[m[62;101H9[19;1H[?25h[?25l{[45;1H}[62;100H20,1-8[20;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9,0-1[29;1H[?25h[?25l[62;100H30,1-8[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;103H2-16[31;16H[?25h[?25l[62;103H3-24[31;24H[?25h[?25l[31;17Hcurrent_command = arglist;[31;43H[K[62;105H17[31;17H[?25h[?25l[62;1H1 change; before #1  2 seconds ago[62;100H[K[31;17H        current_command = arglist;[62;100H31,3-24[7CTop[62;100H[K[62;100H31,3-24[7CTop[31;24H[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H31,3-17[7CTop[31;17H[?25h[?25lcurrent_command = arglist;[31;43H[K[31;17H[?25h[?25l        current_command = arglist;[62;103H4-25[31;25H[?25h[?25lurrent_command = arglist;[31;50H[K[31;25H[?25h[?25lrrent_command = arglist;[31;49H[K[31;25H[?25h[?25lrent_command = arglist;[31;48H[K[31;25H[?25h[?25lent_command = arglist;[31;47H[K[31;25H[?25h[?25lnt_command = arglist;[31;46H[K[31;25H[?25h[?25lt_command = arglist;[31;45H[K[31;25H[?25h[?25l_command = arglist;[31;44H[K[31;25H[?25h[?25lcommand = arglist;[31;43H[K[31;25H[?25h[?25lommand = arglist;[31;42H[K[31;25H[?25h[?25lmmand = arglist;[31;41H[K[31;25H[?25h[?25lmand = arglist;[31;40H[K[31;25H[?25h[?25land = arglist;[31;39H[K[31;25H[?25h[?25lnd = arglist;[31;38H[K[31;25H[?25h[?25ld = arglist;[31;37H[K[31;25H[?25h[?25l = arglist;[31;36H[K[31;25H[?25h[?25l= arglist;[31;35H[K[31;25H[?25h[?25l arglist;[31;34H[K[31;25H[?25h[?25larglist;[31;33H[K[31;25H[?25h[?25l[62;103H5-26[31;26H[?25h[?25l[62;103H6-27[31;27H[?25h[?25l[62;103H7-28[31;28H[?25h[?25l[62;103H8-29[31;29H[?25h[?25l[62;103H9-30[31;30H[?25h[?25l[62;103H10-31[31;31H[?25h[?25l[62;104H1-32[31;32H[?25h[?25l ;[62;104H2-33[31;33H[?25h[?25l=;[62;104H3-34[31;34H[?25h[?25l ;[62;104H4-35[31;35H[?25h[?25l[62;104H5-36[31;36H[?25h[?25l[31;35H[K[62;104H4-35[31;35H[?25h[?25l[62;104H3-34[31;34H[?25h[?25l[31;33H[K[62;104H2-33[31;33H[?25h[?25l[62;104H1-32[31;32H[?25h[?25l[31;31H[K[62;104H0-31[31;31H[?25h[?25l[31;30H[K[62;103H9-30 [31;30H[?25h[?25l[31;29H[K[62;103H8-29[31;29H[?25h[?25l[31;28H[K[62;103H7-28[31;28H[?25h[?25l[31;27H[K[62;103H6-27[31;27H[?25h[?25l[31;26H[K[62;103H5-26[31;26H[?25h[?25l[31;25H[K[62;103H4-25[31;25H[?25h[62;1H[K[31;24H[?25l[62;100H31,3-24[7CTop[31;24H[?25h[?25l[30;36H[46m{[32;17H}[m[62;101H2,3-17[32;17H[?25h[?25l[30;36H{[32;17H}[62;101H3,10-24[33;24H[?25h[?25l[62;101H4[34;24H[?25h[?25l[62;101H5,3-24 [35;24H[?25h[?25l[34;61r[34;1H[2M[1;62r[34;17H[33mwhile[m(*current_command != [33mNULL[m)[46m{[m[34;49H[K[35;17H[46m}[m[61;1H[34m~                                                                                                                    [m[62;100H[K[62;100H35,3-17[7CAll[35;17H[?25h[?25l[34;48H{[35;17H}[62;101H4[34;17H[?25h[?25l[62;101H3[33;17H[?25h[?25l[30;36H[46m{[32;17H}[m[62;101H2[32;17H[?25h[?25l[30;36H{[32;17H}[62;101H1,3-24[31;24H[?25h[?25l[62;101H0,3-17[30;17H[?25h[?25l[31;61r[31;1H[2L[1;62r[31;25Hresult = execute(current_command);[32;25Hfreelist(current_command);[62;100H[K[62;100H31,4-25[7CTop[31;25H[?25h[?25l[62;101H2[32;25H[?25h[?25l[62;101H3,3-24[33;24H[?25h[?25l[30;61r[61;1H
[1;62r[30;17H[33mif[m(arglist != [33mNULL[m)[46m{[m[30;37H[K[31;25Hresult = execute(current_command);[32;25Hfreelist(current_command);[33;17H[46m}[m[62;100H[K[62;100H33,3-17[7CAll[33;17H[?25h[?25l[30;36H{[33;17H}[62;101H4[34;17H[?25h[?25l[62;101H5[35;17H[?25h[?25l[62;1H4 fewer lines[62;100H[K[35;61r[35;1H[4M[1;62r[58;1H[34m~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;1H[K[62;100H35,2-16[7CAll4 fewer lines[62;100H[K[62;100H35,2-16[7CAll[35;16H[?25h[?25l[62;101H4[34;16H[?25h[?25l[34;61r[61;1H
[1;62r[61;1H[34m~                                                                                                                    [m[62;1H[K[62;100H34,2-16[7CAll[34;16H[?25h[?25l[62;101H3[33;16H[?25h[?25l[62;101H2[32;16H[?25h[?25l[62;103H3-24[32;24H[?25h[?25l[30;36H[46m{[33;17H}[m[62;101H3,3-17[33;17H[?25h[?25l[30;36H{[33;17H}[62;101H4,2-16[34;16H[?25h[?25l[62;101H5,10-24[35;24H[?25h[?25l[62;101H4,2-16 [34;16H[?25h[?25l[30;36H[46m{[33;17H}[m[62;101H3,3-17[33;17H[?25h[?25l[30;36H{[33;17H}[62;101H4,2-16[34;16H[?25h[?25l[62;101H5,10-24[35;24H[?25h[?25l[62;101H4,2-16 [34;16H[?25h[?25l[30;36H[46m{[33;17H}[m[62;101H3,3-17[33;17H[?25h[?25l[30;36H{[33;17H}[62;101H4,2-16[34;16H[?25h[?25l[62;101H5,10-24[35;24H[?25h[?25l[35;61r[61;1H
[1;62r[61;1H[34m~                                                                                                                    [m[62;100H[K[62;100H35,3-17[7CAll[35;17H[?25h[?25l[62;101H4,2-16[34;16H[?25h[?25l[30;36H[46m{[33;17H}[m[62;101H3,3-17[33;17H[?25h[?25l[30;36H{[33;17H}[62;101H2,3-24[32;24H[?25h[?25l[62;101H1[31;24H[?25h[?25l[32;61r[32;1H[L[1;62r[32;17Hfreelist(arglist);[62;100H[K[62;100H32,3-17[7CAll[32;17H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H32,3-17[7CAll[32;17H[?25h[?25l        freelist(arglist);[62;103H4-25[32;25H[?25h[?25l[62;101H3[33;25H[?25h[62;1H[K[33;24H[?25l[62;100H33,3-24[7CAll[33;24H[?25h[?25l[30;61r[61;1H
[1;62r[30;17H[33mif[m(arglist != [33mNULL[m)[46m{[m[30;37H[K[31;25Hresult = execute(current_command);[32;34Harglist);[32;43H[K[33;17H[46m}[m[61;1H[34m~                                                                                                                    [m[62;100H[K[62;100H33,3-17[7CAll[33;17H[?25h[?25l[30;36H{[33;17H}[62;101H4,2-16[34;16H[?25h[?25l[62;101H5,3-17[35;17H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 55L, 927C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c[1P./test.ogcc smsh.c split.o exec.o -o test.o -Wall
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kmain[m[Kâ€™:
[01m[Ksmsh.c:21:6:[m[K [01;35m[Kwarning: [m[Kvariable â€˜[01m[Kresult[m[Kâ€™ set but not used [[01;35m[K-Wunused-but-set-variable[m[K]
  int [01;35m[Kresult[m[K;
      [01;35m[K^~~~~~[m[K
[01m[Ksmsh.c:31:13:[m[K [01;35m[Kwarning: [m[Kâ€˜[01m[Kcurrent_command[m[Kâ€™ may be used uninitialized in this function [[01;35m[K-Wmaybe-uninitialized[m[K]
    result = [01;35m[Kexecute(current_command)[m[K;
             [01;35m[K^~~~~~~~~~~~~~~~~~~~~~~~[m[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ clear
[H[2J[3J]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ cleargcc smsh.c split.o exec.o -o test.o -Wall
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kmain[m[Kâ€™:
[01m[Ksmsh.c:21:6:[m[K [01;35m[Kwarning: [m[Kvariable â€˜[01m[Kresult[m[Kâ€™ set but not used [[01;35m[K-Wunused-but-set-variable[m[K]
  int [01;35m[Kresult[m[K;
      [01;35m[K^~~~~~[m[K
[01m[Ksmsh.c:31:13:[m[K [01;35m[Kwarning: [m[Kâ€˜[01m[Kcurrent_command[m[Kâ€™ may be used uninitialized in this function [[01;35m[K-Wmaybe-uninitialized[m[K]
    result = [01;35m[Kexecute(current_command)[m[K;
             [01;35m[K^~~~~~~~~~~~~~~~~~~~~~~~[m[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./test.o
Segmentation fault
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"smsh.c" 55L, 927C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/**  smsh1.c  small-shell version 1
 **             first really useful version after prompting shell
 **             this one parses the command line into strings
 **             uses fork, exec, wait, and ignores signals
 **/[m

[35m#include [m[33m<stdio.h>[m
[35m#include [m[33m<stdlib.h>[m
[35m#include [m[33m<unistd.h>[m
[35m#include [m[33m<signal.h>[m
[35m#include [m[33m"smsh.h"[m


[35m#define DFL_PROMPT      [m[33m"> "[m[18;1H[32mint[m main()
{[20;9H[32mchar[m    *cmdline, *prompt, **arglist;[21;9H[32mint[m     result;[22;9H[32mvoid[m    setup();[23;9H[32mchar[m**  current_command;[24;9Hprompt = DFL_PROMPT;[25;9Hsetup();[27;9H[33mwhile[m ( (cmdline = next_cmd(prompt, [33mstdin[m)) != [33mNULL[m ){[28;17Harglist = splitline(cmdline);[30;17H[33mif[m(arglist != [33mNULL[m){[31;25Hresult = execute(current_command);[32;25Hfreelist(arglist);[33;17H}[35;17Hfree(cmdline);[36;9H}[37;9H[33mreturn[m [33m0[m;
}

[32mvoid[m setup()[41;9H[36m/*
         * purpose: initialize shell
         * returns: nothing. calls fatal() if trouble
         */[m[45;9H{[46;9Hsignal([33mSIGINT[m,  [33mSIG_IGN[m);[47;9Hsignal([33mSIGQUIT[m, [33mSIG_IGN[m);[48;9H}

[32mvoid[m fatal([32mchar[m *s1, [32mchar[m *s2, [32mint[m n){[51;9Hfprintf([33mstderr[m,[33m"Error: [m[35m%s[m[33m,[m[35m%s\n[m[33m"[m, s1, s2);[52;9Hexit(n);
}


[34m~                                                                                                                    [57;1H~                                                                                                                    [58;1H~                                                                                                                    [59;1H~                                                                                                                    [60;1H~                                                                                                                    [61;1H~                                                                                                                    [m[62;100H1,1[11CAll[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5[5;1H[?25h[?25l[62;100H6,0-1[6;1H[?25h[?25l[62;100H7,1  [7;1H[?25h[?25l[62;100H8[8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3[13;1H[?25h[?25l[62;101H4,1  [14;1H[?25h[?25l[62;101H5,0-1[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8,1  [18;1H[?25h[?25l
[46m{[38;1H}[m[62;101H9[19;1H[?25h[?25l{[38;1H}[62;100H20,1-8[20;8H[?25h[?25l[62;101H1[21;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9,0-1[29;1H[?25h[?25l[62;100H30,1-8[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[19;1H[46m{[38;1H}[m[62;101H8,1  [38;1H[?25h[?25l[19;1H{[38;1H}[62;101H9,0-1[39;1H[?25h[?25l[62;100H40,1  [40;1H[?25h[?25l[62;101H1,1-8[41;8H[?25h[?25l[62;101H0,1  [40;1H[?25h[?25l[62;100H39,0-1[39;1H[?25h[?25l[19;1H[46m{[38;1H}[m[62;101H8,1  [38;1H[?25h[?25l[19;1H{[38;1H}[62;101H7,1-8[37;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H0[30;8H[?25h[?25l[62;100H29,0-1[29;1H[?25h[?25l[62;101H8,1-8[28;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H5,1-8[25;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H2[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H5,1-8[25;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6,0-1[26;1H[?25h[?25l[62;101H7,1-8[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9,0-1[29;1H[?25h[?25l[62;100H30,1-8[30;8H[?25h[?25l[62;100H29,0-1[29;1H[?25h[?25l[62;101H8,1-8[28;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9,0-1[29;1H[?25h[?25l[62;100H30,1-8[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;103H2-16[31;16H[?25h[?25l[62;103H3-24[31;24H[?25h[?25l[62;103H4-25[31;25H[?25h[?25l[62;103H5-26[31;26H[?25h[?25l[62;103H6-27[31;27H[?25h[?25l[62;103H7-28[31;28H[?25h[?25l[62;103H8-29[31;29H[?25h[?25l[62;103H9-30[31;30H[?25h[?25l[62;103H10-31[31;31H[?25h[?25l[62;104H1-32[31;32H[?25h[?25l[62;104H2-33[31;33H[?25h[?25l[62;104H3-34[31;34H[?25h[?25l[62;104H4-35[31;35H[?25h[?25l[62;104H5-36[31;36H[?25h[?25l[62;104H6-37[31;37H[?25h[?25l[62;104H7-38[31;38H[?25h[?25l[62;104H8-39[31;39H[?25h[?25l[62;104H9-40[31;40H[?25h[?25le[46m([15C)[m[62;103H20-41[31;41H[?25h[?25l([15C)[62;104H1-42[31;42H[?25h[?25lurrent_command);[31;58H[K[31;42H[?25h[?25lrrent_command);[31;57H[K[31;42H[?25h[?25lrent_command);[31;56H[K[31;42H[?25h[?25lent_command);[31;55H[K[31;42H[?25h[?25lnt_command);[31;54H[K[31;42H[?25h[?25lt_command);[31;53H[K[31;42H[?25h[?25l_command);[31;52H[K[31;42H[?25h[?25lcommand);[31;51H[K[31;42H[?25h[?25lommand);[31;50H[K[31;42H[?25h[?25lmmand);[31;49H[K[31;42H[?25h[?25lmand);[31;48H[K[31;42H[?25h[?25land);[31;47H[K[31;42H[?25h[?25lnd);[31;46H[K[31;42H[?25h[?25ld);[31;45H[K[31;42H[?25h[?25l[46m()[m;[31;44H[K[31;42H[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H31,22-43      All[31;43H[?25h[?25lr;()[62;104H3-44[31;44H[?25h[?25lg;[62;104H4-45[31;45H[?25h[?25ll;[62;104H5-46[31;46H[?25h[?25li;[62;104H6-47[31;47H[?25h[?25ls;[62;104H7-48[31;48H[?25h[?25lt;[62;104H8-49[31;49H[?25h[62;1H[K[31;48H[?25l[62;100H31,27-48      All[31;48H[?25h[?25l[62;1H1 change; before #16  3 seconds ago[62;100H[K[31;43H;[31;44H[K[62;100H31,22-43      All[62;100H[K[62;100H31,22-43      All[31;43H[?25h[?25l[62;20H5  6[62;100H[K[31;42Hd);[62;100H31,21-42      All[62;100H[K[62;100H31,21-42      All[31;42H[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H31,21-42      All[31;42H[?25h[?25lad);[62;104H2-43[31;43H[?25h[?25lrd);[62;104H3-44[31;44H[?25h[?25lgd);[62;104H4-45[31;45H[?25h[?25lld);[62;104H5-46[31;46H[?25h[?25lid);[62;104H6-47[31;47H[?25h[?25lsd);[62;104H7-48[31;48H[?25h[?25ltd);[62;104H8-49[31;49H[?25h[?25l);[31;51H[K[31;41H[46m([7C)[?25h[?25l[30;36H{[m[31;41H([7C)[33;17H[46m}[m[62;101H0,23-37[30;37H[?25h[?25l{[33;17H}[62;100H29,1    [29;1H[?25h[?25l[62;101H8,32-46[28;46H[?25h[?25l[62;101H7,42-49[27;49H[?25h[?25l[62;101H6,1    [26;1H[?25h[?25l[62;101H5,10-17[25;17H[?25h[?25l[62;101H4,22-29[24;29H[?25h[?25l[62;101H3,26-33[23;33H[?25h[62;1H[K[23;32H[?25l[62;100H23,25-32      All[23;32H[?25h[?25l[23;61r[61;1H
[1;62r[61;1H[34m~                                                                                                                    [m[62;100H[K[62;100H23,2-9[8CAll[23;9H[?25h[?25l[62;101H4[24;9H[?25h[?25l[62;101H5,0-1[25;1H[?25h[?25l[62;101H6,2-9[26;9H[?25h[?25l[62;101H7,2-16[27;16H[?25h[?25l[62;101H8,0-1 [28;1H[?25h[?25l[62;101H9,2-16[29;16H[?25h[?25l[62;100H30[30;16H[?25h[?25l[62;101H1[31;16H[?25h[?25l[62;101H2[32;16H[?25h[?25l[62;101H3[33;16H[?25h[?25l[62;101H4[34;16H[?25h[?25l[26;62H[46m{[35;9H}[m[62;101H5,2-9 [35;9H[?25h[?25l[26;62H{[35;9H}[62;101H6[36;9H[?25h[?25l[19;1H[46m{[37;1H}[m[62;101H7,1  [37;1H[?25h[?25l[19;1H{[37;1H}[62;101H8,0-1[38;1H[?25h[?25l[62;101H9,9  [39;9H[?25h[?25l[62;100H40,2-9[40;9H[?25h[?25l[62;100H39,9  [39;9H[?25h[?25l[62;101H8,0-1[38;1H[?25h[?25l[19;1H[46m{[37;1H}[m[62;101H7,1  [37;1H[?25h[?25l[19;1H{[37;1H}[62;101H6,2-9[36;9H[?25h[?25l[26;62H[46m{[35;9H}[m[62;101H5[35;9H[?25h[?25l[26;62H{[35;9H}[62;101H4,2-16[34;16H[?25h[?25l[62;101H3[33;16H[?25h[?25l[62;101H2[32;16H[?25h[?25l[62;101H1[31;16H[?25h[?25l[62;101H0[30;16H[?25h[?25l[62;100H29[29;16H[?25h[?25l[62;101H8,0-1 [28;1H[?25h[?25l[62;101H7,2-16[27;16H[?25h[?25l[62;101H6,2-9 [26;9H[?25h[?25l[62;101H5,0-1[25;1H[?25h[?25l[62;101H4,2-9[24;9H[?25h[?25l[62;101H3[23;9H[?25h[?25l[62;101H2[22;9H[?25h[?25l[62;101H1[21;9H[?25h[?25l[62;101H2[22;9H[?25h[?25l[62;101H3[23;9H[?25h[?25l[62;101H4[24;9H[?25h[?25l[62;101H5,0-1[25;1H[?25h[?25l[62;101H6,2-9[26;9H[?25h[?25l[62;101H7,2-16[27;16H[?25h[?25l[62;101H8,0-1 [28;1H[?25h[?25l[62;101H9,2-16[29;16H[?25h[?25l[62;100H30[30;16H[?25h[?25l[62;101H1[31;16H[?25h[?25l[62;101H2[32;16H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"smsh.c" 54L, 893C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi smsh.c[1P./test.ogcc smsh.c split.o exec.o -o test.o -Wall
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kmain[m[Kâ€™:
[01m[Ksmsh.c:21:6:[m[K [01;35m[Kwarning: [m[Kvariable â€˜[01m[Kresult[m[Kâ€™ set but not used [[01;35m[K-Wunused-but-set-variable[m[K]
  int [01;35m[Kresult[m[K;
      [01;35m[K^~~~~~[m[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./test.o
Segmentation fault
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc -c split.c -o split.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc -c split.c -o split.o -Wall
[01m[Ksplit.c:[m[K In function â€˜[01m[Knext_cmd[m[Kâ€™:
[01m[Ksplit.c:28:2:[m[K [01;35m[Kwarning: [m[Kâ€˜[01m[Kcurpath[m[Kâ€™ is used uninitialized in this function [[01;35m[K-Wuninitialized[m[K]
  [01;35m[Kprintf("%s$%s",curpath,prompt)[m[K;    /* prompt user */
  [01;35m[K^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[m[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"split.c" 154L, 3415C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[26;9H[32mchar[m    *curpath;[28;9Hprintf([33m"[m[35m%s[m[33m$[m[35m%s[m[33m"[m,curpath,prompt);[25C[36m/* prompt user  */[m[29;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[31;17H[36m/* need space? */[m[32;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[33;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[34;33Hbuf = emalloc([33mBUFSIZ[m);[35;25H[33melse[m[28C[36m/* or expand    */[m[36;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[37;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[38;17H}[40;17H[36m/* end of command? */[m[41;17H[33mif[m ( c == [35m'\n'[m || c == [33m';'[m)[42;25H[33mbreak[m;[44;17H[36m/* no, add to buffer */[m[45;17Hbuf[pos++] = c;[46;9H}[47;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[48;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[49;9Hbuf[pos] = [35m'\0'[m;[50;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[51;1H}[m[62;101H1[21;1H[?25h[?25l{[51;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9[29;8H[?25h[?25l[62;100H30,0-1[30;1H[?25h[?25l[62;100H29,1-8[29;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;103H2-9[28;9H[?25h[?25l[62;103H3-10[28;10H[?25h[?25l[62;103H4-11[28;11H[?25h[?25l[62;103H5-12[28;12H[?25h[?25l[62;103H6-13[28;13H[?25h[?25l[62;103H7-14[28;14H[?25h[?25lf[46m([22C)[m[62;103H8-15[28;15H[?25h[?25l([22C)[62;103H9-16[28;16H[?25h[?25l[62;103H10-17[28;17H[?25h[?25l[62;104H1-18[28;18H[?25h[?25l[62;104H2-19[28;19H[?25h[?25l[62;104H3-20[28;20H[?25h[?25l[62;104H4-21[28;21H[?25h[?25l[62;104H5-22[28;22H[?25h[?25l[62;104H6-23[28;23H[?25h[?25l[62;104H7-24[28;24H[?25h[?25l[62;104H8-25[28;25H[?25h[?25l[62;104H9-26[28;26H[?25h[?25l[62;103H20-27[28;27H[?25h[?25l[62;104H1-28[28;28H[?25h[?25l[62;104H2-29[28;29H[?25h[?25l[62;104H3-30[28;30H[?25h[?25l[62;104H2-29[28;29H[?25h[?25l[62;104H1-28[28;28H[?25h[?25l[62;104H0-27[28;27H[?25h[?25l[62;104H1-28[28;28H[?25h[?25l[62;104H0-27[28;27H[?25h[?25l[62;104H1-28[28;28H[?25h[?25l[62;104H0-27[28;27H[?25h[?25l[62;104H1-28[28;28H[?25h[?25l[62;104H0-27[28;27H[?25h[?25l[62;104H1-28[28;28H[?25h[?25l[62;104H0-27[28;27H[?25h[?25l[62;101H7,1-8  [27;8H[?25h[?25l[62;101H6,16-32[26;32H[?25h[?25l[26;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;1H[K[62;100H26,1-8[8CTop[26;8H[?25h[?25l[62;1H1 more line; before #1  17 seconds ago[62;100H[K[26;61r[26;1H[L[1;62r[26;9H[32mchar[m    *curpath;[62;1H[K[62;100H26,2-9[8CTop1 more line; before #1  17 seconds ago[62;100H[K[62;100H26,2-9[8CTop[26;9H[?25h[?25l[?25h[?25l[26;61r[61;1H
[1;62r[61;1H[36m *          or NULL if line if no tokens on the line[m[62;1H[K[62;100H26,1-8[8CTop[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;103H2-9[27;9H[?25h[?25l[62;103H3-10[27;10H[?25h[?25l[62;103H4-11[27;11H[?25h[?25l[62;103H5-12[27;12H[?25h[?25l[62;103H6-13[27;13H[?25h[?25l[62;103H7-14[27;14H[?25h[?25lf[46m([22C)[m[62;103H8-15[27;15H[?25h[?25l([22C)[62;103H9-16[27;16H[?25h[?25l[62;103H10-17[27;17H[?25h[?25l[62;104H1-18[27;18H[?25h[?25l[62;104H2-19[27;19H[?25h[?25l[62;104H3-20[27;20H[?25h[?25l[62;104H2-19[27;19H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H27,12-19      Top[27;19H[?25h[?25l[35m%s[m[33m"[m,curpath,prompt); [27;19H[?25h[?25l[33ms"[m,curpath,prompt); [27;19H[?25h[?25l[33m"[m,curpath,prompt); [27;19H[?25h[?25l[62;104H3-20[27;20H[?25h[?25l[62;104H4-21[27;21H[?25h[?25lurpath,prompt); [27;21H[?25h[?25lrpath,prompt); [27;21H[?25h[?25lpath,prompt); [27;21H[?25h[?25lath,prompt); [27;21H[?25h[?25lth,prompt); [24C[36m/* prompt user  */[m[27;75H[K[27;21H[?25h[?25lh,prompt); [27;21H[?25h[?25l,prompt); [27;21H[?25h[?25lprompt); [27;21H[?25h[62;1H[K[27;20H[?25l[62;100H27,13-20      Top[27;20H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"split.c" 153L, 3387C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c [Kvi split.c gcc -c split.c -o split.o -Wall
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc -c exec.c -o exec.o -Wall
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc [K[K[K[K[26P(reverse-i-search)`':[Cg': gcc -c exec.c -o exec.o -Wall[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@c[C[C[C[1@c[C[C[C]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc -c exec.c -o exec.o -Wallls[K[Klsgcc -c exec.c -o exec.o -Wall[2@split.c -o split[C[C[C[C[C[C[C[C[2Pexec.c -o exec[C[C[C[C[C[C[C[Cls[K[Klsgcc -c exec.c -o exec.o -Wall[2@split.c -o split[C[C[C[C[C[C[C[C[20Pvi split.c gcc -c split.c -o split.o -Wall[K./test.o[Kgcc smsh.c split.o exec.o -o test.o -Wall
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kmain[m[Kâ€™:
[01m[Ksmsh.c:21:6:[m[K [01;35m[Kwarning: [m[Kvariable â€˜[01m[Kresult[m[Kâ€™ set but not used [[01;35m[K-Wunused-but-set-variable[m[K]
  int [01;35m[Kresult[m[K;
      [01;35m[K^~~~~~[m[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$  ./testo[K.o
> grep    echo hello
cannot execute command: No such file or directory
> ./  echo H;
cannot execute command: No such file or directory
> > echo

> ls
exec.c	exec.o	pid.c  sm2in.c	smsh1.c  smsh.c  smsh.h  split.c  split.o  test.o
> ls: ls -a
cannot execute command: No such file or directory
> ls
exec.c	exec.o	pid.c  sm2in.c	smsh1.c  smsh.c  smsh.h  split.c  split.o  test.o
> ls;
exec.c	exec.o	pid.c  sm2in.c	smsh1.c  smsh.c  smsh.h  split.c  split.o  test.o
> > ls: 
cannot execute command: No such file or directory
> ls  : 
cannot execute command: No such file or directory
> ls
exec.c	exec.o	pid.c  sm2in.c	smsh1.c  smsh.c  smsh.h  split.c  split.o  test.o
> quit
cannot execute command: No such file or directory
> exit
cannot execute command: No such file or directory
> quit    exit*)  (1);
cannot execute command: No such file or directory
> > ^Cz 
> ^Z
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ps
  PID TTY          TIME CMD
 2479 pts/2    00:00:05 bash
 9751 pts/2    00:00:00 test.o
 9972 pts/2    00:00:00 ps
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ kill 9751
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ fg
./test.o
Terminated
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ps
  PID TTY          TIME CMD
 2479 pts/2    00:00:05 bash
 9980 pts/2    00:00:00 ps
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ jobs
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"split.c" 153L, 3387C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[27;9Hprintf([33m"[m[35m%s[m[33m"[m,prompt);[28C[36m/* prompt user  */[m[28;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[30;17H[36m/* need space? */[m[31;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[32;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[33;33Hbuf = emalloc([33mBUFSIZ[m);[34;25H[33melse[m[28C[36m/* or expand    */[m[35;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[36;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[37;17H}[39;17H[36m/* end of command? */[m[40;17H[33mif[m ( c == [35m'\n'[m || c == [33m';'[m)[41;25H[33mbreak[m;[43;17H[36m/* no, add to buffer */[m[44;17Hbuf[pos++] = c;[45;9H}[46;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[47;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[48;9Hbuf[pos] = [35m'\0'[m;[49;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens
 *          or NULL if line if no tokens on the line[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H4,1  [4;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H1[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[50;1H}[m[62;101H1[21;1H[?25h[?25l{[50;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9,0-1[29;1H[?25h[?25l[62;100H30,1-8[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8,0-1[38;1H[?25h[?25l[62;101H9,1-8[39;8H[?25h[?25l[62;100H40[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2,0-1[42;1H[?25h[?25l[62;101H3,1-8[43;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6[46;8H[?25h[?25l[62;101H7[47;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[21;1H[46m{[50;1H}[m[62;100H50,1  [50;1H[?25h[?25l[21;1H{[50;1H}[62;101H1,0-1[51;1H[?25h[?25l[62;101H2,1  [52;1H[?25h[?25l[62;101H3[53;1H[?25h[?25l[62;101H4[54;1H[?25h[?25l[62;101H5[55;1H[?25h[?25l[62;101H6,0-1[56;1H[?25h[?25l[62;101H5,1  [55;1H[?25h[?25l[62;103H2[55;2H[?25h[?25l[62;103H3[55;3H[?25h[?25l[62;103H4[55;4H[?25h[?25l[62;103H5[55;5H[?25h[?25l[62;103H6[55;6H[?25h[?25l[62;103H7[55;7H[?25h[?25l[62;103H8[55;8H[?25h[?25l[62;103H9[55;9H[?25h[?25l[62;103H10[55;10H[?25h[?25l[62;104H1[55;11H[?25h[?25l[62;104H2[55;12H[?25h[?25l[62;104H3[55;13H[?25h[?25l[62;104H4[55;14H[?25h[?25l[62;104H5[55;15H[?25h[?25l[62;104H6[55;16H[?25h[?25l[1C[35m[46m([1C)[m[62;104H7[55;17H[?25h[?25l[35m(x)[m[62;104H8[55;18H[?25h[?25l[35m[46m([1C)[m[62;104H9[55;19H[?25h[?25l[35m(x)[m[62;103H20[55;20H[?25h[?25l[1C[35m[46m([19C)[m[62;104H1[55;21H[?25h[?25l[35m([m[35m[46m([1C)[m[16C[35m)[m[62;104H2[55;22H[?25h[?25l[35m(x)[m[62;104H3[55;23H[?25h[?25l[35m[46m([1C)[m[62;104H4[55;24H[?25h[?25l[35m(x)[m[62;104H5[55;25H[?25h[?25l[62;104H6[55;26H[?25h[?25l[62;104H7[55;27H[?25h[?25l[62;104H8[55;28H[?25h[?25l[62;104H9[55;29H[?25h[?25l[62;103H30[55;30H[?25h[?25l[62;104H1[55;31H[?25h[?25l[1C[35m[46m([1C)[m[62;104H2[55;32H[?25h[?25l[35m(x)[m[62;104H3[55;33H[?25h[?25l[35m[46m([1C)[m[62;104H4[55;34H[?25h[?25l[35m(x)[m[62;104H5[55;35H[?25h[?25l[62;104H6[55;36H[?25h[?25l[62;104H7[55;37H[?25h[?25l[62;104H8[55;38H[?25h[?25l[62;104H9[55;39H[?25h[?25l[62;103H40[55;40H[?25h[?25l[55;21H[35m[46m([19C)[m[62;104H1[55;41H[?25h[?25l[55;21H[35m([19C)[m[62;101H6,0-1[56;1H[?25h[?25l[57;18H[46m([10C)[m[62;101H7,29 [57;29H[?25h[?25l[57;18H([10C)[62;101H8,2 [58;2H[?25h[?25l[57;18H[46m([10C)[m[62;101H7,29[57;29H[?25h[?25l[57;18H([10C)[62;101H6,0-1[56;1H[?25h[?25l[55;21H[35m[46m([19C)[m[62;101H5,41 [55;41H[?25h[?25l[55;21H[35m([19C)[m[62;101H4,4 [54;4H[?25h[?25l[62;101H3,37-41[53;41H[?25h[?25l[62;101H2,3    [52;3H[?25h[?25l[62;101H1,0-1[51;1H[?25h[?25l[21;1H[46m{[50;1H}[m[62;101H0,1  [50;1H[?25h[?25l[21;1H{[50;1H}[62;100H49,12-19[49;19H[?25h[?25l[62;101H8,17-24[48;24H[?25h[?25l[62;101H7,17-48[47;48H[?25h[?25l[62;101H6,30[46;48H[?25h[?25l[28;41H[46m{[45;9H}[m[62;101H5,2-9  [45;9H[?25h[?25l[28;41H{[45;9H}[62;101H4,17-31[44;31H[?25h[?25l[62;101H3,25-39[43;39H[?25h[?25l[62;101H2,0-1  [42;1H[?25h[?25l[62;101H1,9-30[41;30H[?25h[?25l[62;101H0,27-41[40;41H[?25h[?25l[62;100H39,23-37[39;37H[?25h[?25l[62;104H2-36[39;36H[?25h[?25l[62;100H40[40;36H[?25h[?25l[62;104H1-35[40;35H[?25h[?25l[62;104H0-34[40;34H[?25h[?25l[62;103H19-33[40;33H[?25h[?25l[62;104H8-32[40;32H[?25h[?25l[62;104H7-31[40;31H[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H40,17-31      Top[40;31H[?25h[?25l) || c == [33m';'[m[1m[37m[41m)[m[40;20H[46m([10C)[m[62;104H8-32[40;32H[?25h[?25l[40;20H([10C)[62;104H9-33[40;33H[?25h[?25l[62;103H20-34[40;34H[?25h[?25l[62;103H19-33[40;33H[?25h[?25l[62;103H20-34[40;34H[?25h[?25l[62;103H19-33[40;33H[?25h[?25l[40;20H[46m([10C)[m[62;104H8-32[40;32H[?25h[?25l: || c == [33m';'[m[1m[37m[41m)[m[40;20H([10C)[62;104H9-33[40;33H[?25h[?25l || c == [33m';'[m[1m[37m[41m)[m[40;45H[K[40;20H[46m([10C)[m[62;104H8-32[40;32H[?25h[?25l; || c == [33m';'[m[1m[37m[41m)[m[40;20H([10C)[62;104H9-33[40;33H[?25h[?25l[62;103H20-34[40;34H[?25h[?25l[62;104H1-35[40;35H[?25h[?25l[62;104H2-36[40;36H[?25h[?25l[62;104H3-37[40;37H[?25h[?25l[62;104H2-36[40;36H[?25h[?25l[62;104H1-35[40;35H[?25h[?25l[62;104H0-34[40;34H[?25h[?25l[62;103H19-33[40;33H[?25h[?25lv || c == [33m';'[m[1m[37m[41m)[m[62;103H20-34[40;34H[?25h[?25l || c == [33m';'[m[1m[37m[41m)[m[40;46H[K[62;103H19-33[40;33H[?25h[?25l[62;103H20-34[40;34H[?25h[62;1H[K[40;33H[?25l[62;100H40,19-33      Top[40;33H[?25h[?25l[62;103H20-34[40;34H[?25h[?25l[62;1H[33m-- VISUAL --[m[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[7m|[m[62;104H1-35[40;35H[?25h[?25l[7m|[m[62;104H2-36[40;36H[?25h[?25l[7m [m[62;104H3-37[40;37H[?25h[?25l[7mc[m[62;104H4-38[40;38H[?25h[?25l[7m [m[62;104H5-39[40;39H[?25h[?25l[7m=[m[62;104H6-40[40;40H[?25h[?25l[7m=[m[62;104H7-41[40;41H[?25h[?25l[7m [m[62;104H8-42[40;42H[?25h[?25l[7m[33m'[m[62;104H9-43[40;43H[?25h[?25l[7m[33m;[m[62;103H30-44[40;44H[?25h[?25l[7m[33m'[m[62;104H1-45[40;45H[?25h[?25l[33m'[m[62;104H0-44[40;44H[?25h[?25l[40;34H|| c == [33m';[m[62;1H[K[62;100H40,30-44      Top[40;44H[?25h[?25l[62;103H29-43[40;43H[?25h[?25l[62;104H8-42[40;42H[?25h[?25l[62;104H7-41[40;41H[?25h[?25l[62;104H6-40[40;40H[?25h[?25l[62;104H5-39[40;39H[?25h[?25l[62;104H4-38[40;38H[?25h[?25l[62;104H3-37[40;37H[?25h[?25l[62;104H2-36[40;36H[?25h[?25l[62;104H1-35[40;35H[?25h[?25l[62;104H0-34[40;34H[?25h[?25l| c == [33m';'[m[1m[37m[41m)[m[40;45H[K[40;34H[?25h[?25l c == [33m';'[m[1m[37m[41m)[m[40;44H[K[40;34H[?25h[?25lc == [33m';'[m[1m[37m[41m)[m[40;43H[K[40;34H[?25h[?25l == [33m';'[m[1m[37m[41m)[m[40;42H[K[40;34H[?25h[?25l== [33m';'[m[1m[37m[41m)[m[40;41H[K[40;34H[?25h[?25l= [33m';'[m[1m[37m[41m)[m[40;40H[K[40;34H[?25h[?25l [33m';'[m[1m[37m[41m)[m[40;39H[K[40;34H[?25h[?25l[33m';'[m[1m[37m[41m)[m[40;38H[K[40;34H[?25h[?25l;'[1m[37m[41m)[m[40;37H[K[40;34H[?25h[?25l'[1m[37m[41m)[m[40;36H[K[40;34H[?25h[?25l[1m[37m[41m)[m[40;35H[K[40;34H[?25h[?25l[40;34H[K[62;103H19-33[40;33H[?25h[?25l[62;100H39[39;33H[?25h[?25l[62;101H8,0-1  [38;1H[?25h[?25l[62;1H1 change; before #15  15 seconds ago[62;100H[K[40;34H[1m[37m[41m)[m[62;100H40,20-34      Top[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[62;20H4  17[62;100H[K[40;34H'[1m[37m[41m)[m[62;100H40,20-34      Top[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[62;20H3  20[62;100H[K[40;34H;'[1m[37m[41m)[m[62;100H40,20-34      Top[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[62;20H2  21[62;100H[K[40;34H[33m';'[m[1m[37m[41m)[m[62;100H40,20-34      Top[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[62;20H1  22[62;100H[K[40;34H [33m';'[m[1m[37m[41m)[m[62;100H40,20-34      Top[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[62;20H0  23[62;100H[K[40;34H= [33m';'[m[1m[37m[41m)[m[62;100H40,20-34      Top[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[62;19H9  23 seconds ago[62;36H[K[40;35H= [33m';'[m[1m[37m[41m)[m[62;100H40,20-34      Top[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[62;19H8[62;100H[K[40;34H == [33m';'[m[1m[37m[41m)[m[62;100H40,20-34      Top[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[62;19H7[62;100H[K[40;34Hc == [33m';'[m[1m[37m[41m)[m[62;100H40,20-34      Top[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[62;19H6[62;100H[K[40;34H c == [33m';'[m[1m[37m[41m)[m[62;100H40,20-34      Top[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[62;19H5  24[62;100H[K[40;34H| c == [33m';'[m[1m[37m[41m)[m[62;100H40,20-34      Top[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[62;19H4  27[62;100H[K[40;35H| c == [33m';'[m[1m[37m[41m)[m[62;100H40,20-34      Top[62;100H[K[62;100H40,20-34      Top[40;34H[?25h[?25l[62;19H3  34[62;100H[K[62;100H40,19-33      Top[62;100H[K[62;100H40,19-33      Top[40;33H[?25h[?25l[62;19H2  39[62;100H[K[40;32H || c == [33m';'[m[1m[37m[41m)[m[40;45H[K[62;100H40,18-32      Top[62;100H[K[62;100H40,18-32      Top[40;32H[?25h[?25l[62;19H1  52[62;100H[K[40;31H || c == [33m';'[m)[40;44H[K[62;100H40,17-31      Top[62;100H[K[62;100H40,17-31      Top[40;31H[?25h[?25l[62;1HAlready at oldest change[62;25H[K[62;100H40,17-31      Top[40;31H[?25h[?25l[62;101H1,9-30 [41;30H[?25h[?25l[62;101H2,0-1 [42;1H[?25h[?25l[62;101H3,17-31[43;31H[?25h[?25l[62;101H4[44;31H[?25h[?25l[28;41H[46m{[45;9H}[m[62;101H5,2-9  [45;9H[?25h[?25l[28;41H{[45;9H}[62;101H6,24-31[46;31H[?25h[?25l[62;101H7,15-32[47;32H[?25h[?25l[62;101H8,17-24[48;24H[?25h[?25l[62;101H9,12-19[49;19H[?25h[?25l[21;1H[46m{[50;1H}[m[62;100H50,1    [50;1H[?25h[?25l[21;1H{[50;1H}[62;101H1,0-1[51;1H[?25h[?25l[62;101H2,3  [52;3H[?25h[?25l[62;101H3,27-31[53;31H[?25h[?25l[62;101H4,4    [54;4H[?25h[?25l[62;101H5,31[55;31H[?25h[?25l[62;101H6,0-1[56;1H[?25h[?25l[57;18H[46m([10C)[m[62;101H7,29 [57;29H[?25h[?25l[57;18H([10C)[62;101H8,2 [58;2H[?25h[?25l[62;101H9,31[59;31H[?25h[?25l[62;100H60[60;31H[?25h[?25l[62;101H1[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;1H[K[62;100H62,31[10C1%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H63,31[10C2%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H64,3[11C3%[61;3H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H65,1[11C4%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *newstr();[62;100H[K[62;100H66,16-26[7C5%[61;26H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **args ;[62;100H[K[62;100H67,14-24[7C6%[61;24H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H68,16-32[7C7%[61;32H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H69,19-32[7C8%[61;32H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H70,17-32[7C9%[61;32H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H71,18-32      10%[61;32H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H72,13-23      11%[61;23H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H73,9-20[7C13%[61;20H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H74,0-1[8C14%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H75,21-32      15%[61;32H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H76,14-28      16%[61;28H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H77,0-1[8C17%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H78,24-31      18%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H79,19-26      19%[61;26H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H80,24-31      20%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H81,0-1[8C21%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m[46m([m *cp != [35m'\0'[m [46m)[m[62;100H[K[62;100H82,21-28      22%[61;28H[?25h[?25l[1;61r[61;1H
[1;62r[60;14H([13C)[61;9H{[62;100H[K[62;100H83,2-9[8C23%[61;9H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H84,17-31      25%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H85,8-29[7C26%[61;29H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H86,17-31      27%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mbreak[m;[62;100H[K[62;100H87,9-30[7C28%[61;30H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H88,0-1[8C29%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H89,17-31      30%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H90,17-31      31%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H91,10-31      32%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hbufspace += [33mBUFSIZ[m;[62;100H[K[62;100H92,10-31      33%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H93,10-31      34%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[57;41H[46m{[61;17H}[m[62;100H[K[62;100H94,3-17[7C35%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[56;41H{[60;17H}[62;100H[K[62;100H95,0-1[8C36%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* mark start, then find end of phrase marked by ;*/[m[62;100H[K[62;100H96,17-31      38%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hstart = cp;[62;100H[K[62;100H97,13-27      39%[61;27H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hlen   = [33m1[m;[62;100H[K[62;100H98,12-26      40%[61;26H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m (*++cp != [35m'\0'[m && *cp != [33m';'[m )[62;100H[K[62;100H99,17-31      41%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hlen++;[62;100H[K[62;100H100,9-30      42%[61;30H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H101,2-16      43%[61;16H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H102,17-31     44%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H103,2-16      45%[61;16H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m(*cp ==[33m';'[m){[62;100H[K[62;100H104,16-30     46%[61;30H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H*cp = [35m'\0'[m;[62;100H[K[62;100H105,10-31     47%[61;31H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H106,8-29      48%[61;29H[?25h[?25l[1;61r[61;1H
[1;62r[58;30H[46m{[61;17H}[m[62;100H[K[62;100H107,3-17      50%[61;17H[?25h[?25l[1;61r[61;1H
[1;62r[36;9H[46m{[m[57;30H{[60;17H}[61;9H[46m}[m[62;100H[K[62;100H108,2-9[7C51%[61;9H[?25h[?25l[1;61r[61;1H
[1;62r[35;9H{[60;9H}[61;9Hargs[argnum] = [33mNULL[m;[62;100H[K[62;100H109,21-28     52%[61;28H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m args;[62;100H[K[62;100H110,13-20     53%[61;20H[?25h[?25l[1;61r[61;1H
[1;62r[15;1H[46m{[61;1H}[m[62;100H[K[62;100H111,1[9C54%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[14;1H{[60;1H}[62;100H[K[62;100H112,0-1[7C55%[61;1H[?25h[?25l[14;1H[46m{[60;1H}[m[62;102H1,1  [60;1H[?25h[?25l[14;1H{[60;1H}[62;102H0,13-20[59;20H[?25h[?25l[62;101H09,21-28[58;28H[?25h[?25l[32;9H[46m{[57;9H}[m[62;102H8,2-9  [57;9H[?25h[?25l[32;9H{[53;30H[46m{[56;17H}[m[57;9H}[62;102H7,3-17[56;17H[?25h[?25l[53;30H{[56;17H}[62;102H6,8-29[55;29H[?25h[?25l[62;102H5,10-31[54;31H[?25h[?25l[53;30H[46m{[56;17H}[m[62;102H4,16-30[53;30H[?25h[?25l{[56;17H}[62;102H3,2-16 [52;16H[?25h[?25l[62;102H2,17-31[51;31H[?25h[?25l[62;102H1,2-16 [50;16H[?25h[?25l[62;102H0,9-30[49;30H[?25h[?25l[62;100H99,17-31[48;31H[?25h[?25l[62;104H8-32[48;32H[?25h[?25l[62;104H9-33[48;33H[?25h[?25l[62;103H20-34[48;34H[?25h[?25l[62;104H1-35[48;35H[?25h[?25l[62;104H2-36[48;36H[?25h[?25l[62;104H3-37[48;37H[?25h[?25l[62;104H4-38[48;38H[?25h[?25l[62;104H5-39[48;39H[?25h[?25l[62;104H6-40[48;40H[?25h[?25l[62;104H7-41[48;41H[?25h[?25l[62;104H8-42[48;42H[?25h[?25l[62;104H7-41[48;41H[?25h[?25lcp != [33m';'[m )[48;52H[K[48;41H[?25h[?25lp != [33m';'[m )[48;51H[K[48;41H[?25h[?25l != [33m';'[m )[48;50H[K[48;41H[?25h[?25l!= [33m';'[m )[48;49H[K[48;41H[?25h[?25l= [33m';'[m )[48;48H[K[48;41H[?25h[?25l [33m';'[m )[48;47H[K[48;41H[?25h[?25l[33m';'[m )[48;46H[K[48;41H[?25h[?25l;' )[48;45H[K[48;41H[?25h[?25l' )[48;44H[K[48;41H[?25h[?25l )[48;43H[K[48;41H[?25h[?25l[62;100H[K[62;1H:[?2004h.,.+3![?25h[?25l[62;1H[K[62;100H96,3-17[7C55%[45;17H[?25h[?25l[62;101H7[46;17H[?25h[?25l[62;101H8[47;17H[?25h[?25l[62;103H4-18[47;18H[?25h[?25l[62;101H9[48;18H[?25h[?25l[62;103H5-19[48;19H[?25h[?25l[62;103H6-20[48;20H[?25h[?25l[62;103H7-21[48;21H[?25h[?25l[62;103H8-22[48;22H[?25h[?25l [46m([18C)[m[62;103H9-23[48;23H[?25h[?25l([18C)[62;103H10-24[48;24H[?25h[?25l[62;104H1-25[48;25H[?25h[?25l[62;104H2-26[48;26H[?25h[?25l[62;104H3-27[48;27H[?25h[?25l[62;104H4-28[48;28H[?25h[?25l[62;104H5-29[48;29H[?25h[?25l[62;104H6-30[48;30H[?25h[?25l[62;104H7-31[48;31H[?25h[?25l[62;104H8-32[48;32H[?25h[?25l[62;104H9-33[48;33H[?25h[?25l[62;103H20-34[48;34H[?25h[?25l[62;104H1-35[48;35H[?25h[?25l[62;104H2-36[48;36H[?25h[?25l[62;104H3-37[48;37H[?25h[?25l[62;104H4-38[48;38H[?25h[?25l[62;104H5-39[48;39H[?25h[?25l[62;104H6-40[48;40H[?25h[?25l[62;104H7-41[48;41H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H99,27-41      55%[48;41H[?25h[?25l! )[62;104H8-42[48;42H[?25h[?25l( )[53;30H[1m[37m[41m{[56;17H}[m[48;42H[46m([m [46m)[m[62;104H9-43[48;43H[?25h[?25li[46m [m)(i [62;103H30-44[48;44H[?25h[?25ls )[62;104H1-45[48;45H[?25h[?25l_ )[62;104H2-46[48;46H[?25h[?25ld )[62;104H3-47[48;47H[?25h[?25le )[62;104H4-48[48;48H[?25h[?25ll )[62;104H5-49[48;49H[?25h[?25li )[62;104H6-50[48;50H[?25h[?25lm )[62;104H7-51[48;51H[?25h[?25l( )[46m([m [46m)[m[62;104H8-52[48;52H[?25h[?25l*[46m [m)(* [62;104H9-53[48;53H[?25h[?25lc )[62;103H40-54[48;54H[?25h[?25lp )[62;104H1-55[48;55H[?25h[?25l) )[48;51H[46m([m*cp[46m)[m[62;104H2-56[48;56H[?25h[?25l[48;42H[46m([m[8C(*cp) [46m)[m[62;104H3-57[48;57H[?25h[?25l[62;104H4-58[48;58H[?25h[?25l[62;104H3-57[48;57H[?25h[?25l[48;42H([8C[46m([m*cp[46m)[m )[62;104H2-56[48;56H[?25h[?25l[62;104H1-55[48;55H[?25h[?25l[62;104H2-56[48;56H[?25h[?25l) )[53;30H{[56;17H}[48;42H[46m([m[8C(*cp)[46m)[m[62;104H3-57[48;57H[?25h[?25l[48;23H[46m([m[18C([13C) [46m)[m[62;104H4-58[48;58H[?25h[?25l[62;104H5-59[48;59H[?25h[?25l[48;23H([34C)[62;100H100,10-31[49;31H[?25h[?25l[62;102H1,3-17 [50;17H[?25h[?25l[62;102H2,39-53[51;53H[?25h[?25l[62;102H1,3-17 [50;17H[?25h[?25l[62;102H0,10-31[49;31H[?25h[?25l[48;23H[46m([34C)[m[62;100H99,45-59 [48;59H[?25h[?25l[48;23H([34C)[62;101H8,13-27[47;27H[?25h[?25l[48;23H[46m([34C)[m[62;101H9,45-59[48;59H[?25h[?25l[48;23H([34C)[62;100H100,10-31[49;31H[?25h[?25l[62;102H1,3-17 [50;17H[?25h[?25l[62;102H2,39-53[51;53H[?25h[?25l[62;102H3,3-17 [52;17H[?25h[?25l[62;102H2,39-53[51;53H[?25h[?25l[51;40H[46m([10C)[m[62;105H8-52[51;52H[?25h[?25l[62;105H7-51[51;51H[?25h[?25l[51;40H([10C)[62;105H6-50[51;50H[?25h[?25l[62;105H5-49[51;49H[?25h[?25l[62;105H4-48[51;48H[?25h[?25l[62;105H3-47[51;47H[?25h[?25l[62;105H2-46[51;46H[?25h[?25l[62;105H1-45[51;45H[?25h[?25l[62;105H0-44[51;44H[?25h[?25l[62;104H29-43[51;43H[?25h[?25l[62;105H8-42[51;42H[?25h[?25l[46m([10C)[m[62;105H7-41[51;41H[?25h[?25l[62;105H6-40[51;40H[?25h[?25l([10C)[62;105H5-39[51;39H[?25h[?25l[62;105H4-38[51;38H[?25h[?25l[62;105H3-37[51;37H[?25h[?25l[62;105H2-36[51;36H[?25h[?25l[62;105H1-35[51;35H[?25h[?25l[62;105H0-34[51;34H[?25h[?25l[62;104H19-33[51;33H[?25h[?25l[62;105H8-32[51;32H[?25h[?25l[51;21H[46m[[8C][m[62;105H7-31[51;31H[?25h[?25l[62;105H6-30[51;30H[?25h[?25l[51;21H[[8C][62;105H5-29[51;29H[?25h[?25l[62;105H4-28[51;28H[?25h[?25l[62;105H3-27[51;27H[?25h[?25l[62;105H2-26[51;26H[?25h[?25l[62;105H1-25[51;25H[?25h[?25l[62;105H0-24[51;24H[?25h[?25l[62;104H9-23 [51;23H[?25h[?25l[46m[[8C][m[62;104H8-22[51;22H[?25h[?25l[62;104H7-21[51;21H[?25h[?25l[[8C][62;104H6-20[51;20H[?25h[?25l[62;102H1,3-17[50;17H[?25h[?25l[62;102H0[49;17H[?25h[?25l[62;100H99,6-20 [48;20H[?25h[?25l[62;100H100,3-17[49;17H[?25h[?25l[62;102H1[50;17H[?25h[?25l[62;102H2,6-20[51;20H[?25h[?25l[62;102H3,3-17[52;17H[?25h[?25l[53;19H[46m([9C)[m[62;102H4,6-20[53;20H[?25h[?25l([9C)[62;102H5,3-17[54;17H[?25h[?25l[53;19H[46m([9C)[m[62;102H4,6-20[53;20H[?25h[?25l[62;104H5-19[53;19H[?25h[?25l([9C)[62;104H4-18[53;18H[?25h[?25l[62;104H3-17[53;17H[?25h[?25l4if(*cp ==[33m';'[m){[62;104H4-18[53;18H[?25h[?25ldif(*cp ==[33m';'[m){[62;104H5-19[53;19H[?25h[?25ldif(*cp ==[33m';'[m){[62;104H6-20[53;20H[?25h[?25lif(*cp ==[33m';'[m){[53;33H[K[62;104H5-19[53;19H[?25h[?25lif(*cp ==[33m';'[m){[53;32H[K[62;104H4-18[53;18H[?25h[?25l[33mif[m(*cp ==[33m';'[m){[53;31H[K[62;104H3-17[53;17H[?25h[62;1H[K[53;16H[?25l[62;100H104,2-16      55%[53;16H[?25h[?25l[62;1H4 fewer lines[62;100H[K[32;61r[32;1H[4M[1;62r[32;9H[46m{[m[32;25H[K[33;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[34;17H        cp++;[34;30H[K[35;22H*cp == [35m'\0'[m )       [7C[36m/* quit at end-o-string */[m[36;25H[33mbreak[m;[36;32H[K[37;25H[K[38;17H[36m/* make sure the array has room (+1 for NULL) */[m[39;17H[33mif[m ( argnum+[33m1[m >= spots ){[40;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[41;17H        bufspace += [33mBUFSIZ[m;[41;44H[K[42;17H        spots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[43;17H}[43;18H[K[44;17H[K[45;17H[36m/* mark start, then find end of phrase marked by ;*/[m[46;17Hstart = cp;[47;17Hlen   = [33m1[m;[47;27H[K[48;17H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[49;17H        len++;[50;25H[K[51;17Hargs[argnum++] = newstr(start, len);[52;17H[K[53;9H[46m}[m[58;1H[36m/*
 * purpose: constructor for strings
 * returns: a string, never NULL
 */[m[62;1H[K[62;100H104,2-9[7C57%4 fewer lines[62;100H[K[62;100H104,2-9[7C57%[53;9H[?25h[?25l[32;9H{[53;9H}[62;102H3,2-16[52;16H[?25h[?25l[62;102H2[51;16H[?25h[?25l[62;102H1[50;16H[?25h[?25l[62;102H0[49;16H[?25h[?25l[62;100H99,2-16 [48;16H[?25h[?25l[62;101H8[47;16H[?25h[?25l[62;101H7[46;16H[?25h[?25l[62;101H6[45;16H[?25h[?25l[62;101H5,0-1 [44;1H[?25h[?25l[62;3Hmore lines[62;13H[K[45;61r[45;1H[4L[1;62r[45;17H[33mif[m(*cp ==[33m';'[m){[46;25H*cp = [35m'\0'[m;[47;25Hcp++;[48;17H}[62;1H[K[62;100H96,3-17[7C55%4 more lines[62;100H[K[62;100H96,3-17[7C55%[45;17H[?25h[?25l[62;101H5,0-1 [44;1H[?25h[?25l[39;41H[46m{[43;17H}[m[62;101H4,3-17[43;17H[?25h[?25l[39;41H{[43;17H}[62;101H3,3-24[42;24H[?25h[?25l[62;101H2[41;24H[?25h[?25l[62;101H1[40;24H[?25h[?25l[62;101H0,3-17[39;17H[?25h[?25l[62;100H89[38;17H[?25h[?25l[62;101H8,0-1 [37;1H[?25h[?25l[62;101H7,3-24[36;24H[?25h[?25l[62;101H6,3-17[35;17H[?25h[?25l[62;101H5,3-24[34;24H[?25h[?25l[62;101H4,3-17[33;17H[?25h[?25l[32;9H[46m{[57;9H}[m[62;101H3,2-9 [32;9H[?25h[?25l{[57;9H}[62;101H2,10-17[31;17H[?25h[?25l[62;101H1,0-1  [30;1H[?25h[?25l[62;101H0,10-17[29;17H[?25h[?25l[62;100H79[28;17H[?25h[?25l[62;101H8[27;17H[?25h[?25l[62;101H7,0-1  [26;1H[?25h[?25l[62;101H8,10-17[27;17H[?25h[?25l[62;101H9[28;17H[?25h[?25l[62;100H80[29;17H[?25h[?25l[62;101H1,0-1  [30;1H[?25h[?25l[62;101H2,10-17[31;17H[?25h[?25l[32;9H[46m{[57;9H}[m[62;101H3,2-9  [32;9H[?25h[?25l{[57;9H}[62;101H4,3-17[33;17H[?25h[?25l[62;101H5,3-24[34;24H[?25h[?25l[62;101H6,3-17[35;17H[?25h[?25l[62;101H7,3-24[36;24H[?25h[?25l[62;101H8,0-1 [37;1H[?25h[?25l[62;101H9,3-17[38;17H[?25h[?25l[62;100H90[39;17H[?25h[?25l[62;101H1,3-24[40;24H[?25h[?25l[62;101H2[41;24H[?25h[?25l[62;101H3[42;24H[?25h[?25l[39;41H[46m{[43;17H}[m[62;101H4,3-17[43;17H[?25h[?25l[39;41H{[43;17H}[62;101H5,0-1 [44;1H[?25h[?25l[62;101H6,3-17[45;17H[?25h[?25l[62;101H7,3-24[46;24H[?25h[?25l[62;101H8[47;24H[?25h[?25l[62;101H7[46;24H[?25h[?25l[62;101H8[47;24H[?25h[?25l[45;30H[46m{[48;17H}[m[62;101H9,3-17[48;17H[?25h[?25l[45;30H{[48;17H}[62;100H100,3-17[49;17H[?25h[?25l[45;30H[46m{[48;17H}[m[62;100H99,3-17 [48;17H[?25h[?25l[45;30H{[48;17H}[62;101H8,3-24[47;24H[?25h[?25l[62;101H7[46;24H[?25h[?25l[62;101H6,3-17[45;17H[?25h[?25l[62;101H5,0-1 [44;1H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H95,1[10C55%[44;1H[?25h[?25l[62;103H2-9[44;9H[?25h[?25l[62;103H3-17[44;17H[?25h[?25l[62;103H4-25[44;25H[?25h[?25l[62;103H3-17[44;17H[?25h[?25l[45;61r[45;1H[L[1;62r[62;100H[K[62;100H96,1[10C54%[45;1H[?25h[?25l[62;103H2-9[45;9H[?25h[?25l[62;103H3-17[45;17H[?25h[?25l[62;101H7[46;17H[?25h[?25l[62;101H8[47;17H[?25h[?25l[62;101H9[48;17H[?25h[?25l[46;30H[46m{[49;17H}[m[62;100H100,3-17[49;17H[?25h[?25l[46mi[m}i[46m}[m[62;104H4-18[49;18H[?25h[?25l}[49;18H[K[49;17H[46m}[m[62;104H3-17[49;17H[?25h[62;1H[K[49;16H[?25l[46;30H{[49;17H}[62;100H100,2-16      54%[49;16H[?25h[?25l[62;102H1[50;16H[?25h[?25l[62;102H2[51;16H[?25h[?25l[51;61r[61;1H
[1;62r[62;100H[K[62;100H102,3-17      55%[51;17H[?25h[?25l[62;102H1[50;17H[?25h[?25l[46;30H[46m{[49;17H}[m[62;102H0[49;17H[?25h[?25l[46;30H{[49;17H}[62;100H99,3-24 [48;24H[?25h[?25l[62;101H8[47;24H[?25h[?25l[62;101H7,3-17[46;17H[?25h[?25l[62;101H6,2-16[45;16H[?25h[?25l[46;61r[46;1H[L[1;62r[46;17Hstart = cp;[62;100H[K[62;100H97,3-17[7C54%[46;17H[?25h[?25l[62;101H8[47;17H[?25h[?25l[62;101H9,3-24[48;24H[?25h[?25l[62;100H100,3-24[49;24H[?25h[?25l[47;30H[46m{[50;17H}[m[62;102H1,3-17[50;17H[?25h[?25l[47;30H{[50;17H}[62;102H2[51;17H[?25h[?25l[47;30H[46m{[50;17H}[m[62;102H1[50;17H[?25h[?25l[47;30H{[50;17H}[62;102H0,3-24[49;24H[?25h[?25l[62;100H99,3-24 [48;24H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H99,4-25[7C54%[48;25H[?25h[?25lr*cp = [35m'\0'[m;[62;103H5-26[48;26H[?25h[?25lg*cp = [35m'\0'[m;[62;103H6-27[48;27H[?25h[?25ls*cp = [35m'\0'[m;[62;103H7-28[48;28H[?25h[?25l*cp = [35m'\0'[m;[48;38H[K[62;103H6-27[48;27H[?25h[?25l*cp = [35m'\0'[m;[48;37H[K[62;103H5-26[48;26H[?25h[?25l*cp = [35m'\0'[m;[48;36H[K[62;103H4-25[48;25H[?25h[?25l[48;17H*cp = [35m'\0'[m;[48;29H[K[62;103H3-17[48;17H[?25h[?25la*cp = [35m'\0'[m;[62;103H4-18[48;18H[?25h[?25l*cp = [35m'\0'[m;[48;28H[K[62;103H3-17[48;17H[?25h[?25l        *cp = [35m'\0'[m;[62;103H4-25[48;25H[?25h[?25la*cp = [35m'\0'[m;[62;103H5-26[48;26H[?25h[?25lr*cp = [35m'\0'[m;[62;103H6-27[48;27H[?25h[?25lg*cp = [35m'\0'[m;[62;103H7-28[48;28H[?25h[?25ls*cp = [35m'\0'[m;[62;103H8-29[48;29H[?25h[?25l[*cp = [35m'\0'[m[1m[37m[41m;[49;29H;[m[62;103H9-30[48;30H[?25h[?25la*cp = [35m'\0'[m[1m[37m[41m;[m[62;103H10-31[48;31H[?25h[?25lr*cp = [35m'\0'[m[1m[37m[41m;[m[62;104H1-32[48;32H[?25h[?25lg*cp = [35m'\0'[m[1m[37m[41m;[m[62;104H2-33[48;33H[?25h[?25ln*cp = [35m'\0'[m[1m[37m[41m;[m[62;104H3-34[48;34H[?25h[?25lu*cp = [35m'\0'[m[1m[37m[41m;[m[62;104H4-35[48;35H[?25h[?25lm*cp = [35m'\0'[m[1m[37m[41m;[m[62;104H5-36[48;36H[?25h[?25l+*cp = [35m'\0'[m[1m[37m[41m;[m[62;104H6-37[48;37H[?25h[?25l+*cp = [35m'\0'[m[1m[37m[41m;[m[62;104H7-38[48;38H[?25h[?25l]*cp = [35m'\0'[m;[49;29H;[48;29H[46m[[8C][m[62;104H8-39[48;39H[?25h[?25l *cp = [35m'\0'[m;[48;29H[[8C][62;104H9-40[48;40H[?25h[?25l=*cp = [35m'\0'[m;[62;103H20-41[48;41H[?25h[?25l *cp = [35m'\0'[m;[62;104H1-42[48;42H[?25h[?25ln*cp = [35m'\0'[m;[62;104H2-43[48;43H[?25h[?25le*cp = [35m'\0'[m;[62;104H3-44[48;44H[?25h[?25lw*cp = [35m'\0'[m;[62;104H4-45[48;45H[?25h[?25ls*cp = [35m'\0'[m;[62;104H5-46[48;46H[?25h[?25le*cp = [35m'\0'[m;[62;104H6-47[48;47H[?25h[?25l*cp = [35m'\0'[m;[48;57H[K[62;104H5-46[48;46H[?25h[?25lt*cp = [35m'\0'[m;[62;104H6-47[48;47H[?25h[?25lr*cp = [35m'\0'[m;[62;104H7-48[48;48H[?25h[?25l(*cp = [35m'\0'[m;[62;104H8-49[48;49H[?25h[?25ls*cp = [35m'\0'[m;[62;104H9-50[48;50H[?25h[?25lt*cp = [35m'\0'[m;[62;103H30-51[48;51H[?25h[?25lr*cp = [35m'\0'[m;[62;104H1-52[48;52H[?25h[?25la*cp = [35m'\0'[m;[62;104H2-53[48;53H[?25h[?25lt*cp = [35m'\0'[m;[62;104H3-54[48;54H[?25h[?25l*cp = [35m'\0'[m;[48;64H[K[62;104H2-53[48;53H[?25h[?25l*cp = [35m'\0'[m;[48;63H[K[62;104H1-52[48;52H[?25h[?25l*cp = [35m'\0'[m;[48;62H[K[62;104H0-51[48;51H[?25h[?25la*cp = [35m'\0'[m;[62;104H1-52[48;52H[?25h[?25lr*cp = [35m'\0'[m;[62;104H2-53[48;53H[?25h[?25lt*cp = [35m'\0'[m;[62;104H3-54[48;54H[?25h[?25l,*cp = [35m'\0'[m;[62;104H4-55[48;55H[?25h[?25l[33m1[m*cp = [35m'\0'[m;[62;104H5-56[48;56H[?25h[?25l1_*cp = [35m'\0'[m;[62;104H6-57[48;57H[?25h[?25l[33m1[m*cp = [35m'\0'[m;[48;67H[K[62;104H5-56[48;56H[?25h[?25l)*cp = [35m'\0'[m;[48;48H[46m([7C)[m[62;104H6-57[48;57H[?25h[?25lcp = [35m'\0'[m;[48;67H[K[48;57H[?25h[?25lp = [35m'\0'[m;[48;66H[K[48;57H[?25h[?25l = [35m'\0'[m;[48;65H[K[48;57H[?25h[?25l= [35m'\0'[m;[48;64H[K[48;57H[?25h[?25l [35m'\0'[m;[48;63H[K[48;57H[?25h[?25l[35m'\0'[m;[48;62H[K[48;57H[?25h[?25l\[33m0[m';[48;61H[K[48;57H[?25h[?25l[33m0[m';[48;60H[K[48;57H[?25h[?25l';[48;59H[K[48;57H[?25h[?25l;[48;58H[K[48;57H[?25h[?25l[48;57H[K[48;57H[?25h[?25l;[48;48H([7C)[62;104H7-58[48;58H[?25h[?25l[62;100H100,9-30[49;30H[?25h[?25l[47;30H[46m{[50;17H}[m[62;102H1,4-18[50;18H[?25h[?25l[47;30H{[50;17H}[62;102H2,44-58[51;58H[?25h[?25l[62;102H3,13-27[52;27H[?25h[?25l[62;102H2,44-58[51;58H[?25h[?25l[47;30H[46m{[50;17H}[m[62;102H1,4-18 [50;18H[?25h[?25l[51;61r[51;1H[L[1;62r[62;100H[K[62;100H102,1[9C54%[47;30H{[50;17H}
[?25h[?25l[62;104H2-9[51;9H[?25h[?25l[62;104H3-17[51;17H[?25h[?25le[62;104H4-18[51;18H[?25h[?25ll[62;104H5-19[51;19H[?25h[?25ls[62;104H6-20[51;20H[?25h[?25l[33melse[m[62;104H7-21[51;21H[?25h[?25l{[46m{[59;9H}[m[62;104H8-22[51;22H[?25h[?25l{[59;9H}[62;102H3[52;22H[?25h[62;1H[K[52;21H[?25l[62;100H103,7-21      54%[52;21H[?25h[?25l[52;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H103,3-17      54%[52;17H[?25h[?25l[62;1H[33m-- INSERT --[m[62;100H[K[62;100H103,3-17      54%[52;17H[?25h[?25l        len   = [33m1[m;[62;104H4-25[52;25H[?25h[?25l[62;102H4,11-25[53;25H[?25h[?25l[46m([34C)[m[62;105H0-24[53;24H[?25h[?25l[62;104H9-23 [53;23H[?25h[?25l([34C)[62;104H8-22[53;22H[?25h[?25l[62;104H7-21[53;21H[?25h[?25l[62;104H6-20[53;20H[?25h[?25l[62;104H5-19[53;19H[?25h[?25l[62;104H4-18[53;18H[?25h[?25l[62;104H3-17[53;17H[?25h[?25l        [33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[62;104H4-25[53;25H[?25h[?25l[62;102H5[54;25H[?25h[?25l[62;102H6,3-17[55;17H[?25h[?25l[62;102H7,11-25[56;25H[?25h[?25l[62;102H6,3-17 [55;17H[?25h[?25l[62;102H5,4-25[54;25H[?25h[?25l[62;102H4[53;25H[?25h[?25l[62;102H3[52;25H[?25h[?25l[51;21H[46m{[58;9H}[m[62;102H2,8-22[51;22H[?25h[?25l{[58;9H}[62;102H3,4-25[52;25H[?25h[?25l[62;102H4[53;25H[?25h[?25l[62;102H5[54;25H[?25h[?25l[62;102H6,3-17[55;17H[?25h[?25l[62;102H7,11-25[56;25H[?25h[?25l[62;105H2-26[56;26H[?25h[?25l[62;105H3-27[56;27H[?25h[?25l[62;105H4-28[56;28H[?25h[?25l[62;105H5-29[56;29H[?25h[?25l[56;21H[46m[[8C][m[62;105H6-30[56;30H[?25h[?25l[62;105H7-31[56;31H[?25h[?25l[56;21H[[8C][62;105H8-32[56;32H[?25h[?25l[62;105H9-33[56;33H[?25h[?25l[62;104H20-34[56;34H[?25h[?25l[62;105H1-35[56;35H[?25h[?25l[62;105H2-36[56;36H[?25h[?25l[62;105H3-37[56;37H[?25h[?25l[62;105H4-38[56;38H[?25h[?25l[62;105H5-39[56;39H[?25h[?25lr[46m([10C)[m[62;105H6-40[56;40H[?25h[?25l[62;105H7-41[56;41H[?25h[?25l([10C)[62;105H8-42[56;42H[?25h[?25l[62;105H9-43[56;43H[?25h[?25l[62;104H30-44[56;44H[?25h[?25l[62;105H1-45[56;45H[?25h[?25l[62;105H2-46[56;46H[?25h[?25l[62;105H3-47[56;47H[?25h[?25l[62;105H4-48[56;48H[?25h[?25l[62;105H5-49[56;49H[?25h[?25l[62;105H6-50[56;50H[?25h[?25l[56;40H[46m([10C)[m[62;105H7-51[56;51H[?25h[?25l[62;105H8-52[56;52H[?25h[?25l[56;40H([10C)[62;105H9-53[56;53H[?25h[?25l}[51;21H[46m{[56;53H}[m[62;104H40-54[56;54H[?25h[?25l[62;104H39-53[56;53H[?25h[?25l[57;61r[57;1H[L[1;62r[56;53H[K[57;1H}[62;100H[K[62;100H108,1[9C54%[57;1H[46m}[?25h[?25l        [m}        [46m}[m[62;104H2-9[57;9H[?25h[?25l[46m        [m}[57;9H        [46m}[m[62;104H3-17[57;17H[?25h[?25l[51;21H{[57;17H}[62;102H7[56;17H[?25h[?25l[62;102H6[55;17H[?25h[?25l[62;102H5[54;17H[?25h[?25l[62;102H4[53;17H[?25h[?25l[62;102H5[54;17H[?25h[?25l[62;102H4[53;17H[?25h[?25l[62;102H5[54;17H[?25h[?25l[8C        len++;[62;104H4-25[54;25H[?25h[?25l[62;102H4[53;25H[?25h[?25l[62;102H5[54;25H[?25h[?25l[62;102H6,3-17[55;17H[?25h[?25l[62;102H7,11-25[56;25H[?25h[?25l[62;105H0-24[56;24H[?25h[?25l[62;104H9-23 [56;23H[?25h[?25l[46m[[8C][m[62;104H8-22[56;22H[?25h[?25l[62;104H7-21[56;21H[?25h[?25l[[8C][62;104H6-20[56;20H[?25h[?25l[62;104H5-19[56;19H[?25h[?25l[62;104H4-18[56;18H[?25h[?25l[62;104H3-17[56;17H[?25h[?25l        args[argnum++] = newstr(start, len);[62;104H4-25[56;25H[?25h[?25l[62;102H6,3-17[55;17H[?25h[?25l[62;102H7,4-25[56;25H[?25h[?25l[51;21H[46m{[57;17H}[m[62;102H8,4-18[57;18H[?25h[?25l[51;21H{[57;17H}[62;102H9,3-17[58;17H[?25h[?25l[32;9H[46m{[59;9H}[m[62;101H10,3-10[59;10H[?25h[?25l[32;9H{[59;9H}[62;102H1,18-25[60;25H[?25h[?25l[62;102H2,14-21[61;21H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H113,2[9C55%[13;1H[46m{[61;1H}[?25h[?25l[1;61r[m[61;1H
[1;62r[62;100H[K[62;100H114,1[9C56%[12;1H{[60;1H}
[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H115,3[9C57%[61;3H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: constructor for strings[m[62;100H[K[62;100H116,25[8C58%[61;25H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: a string, never NULL[m[62;100H[K[62;100H117,25[8C59%[61;25H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H118,4[9C60%[61;4H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[62;100H[K[62;100H119,25[8C61%[61;25H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H120,2[9C62%[61;2H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m *rv = emalloc(l+[33m1[m);[62;100H[K[62;100H121,18-25     63%[61;25H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H122,1[9C64%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hrv[l] = [35m'\0'[m;[62;100H[K[62;100H123,15-22     65%[61;22H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hstrncpy(rv, s, l);[62;100H[K[62;100H124,18-25     67%[61;16H[46m([8C)[?25h[?25l[1;61r[m[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H125,12-19     68%[60;16H([8C)[61;19H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H126,2[9C69%[55;1H[46m{[61;1H}[?25h[?25l[1;61r[m[61;1H
[1;62r[62;100H[K[62;100H127,1[9C70%[54;1H{[60;1H}
[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m[62;100H[K[62;100H128,6[9C71%[61;6H[?25h[?25l[1;61r[61;1H
[1;62r[61;1Hfreelist([32mchar[m **list)[62;100H[K[62;100H129,22[8C72%[61;9H[46m([11C)[?25h[?25l[1;61r[m[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H130,3[9C73%[60;9H([11C)[61;3H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: free the list returned by splitline[m[62;100H[K[62;100H131,25[8C74%[61;25H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: nothing[m[62;100H[K[62;100H132,20[8C75%[61;20H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: free all strings in list and then free the list[m[62;100H[K[62;100H133,25[8C76%[61;25H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H134,4[9C77%[61;4H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H135,2[9C78%[61;2H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **cp = list;[62;100H[K[62;100H136,15-25     79%[61;25H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp )[62;100H[K[62;100H137,14-21     80%[61;14H[46m([m *cp [46m)[?25h[?25l[1;61r[m[61;1H
[1;62r[61;17Hfree(*cp++);[62;100H[K[62;100H138,11-25     81%[60;14H( *cp )[61;25H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hfree(list);[62;100H[K[62;100H139,13-20     82%[61;20H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H140,2[9C84%[56;1H[46m{[61;1H}[?25h[?25l[1;61r[m[61;1H
[1;62r[62;100H[K[62;100H141,1[9C85%[55;1H{[60;1H}
[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m * emalloc([32msize_t[m n)[62;100H[K[62;100H142,25[8C86%[61;15H[46m([8C)[?25h[?25l[1;61r[m[61;1H
[1;62r[61;1H{[62;100H[K[62;100H143,2[9C87%[60;15H([8C)
{[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mvoid[m *rv ;[62;100H[K[62;100H144,12-19     88%[61;19H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( (rv = malloc(n)) == [33mNULL[m )[62;100H[K[62;100H145,18-25     89%[61;25H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfatal([33m"out of memory"[m,[33m""[m,[33m1[m);[62;100H[K[62;100H146,11-25     90%[61;25H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H147,12-19     91%[61;19H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H}[62;100H[K[62;100H148,2[9C92%[56;1H[46m{[61;1H}[?25h[?25l[1;61r[m[61;1H
[1;62r[61;1H[32mvoid[m * erealloc([32mvoid[m *p, [32msize_t[m n)[62;100H[K[62;100H149,25[8C93%[55;1H{[60;1H}[61;25H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H150,2[9C94%[61;2H[?25h[62;1H[K[61;1H[?25l[62;100H150,1[9C94%[61;1H[?25h[?25l[62;101H49[60;1H[?25h[?25l[54;1H[46m{[59;1H}[m[62;102H8[59;1H[?25h[?25l[54;1H{[59;1H}[62;102H7,1-8[58;8H[?25h[?25l[62;102H6[57;8H[?25h[?25l[62;102H5[56;8H[?25h[?25l[62;102H4[55;8H[?25h[?25l[54;1H[46m{[59;1H}[m[62;102H3,1  [54;1H[?25h[?25l{[59;1H}[62;102H2[53;1H[?25h[?25l[62;102H1,0-1[52;1H[?25h[?25l[46;1H[46m{[51;1H}[m[62;102H0,1  [51;1H[?25h[?25l[46;1H{[51;1H}[62;101H39,1-8[50;8H[?25h[?25l[62;102H8[49;8H[?25h[?25l[62;102H7[48;8H[?25h[?25l[62;102H6[47;8H[?25h[?25l[46;1H[46m{[51;1H}[m[62;102H5,1  [46;1H[?25h[?25l{[51;1H}[62;102H4[45;1H[?25h[?25l[62;102H3[44;1H[?25h[?25l[62;102H2[43;1H[?25h[?25l[62;102H1[42;1H[?25h[?25l[62;102H0[41;1H[?25h[?25l[62;101H29[40;1H[?25h[?25l[62;102H8[39;1H[?25h[?25l[62;102H7,0-1[38;1H[?25h[?25l[31;1H[46m{[37;1H}[m[62;102H6,1  [37;1H[?25h[?25l[31;1H{[37;1H}[62;102H5,1-8[36;8H[?25h[?25l[62;102H4[35;8H[?25h[?25l[62;102H3[34;8H[?25h[?25l[62;102H2,0-1[33;1H[?25h[?25l[62;102H1,1-8[32;8H[?25h[?25l[31;1H[46m{[37;1H}[m[62;102H0,1  [31;1H[?25h[?25l{[37;1H}[62;101H19[30;1H[?25h[?25l[62;102H8[29;1H[?25h[?25l[62;102H7[28;1H[?25h[?25l[62;102H6[27;1H[?25h[?25l[62;102H5[26;1H[?25h[?25l[62;102H4,0-1[25;1H[?25h[?25l[62;102H3,1  [24;1H[?25h[?25l[62;102H2,1-8[23;8H[?25h[?25l[62;102H1[22;8H[?25h[?25l[62;102H0[21;8H[?25h[?25l[62;101H09[20;8H[?25h[?25l[62;102H8[19;8H[?25h[?25l[62;102H7[18;8H[?25h[?25l[62;102H6[17;8H[?25h[?25l[62;102H5[16;8H[?25h[?25l[62;102H4[15;8H[?25h[?25l[62;102H3[14;8H[?25h[?25l[62;102H2[13;8H[?25h[?25l[62;102H1[12;8H[?25h[?25l[62;102H0[11;8H[?25h[?25l[62;100H99,1-8 [10;8H[?25h[?25l[62;101H8[9;8H[?25h[?25l[62;101H7[8;8H[?25h[?25l[62;101H6[7;8H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"split.c" 155L, 3381C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c [7Pjobs[2Ppsfglskill 9751ps[K[K[Kgcc -c split.c -o split.o -Wall
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ [26P(reverse-i-search)`':[Cg': gcc -c split.c -o split.o -Wall[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@c[C[C[C[1@c[C[C[C[1@ [C[C[C[11@s': gcc smsh.c split.o exec.o -o tes[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@m[C[C[C[1@s[C[C[C[1@h[C[C[C]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc smsh.c split.o exec.o -o test.o -Wall
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kmain[m[Kâ€™:
[01m[Ksmsh.c:21:6:[m[K [01;35m[Kwarning: [m[Kvariable â€˜[01m[Kresult[m[Kâ€™ set but not used [[01;35m[K-Wunused-but-set-variable[m[K]
  int [01;35m[Kresult[m[K;
      [01;35m[K^~~~~~[m[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ /[K./test.o
> g echo hello;
hello
> > w eho  cho hello
hello
> ceho    echo elo   helo lo; echo      -ls
hello
cannot execute command: No such file or directory
> > > ^[[A    echo hello; ex   echo ttyl
hello
ttyl
> > ^[[A    ^C^Z
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ kill %1
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
[1]+  Terminated              ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ jobs
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ fg
bash: fg: current: no such job
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ jobs
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ps
  PID TTY          TIME CMD
 2479 pts/2    00:00:05 bash
12605 pts/2    00:00:00 ps
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c 
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;62r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[62;1H"split.c" 155L, 3381C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[36m/* splitline.c - commmand reading and parsing functions for smsh
 *    
 *    char *next_cmd(char *prompt, FILE *fp) - get next command
 *    char **splitline(char *str);           - parse a string

 */[m

[35m#include        [m[33m<stdio.h>[m
[35m#include        [m[33m<stdlib.h>[m
[35m#include        [m[33m<string.h>[m
[35m#include        [m[33m"smsh.h"[m

[32mchar[m * next_cmd([32mchar[m *prompt, [32mFILE[m *fp)
[36m/*
 * purpose: read next command line from fp
 * returns: dynamically allocated string holding command line
 *  errors: NULL at EOF (not really an error)
 *          calls fatal from emalloc()
 *   notes: allocates space in BUFSIZ chunks.  
 */[m
{[22;9H[32mchar[m    *buf ;[26C[36m/* the buffer           */[m[23;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* total size           */[m[24;9H[32mint[m     pos = [33m0[m;[24C[36m/* current position     */[m[25;9H[32mint[m     c;[30C[36m/* input char           */[m[27;9Hprintf([33m"[m[35m%s[m[33m"[m,prompt);[28C[36m/* prompt user  */[m[28;9H[33mwhile[m( ( c = getc(fp)) != [33mEOF[m ) {[30;17H[36m/* need space? */[m[31;17H[33mif[m( pos+[33m1[m >= bufspace ){[16C[36m/* 1 for \0     */[m[32;25H[33mif[m ( bufspace == [33m0[m )[12C[36m/* y: 1st time  */[m[33;33Hbuf = emalloc([33mBUFSIZ[m);[34;25H[33melse[m[28C[36m/* or expand    */[m[35;33Hbuf = erealloc(buf,bufspace+[33mBUFSIZ[m);[36;25Hbufspace += [33mBUFSIZ[m;[13C[36m/* update size  */[m[37;17H}[39;17H[36m/* end of command? */[m[40;17H[33mif[m ( c == [35m'\n'[m || c == [33m';'[m)[41;25H[33mbreak[m;[43;17H[36m/* no, add to buffer */[m[44;17Hbuf[pos++] = c;[45;9H}[46;9H[33mif[m ( c == [33mEOF[m && pos == [33m0[m )[13C[36m/* EOF and no input     */[m[47;17H[33mreturn[m [33mNULL[m;[20C[36m/* say so               */[m[48;9Hbuf[pos] = [35m'\0'[m;[49;9H[33mreturn[m buf;
}

[36m/**
 **     splitline ( parse a line into an array of strings )
 **/[m
[35m#define is_delim(x) ((x)==[m[33m' '[m[35m||(x)==[m[35m'\t'[m[35m)[m

[32mchar[m ** splitline([32mchar[m *line)
[36m/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens
 *          or NULL if line if no tokens on the line[m[62;100H1,1[11CTop[1;1H[?25h[?25l[62;100H2[2;1H[?25h[?25l[62;100H3[3;1H[?25h[?25l[62;100H4[4;1H[?25h[?25l[62;100H5,0-1[5;1H[?25h[?25l[62;100H6,1  [6;1H[?25h[?25l[62;100H7,0-1[7;1H[?25h[?25l[62;100H8,1  [8;1H[?25h[?25l[62;100H9[9;1H[?25h[?25l[62;100H10,1[10;1H[?25h[?25l[62;101H1[11;1H[?25h[?25l[62;101H2,0-1[12;1H[?25h[?25l[62;101H3,1  [13;1H[?25h[?25l[62;101H4[14;1H[?25h[?25l[62;101H5[15;1H[?25h[?25l[62;101H6[16;1H[?25h[?25l[62;101H7[17;1H[?25h[?25l[62;101H8[18;1H[?25h[?25l[62;101H9[19;1H[?25h[?25l[62;100H20[20;1H[?25h[?25l
[46m{[50;1H}[m[62;101H1[21;1H[?25h[?25l{[50;1H}[62;101H2,1-8[22;8H[?25h[?25l[62;101H3[23;8H[?25h[?25l[62;101H4[24;8H[?25h[?25l[62;101H5[25;8H[?25h[?25l[62;101H6[26;8H[?25h[?25l[62;101H7[27;8H[?25h[?25l[62;101H8[28;8H[?25h[?25l[62;101H9,0-1[29;1H[?25h[?25l[62;100H30,1-8[30;8H[?25h[?25l[62;101H1[31;8H[?25h[?25l[62;101H2[32;8H[?25h[?25l[62;101H3[33;8H[?25h[?25l[62;101H4[34;8H[?25h[?25l[62;101H5[35;8H[?25h[?25l[62;101H6[36;8H[?25h[?25l[62;101H7[37;8H[?25h[?25l[62;101H8,0-1[38;1H[?25h[?25l[62;101H9,1-8[39;8H[?25h[?25l[62;100H40[40;8H[?25h[?25l[62;101H1[41;8H[?25h[?25l[62;101H2,0-1[42;1H[?25h[?25l[62;101H3,1-8[43;8H[?25h[?25l[62;101H4[44;8H[?25h[?25l[62;101H5[45;8H[?25h[?25l[62;101H6[46;8H[?25h[?25l[62;101H7[47;8H[?25h[?25l[62;101H8[48;8H[?25h[?25l[62;101H9[49;8H[?25h[?25l[21;1H[46m{[50;1H}[m[62;100H50,1  [50;1H[?25h[?25l[21;1H{[50;1H}[62;101H1,0-1[51;1H[?25h[?25l[62;101H2,1  [52;1H[?25h[?25l[62;101H3[53;1H[?25h[?25l[62;101H4[54;1H[?25h[?25l[62;101H5[55;1H[?25h[?25l[62;101H6,0-1[56;1H[?25h[?25l[62;101H7,1  [57;1H[?25h[?25l[62;101H8[58;1H[?25h[?25l[62;101H9[59;1H[?25h[?25l[62;100H60[60;1H[?25h[?25l[62;101H1[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: traverse the array, locate strings, make copies[m[62;1H[K[62;100H62,1[11C1%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *    note: strtok() could work, but we may want to add quotes later[m[62;100H[K[62;100H63,1[11C2%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H64,1[11C3%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H65,1[11C4%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *newstr();[62;100H[K[62;100H66,1-8[9C5%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **args ;[62;100H[K[62;100H67,1-8[9C6%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     spots = [33m0[m;[22C[36m/* spots in table       */[m[62;100H[K[62;100H68,1-8[9C7%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     bufspace = [33m0[m;[19C[36m/* bytes in table       */[m[62;100H[K[62;100H69,1-8[9C8%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     argnum = [33m0[m;[21C[36m/* slots used           */[m[62;100H[K[62;100H70,1-8[9C9%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *cp = line;[21C[36m/* pos in string        */[m[62;100H[K[62;100H71,1-8[8C10%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    *start;[62;100H[K[62;100H72,1-8[8C11%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mint[m     len;[62;100H[K[62;100H73,1-8[8C12%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H74,0-1[8C13%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mif[m ( line == [33mNULL[m )[21C[36m/* handle special case  */[m[62;100H[K[62;100H75,1-8[8C14%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mreturn[m [33mNULL[m;[62;100H[K[62;100H76,1-8[8C15%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H77,0-1[8C17%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs     = emalloc([33mBUFSIZ[m);[13C[36m/* initialize array     */[m[62;100H[K[62;100H78,1-8[8C18%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hbufspace = [33mBUFSIZ[m;[62;100H[K[62;100H79,1-8[8C19%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H80,1-8[8C20%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H81,0-1[8C21%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp != [35m'\0'[m )[62;100H[K[62;100H82,1-8[8C22%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H{[62;100H[K[62;100H83,1-8[8C23%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mwhile[m ( is_delim(*cp) )[9C[36m/* skip leading spaces  */[m[62;100H[K[62;100H84,1-8[8C24%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H85,1-8[8C25%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( *cp == [35m'\0'[m )[14C[36m/* quit at end-o-string */[m[62;100H[K[62;100H86,1-8[8C26%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mbreak[m;[62;100H[K[62;100H87,1-8[8C27%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H88,0-1[8C28%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[36m/* make sure the array has room (+1 for NULL) */[m[62;100H[K[62;100H89,1-8[8C29%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m ( argnum+[33m1[m >= spots ){[62;100H[K[62;100H90,1-8[8C30%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hargs = erealloc(args,bufspace+[33mBUFSIZ[m);[62;100H[K[62;100H91,1-8[8C31%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hbufspace += [33mBUFSIZ[m;[62;100H[K[62;100H92,1-8[8C32%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hspots += ([33mBUFSIZ[m/[33msizeof[m([32mchar[m *));[62;100H[K[62;100H93,1-8[8C34%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H94,1-8[8C35%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H95,1-8[8C36%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H96,1-8[8C37%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hstart = cp;[62;100H[K[62;100H97,1-8[8C38%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33mif[m(*cp ==[33m';'[m){[62;100H[K[62;100H98,1-8[8C39%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hargs[argnum++] = newstr(start,[33m1[m);[62;100H[K[62;100H99,1-8[8C40%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hcp++;[62;100H[K[62;100H100,1-8[7C41%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H101,1-8[7C42%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H[33melse[m{[62;100H[K[62;100H102,1-8[7C43%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hlen   = [33m1[m;[62;100H[K[62;100H103,1-8[7C44%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25H[33mwhile[m (*++cp != [35m'\0'[m && !(is_delim(*cp)) )[62;100H[K[62;100H104,1-8[7C45%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;33Hlen++;[62;100H[K[62;100H105,1-8[7C46%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H106,1-8[7C47%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;25Hargs[argnum++] = newstr(start, len);[62;100H[K[62;100H107,1-8[7C48%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17H}[62;100H[K[62;100H108,1-8[7C50%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H109,1-8[7C51%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H}[62;100H[K[62;100H110,1-8[7C52%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hargs[argnum] = [33mNULL[m;[62;100H[K[62;100H111,1-8[7C53%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m args;[62;100H[K[62;100H112,1-8[7C54%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[13;1H[46m{[61;1H}[m[62;100H[K[62;100H113,1[9C55%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[12;1H{[60;1H}[62;100H[K[62;100H114,0-1[7C56%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H115,1[9C57%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: constructor for strings[m[62;100H[K[62;100H116,1[9C58%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: a string, never NULL[m[62;100H[K[62;100H117,1[9C59%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H118,1[9C60%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mchar[m *newstr([32mchar[m *s, [32mint[m l)[62;100H[K[62;100H119,1[9C61%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H120,1[9C62%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m *rv = emalloc(l+[33m1[m);[62;100H[K[62;100H121,1-8[7C63%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[62;100H[K[62;100H122,0-1[7C64%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hrv[l] = [35m'\0'[m;[62;100H[K[62;100H123,1-8[7C65%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hstrncpy(rv, s, l);[62;100H[K[62;100H124,1-8[7C67%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mreturn[m rv;[62;100H[K[62;100H125,1-8[7C68%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H[46m{[61;1H}[m[62;100H[K[62;100H126,1[9C69%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[54;1H{[60;1H}[62;100H[K[62;100H127,0-1[7C70%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[32mvoid[m[62;100H[K[62;100H128,1[9C71%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1Hfreelist([32mchar[m **list)[62;100H[K[62;100H129,1[9C72%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m/*[m[62;100H[K[62;100H130,1[9C73%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * purpose: free the list returned by splitline[m[62;100H[K[62;100H131,1[9C74%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m * returns: nothing[m[62;100H[K[62;100H132,1[9C75%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m *  action: free all strings in list and then free the list[m[62;100H[K[62;100H133,1[9C76%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H[36m */[m[62;100H[K[62;100H134,1[9C77%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;1H{[62;100H[K[62;100H135,1[9C78%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[32mchar[m    **cp = list;[62;100H[K[62;100H136,1-8[7C79%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9H[33mwhile[m( *cp )[62;100H[K[62;100H137,1-8[7C80%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;17Hfree(*cp++);[62;100H[K[62;100H138,1-8[7C81%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[61;9Hfree(list);[62;100H[K[62;100H139,1-8[7C82%[61;8H[?25h[?25l[1;61r[61;1H
[1;62r[56;1H[46m{[61;1H}[m[62;100H[K[62;100H140,1[9C84%[61;1H[?25h[?25l[1;61r[61;1H
[1;62r[55;1H{[60;1H}[62;100H[K[62;100H141,0-1[7C85%[61;1H[?25h[?25l[55;1H[46m{[60;1H}[m[62;102H0,1  [60;1H[?25h[?25l[55;1H{[60;1H}[62;101H39,1-8[59;8H[?25h[?25l[62;102H8[58;8H[?25h[?25l[62;102H7[57;8H[?25h[?25l[62;102H6[56;8H[?25h[?25l[55;1H[46m{[60;1H}[m[62;102H5,1  [55;1H[?25h[?25l{[60;1H}[62;102H4[54;1H[?25h[?25l[62;102H3[53;1H[?25h[?25l[62;102H2[52;1H[?25h[?25l[62;102H1[51;1H[?25h[?25l[62;102H0[50;1H[?25h[?25l[62;101H29[49;1H[?25h[?25l[62;102H8[48;1H[?25h[?25l[62;102H7,0-1[47;1H[?25h[?25l[40;1H[46m{[46;1H}[m[62;102H6,1  [46;1H[?25h[?25l[40;1H{[46;1H}[62;102H5,1-8[45;8H[?25h[?25l[62;102H4[44;8H[?25h[?25l[62;102H3[43;8H[?25h[?25l[62;102H2,0-1[42;1H[?25h[?25l[62;102H1,1-8[41;8H[?25h[?25l[40;1H[46m{[46;1H}[m[62;102H0,1  [40;1H[?25h[?25l{[46;1H}[62;101H19[39;1H[?25h[?25l[62;102H8[38;1H[?25h[?25l[62;102H7[37;1H[?25h[?25l[62;102H6[36;1H[?25h[?25l[62;102H5[35;1H[?25h[?25l[62;102H4,0-1[34;1H[?25h[?25l[62;102H3,1  [33;1H[?25h[?25l[62;102H2,1-8[32;8H[?25h[?25l[62;102H1[31;8H[?25h[?25l[62;102H0[30;8H[?25h[?25l[62;101H09[29;8H[?25h[?25l[62;102H8[28;8H[?25h[?25l[62;102H7[27;8H[?25h[?25l[62;102H6[26;8H[?25h[?25l[62;102H5[25;8H[?25h[?25l[62;102H4[24;8H[?25h[?25l[62;102H3[23;8H[?25h[?25l[62;102H2[22;8H[?25h[?25l[62;102H1[21;8H[?25h[?25l[62;102H0[20;8H[?25h[?25l[62;100H99,1-8 [19;8H[?25h[?25l[62;103H2-16[19;16H[?25h[?25l[62;103H3-24[19;24H[?25h[?25l[62;103H4-25[19;25H[?25h[?25l[62;103H5-26[19;26H[?25h[?25l[62;103H6-27[19;27H[?25h[?25l[62;103H7-28[19;28H[?25h[?25ls[46m[[8C][m[62;103H8-29[19;29H[?25h[?25l[[8C][62;103H9-30[19;30H[?25h[?25l[62;103H10-31[19;31H[?25h[?25l[62;104H1-32[19;32H[?25h[?25l[62;104H2-33[19;33H[?25h[?25l[62;104H3-34[19;34H[?25h[?25l[62;104H4-35[19;35H[?25h[?25l[62;104H5-36[19;36H[?25h[?25l[62;104H6-37[19;37H[?25h[?25l[19;29H[46m[[8C][m[62;104H7-38[19;38H[?25h[?25l[19;29H[[8C][62;104H8-39[19;39H[?25h[?25l[62;104H9-40[19;40H[?25h[?25l[62;103H20-41[19;41H[?25h[?25l[62;104H1-42[19;42H[?25h[?25l[62;104H2-43[19;43H[?25h[?25l[62;104H3-44[19;44H[?25h[?25l[62;104H4-45[19;45H[?25h[?25l[62;104H5-46[19;46H[?25h[?25l[62;104H6-47[19;47H[?25h[?25lr[46m([7C)[m[62;104H7-48[19;48H[?25h[?25l([7C)[62;104H8-49[19;49H[?25h[?25l[62;104H9-50[19;50H[?25h[?25l[62;103H30-51[19;51H[?25h[?25l[62;104H1-52[19;52H[?25h[?25l[62;104H2-53[19;53H[?25h[?25l[62;104H3-54[19;54H[?25h[?25l[62;104H4-55[19;55H[?25h[?25l[19;48H[46m([mstart,[46m)[m;[19;57H[K[19;55H[?25h[?25l[19;48H(start,)[62;104H5-56[19;56H[?25h[?25l[62;100H100,5-2[20;26H[?25h[?25l[62;1H/\<owrite_input\>[62;100H[K[62;1H[31msearch hit BOTTOM, continuing at TOP[m[1m[37m[41mE486: Pattern not found: \<owrite_input\>[m[58C100,5-26      85%[20;26H[?25h[?25l[62;1H1 change; before #1  3 seconds ago[1m[37m[41mi[m[62;35H[K[19;55H[33m1[m);[62;100H99,34-55      85%[62;100H[K[62;100H99,34-55      85%[19;55H[?25h[?25l[62;1H[33m-- INSERT --[m[62;13H[K[62;100H99,34-55      85%[19;55H[?25h[?25ll1);[62;104H5-56[19;56H[?25h[?25le1);[62;104H6-57[19;57H[?25h[?25ln1);[62;104H7-58[19;58H[?25h[?25l);[19;60H[K[19;48H[46m([9C)[?25h[?25l[m[19;48H([9C)[62;100H100,9-30[20;30H[?25h[?25l[19;48H[46m([9C)[m[62;100H99,37-58[19;58H[?25h[?25l[18;30H[46m{[m[19;48H([9C)[21;17H[46m}[m[62;101H8,17-31[18;31H[?25h[?25l[33m1[m{[21;17H}[62;104H8-32[18;32H[?25h[?25l[18;31H[K[18;30H[46m{[21;17H}[m[62;104H7-31[18;31H[?25h[?25l{[21;17H}[62;101H7,14-28[17;28H[?25h[?25l[62;101H6,3-17 [16;17H[?25h[?25l[62;101H5[15;17H[?25h[?25l[10;41H[46m{[14;17H}[m[62;101H4,4-18[14;18H[?25h[?25l[10;41H{[14;17H}[62;101H3,10-31[13;31H[?25h[?25l[62;101H2[12;31H[?25h[?25l[62;101H1[11;31H[?25h[?25l[62;101H0,17[10;31H[?25h[?25l[62;100H89[9;31H[?25h[?25l[62;101H8,1    [8;1H[?25h[?25l[62;101H7,10-31[7;31H[?25h[?25l[62;101H6,17[6;31H[?25h[?25l[62;101H5,9-30 [5;30H[?25h[?25l[62;101H4,17-31[4;31H[?25h[?25l[3;9H[46m{[30;9H}[m[62;101H3,3-10 [3;10H[?25h[?25l[2;14H[46m([13C)[m[3;9H{[30;9H}[62;101H2,22-29[2;29H[?25h[?25l[2;14H([13C)[62;101H1,1    [1;1H[?25h[?25l[1;61r[1;1H[L[1;62r[1;9Hspots    = [33mBUFSIZ[m/[33msizeof[m([32mchar[m *);[62;100H[K[62;100H80,24-31      84%[1;31H[?25h[?25l[62;101H1,1    [2;1H[?25h[?25l[3;14H[46m([13C)[m[62;101H2,22-29[3;29H[?25h[?25l[3;14H([13C)[4;9H[46m{[31;9H}[m[62;101H3,3-10 [4;10H[?25h[?25l{[31;9H}[62;101H4,17-31[5;31H[?25h[?25l[62;101H5,9-30 [6;30H[?25h[?25l[62;101H6,17-31[7;31H[?25h[?25l[62;101H7,10[8;31H[?25h[?25l[62;101H8,1    [9;1H[?25h[?25l[62;101H9,17-31[10;31H[?25h[?25l[62;100H90[11;31H[?25h[?25l[62;101H1,10[12;31H[?25h[?25l[62;101H2[13;31H[?25h[?25l[62;101H3[14;31H[?25h[?25l[11;41H[46m{[15;17H}[m[62;101H4,4-18 [15;18H[?25h[?25l[11;41H{[15;17H}[62;101H5,3-17[16;17H[?25h[?25l[62;101H6[17;17H[?25h[?25l[62;101H7,14-28[18;28H[?25h[?25l[19;30H[46m{[22;17H}[m[62;101H8,17-31[19;31H[?25h[?25l{[22;17H}[62;101H9,10[20;31H[?25h[?25l[62;100H100,9-30[21;30H[?25h[?25l[19;30H[46m{[22;17H}[m[62;102H1,4-18[22;18H[?25h[?25l[19;30H{[22;17H}[23;21H[46m{[29;17H}[m[62;102H2,8-22[23;22H[?25h[?25l{[29;17H}[62;102H3,10-31[24;31H[?25h[?25l[25;31H[46m([34C)[m[62;102H4[25;31H[?25h[?25l([34C)[62;102H5,4-25 [26;25H[?25h[?25l[62;102H6,3-17[27;17H[?25h[?25l[62;102H7,10-31[28;31H[?25h[?25l[23;21H[46m{[29;17H}[m[62;102H8,4-18 [29;18H[?25h[?25l[23;21H{[29;17H}[62;102H9,3-17[30;17H[?25h[?25l[4;9H[46m{[31;9H}[m[62;101H10,3-10[31;10H[?25h[?25l[4;9H{[31;9H}[62;102H1,22-29[32;29H[?25h[?25l[62;102H2,14-21[33;21H[?25h[?25l[62;102H3,2    [34;2H[?25h[?25l[62;102H4,1[35;1H[?25h[62;1H[K[35;1H[?25l[62;100H114,0-1[7C84%[35;1H[?25h[?25l[62;100H[K[62;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?2004l"split.c" 155L, 3383C written[23;2t[23;1t[22;2t[22;1t[23;2t[23;1t
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ vi split.c ls[Kpsjobs[2Plsfgjobs[2Plskill %1[K[K[K[K[K[K[Kgcc split.c -o split.o -Wall
/usr/bin/ld: /usr/lib/gcc/x86_64-linux-gnu/8/../../../x86_64-linux-gnu/Scrt1.o: in function `_start':
(.text+0x20): undefined reference to `main'
/usr/bin/ld: /tmp/ccRaahzs.o: in function `emalloc':
split.c:(.text+0x35f): undefined reference to `fatal'
/usr/bin/ld: /tmp/ccRaahzs.o: in function `erealloc':
split.c:(.text+0x3ab): undefined reference to `fatal'
collect2: error: ld returned 1 exit status
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc -c split.c -o split.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc shs[K[K[K[K[K[K[K[26P(reverse-i-search)`':[Cg': gcc -c split.c -o split.o[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@c[C[C[C[1@c[C[C[C[1@ [C[C[Cs': gcc split.c -o split.o -Wall[14@m': gcc smsh.c split.o exec.o -o tes[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ gcc smsh.c split.o exec.o -o test.o -Wall
[01m[Ksmsh.c:[m[K In function â€˜[01m[Kmain[m[Kâ€™:
[01m[Ksmsh.c:21:6:[m[K [01;35m[Kwarning: [m[Kvariable â€˜[01m[Kresult[m[Kâ€™ set but not used [[01;35m[K-Wunused-but-set-variable[m[K]
  int [01;35m[Kresult[m[K;
      [01;35m[K^~~~~~[m[K
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ./testo[K.o
> echo hello; echo later
hello
later
> > ^C^Z
[1]+  Stopped                 ./test.o
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ps
  PID TTY          TIME CMD
 2479 pts/2    00:00:05 bash
12990 pts/2    00:00:00 test.o
12993 pts/2    00:00:00 ps
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ kill 12990
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ ls
exec.c  exec.o  pid.c  sm2in.c  smsh1.c  smsh.c  smsh.h  split.c  split.o  [0m[01;32mtest.o[0m
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ exit
exit
There are stopped jobs.
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ e[Kquit
bash: quit: command not found
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ exit
exit
There are stopped jobs.
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ fg
./test.o
Terminated
]0;s23-cs648-s02@vulcan: ~/public_html/week5/chap9s23-cs648-s02@vulcan:~/public_html/week5/chap9$ exit
exit

Script done on 2023-07-05 16:58:23-04:00 [COMMAND_EXIT_CODE="143"]
